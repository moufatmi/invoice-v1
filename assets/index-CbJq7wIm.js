(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();var hy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $m(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Pf={exports:{}},kc={},Lf={exports:{}},jr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mg;function fy(){if(mg)return jr;mg=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),_=Symbol.iterator;function N(ae){return ae===null||typeof ae!="object"?null:(ae=_&&ae[_]||ae["@@iterator"],typeof ae=="function"?ae:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,P={};function R(ae,O,$){this.props=ae,this.context=O,this.refs=P,this.updater=$||x}R.prototype.isReactComponent={},R.prototype.setState=function(ae,O){if(typeof ae!="object"&&typeof ae!="function"&&ae!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ae,O,"setState")},R.prototype.forceUpdate=function(ae){this.updater.enqueueForceUpdate(this,ae,"forceUpdate")};function L(){}L.prototype=R.prototype;function M(ae,O,$){this.props=ae,this.context=O,this.refs=P,this.updater=$||x}var H=M.prototype=new L;H.constructor=M,I(H,R.prototype),H.isPureReactComponent=!0;var oe=Array.isArray,le=Object.prototype.hasOwnProperty,be={current:null},ne={key:!0,ref:!0,__self:!0,__source:!0};function G(ae,O,$){var X,ie={},he=null,ye=null;if(O!=null)for(X in O.ref!==void 0&&(ye=O.ref),O.key!==void 0&&(he=""+O.key),O)le.call(O,X)&&!ne.hasOwnProperty(X)&&(ie[X]=O[X]);var Ie=arguments.length-2;if(Ie===1)ie.children=$;else if(1<Ie){for(var ge=Array(Ie),rt=0;rt<Ie;rt++)ge[rt]=arguments[rt+2];ie.children=ge}if(ae&&ae.defaultProps)for(X in Ie=ae.defaultProps,Ie)ie[X]===void 0&&(ie[X]=Ie[X]);return{$$typeof:t,type:ae,key:he,ref:ye,props:ie,_owner:be.current}}function fe(ae,O){return{$$typeof:t,type:ae.type,key:O,ref:ae.ref,props:ae.props,_owner:ae._owner}}function Te(ae){return typeof ae=="object"&&ae!==null&&ae.$$typeof===t}function V(ae){var O={"=":"=0",":":"=2"};return"$"+ae.replace(/[=:]/g,function($){return O[$]})}var Y=/\/+/g;function pe(ae,O){return typeof ae=="object"&&ae!==null&&ae.key!=null?V(""+ae.key):O.toString(36)}function te(ae,O,$,X,ie){var he=typeof ae;(he==="undefined"||he==="boolean")&&(ae=null);var ye=!1;if(ae===null)ye=!0;else switch(he){case"string":case"number":ye=!0;break;case"object":switch(ae.$$typeof){case t:case e:ye=!0}}if(ye)return ye=ae,ie=ie(ye),ae=X===""?"."+pe(ye,0):X,oe(ie)?($="",ae!=null&&($=ae.replace(Y,"$&/")+"/"),te(ie,O,$,"",function(rt){return rt})):ie!=null&&(Te(ie)&&(ie=fe(ie,$+(!ie.key||ye&&ye.key===ie.key?"":(""+ie.key).replace(Y,"$&/")+"/")+ae)),O.push(ie)),1;if(ye=0,X=X===""?".":X+":",oe(ae))for(var Ie=0;Ie<ae.length;Ie++){he=ae[Ie];var ge=X+pe(he,Ie);ye+=te(he,O,$,ge,ie)}else if(ge=N(ae),typeof ge=="function")for(ae=ge.call(ae),Ie=0;!(he=ae.next()).done;)he=he.value,ge=X+pe(he,Ie++),ye+=te(he,O,$,ge,ie);else if(he==="object")throw O=String(ae),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(ae).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return ye}function Ue(ae,O,$){if(ae==null)return ae;var X=[],ie=0;return te(ae,X,"","",function(he){return O.call($,he,ie++)}),X}function Me(ae){if(ae._status===-1){var O=ae._result;O=O(),O.then(function($){(ae._status===0||ae._status===-1)&&(ae._status=1,ae._result=$)},function($){(ae._status===0||ae._status===-1)&&(ae._status=2,ae._result=$)}),ae._status===-1&&(ae._status=0,ae._result=O)}if(ae._status===1)return ae._result.default;throw ae._result}var ze={current:null},de={transition:null},je={ReactCurrentDispatcher:ze,ReactCurrentBatchConfig:de,ReactCurrentOwner:be};function _e(){throw Error("act(...) is not supported in production builds of React.")}return jr.Children={map:Ue,forEach:function(ae,O,$){Ue(ae,function(){O.apply(this,arguments)},$)},count:function(ae){var O=0;return Ue(ae,function(){O++}),O},toArray:function(ae){return Ue(ae,function(O){return O})||[]},only:function(ae){if(!Te(ae))throw Error("React.Children.only expected to receive a single React element child.");return ae}},jr.Component=R,jr.Fragment=r,jr.Profiler=o,jr.PureComponent=M,jr.StrictMode=i,jr.Suspense=h,jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=je,jr.act=_e,jr.cloneElement=function(ae,O,$){if(ae==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ae+".");var X=I({},ae.props),ie=ae.key,he=ae.ref,ye=ae._owner;if(O!=null){if(O.ref!==void 0&&(he=O.ref,ye=be.current),O.key!==void 0&&(ie=""+O.key),ae.type&&ae.type.defaultProps)var Ie=ae.type.defaultProps;for(ge in O)le.call(O,ge)&&!ne.hasOwnProperty(ge)&&(X[ge]=O[ge]===void 0&&Ie!==void 0?Ie[ge]:O[ge])}var ge=arguments.length-2;if(ge===1)X.children=$;else if(1<ge){Ie=Array(ge);for(var rt=0;rt<ge;rt++)Ie[rt]=arguments[rt+2];X.children=Ie}return{$$typeof:t,type:ae.type,key:ie,ref:he,props:X,_owner:ye}},jr.createContext=function(ae){return ae={$$typeof:l,_currentValue:ae,_currentValue2:ae,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ae.Provider={$$typeof:s,_context:ae},ae.Consumer=ae},jr.createElement=G,jr.createFactory=function(ae){var O=G.bind(null,ae);return O.type=ae,O},jr.createRef=function(){return{current:null}},jr.forwardRef=function(ae){return{$$typeof:c,render:ae}},jr.isValidElement=Te,jr.lazy=function(ae){return{$$typeof:w,_payload:{_status:-1,_result:ae},_init:Me}},jr.memo=function(ae,O){return{$$typeof:g,type:ae,compare:O===void 0?null:O}},jr.startTransition=function(ae){var O=de.transition;de.transition={};try{ae()}finally{de.transition=O}},jr.unstable_act=_e,jr.useCallback=function(ae,O){return ze.current.useCallback(ae,O)},jr.useContext=function(ae){return ze.current.useContext(ae)},jr.useDebugValue=function(){},jr.useDeferredValue=function(ae){return ze.current.useDeferredValue(ae)},jr.useEffect=function(ae,O){return ze.current.useEffect(ae,O)},jr.useId=function(){return ze.current.useId()},jr.useImperativeHandle=function(ae,O,$){return ze.current.useImperativeHandle(ae,O,$)},jr.useInsertionEffect=function(ae,O){return ze.current.useInsertionEffect(ae,O)},jr.useLayoutEffect=function(ae,O){return ze.current.useLayoutEffect(ae,O)},jr.useMemo=function(ae,O){return ze.current.useMemo(ae,O)},jr.useReducer=function(ae,O,$){return ze.current.useReducer(ae,O,$)},jr.useRef=function(ae){return ze.current.useRef(ae)},jr.useState=function(ae){return ze.current.useState(ae)},jr.useSyncExternalStore=function(ae,O,$){return ze.current.useSyncExternalStore(ae,O,$)},jr.useTransition=function(){return ze.current.useTransition()},jr.version="18.3.1",jr}var vg;function qp(){return vg||(vg=1,Lf.exports=fy()),Lf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yg;function py(){if(yg)return kc;yg=1;var t=qp(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function l(c,h,g){var w,_={},N=null,x=null;g!==void 0&&(N=""+g),h.key!==void 0&&(N=""+h.key),h.ref!==void 0&&(x=h.ref);for(w in h)i.call(h,w)&&!s.hasOwnProperty(w)&&(_[w]=h[w]);if(c&&c.defaultProps)for(w in h=c.defaultProps,h)_[w]===void 0&&(_[w]=h[w]);return{$$typeof:e,type:c,key:N,ref:x,props:_,_owner:o.current}}return kc.Fragment=r,kc.jsx=l,kc.jsxs=l,kc}var wg;function gy(){return wg||(wg=1,Pf.exports=py()),Pf.exports}var y=gy(),J=qp();const In=$m(J);var qd={},If={exports:{}},Va={},Of={exports:{}},Tf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bg;function my(){return bg||(bg=1,function(t){function e(de,je){var _e=de.length;de.push(je);e:for(;0<_e;){var ae=_e-1>>>1,O=de[ae];if(0<o(O,je))de[ae]=je,de[_e]=O,_e=ae;else break e}}function r(de){return de.length===0?null:de[0]}function i(de){if(de.length===0)return null;var je=de[0],_e=de.pop();if(_e!==je){de[0]=_e;e:for(var ae=0,O=de.length,$=O>>>1;ae<$;){var X=2*(ae+1)-1,ie=de[X],he=X+1,ye=de[he];if(0>o(ie,_e))he<O&&0>o(ye,ie)?(de[ae]=ye,de[he]=_e,ae=he):(de[ae]=ie,de[X]=_e,ae=X);else if(he<O&&0>o(ye,_e))de[ae]=ye,de[he]=_e,ae=he;else break e}}return je}function o(de,je){var _e=de.sortIndex-je.sortIndex;return _e!==0?_e:de.id-je.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var h=[],g=[],w=1,_=null,N=3,x=!1,I=!1,P=!1,R=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(de){for(var je=r(g);je!==null;){if(je.callback===null)i(g);else if(je.startTime<=de)i(g),je.sortIndex=je.expirationTime,e(h,je);else break;je=r(g)}}function oe(de){if(P=!1,H(de),!I)if(r(h)!==null)I=!0,Me(le);else{var je=r(g);je!==null&&ze(oe,je.startTime-de)}}function le(de,je){I=!1,P&&(P=!1,L(G),G=-1),x=!0;var _e=N;try{for(H(je),_=r(h);_!==null&&(!(_.expirationTime>je)||de&&!V());){var ae=_.callback;if(typeof ae=="function"){_.callback=null,N=_.priorityLevel;var O=ae(_.expirationTime<=je);je=t.unstable_now(),typeof O=="function"?_.callback=O:_===r(h)&&i(h),H(je)}else i(h);_=r(h)}if(_!==null)var $=!0;else{var X=r(g);X!==null&&ze(oe,X.startTime-je),$=!1}return $}finally{_=null,N=_e,x=!1}}var be=!1,ne=null,G=-1,fe=5,Te=-1;function V(){return!(t.unstable_now()-Te<fe)}function Y(){if(ne!==null){var de=t.unstable_now();Te=de;var je=!0;try{je=ne(!0,de)}finally{je?pe():(be=!1,ne=null)}}else be=!1}var pe;if(typeof M=="function")pe=function(){M(Y)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,Ue=te.port2;te.port1.onmessage=Y,pe=function(){Ue.postMessage(null)}}else pe=function(){R(Y,0)};function Me(de){ne=de,be||(be=!0,pe())}function ze(de,je){G=R(function(){de(t.unstable_now())},je)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(de){de.callback=null},t.unstable_continueExecution=function(){I||x||(I=!0,Me(le))},t.unstable_forceFrameRate=function(de){0>de||125<de?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<de?Math.floor(1e3/de):5},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return r(h)},t.unstable_next=function(de){switch(N){case 1:case 2:case 3:var je=3;break;default:je=N}var _e=N;N=je;try{return de()}finally{N=_e}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(de,je){switch(de){case 1:case 2:case 3:case 4:case 5:break;default:de=3}var _e=N;N=de;try{return je()}finally{N=_e}},t.unstable_scheduleCallback=function(de,je,_e){var ae=t.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?ae+_e:ae):_e=ae,de){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=_e+O,de={id:w++,callback:je,priorityLevel:de,startTime:_e,expirationTime:O,sortIndex:-1},_e>ae?(de.sortIndex=_e,e(g,de),r(h)===null&&de===r(g)&&(P?(L(G),G=-1):P=!0,ze(oe,_e-ae))):(de.sortIndex=O,e(h,de),I||x||(I=!0,Me(le))),de},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(de){var je=N;return function(){var _e=N;N=je;try{return de.apply(this,arguments)}finally{N=_e}}}}(Tf)),Tf}var xg;function vy(){return xg||(xg=1,Of.exports=my()),Of.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _g;function yy(){if(_g)return Va;_g=1;var t=qp(),e=vy();function r(n){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+n,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function s(n,a){l(n,a),l(n+"Capture",a)}function l(n,a){for(o[n]=a,n=0;n<a.length;n++)i.add(a[n])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},_={};function N(n){return h.call(_,n)?!0:h.call(w,n)?!1:g.test(n)?_[n]=!0:(w[n]=!0,!1)}function x(n,a,u,p){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function I(n,a,u,p){if(a===null||typeof a>"u"||x(n,a,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function P(n,a,u,p,k,j,q){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=p,this.attributeNamespace=k,this.mustUseProperty=u,this.propertyName=n,this.type=a,this.sanitizeURL=j,this.removeEmptyString=q}var R={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){R[n]=new P(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var a=n[0];R[a]=new P(a,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){R[n]=new P(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){R[n]=new P(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){R[n]=new P(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){R[n]=new P(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){R[n]=new P(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){R[n]=new P(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){R[n]=new P(n,5,!1,n.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function M(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var a=n.replace(L,M);R[a]=new P(a,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var a=n.replace(L,M);R[a]=new P(a,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var a=n.replace(L,M);R[a]=new P(a,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){R[n]=new P(n,1,!1,n.toLowerCase(),null,!1,!1)}),R.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){R[n]=new P(n,1,!1,n.toLowerCase(),null,!0,!0)});function H(n,a,u,p){var k=R.hasOwnProperty(a)?R[a]:null;(k!==null?k.type!==0:p||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(I(a,u,k,p)&&(u=null),p||k===null?N(a)&&(u===null?n.removeAttribute(a):n.setAttribute(a,""+u)):k.mustUseProperty?n[k.propertyName]=u===null?k.type===3?!1:"":u:(a=k.attributeName,p=k.attributeNamespace,u===null?n.removeAttribute(a):(k=k.type,u=k===3||k===4&&u===!0?"":""+u,p?n.setAttributeNS(p,a,u):n.setAttribute(a,u))))}var oe=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,le=Symbol.for("react.element"),be=Symbol.for("react.portal"),ne=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),fe=Symbol.for("react.profiler"),Te=Symbol.for("react.provider"),V=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),pe=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),Ue=Symbol.for("react.memo"),Me=Symbol.for("react.lazy"),ze=Symbol.for("react.offscreen"),de=Symbol.iterator;function je(n){return n===null||typeof n!="object"?null:(n=de&&n[de]||n["@@iterator"],typeof n=="function"?n:null)}var _e=Object.assign,ae;function O(n){if(ae===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);ae=a&&a[1]||""}return`
`+ae+n}var $=!1;function X(n,a){if(!n||$)return"";$=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(Ge){var p=Ge}Reflect.construct(n,[],a)}else{try{a.call()}catch(Ge){p=Ge}n.call(a.prototype)}else{try{throw Error()}catch(Ge){p=Ge}n()}}catch(Ge){if(Ge&&p&&typeof Ge.stack=="string"){for(var k=Ge.stack.split(`
`),j=p.stack.split(`
`),q=k.length-1,ce=j.length-1;1<=q&&0<=ce&&k[q]!==j[ce];)ce--;for(;1<=q&&0<=ce;q--,ce--)if(k[q]!==j[ce]){if(q!==1||ce!==1)do if(q--,ce--,0>ce||k[q]!==j[ce]){var ke=`
`+k[q].replace(" at new "," at ");return n.displayName&&ke.includes("<anonymous>")&&(ke=ke.replace("<anonymous>",n.displayName)),ke}while(1<=q&&0<=ce);break}}}finally{$=!1,Error.prepareStackTrace=u}return(n=n?n.displayName||n.name:"")?O(n):""}function ie(n){switch(n.tag){case 5:return O(n.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return n=X(n.type,!1),n;case 11:return n=X(n.type.render,!1),n;case 1:return n=X(n.type,!0),n;default:return""}}function he(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case ne:return"Fragment";case be:return"Portal";case fe:return"Profiler";case G:return"StrictMode";case pe:return"Suspense";case te:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case V:return(n.displayName||"Context")+".Consumer";case Te:return(n._context.displayName||"Context")+".Provider";case Y:var a=n.render;return n=n.displayName,n||(n=a.displayName||a.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ue:return a=n.displayName||null,a!==null?a:he(n.type)||"Memo";case Me:a=n._payload,n=n._init;try{return he(n(a))}catch{}}return null}function ye(n){var a=n.type;switch(n.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=a.render,n=n.displayName||n.name||"",a.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return he(a);case 8:return a===G?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Ie(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ge(n){var a=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function rt(n){var a=ge(n)?"checked":"value",u=Object.getOwnPropertyDescriptor(n.constructor.prototype,a),p=""+n[a];if(!n.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var k=u.get,j=u.set;return Object.defineProperty(n,a,{configurable:!0,get:function(){return k.call(this)},set:function(q){p=""+q,j.call(this,q)}}),Object.defineProperty(n,a,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(q){p=""+q},stopTracking:function(){n._valueTracker=null,delete n[a]}}}}function at(n){n._valueTracker||(n._valueTracker=rt(n))}function it(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var u=a.getValue(),p="";return n&&(p=ge(n)?n.checked?"true":"false":n.value),n=p,n!==u?(a.setValue(n),!0):!1}function bt(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function qt(n,a){var u=a.checked;return _e({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??n._wrapperState.initialChecked})}function Je(n,a){var u=a.defaultValue==null?"":a.defaultValue,p=a.checked!=null?a.checked:a.defaultChecked;u=Ie(a.value!=null?a.value:u),n._wrapperState={initialChecked:p,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function se(n,a){a=a.checked,a!=null&&H(n,"checked",a,!1)}function Xt(n,a){se(n,a);var u=Ie(a.value),p=a.type;if(u!=null)p==="number"?(u===0&&n.value===""||n.value!=u)&&(n.value=""+u):n.value!==""+u&&(n.value=""+u);else if(p==="submit"||p==="reset"){n.removeAttribute("value");return}a.hasOwnProperty("value")?ot(n,a.type,u):a.hasOwnProperty("defaultValue")&&ot(n,a.type,Ie(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(n.defaultChecked=!!a.defaultChecked)}function Tt(n,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var p=a.type;if(!(p!=="submit"&&p!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+n._wrapperState.initialValue,u||a===n.value||(n.value=a),n.defaultValue=a}u=n.name,u!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,u!==""&&(n.name=u)}function ot(n,a,u){(a!=="number"||bt(n.ownerDocument)!==n)&&(u==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+u&&(n.defaultValue=""+u))}var pt=Array.isArray;function vt(n,a,u,p){if(n=n.options,a){a={};for(var k=0;k<u.length;k++)a["$"+u[k]]=!0;for(u=0;u<n.length;u++)k=a.hasOwnProperty("$"+n[u].value),n[u].selected!==k&&(n[u].selected=k),k&&p&&(n[u].defaultSelected=!0)}else{for(u=""+Ie(u),a=null,k=0;k<n.length;k++){if(n[k].value===u){n[k].selected=!0,p&&(n[k].defaultSelected=!0);return}a!==null||n[k].disabled||(a=n[k])}a!==null&&(a.selected=!0)}}function St(n,a){if(a.dangerouslySetInnerHTML!=null)throw Error(r(91));return _e({},a,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Rt(n,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(r(92));if(pt(u)){if(1<u.length)throw Error(r(93));u=u[0]}a=u}a==null&&(a=""),u=a}n._wrapperState={initialValue:Ie(u)}}function Yt(n,a){var u=Ie(a.value),p=Ie(a.defaultValue);u!=null&&(u=""+u,u!==n.value&&(n.value=u),a.defaultValue==null&&n.defaultValue!==u&&(n.defaultValue=u)),p!=null&&(n.defaultValue=""+p)}function Qt(n){var a=n.textContent;a===n._wrapperState.initialValue&&a!==""&&a!==null&&(n.value=a)}function nr(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zt(n,a){return n==null||n==="http://www.w3.org/1999/xhtml"?nr(a):n==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var yr,zt=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,p,k){MSApp.execUnsafeLocalFunction(function(){return n(a,u,p,k)})}:n}(function(n,a){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=a;else{for(yr=yr||document.createElement("div"),yr.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=yr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;a.firstChild;)n.appendChild(a.firstChild)}});function ar(n,a){if(a){var u=n.firstChild;if(u&&u===n.lastChild&&u.nodeType===3){u.nodeValue=a;return}}n.textContent=a}var wt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xr=["Webkit","ms","Moz","O"];Object.keys(wt).forEach(function(n){Xr.forEach(function(a){a=a+n.charAt(0).toUpperCase()+n.substring(1),wt[a]=wt[n]})});function kr(n,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||wt.hasOwnProperty(n)&&wt[n]?(""+a).trim():a+"px"}function Zn(n,a){n=n.style;for(var u in a)if(a.hasOwnProperty(u)){var p=u.indexOf("--")===0,k=kr(u,a[u],p);u==="float"&&(u="cssFloat"),p?n.setProperty(u,k):n[u]=k}}var Sr=_e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xt(n,a){if(a){if(Sr[n]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(r(137,n));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(r(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(r(61))}if(a.style!=null&&typeof a.style!="object")throw Error(r(62))}}function On(n,a){if(n.indexOf("-")===-1)return typeof a.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mr=null;function gi(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var dt=null,Nn=null,Er=null;function br(n){if(n=fl(n)){if(typeof dt!="function")throw Error(r(280));var a=n.stateNode;a&&(a=Wl(a),dt(n.stateNode,n.type,a))}}function Ft(n){Nn?Er?Er.push(n):Er=[n]:Nn=n}function pr(){if(Nn){var n=Nn,a=Er;if(Er=Nn=null,br(n),a)for(n=0;n<a.length;n++)br(a[n])}}function wn(n,a){return n(a)}function Cr(){}var qr=!1;function an(n,a,u){if(qr)return n(a,u);qr=!0;try{return wn(n,a,u)}finally{qr=!1,(Nn!==null||Er!==null)&&(Cr(),pr())}}function Ct(n,a){var u=n.stateNode;if(u===null)return null;var p=Wl(u);if(p===null)return null;u=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(n=n.type,p=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!p;break e;default:n=!1}if(n)return null;if(u&&typeof u!="function")throw Error(r(231,a,typeof u));return u}var Qr=!1;if(c)try{var er={};Object.defineProperty(er,"passive",{get:function(){Qr=!0}}),window.addEventListener("test",er,er),window.removeEventListener("test",er,er)}catch{Qr=!1}function vr(n,a,u,p,k,j,q,ce,ke){var Ge=Array.prototype.slice.call(arguments,3);try{a.apply(u,Ge)}catch(ft){this.onError(ft)}}var Mr=!1,Pr=null,Ur=!1,qn=null,Pi={onError:function(n){Mr=!0,Pr=n}};function Tn(n,a,u,p,k,j,q,ce,ke){Mr=!1,Pr=null,vr.apply(Pi,arguments)}function ei(n,a,u,p,k,j,q,ce,ke){if(Tn.apply(this,arguments),Mr){if(Mr){var Ge=Pr;Mr=!1,Pr=null}else throw Error(r(198));Ur||(Ur=!0,qn=Ge)}}function tn(n){var a=n,u=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do a=n,(a.flags&4098)!==0&&(u=a.return),n=a.return;while(n)}return a.tag===3?u:null}function mi(n){if(n.tag===13){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function Li(n){if(tn(n)!==n)throw Error(r(188))}function Un(n){var a=n.alternate;if(!a){if(a=tn(n),a===null)throw Error(r(188));return a!==n?null:n}for(var u=n,p=a;;){var k=u.return;if(k===null)break;var j=k.alternate;if(j===null){if(p=k.return,p!==null){u=p;continue}break}if(k.child===j.child){for(j=k.child;j;){if(j===u)return Li(k),n;if(j===p)return Li(k),a;j=j.sibling}throw Error(r(188))}if(u.return!==p.return)u=k,p=j;else{for(var q=!1,ce=k.child;ce;){if(ce===u){q=!0,u=k,p=j;break}if(ce===p){q=!0,p=k,u=j;break}ce=ce.sibling}if(!q){for(ce=j.child;ce;){if(ce===u){q=!0,u=j,p=k;break}if(ce===p){q=!0,p=j,u=k;break}ce=ce.sibling}if(!q)throw Error(r(189))}}if(u.alternate!==p)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?n:a}function Ha(n){return n=Un(n),n!==null?Ii(n):null}function Ii(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var a=Ii(n);if(a!==null)return a;n=n.sibling}return null}var hs=e.unstable_scheduleCallback,Ka=e.unstable_cancelCallback,Gr=e.unstable_shouldYield,ja=e.unstable_requestPaint,Or=e.unstable_now,ol=e.unstable_getCurrentPriorityLevel,Oi=e.unstable_ImmediatePriority,fs=e.unstable_UserBlockingPriority,ps=e.unstable_NormalPriority,Ts=e.unstable_LowPriority,Ea=e.unstable_IdlePriority,gs=null,si=null;function Rs(n){if(si&&typeof si.onCommitFiberRoot=="function")try{si.onCommitFiberRoot(gs,n,void 0,(n.current.flags&128)===128)}catch{}}var ir=Math.clz32?Math.clz32:Do,hn=Math.log,Ro=Math.LN2;function Do(n){return n>>>=0,n===0?32:31-(hn(n)/Ro|0)|0}var Tr=64,zi=4194304;function ua(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function En(n,a){var u=n.pendingLanes;if(u===0)return 0;var p=0,k=n.suspendedLanes,j=n.pingedLanes,q=u&268435455;if(q!==0){var ce=q&~k;ce!==0?p=ua(ce):(j&=q,j!==0&&(p=ua(j)))}else q=u&~k,q!==0?p=ua(q):j!==0&&(p=ua(j));if(p===0)return 0;if(a!==0&&a!==p&&(a&k)===0&&(k=p&-p,j=a&-a,k>=j||k===16&&(j&4194240)!==0))return a;if((p&4)!==0&&(p|=u&16),a=n.entangledLanes,a!==0)for(n=n.entanglements,a&=p;0<a;)u=31-ir(a),k=1<<u,p|=n[u],a&=~k;return p}function ms(n,a){switch(n){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ti(n,a){for(var u=n.suspendedLanes,p=n.pingedLanes,k=n.expirationTimes,j=n.pendingLanes;0<j;){var q=31-ir(j),ce=1<<q,ke=k[q];ke===-1?((ce&u)===0||(ce&p)!==0)&&(k[q]=ms(ce,a)):ke<=a&&(n.expiredLanes|=ce),j&=~ce}}function Ca(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function po(){var n=Tr;return Tr<<=1,(Tr&4194240)===0&&(Tr=64),n}function vs(n){for(var a=[],u=0;31>u;u++)a.push(n);return a}function Ga(n,a,u){n.pendingLanes|=a,a!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,a=31-ir(a),n[a]=u}function Ds(n,a){var u=n.pendingLanes&~a;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=a,n.mutableReadLanes&=a,n.entangledLanes&=a,a=n.entanglements;var p=n.eventTimes;for(n=n.expirationTimes;0<u;){var k=31-ir(u),j=1<<k;a[k]=0,p[k]=-1,n[k]=-1,u&=~j}}function Fs(n,a){var u=n.entangledLanes|=a;for(n=n.entanglements;u;){var p=31-ir(u),k=1<<p;k&a|n[p]&a&&(n[p]|=a),u&=~k}}var Rr=0;function Nr(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var go,Fo,ll,fn,$i,ca=!1,vi=[],rn=null,da=null,zr=null,$t=new Map,ha=new Map,yi=[],Vi="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wi(n,a){switch(n){case"focusin":case"focusout":rn=null;break;case"dragenter":case"dragleave":da=null;break;case"mouseover":case"mouseout":zr=null;break;case"pointerover":case"pointerout":$t.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":ha.delete(a.pointerId)}}function ys(n,a,u,p,k,j){return n===null||n.nativeEvent!==j?(n={blockedOn:a,domEventName:u,eventSystemFlags:p,nativeEvent:j,targetContainers:[k]},a!==null&&(a=fl(a),a!==null&&Fo(a)),n):(n.eventSystemFlags|=p,a=n.targetContainers,k!==null&&a.indexOf(k)===-1&&a.push(k),n)}function oi(n,a,u,p,k){switch(a){case"focusin":return rn=ys(rn,n,a,u,p,k),!0;case"dragenter":return da=ys(da,n,a,u,p,k),!0;case"mouseover":return zr=ys(zr,n,a,u,p,k),!0;case"pointerover":var j=k.pointerId;return $t.set(j,ys($t.get(j)||null,n,a,u,p,k)),!0;case"gotpointercapture":return j=k.pointerId,ha.set(j,ys(ha.get(j)||null,n,a,u,p,k)),!0}return!1}function ws(n){var a=So(n.target);if(a!==null){var u=tn(a);if(u!==null){if(a=u.tag,a===13){if(a=mi(u),a!==null){n.blockedOn=a,$i(n.priority,function(){ll(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){n.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ms(n){if(n.blockedOn!==null)return!1;for(var a=n.targetContainers;0<a.length;){var u=bs(n.domEventName,n.eventSystemFlags,a[0],n.nativeEvent);if(u===null){u=n.nativeEvent;var p=new u.constructor(u.type,u);mr=p,u.target.dispatchEvent(p),mr=null}else return a=fl(u),a!==null&&Fo(a),n.blockedOn=u,!1;a.shift()}return!0}function mo(n,a,u){Ms(n)&&u.delete(a)}function Bs(){ca=!1,rn!==null&&Ms(rn)&&(rn=null),da!==null&&Ms(da)&&(da=null),zr!==null&&Ms(zr)&&(zr=null),$t.forEach(mo),ha.forEach(mo)}function fa(n,a){n.blockedOn===a&&(n.blockedOn=null,ca||(ca=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Bs)))}function Hi(n){function a(k){return fa(k,n)}if(0<vi.length){fa(vi[0],n);for(var u=1;u<vi.length;u++){var p=vi[u];p.blockedOn===n&&(p.blockedOn=null)}}for(rn!==null&&fa(rn,n),da!==null&&fa(da,n),zr!==null&&fa(zr,n),$t.forEach(a),ha.forEach(a),u=0;u<yi.length;u++)p=yi[u],p.blockedOn===n&&(p.blockedOn=null);for(;0<yi.length&&(u=yi[0],u.blockedOn===null);)ws(u),u.blockedOn===null&&yi.shift()}var Ti=oe.ReactCurrentBatchConfig,Pa=!0;function qs(n,a,u,p){var k=Rr,j=Ti.transition;Ti.transition=null;try{Rr=1,pa(n,a,u,p)}finally{Rr=k,Ti.transition=j}}function Mo(n,a,u,p){var k=Rr,j=Ti.transition;Ti.transition=null;try{Rr=4,pa(n,a,u,p)}finally{Rr=k,Ti.transition=j}}function pa(n,a,u,p){if(Pa){var k=bs(n,a,u,p);if(k===null)zl(n,a,p,La,u),Wi(n,p);else if(oi(k,n,a,u,p))p.stopPropagation();else if(Wi(n,p),a&4&&-1<Vi.indexOf(n)){for(;k!==null;){var j=fl(k);if(j!==null&&go(j),j=bs(n,a,u,p),j===null&&zl(n,a,p,La,u),j===k)break;k=j}k!==null&&p.stopPropagation()}else zl(n,a,p,null,u)}}var La=null;function bs(n,a,u,p){if(La=null,n=gi(p),n=So(n),n!==null)if(a=tn(n),a===null)n=null;else if(u=a.tag,u===13){if(n=mi(a),n!==null)return n;n=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null);return La=n,null}function Bo(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ol()){case Oi:return 1;case fs:return 4;case ps:case Ts:return 16;case Ea:return 536870912;default:return 16}default:return 16}}var ga=null,Ki=null,wi=null;function vo(){if(wi)return wi;var n,a=Ki,u=a.length,p,k="value"in ga?ga.value:ga.textContent,j=k.length;for(n=0;n<u&&a[n]===k[n];n++);var q=u-n;for(p=1;p<=q&&a[u-p]===k[j-p];p++);return wi=k.slice(n,1<p?1-p:void 0)}function Gi(n){var a=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&a===13&&(n=13)):n=a,n===10&&(n=13),32<=n||n===13?n:0}function zn(){return!0}function Ja(){return!1}function pn(n){function a(u,p,k,j,q){this._reactName=u,this._targetInst=k,this.type=p,this.nativeEvent=j,this.target=q,this.currentTarget=null;for(var ce in n)n.hasOwnProperty(ce)&&(u=n[ce],this[ce]=u?u(j):j[ce]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?zn:Ja,this.isPropagationStopped=Ja,this}return _e(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=zn)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=zn)},persist:function(){},isPersistent:zn}),a}var Ya={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xs=pn(Ya),Ia=_e({},Ya,{view:0,detail:0}),Us=pn(Ia),Xa,_s,Ji,sn=_e({},Ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Et,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ji&&(Ji&&n.type==="mousemove"?(Xa=n.screenX-Ji.screenX,_s=n.screenY-Ji.screenY):_s=Xa=0,Ji=n),Xa)},movementY:function(n){return"movementY"in n?n.movementY:_s}}),Oa=pn(sn),ks=_e({},sn,{dataTransfer:0}),ul=pn(ks),Qa=_e({},Ia,{relatedTarget:0}),Ta=pn(Qa),yo=_e({},Ya,{animationName:0,elapsedTime:0,pseudoElement:0}),ma=pn(yo),zs=_e({},Ya,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),b=pn(zs),F=_e({},Ya,{data:0}),ee=pn(F),me={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function st(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):(n=Qe[n])?!!a[n]:!1}function Et(){return st}var Vt=_e({},Ia,{key:function(n){if(n.key){var a=me[n.key]||n.key;if(a!=="Unidentified")return a}return n.type==="keypress"?(n=Gi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Fe[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Et,charCode:function(n){return n.type==="keypress"?Gi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Gi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),hr=pn(Vt),sr=_e({},sn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ar=pn(sr),on=_e({},Ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Et}),ln=pn(on),An=_e({},Ya,{propertyName:0,elapsedTime:0,pseudoElement:0}),$n=pn(An),Cn=_e({},sn,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),va=pn(Cn),bi=[9,13,27,32],xi=c&&"CompositionEvent"in window,Za=null;c&&"documentMode"in document&&(Za=document.documentMode);var wo=c&&"TextEvent"in window&&!Za,bo=c&&(!xi||Za&&8<Za&&11>=Za),$s=" ",xo=!1;function es(n,a){switch(n){case"keyup":return bi.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function li(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var gr=!1;function ts(n,a){switch(n){case"compositionend":return li(a);case"keypress":return a.which!==32?null:(xo=!0,$s);case"textInput":return n=a.data,n===$s&&xo?null:n;default:return null}}function Vn(n,a){if(gr)return n==="compositionend"||!xi&&es(n,a)?(n=vo(),wi=Ki=ga=null,gr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return bo&&a.locale!=="ko"?null:a.data;default:return null}}var _o={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ss(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a==="input"?!!_o[n.type]:a==="textarea"}function ri(n,a,u,p){Ft(p),a=pu(a,"onChange"),0<a.length&&(u=new xs("onChange","change",null,u,p),n.push({event:u,listeners:a}))}var Ri=null,ya=null;function rs(n){ql(n,0)}function gn(n){var a=$o(n);if(it(a))return n}function Vs(n,a){if(n==="change")return a}var f=!1;if(c){var v;if(c){var A="oninput"in document;if(!A){var C=document.createElement("div");C.setAttribute("oninput","return;"),A=typeof C.oninput=="function"}v=A}else v=!1;f=v&&(!document.documentMode||9<document.documentMode)}function T(){Ri&&(Ri.detachEvent("onpropertychange",U),ya=Ri=null)}function U(n){if(n.propertyName==="value"&&gn(ya)){var a=[];ri(a,ya,n,gi(n)),an(rs,a)}}function Z(n,a,u){n==="focusin"?(T(),Ri=a,ya=u,Ri.attachEvent("onpropertychange",U)):n==="focusout"&&T()}function ue(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return gn(ya)}function xe(n,a){if(n==="click")return gn(a)}function Ae(n,a){if(n==="input"||n==="change")return gn(a)}function Le(n,a){return n===a&&(n!==0||1/n===1/a)||n!==n&&a!==a}var re=typeof Object.is=="function"?Object.is:Le;function Re(n,a){if(re(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;var u=Object.keys(n),p=Object.keys(a);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var k=u[p];if(!h.call(a,k)||!re(n[k],a[k]))return!1}return!0}function ve(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ee(n,a){var u=ve(n);n=0;for(var p;u;){if(u.nodeType===3){if(p=n+u.textContent.length,n<=a&&p>=a)return{node:u,offset:a-n};n=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=ve(u)}}function De(n,a){return n&&a?n===a?!0:n&&n.nodeType===3?!1:a&&a.nodeType===3?De(n,a.parentNode):"contains"in n?n.contains(a):n.compareDocumentPosition?!!(n.compareDocumentPosition(a)&16):!1:!1}function Ce(){for(var n=window,a=bt();a instanceof n.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)n=a.contentWindow;else break;a=bt(n.document)}return a}function Ve(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&(a==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||a==="textarea"||n.contentEditable==="true")}function He(n){var a=Ce(),u=n.focusedElem,p=n.selectionRange;if(a!==u&&u&&u.ownerDocument&&De(u.ownerDocument.documentElement,u)){if(p!==null&&Ve(u)){if(a=p.start,n=p.end,n===void 0&&(n=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(n,u.value.length);else if(n=(a=u.ownerDocument||document)&&a.defaultView||window,n.getSelection){n=n.getSelection();var k=u.textContent.length,j=Math.min(p.start,k);p=p.end===void 0?j:Math.min(p.end,k),!n.extend&&j>p&&(k=p,p=j,j=k),k=Ee(u,j);var q=Ee(u,p);k&&q&&(n.rangeCount!==1||n.anchorNode!==k.node||n.anchorOffset!==k.offset||n.focusNode!==q.node||n.focusOffset!==q.offset)&&(a=a.createRange(),a.setStart(k.node,k.offset),n.removeAllRanges(),j>p?(n.addRange(a),n.extend(q.node,q.offset)):(a.setEnd(q.node,q.offset),n.addRange(a)))}}for(a=[],n=u;n=n.parentNode;)n.nodeType===1&&a.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)n=a[u],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Ke=c&&"documentMode"in document&&11>=document.documentMode,Xe=null,lt=null,yt=null,ut=!1;function gt(n,a,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;ut||Xe==null||Xe!==bt(p)||(p=Xe,"selectionStart"in p&&Ve(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),yt&&Re(yt,p)||(yt=p,p=pu(lt,"onSelect"),0<p.length&&(a=new xs("onSelect","select",null,a,u),n.push({event:a,listeners:p}),a.target=Xe)))}function kt(n,a){var u={};return u[n.toLowerCase()]=a.toLowerCase(),u["Webkit"+n]="webkit"+a,u["Moz"+n]="moz"+a,u}var ht={animationend:kt("Animation","AnimationEnd"),animationiteration:kt("Animation","AnimationIteration"),animationstart:kt("Animation","AnimationStart"),transitionend:kt("Transition","TransitionEnd")},Nt={},Lt={};c&&(Lt=document.createElement("div").style,"AnimationEvent"in window||(delete ht.animationend.animation,delete ht.animationiteration.animation,delete ht.animationstart.animation),"TransitionEvent"in window||delete ht.transitionend.transition);function It(n){if(Nt[n])return Nt[n];if(!ht[n])return n;var a=ht[n],u;for(u in a)if(a.hasOwnProperty(u)&&u in Lt)return Nt[n]=a[u];return n}var Ut=It("animationend"),Lr=It("animationiteration"),Gt=It("animationstart"),bn=It("transitionend"),mn=new Map,Ns="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nn(n,a){mn.set(n,a),s(a,[n])}for(var Yi=0;Yi<Ns.length;Yi++){var Wn=Ns[Yi],Ra=Wn.toLowerCase(),hu=Wn[0].toUpperCase()+Wn.slice(1);nn(Ra,"on"+hu)}nn(Ut,"onAnimationEnd"),nn(Lr,"onAnimationIteration"),nn(Gt,"onAnimationStart"),nn("dblclick","onDoubleClick"),nn("focusin","onFocus"),nn("focusout","onBlur"),nn(bn,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sd=new Set("cancel close invalid load scroll toggle".split(" ").concat(ko));function Bl(n,a,u){var p=n.type||"unknown-event";n.currentTarget=u,ei(p,a,void 0,n),n.currentTarget=null}function ql(n,a){a=(a&4)!==0;for(var u=0;u<n.length;u++){var p=n[u],k=p.event;p=p.listeners;e:{var j=void 0;if(a)for(var q=p.length-1;0<=q;q--){var ce=p[q],ke=ce.instance,Ge=ce.currentTarget;if(ce=ce.listener,ke!==j&&k.isPropagationStopped())break e;Bl(k,ce,Ge),j=ke}else for(q=0;q<p.length;q++){if(ce=p[q],ke=ce.instance,Ge=ce.currentTarget,ce=ce.listener,ke!==j&&k.isPropagationStopped())break e;Bl(k,ce,Ge),j=ke}}}if(Ur)throw n=qn,Ur=!1,qn=null,n}function Zr(n,a){var u=a[Qi];u===void 0&&(u=a[Qi]=new Set);var p=n+"__bubble";u.has(p)||(Ul(a,n,2,!1),u.add(p))}function fu(n,a,u){var p=0;a&&(p|=4),Ul(u,n,p,a)}var cl="_reactListening"+Math.random().toString(36).slice(2);function qo(n){if(!n[cl]){n[cl]=!0,i.forEach(function(u){u!=="selectionchange"&&(sd.has(u)||fu(u,!1,n),fu(u,!0,n))});var a=n.nodeType===9?n:n.ownerDocument;a===null||a[cl]||(a[cl]=!0,fu("selectionchange",!1,a))}}function Ul(n,a,u,p){switch(Bo(a)){case 1:var k=qs;break;case 4:k=Mo;break;default:k=pa}u=k.bind(null,a,u,n),k=void 0,!Qr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(k=!0),p?k!==void 0?n.addEventListener(a,u,{capture:!0,passive:k}):n.addEventListener(a,u,!0):k!==void 0?n.addEventListener(a,u,{passive:k}):n.addEventListener(a,u,!1)}function zl(n,a,u,p,k){var j=p;if((a&1)===0&&(a&2)===0&&p!==null)e:for(;;){if(p===null)return;var q=p.tag;if(q===3||q===4){var ce=p.stateNode.containerInfo;if(ce===k||ce.nodeType===8&&ce.parentNode===k)break;if(q===4)for(q=p.return;q!==null;){var ke=q.tag;if((ke===3||ke===4)&&(ke=q.stateNode.containerInfo,ke===k||ke.nodeType===8&&ke.parentNode===k))return;q=q.return}for(;ce!==null;){if(q=So(ce),q===null)return;if(ke=q.tag,ke===5||ke===6){p=j=q;continue e}ce=ce.parentNode}}p=p.return}an(function(){var Ge=j,ft=gi(u),mt=[];e:{var ct=mn.get(n);if(ct!==void 0){var Ot=xs,Mt=n;switch(n){case"keypress":if(Gi(u)===0)break e;case"keydown":case"keyup":Ot=hr;break;case"focusin":Mt="focus",Ot=Ta;break;case"focusout":Mt="blur",Ot=Ta;break;case"beforeblur":case"afterblur":Ot=Ta;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ot=Oa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ot=ul;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ot=ln;break;case Ut:case Lr:case Gt:Ot=ma;break;case bn:Ot=$n;break;case"scroll":Ot=Us;break;case"wheel":Ot=va;break;case"copy":case"cut":case"paste":Ot=b;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ot=Ar}var Wt=(a&4)!==0,Jn=!Wt&&n==="scroll",$e=Wt?ct!==null?ct+"Capture":null:ct;Wt=[];for(var Pe=Ge,We;Pe!==null;){We=Pe;var _t=We.stateNode;if(We.tag===5&&_t!==null&&(We=_t,$e!==null&&(_t=Ct(Pe,$e),_t!=null&&Wt.push($l(Pe,_t,We)))),Jn)break;Pe=Pe.return}0<Wt.length&&(ct=new Ot(ct,Mt,null,u,ft),mt.push({event:ct,listeners:Wt}))}}if((a&7)===0){e:{if(ct=n==="mouseover"||n==="pointerover",Ot=n==="mouseout"||n==="pointerout",ct&&u!==mr&&(Mt=u.relatedTarget||u.fromElement)&&(So(Mt)||Mt[_i]))break e;if((Ot||ct)&&(ct=ft.window===ft?ft:(ct=ft.ownerDocument)?ct.defaultView||ct.parentWindow:window,Ot?(Mt=u.relatedTarget||u.toElement,Ot=Ge,Mt=Mt?So(Mt):null,Mt!==null&&(Jn=tn(Mt),Mt!==Jn||Mt.tag!==5&&Mt.tag!==6)&&(Mt=null)):(Ot=null,Mt=Ge),Ot!==Mt)){if(Wt=Oa,_t="onMouseLeave",$e="onMouseEnter",Pe="mouse",(n==="pointerout"||n==="pointerover")&&(Wt=Ar,_t="onPointerLeave",$e="onPointerEnter",Pe="pointer"),Jn=Ot==null?ct:$o(Ot),We=Mt==null?ct:$o(Mt),ct=new Wt(_t,Pe+"leave",Ot,u,ft),ct.target=Jn,ct.relatedTarget=We,_t=null,So(ft)===Ge&&(Wt=new Wt($e,Pe+"enter",Mt,u,ft),Wt.target=We,Wt.relatedTarget=Jn,_t=Wt),Jn=_t,Ot&&Mt)t:{for(Wt=Ot,$e=Mt,Pe=0,We=Wt;We;We=Uo(We))Pe++;for(We=0,_t=$e;_t;_t=Uo(_t))We++;for(;0<Pe-We;)Wt=Uo(Wt),Pe--;for(;0<We-Pe;)$e=Uo($e),We--;for(;Pe--;){if(Wt===$e||$e!==null&&Wt===$e.alternate)break t;Wt=Uo(Wt),$e=Uo($e)}Wt=null}else Wt=null;Ot!==null&&od(mt,ct,Ot,Wt,!1),Mt!==null&&Jn!==null&&od(mt,Jn,Mt,Wt,!0)}}e:{if(ct=Ge?$o(Ge):window,Ot=ct.nodeName&&ct.nodeName.toLowerCase(),Ot==="select"||Ot==="input"&&ct.type==="file")var Ht=Vs;else if(Ss(ct))if(f)Ht=Ae;else{Ht=ue;var tr=Z}else(Ot=ct.nodeName)&&Ot.toLowerCase()==="input"&&(ct.type==="checkbox"||ct.type==="radio")&&(Ht=xe);if(Ht&&(Ht=Ht(n,Ge))){ri(mt,Ht,u,ft);break e}tr&&tr(n,ct,Ge),n==="focusout"&&(tr=ct._wrapperState)&&tr.controlled&&ct.type==="number"&&ot(ct,"number",ct.value)}switch(tr=Ge?$o(Ge):window,n){case"focusin":(Ss(tr)||tr.contentEditable==="true")&&(Xe=tr,lt=Ge,yt=null);break;case"focusout":yt=lt=Xe=null;break;case"mousedown":ut=!0;break;case"contextmenu":case"mouseup":case"dragend":ut=!1,gt(mt,u,ft);break;case"selectionchange":if(Ke)break;case"keydown":case"keyup":gt(mt,u,ft)}var rr;if(xi)e:{switch(n){case"compositionstart":var fr="onCompositionStart";break e;case"compositionend":fr="onCompositionEnd";break e;case"compositionupdate":fr="onCompositionUpdate";break e}fr=void 0}else gr?es(n,u)&&(fr="onCompositionEnd"):n==="keydown"&&u.keyCode===229&&(fr="onCompositionStart");fr&&(bo&&u.locale!=="ko"&&(gr||fr!=="onCompositionStart"?fr==="onCompositionEnd"&&gr&&(rr=vo()):(ga=ft,Ki="value"in ga?ga.value:ga.textContent,gr=!0)),tr=pu(Ge,fr),0<tr.length&&(fr=new ee(fr,n,null,u,ft),mt.push({event:fr,listeners:tr}),rr?fr.data=rr:(rr=li(u),rr!==null&&(fr.data=rr)))),(rr=wo?ts(n,u):Vn(n,u))&&(Ge=pu(Ge,"onBeforeInput"),0<Ge.length&&(ft=new ee("onBeforeInput","beforeinput",null,u,ft),mt.push({event:ft,listeners:Ge}),ft.data=rr))}ql(mt,a)})}function $l(n,a,u){return{instance:n,listener:a,currentTarget:u}}function pu(n,a){for(var u=a+"Capture",p=[];n!==null;){var k=n,j=k.stateNode;k.tag===5&&j!==null&&(k=j,j=Ct(n,u),j!=null&&p.unshift($l(n,j,k)),j=Ct(n,a),j!=null&&p.push($l(n,j,k))),n=n.return}return p}function Uo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function od(n,a,u,p,k){for(var j=a._reactName,q=[];u!==null&&u!==p;){var ce=u,ke=ce.alternate,Ge=ce.stateNode;if(ke!==null&&ke===p)break;ce.tag===5&&Ge!==null&&(ce=Ge,k?(ke=Ct(u,j),ke!=null&&q.unshift($l(u,ke,ce))):k||(ke=Ct(u,j),ke!=null&&q.push($l(u,ke,ce)))),u=u.return}q.length!==0&&n.push({event:a,listeners:q})}var $h=/\r\n?/g,Vh=/\u0000|\uFFFD/g;function ld(n){return(typeof n=="string"?n:""+n).replace($h,`
`).replace(Vh,"")}function gu(n,a,u){if(a=ld(a),ld(n)!==a&&u)throw Error(r(425))}function dl(){}var Vl=null,zo=null;function sc(n,a){return n==="textarea"||n==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var oc=typeof setTimeout=="function"?setTimeout:void 0,ud=typeof clearTimeout=="function"?clearTimeout:void 0,cd=typeof Promise=="function"?Promise:void 0,Wh=typeof queueMicrotask=="function"?queueMicrotask:typeof cd<"u"?function(n){return cd.resolve(null).then(n).catch(Hh)}:oc;function Hh(n){setTimeout(function(){throw n})}function lc(n,a){var u=a,p=0;do{var k=u.nextSibling;if(n.removeChild(u),k&&k.nodeType===8)if(u=k.data,u==="/$"){if(p===0){n.removeChild(k),Hi(a);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=k}while(u);Hi(a)}function Di(n){for(;n!=null;n=n.nextSibling){var a=n.nodeType;if(a===1||a===3)break;if(a===8){if(a=n.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return n}function Da(n){n=n.previousSibling;for(var a=0;n;){if(n.nodeType===8){var u=n.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return n;a--}else u==="/$"&&a++}n=n.previousSibling}return null}var Xi=Math.random().toString(36).slice(2),As="__reactFiber$"+Xi,hl="__reactProps$"+Xi,_i="__reactContainer$"+Xi,Qi="__reactEvents$"+Xi,Kh="__reactListeners$"+Xi,Gh="__reactHandles$"+Xi;function So(n){var a=n[As];if(a)return a;for(var u=n.parentNode;u;){if(a=u[_i]||u[As]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(n=Da(n);n!==null;){if(u=n[As])return u;n=Da(n)}return a}n=u,u=n.parentNode}return null}function fl(n){return n=n[As]||n[_i],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function $o(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(r(33))}function Wl(n){return n[hl]||null}var uc=[],Ws=-1;function ns(n){return{current:n}}function Hr(n){0>Ws||(n.current=uc[Ws],uc[Ws]=null,Ws--)}function Jr(n,a){Ws++,uc[Ws]=n.current,n.current=a}var No={},ui=ns(No),Zi=ns(!1),Vo=No;function pl(n,a){var u=n.type.contextTypes;if(!u)return No;var p=n.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===a)return p.__reactInternalMemoizedMaskedChildContext;var k={},j;for(j in u)k[j]=a[j];return p&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=a,n.__reactInternalMemoizedMaskedChildContext=k),k}function ea(n){return n=n.childContextTypes,n!=null}function mu(){Hr(Zi),Hr(ui)}function dd(n,a,u){if(ui.current!==No)throw Error(r(168));Jr(ui,a),Jr(Zi,u)}function cc(n,a,u){var p=n.stateNode;if(a=a.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var k in p)if(!(k in a))throw Error(r(108,ye(n)||"Unknown",k));return _e({},u,p)}function Wo(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||No,Vo=ui.current,Jr(ui,n),Jr(Zi,Zi.current),!0}function hd(n,a,u){var p=n.stateNode;if(!p)throw Error(r(169));u?(n=cc(n,a,Vo),p.__reactInternalMemoizedMergedChildContext=n,Hr(Zi),Hr(ui),Jr(ui,n)):Hr(Zi),Jr(Zi,u)}var Hs=null,Hl=!1,d=!1;function m(n){Hs===null?Hs=[n]:Hs.push(n)}function S(n){Hl=!0,m(n)}function E(){if(!d&&Hs!==null){d=!0;var n=0,a=Rr;try{var u=Hs;for(Rr=1;n<u.length;n++){var p=u[n];do p=p(!0);while(p!==null)}Hs=null,Hl=!1}catch(k){throw Hs!==null&&(Hs=Hs.slice(n+1)),hs(Oi,E),k}finally{Rr=a,d=!1}}return null}var D=[],B=0,z=null,W=0,K=[],Q=0,we=null,Be=1,qe="";function Oe(n,a){D[B++]=W,D[B++]=z,z=n,W=a}function nt(n,a,u){K[Q++]=Be,K[Q++]=qe,K[Q++]=we,we=n;var p=Be;n=qe;var k=32-ir(p)-1;p&=~(1<<k),u+=1;var j=32-ir(a)+k;if(30<j){var q=k-k%5;j=(p&(1<<q)-1).toString(32),p>>=q,k-=q,Be=1<<32-ir(a)+k|u<<k|p,qe=j+n}else Be=1<<j|u<<k|p,qe=n}function Ye(n){n.return!==null&&(Oe(n,1),nt(n,1,0))}function Se(n){for(;n===z;)z=D[--B],D[B]=null,W=D[--B],D[B]=null;for(;n===we;)we=K[--Q],K[Q]=null,qe=K[--Q],K[Q]=null,Be=K[--Q],K[Q]=null}var Ne=null,et=null,Ze=!1,tt=null;function Pt(n,a){var u=Is(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=n,a=n.deletions,a===null?(n.deletions=[u],n.flags|=16):a.push(u)}function At(n,a){switch(n.tag){case 5:var u=n.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(n.stateNode=a,Ne=n,et=Di(a.firstChild),!0):!1;case 6:return a=n.pendingProps===""||a.nodeType!==3?null:a,a!==null?(n.stateNode=a,Ne=n,et=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=we!==null?{id:Be,overflow:qe}:null,n.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=Is(18,null,null,0),u.stateNode=a,u.return=n,n.child=u,Ne=n,et=null,!0):!1;default:return!1}}function Jt(n){return(n.mode&1)!==0&&(n.flags&128)===0}function jt(n){if(Ze){var a=et;if(a){var u=a;if(!At(n,a)){if(Jt(n))throw Error(r(418));a=Di(u.nextSibling);var p=Ne;a&&At(n,a)?Pt(p,u):(n.flags=n.flags&-4097|2,Ze=!1,Ne=n)}}else{if(Jt(n))throw Error(r(418));n.flags=n.flags&-4097|2,Ze=!1,Ne=n}}}function Dr(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ne=n}function Fr(n){if(n!==Ne)return!1;if(!Ze)return Dr(n),Ze=!0,!1;var a;if((a=n.tag!==3)&&!(a=n.tag!==5)&&(a=n.type,a=a!=="head"&&a!=="body"&&!sc(n.type,n.memoizedProps)),a&&(a=et)){if(Jt(n))throw Ir(),Error(r(418));for(;a;)Pt(n,a),a=Di(a.nextSibling)}if(Dr(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,a=0;n;){if(n.nodeType===8){var u=n.data;if(u==="/$"){if(a===0){et=Di(n.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}n=n.nextSibling}et=null}}else et=Ne?Di(n.stateNode.nextSibling):null;return!0}function Ir(){for(var n=et;n;)n=Di(n.nextSibling)}function xr(){et=Ne=null,Ze=!1}function Kr(n){tt===null?tt=[n]:tt.push(n)}var Yr=oe.ReactCurrentBatchConfig;function dr(n,a,u){if(n=u.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(r(309));var p=u.stateNode}if(!p)throw Error(r(147,n));var k=p,j=""+n;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===j?a.ref:(a=function(q){var ce=k.refs;q===null?delete ce[j]:ce[j]=q},a._stringRef=j,a)}if(typeof n!="string")throw Error(r(284));if(!u._owner)throw Error(r(290,n))}return n}function xn(n,a){throw n=Object.prototype.toString.call(a),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":n))}function Fi(n){var a=n._init;return a(n._payload)}function Pn(n){function a($e,Pe){if(n){var We=$e.deletions;We===null?($e.deletions=[Pe],$e.flags|=16):We.push(Pe)}}function u($e,Pe){if(!n)return null;for(;Pe!==null;)a($e,Pe),Pe=Pe.sibling;return null}function p($e,Pe){for($e=new Map;Pe!==null;)Pe.key!==null?$e.set(Pe.key,Pe):$e.set(Pe.index,Pe),Pe=Pe.sibling;return $e}function k($e,Pe){return $e=Al($e,Pe),$e.index=0,$e.sibling=null,$e}function j($e,Pe,We){return $e.index=We,n?(We=$e.alternate,We!==null?(We=We.index,We<Pe?($e.flags|=2,Pe):We):($e.flags|=2,Pe)):($e.flags|=1048576,Pe)}function q($e){return n&&$e.alternate===null&&($e.flags|=2),$e}function ce($e,Pe,We,_t){return Pe===null||Pe.tag!==6?(Pe=Sf(We,$e.mode,_t),Pe.return=$e,Pe):(Pe=k(Pe,We),Pe.return=$e,Pe)}function ke($e,Pe,We,_t){var Ht=We.type;return Ht===ne?ft($e,Pe,We.props.children,_t,We.key):Pe!==null&&(Pe.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===Me&&Fi(Ht)===Pe.type)?(_t=k(Pe,We.props),_t.ref=dr($e,Pe,We),_t.return=$e,_t):(_t=Id(We.type,We.key,We.props,null,$e.mode,_t),_t.ref=dr($e,Pe,We),_t.return=$e,_t)}function Ge($e,Pe,We,_t){return Pe===null||Pe.tag!==4||Pe.stateNode.containerInfo!==We.containerInfo||Pe.stateNode.implementation!==We.implementation?(Pe=Nf(We,$e.mode,_t),Pe.return=$e,Pe):(Pe=k(Pe,We.children||[]),Pe.return=$e,Pe)}function ft($e,Pe,We,_t,Ht){return Pe===null||Pe.tag!==7?(Pe=eu(We,$e.mode,_t,Ht),Pe.return=$e,Pe):(Pe=k(Pe,We),Pe.return=$e,Pe)}function mt($e,Pe,We){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number")return Pe=Sf(""+Pe,$e.mode,We),Pe.return=$e,Pe;if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case le:return We=Id(Pe.type,Pe.key,Pe.props,null,$e.mode,We),We.ref=dr($e,null,Pe),We.return=$e,We;case be:return Pe=Nf(Pe,$e.mode,We),Pe.return=$e,Pe;case Me:var _t=Pe._init;return mt($e,_t(Pe._payload),We)}if(pt(Pe)||je(Pe))return Pe=eu(Pe,$e.mode,We,null),Pe.return=$e,Pe;xn($e,Pe)}return null}function ct($e,Pe,We,_t){var Ht=Pe!==null?Pe.key:null;if(typeof We=="string"&&We!==""||typeof We=="number")return Ht!==null?null:ce($e,Pe,""+We,_t);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case le:return We.key===Ht?ke($e,Pe,We,_t):null;case be:return We.key===Ht?Ge($e,Pe,We,_t):null;case Me:return Ht=We._init,ct($e,Pe,Ht(We._payload),_t)}if(pt(We)||je(We))return Ht!==null?null:ft($e,Pe,We,_t,null);xn($e,We)}return null}function Ot($e,Pe,We,_t,Ht){if(typeof _t=="string"&&_t!==""||typeof _t=="number")return $e=$e.get(We)||null,ce(Pe,$e,""+_t,Ht);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case le:return $e=$e.get(_t.key===null?We:_t.key)||null,ke(Pe,$e,_t,Ht);case be:return $e=$e.get(_t.key===null?We:_t.key)||null,Ge(Pe,$e,_t,Ht);case Me:var tr=_t._init;return Ot($e,Pe,We,tr(_t._payload),Ht)}if(pt(_t)||je(_t))return $e=$e.get(We)||null,ft(Pe,$e,_t,Ht,null);xn(Pe,_t)}return null}function Mt($e,Pe,We,_t){for(var Ht=null,tr=null,rr=Pe,fr=Pe=0,Ai=null;rr!==null&&fr<We.length;fr++){rr.index>fr?(Ai=rr,rr=null):Ai=rr.sibling;var Wr=ct($e,rr,We[fr],_t);if(Wr===null){rr===null&&(rr=Ai);break}n&&rr&&Wr.alternate===null&&a($e,rr),Pe=j(Wr,Pe,fr),tr===null?Ht=Wr:tr.sibling=Wr,tr=Wr,rr=Ai}if(fr===We.length)return u($e,rr),Ze&&Oe($e,fr),Ht;if(rr===null){for(;fr<We.length;fr++)rr=mt($e,We[fr],_t),rr!==null&&(Pe=j(rr,Pe,fr),tr===null?Ht=rr:tr.sibling=rr,tr=rr);return Ze&&Oe($e,fr),Ht}for(rr=p($e,rr);fr<We.length;fr++)Ai=Ot(rr,$e,fr,We[fr],_t),Ai!==null&&(n&&Ai.alternate!==null&&rr.delete(Ai.key===null?fr:Ai.key),Pe=j(Ai,Pe,fr),tr===null?Ht=Ai:tr.sibling=Ai,tr=Ai);return n&&rr.forEach(function(jl){return a($e,jl)}),Ze&&Oe($e,fr),Ht}function Wt($e,Pe,We,_t){var Ht=je(We);if(typeof Ht!="function")throw Error(r(150));if(We=Ht.call(We),We==null)throw Error(r(151));for(var tr=Ht=null,rr=Pe,fr=Pe=0,Ai=null,Wr=We.next();rr!==null&&!Wr.done;fr++,Wr=We.next()){rr.index>fr?(Ai=rr,rr=null):Ai=rr.sibling;var jl=ct($e,rr,Wr.value,_t);if(jl===null){rr===null&&(rr=Ai);break}n&&rr&&jl.alternate===null&&a($e,rr),Pe=j(jl,Pe,fr),tr===null?Ht=jl:tr.sibling=jl,tr=jl,rr=Ai}if(Wr.done)return u($e,rr),Ze&&Oe($e,fr),Ht;if(rr===null){for(;!Wr.done;fr++,Wr=We.next())Wr=mt($e,Wr.value,_t),Wr!==null&&(Pe=j(Wr,Pe,fr),tr===null?Ht=Wr:tr.sibling=Wr,tr=Wr);return Ze&&Oe($e,fr),Ht}for(rr=p($e,rr);!Wr.done;fr++,Wr=We.next())Wr=Ot(rr,$e,fr,Wr.value,_t),Wr!==null&&(n&&Wr.alternate!==null&&rr.delete(Wr.key===null?fr:Wr.key),Pe=j(Wr,Pe,fr),tr===null?Ht=Wr:tr.sibling=Wr,tr=Wr);return n&&rr.forEach(function(dy){return a($e,dy)}),Ze&&Oe($e,fr),Ht}function Jn($e,Pe,We,_t){if(typeof We=="object"&&We!==null&&We.type===ne&&We.key===null&&(We=We.props.children),typeof We=="object"&&We!==null){switch(We.$$typeof){case le:e:{for(var Ht=We.key,tr=Pe;tr!==null;){if(tr.key===Ht){if(Ht=We.type,Ht===ne){if(tr.tag===7){u($e,tr.sibling),Pe=k(tr,We.props.children),Pe.return=$e,$e=Pe;break e}}else if(tr.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===Me&&Fi(Ht)===tr.type){u($e,tr.sibling),Pe=k(tr,We.props),Pe.ref=dr($e,tr,We),Pe.return=$e,$e=Pe;break e}u($e,tr);break}else a($e,tr);tr=tr.sibling}We.type===ne?(Pe=eu(We.props.children,$e.mode,_t,We.key),Pe.return=$e,$e=Pe):(_t=Id(We.type,We.key,We.props,null,$e.mode,_t),_t.ref=dr($e,Pe,We),_t.return=$e,$e=_t)}return q($e);case be:e:{for(tr=We.key;Pe!==null;){if(Pe.key===tr)if(Pe.tag===4&&Pe.stateNode.containerInfo===We.containerInfo&&Pe.stateNode.implementation===We.implementation){u($e,Pe.sibling),Pe=k(Pe,We.children||[]),Pe.return=$e,$e=Pe;break e}else{u($e,Pe);break}else a($e,Pe);Pe=Pe.sibling}Pe=Nf(We,$e.mode,_t),Pe.return=$e,$e=Pe}return q($e);case Me:return tr=We._init,Jn($e,Pe,tr(We._payload),_t)}if(pt(We))return Mt($e,Pe,We,_t);if(je(We))return Wt($e,Pe,We,_t);xn($e,We)}return typeof We=="string"&&We!==""||typeof We=="number"?(We=""+We,Pe!==null&&Pe.tag===6?(u($e,Pe.sibling),Pe=k(Pe,We),Pe.return=$e,$e=Pe):(u($e,Pe),Pe=Sf(We,$e.mode,_t),Pe.return=$e,$e=Pe),q($e)):u($e,Pe)}return Jn}var Hn=Pn(!0),$r=Pn(!1),ki=ns(null),Si=null,_n=null,Kn=null;function ci(){Kn=_n=Si=null}function ta(n){var a=ki.current;Hr(ki),n._currentValue=a}function Fa(n,a,u){for(;n!==null;){var p=n.alternate;if((n.childLanes&a)!==a?(n.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),n===u)break;n=n.return}}function kn(n,a){Si=n,Kn=_n=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&a)!==0&&(Ua=!0),n.firstContext=null)}function Rn(n){var a=n._currentValue;if(Kn!==n)if(n={context:n,memoizedValue:a,next:null},_n===null){if(Si===null)throw Error(r(308));_n=n,Si.dependencies={lanes:0,firstContext:n}}else _n=_n.next=n;return a}var wa=null;function Ao(n){wa===null?wa=[n]:wa.push(n)}function Ks(n,a,u,p){var k=a.interleaved;return k===null?(u.next=u,Ao(a)):(u.next=k.next,k.next=u),a.interleaved=u,Vr(n,p)}function Vr(n,a){n.lanes|=a;var u=n.alternate;for(u!==null&&(u.lanes|=a),u=n,n=n.return;n!==null;)n.childLanes|=a,u=n.alternate,u!==null&&(u.childLanes|=a),u=n,n=n.return;return u.tag===3?u.stateNode:null}var js=!1;function vu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dc(n,a){n=n.updateQueue,a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ma(n,a){return{eventTime:n,lane:a,tag:0,payload:null,callback:null,next:null}}function Ba(n,a,u){var p=n.updateQueue;if(p===null)return null;if(p=p.shared,(Br&2)!==0){var k=p.pending;return k===null?a.next=a:(a.next=k.next,k.next=a),p.pending=a,Vr(n,u)}return k=p.interleaved,k===null?(a.next=a,Ao(p)):(a.next=k.next,k.next=a),p.interleaved=a,Vr(n,u)}function Ho(n,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var p=a.lanes;p&=n.pendingLanes,u|=p,a.lanes=u,Fs(n,u)}}function qa(n,a){var u=n.updateQueue,p=n.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var k=null,j=null;if(u=u.firstBaseUpdate,u!==null){do{var q={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};j===null?k=j=q:j=j.next=q,u=u.next}while(u!==null);j===null?k=j=a:j=j.next=a}else k=j=a;u={baseState:p.baseState,firstBaseUpdate:k,lastBaseUpdate:j,shared:p.shared,effects:p.effects},n.updateQueue=u;return}n=u.lastBaseUpdate,n===null?u.firstBaseUpdate=a:n.next=a,u.lastBaseUpdate=a}function Gs(n,a,u,p){var k=n.updateQueue;js=!1;var j=k.firstBaseUpdate,q=k.lastBaseUpdate,ce=k.shared.pending;if(ce!==null){k.shared.pending=null;var ke=ce,Ge=ke.next;ke.next=null,q===null?j=Ge:q.next=Ge,q=ke;var ft=n.alternate;ft!==null&&(ft=ft.updateQueue,ce=ft.lastBaseUpdate,ce!==q&&(ce===null?ft.firstBaseUpdate=Ge:ce.next=Ge,ft.lastBaseUpdate=ke))}if(j!==null){var mt=k.baseState;q=0,ft=Ge=ke=null,ce=j;do{var ct=ce.lane,Ot=ce.eventTime;if((p&ct)===ct){ft!==null&&(ft=ft.next={eventTime:Ot,lane:0,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null});e:{var Mt=n,Wt=ce;switch(ct=a,Ot=u,Wt.tag){case 1:if(Mt=Wt.payload,typeof Mt=="function"){mt=Mt.call(Ot,mt,ct);break e}mt=Mt;break e;case 3:Mt.flags=Mt.flags&-65537|128;case 0:if(Mt=Wt.payload,ct=typeof Mt=="function"?Mt.call(Ot,mt,ct):Mt,ct==null)break e;mt=_e({},mt,ct);break e;case 2:js=!0}}ce.callback!==null&&ce.lane!==0&&(n.flags|=64,ct=k.effects,ct===null?k.effects=[ce]:ct.push(ce))}else Ot={eventTime:Ot,lane:ct,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},ft===null?(Ge=ft=Ot,ke=mt):ft=ft.next=Ot,q|=ct;if(ce=ce.next,ce===null){if(ce=k.shared.pending,ce===null)break;ct=ce,ce=ct.next,ct.next=null,k.lastBaseUpdate=ct,k.shared.pending=null}}while(!0);if(ft===null&&(ke=mt),k.baseState=ke,k.firstBaseUpdate=Ge,k.lastBaseUpdate=ft,a=k.shared.interleaved,a!==null){k=a;do q|=k.lane,k=k.next;while(k!==a)}else j===null&&(k.shared.lanes=0);Yl|=q,n.lanes=q,n.memoizedState=mt}}function Ko(n,a,u){if(n=a.effects,a.effects=null,n!==null)for(a=0;a<n.length;a++){var p=n[a],k=p.callback;if(k!==null){if(p.callback=null,p=u,typeof k!="function")throw Error(r(191,k));k.call(p)}}}var gl={},ba=ns(gl),ml=ns(gl),jo=ns(gl);function Js(n){if(n===gl)throw Error(r(174));return n}function vl(n,a){switch(Jr(jo,a),Jr(ml,n),Jr(ba,gl),n=a.nodeType,n){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Zt(null,"");break;default:n=n===8?a.parentNode:a,a=n.namespaceURI||null,n=n.tagName,a=Zt(a,n)}Hr(ba),Jr(ba,a)}function Es(){Hr(ba),Hr(ml),Hr(jo)}function fd(n){Js(jo.current);var a=Js(ba.current),u=Zt(a,n.type);a!==u&&(Jr(ml,n),Jr(ba,u))}function hc(n){ml.current===n&&(Hr(ba),Hr(ml))}var un=ns(0);function is(n){for(var a=n;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var fc=[];function pc(){for(var n=0;n<fc.length;n++)fc[n]._workInProgressVersionPrimary=null;fc.length=0}var yu=oe.ReactCurrentDispatcher,wu=oe.ReactCurrentBatchConfig,Cs=0,vn=null,Dn=null,Ln=null,yl=!1,Ys=!1,wl=0,Jh=0;function Gn(){throw Error(r(321))}function bu(n,a){if(a===null)return!1;for(var u=0;u<a.length&&u<n.length;u++)if(!re(n[u],a[u]))return!1;return!0}function Kl(n,a,u,p,k,j){if(Cs=j,vn=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,yu.current=n===null||n.memoizedState===null?F1:M1,n=u(p,k),Ys){j=0;do{if(Ys=!1,wl=0,25<=j)throw Error(r(301));j+=1,Ln=Dn=null,a.updateQueue=null,yu.current=B1,n=u(p,k)}while(Ys)}if(yu.current=yd,a=Dn!==null&&Dn.next!==null,Cs=0,Ln=Dn=vn=null,yl=!1,a)throw Error(r(300));return n}function Ps(){var n=wl!==0;return wl=0,n}function as(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ln===null?vn.memoizedState=Ln=n:Ln=Ln.next=n,Ln}function xa(){if(Dn===null){var n=vn.alternate;n=n!==null?n.memoizedState:null}else n=Dn.next;var a=Ln===null?vn.memoizedState:Ln.next;if(a!==null)Ln=a,Dn=n;else{if(n===null)throw Error(r(310));Dn=n,n={memoizedState:Dn.memoizedState,baseState:Dn.baseState,baseQueue:Dn.baseQueue,queue:Dn.queue,next:null},Ln===null?vn.memoizedState=Ln=n:Ln=Ln.next=n}return Ln}function Gl(n,a){return typeof a=="function"?a(n):a}function xu(n){var a=xa(),u=a.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=n;var p=Dn,k=p.baseQueue,j=u.pending;if(j!==null){if(k!==null){var q=k.next;k.next=j.next,j.next=q}p.baseQueue=k=j,u.pending=null}if(k!==null){j=k.next,p=p.baseState;var ce=q=null,ke=null,Ge=j;do{var ft=Ge.lane;if((Cs&ft)===ft)ke!==null&&(ke=ke.next={lane:0,action:Ge.action,hasEagerState:Ge.hasEagerState,eagerState:Ge.eagerState,next:null}),p=Ge.hasEagerState?Ge.eagerState:n(p,Ge.action);else{var mt={lane:ft,action:Ge.action,hasEagerState:Ge.hasEagerState,eagerState:Ge.eagerState,next:null};ke===null?(ce=ke=mt,q=p):ke=ke.next=mt,vn.lanes|=ft,Yl|=ft}Ge=Ge.next}while(Ge!==null&&Ge!==j);ke===null?q=p:ke.next=ce,re(p,a.memoizedState)||(Ua=!0),a.memoizedState=p,a.baseState=q,a.baseQueue=ke,u.lastRenderedState=p}if(n=u.interleaved,n!==null){k=n;do j=k.lane,vn.lanes|=j,Yl|=j,k=k.next;while(k!==n)}else k===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function Eo(n){var a=xa(),u=a.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=n;var p=u.dispatch,k=u.pending,j=a.memoizedState;if(k!==null){u.pending=null;var q=k=k.next;do j=n(j,q.action),q=q.next;while(q!==k);re(j,a.memoizedState)||(Ua=!0),a.memoizedState=j,a.baseQueue===null&&(a.baseState=j),u.lastRenderedState=j}return[j,p]}function pd(){}function gc(n,a){var u=vn,p=xa(),k=a(),j=!re(p.memoizedState,k);if(j&&(p.memoizedState=k,Ua=!0),p=p.queue,Su(md.bind(null,u,p,n),[n]),p.getSnapshot!==a||j||Ln!==null&&Ln.memoizedState.tag&1){if(u.flags|=2048,_a(9,mc.bind(null,u,p,k,a),void 0,null),Ni===null)throw Error(r(349));(Cs&30)!==0||gd(u,a,k)}return k}function gd(n,a,u){n.flags|=16384,n={getSnapshot:a,value:u},a=vn.updateQueue,a===null?(a={lastEffect:null,stores:null},vn.updateQueue=a,a.stores=[n]):(u=a.stores,u===null?a.stores=[n]:u.push(n))}function mc(n,a,u,p){a.value=u,a.getSnapshot=p,bl(a)&&_u(n)}function md(n,a,u){return u(function(){bl(a)&&_u(n)})}function bl(n){var a=n.getSnapshot;n=n.value;try{var u=a();return!re(n,u)}catch{return!0}}function _u(n){var a=Vr(n,1);a!==null&&to(a,n,1,-1)}function Jl(n){var a=as();return typeof n=="function"&&(n=n()),a.memoizedState=a.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gl,lastRenderedState:n},a.queue=n,n=n.dispatch=D1.bind(null,vn,n),[a.memoizedState,n]}function _a(n,a,u,p){return n={tag:n,create:a,destroy:u,deps:p,next:null},a=vn.updateQueue,a===null?(a={lastEffect:null,stores:null},vn.updateQueue=a,a.lastEffect=n.next=n):(u=a.lastEffect,u===null?a.lastEffect=n.next=n:(p=u.next,u.next=n,n.next=p,a.lastEffect=n)),n}function Xs(){return xa().memoizedState}function ss(n,a,u,p){var k=as();vn.flags|=n,k.memoizedState=_a(1|a,u,void 0,p===void 0?null:p)}function Go(n,a,u,p){var k=xa();p=p===void 0?null:p;var j=void 0;if(Dn!==null){var q=Dn.memoizedState;if(j=q.destroy,p!==null&&bu(p,q.deps)){k.memoizedState=_a(a,u,j,p);return}}vn.flags|=n,k.memoizedState=_a(1|a,u,j,p)}function ku(n,a){return ss(8390656,8,n,a)}function Su(n,a){return Go(2048,8,n,a)}function vd(n,a){return Go(4,2,n,a)}function Nu(n,a){return Go(4,4,n,a)}function Au(n,a){if(typeof a=="function")return n=n(),a(n),function(){a(null)};if(a!=null)return n=n(),a.current=n,function(){a.current=null}}function p0(n,a,u){return u=u!=null?u.concat([n]):null,Go(4,4,Au.bind(null,a,n),u)}function Yh(){}function g0(n,a){var u=xa();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&bu(a,p[1])?p[0]:(u.memoizedState=[n,a],n)}function m0(n,a){var u=xa();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&bu(a,p[1])?p[0]:(n=n(),u.memoizedState=[n,a],n)}function v0(n,a,u){return(Cs&21)===0?(n.baseState&&(n.baseState=!1,Ua=!0),n.memoizedState=u):(re(u,a)||(u=po(),vn.lanes|=u,Yl|=u,n.baseState=!0),a)}function T1(n,a){var u=Rr;Rr=u!==0&&4>u?u:4,n(!0);var p=wu.transition;wu.transition={};try{n(!1),a()}finally{Rr=u,wu.transition=p}}function y0(){return xa().memoizedState}function R1(n,a,u){var p=Sl(n);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},w0(n))b0(a,u);else if(u=Ks(n,a,u,p),u!==null){var k=Sa();to(u,n,p,k),x0(u,a,p)}}function D1(n,a,u){var p=Sl(n),k={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(w0(n))b0(a,k);else{var j=n.alternate;if(n.lanes===0&&(j===null||j.lanes===0)&&(j=a.lastRenderedReducer,j!==null))try{var q=a.lastRenderedState,ce=j(q,u);if(k.hasEagerState=!0,k.eagerState=ce,re(ce,q)){var ke=a.interleaved;ke===null?(k.next=k,Ao(a)):(k.next=ke.next,ke.next=k),a.interleaved=k;return}}catch{}finally{}u=Ks(n,a,k,p),u!==null&&(k=Sa(),to(u,n,p,k),x0(u,a,p))}}function w0(n){var a=n.alternate;return n===vn||a!==null&&a===vn}function b0(n,a){Ys=yl=!0;var u=n.pending;u===null?a.next=a:(a.next=u.next,u.next=a),n.pending=a}function x0(n,a,u){if((u&4194240)!==0){var p=a.lanes;p&=n.pendingLanes,u|=p,a.lanes=u,Fs(n,u)}}var yd={readContext:Rn,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useInsertionEffect:Gn,useLayoutEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useMutableSource:Gn,useSyncExternalStore:Gn,useId:Gn,unstable_isNewReconciler:!1},F1={readContext:Rn,useCallback:function(n,a){return as().memoizedState=[n,a===void 0?null:a],n},useContext:Rn,useEffect:ku,useImperativeHandle:function(n,a,u){return u=u!=null?u.concat([n]):null,ss(4194308,4,Au.bind(null,a,n),u)},useLayoutEffect:function(n,a){return ss(4194308,4,n,a)},useInsertionEffect:function(n,a){return ss(4,2,n,a)},useMemo:function(n,a){var u=as();return a=a===void 0?null:a,n=n(),u.memoizedState=[n,a],n},useReducer:function(n,a,u){var p=as();return a=u!==void 0?u(a):a,p.memoizedState=p.baseState=a,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:a},p.queue=n,n=n.dispatch=R1.bind(null,vn,n),[p.memoizedState,n]},useRef:function(n){var a=as();return n={current:n},a.memoizedState=n},useState:Jl,useDebugValue:Yh,useDeferredValue:function(n){return as().memoizedState=n},useTransition:function(){var n=Jl(!1),a=n[0];return n=T1.bind(null,n[1]),as().memoizedState=n,[a,n]},useMutableSource:function(){},useSyncExternalStore:function(n,a,u){var p=vn,k=as();if(Ze){if(u===void 0)throw Error(r(407));u=u()}else{if(u=a(),Ni===null)throw Error(r(349));(Cs&30)!==0||gd(p,a,u)}k.memoizedState=u;var j={value:u,getSnapshot:a};return k.queue=j,ku(md.bind(null,p,j,n),[n]),p.flags|=2048,_a(9,mc.bind(null,p,j,u,a),void 0,null),u},useId:function(){var n=as(),a=Ni.identifierPrefix;if(Ze){var u=qe,p=Be;u=(p&~(1<<32-ir(p)-1)).toString(32)+u,a=":"+a+"R"+u,u=wl++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=Jh++,a=":"+a+"r"+u.toString(32)+":";return n.memoizedState=a},unstable_isNewReconciler:!1},M1={readContext:Rn,useCallback:g0,useContext:Rn,useEffect:Su,useImperativeHandle:p0,useInsertionEffect:vd,useLayoutEffect:Nu,useMemo:m0,useReducer:xu,useRef:Xs,useState:function(){return xu(Gl)},useDebugValue:Yh,useDeferredValue:function(n){var a=xa();return v0(a,Dn.memoizedState,n)},useTransition:function(){var n=xu(Gl)[0],a=xa().memoizedState;return[n,a]},useMutableSource:pd,useSyncExternalStore:gc,useId:y0,unstable_isNewReconciler:!1},B1={readContext:Rn,useCallback:g0,useContext:Rn,useEffect:Su,useImperativeHandle:p0,useInsertionEffect:vd,useLayoutEffect:Nu,useMemo:m0,useReducer:Eo,useRef:Xs,useState:function(){return Eo(Gl)},useDebugValue:Yh,useDeferredValue:function(n){var a=xa();return Dn===null?a.memoizedState=n:v0(a,Dn.memoizedState,n)},useTransition:function(){var n=Eo(Gl)[0],a=xa().memoizedState;return[n,a]},useMutableSource:pd,useSyncExternalStore:gc,useId:y0,unstable_isNewReconciler:!1};function Qs(n,a){if(n&&n.defaultProps){a=_e({},a),n=n.defaultProps;for(var u in n)a[u]===void 0&&(a[u]=n[u]);return a}return a}function Xh(n,a,u,p){a=n.memoizedState,u=u(p,a),u=u==null?a:_e({},a,u),n.memoizedState=u,n.lanes===0&&(n.updateQueue.baseState=u)}var wd={isMounted:function(n){return(n=n._reactInternals)?tn(n)===n:!1},enqueueSetState:function(n,a,u){n=n._reactInternals;var p=Sa(),k=Sl(n),j=Ma(p,k);j.payload=a,u!=null&&(j.callback=u),a=Ba(n,j,k),a!==null&&(to(a,n,k,p),Ho(a,n,k))},enqueueReplaceState:function(n,a,u){n=n._reactInternals;var p=Sa(),k=Sl(n),j=Ma(p,k);j.tag=1,j.payload=a,u!=null&&(j.callback=u),a=Ba(n,j,k),a!==null&&(to(a,n,k,p),Ho(a,n,k))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var u=Sa(),p=Sl(n),k=Ma(u,p);k.tag=2,a!=null&&(k.callback=a),a=Ba(n,k,p),a!==null&&(to(a,n,p,u),Ho(a,n,p))}};function _0(n,a,u,p,k,j,q){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(p,j,q):a.prototype&&a.prototype.isPureReactComponent?!Re(u,p)||!Re(k,j):!0}function k0(n,a,u){var p=!1,k=No,j=a.contextType;return typeof j=="object"&&j!==null?j=Rn(j):(k=ea(a)?Vo:ui.current,p=a.contextTypes,j=(p=p!=null)?pl(n,k):No),a=new a(u,j),n.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=wd,n.stateNode=a,a._reactInternals=n,p&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=k,n.__reactInternalMemoizedMaskedChildContext=j),a}function S0(n,a,u,p){n=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,p),a.state!==n&&wd.enqueueReplaceState(a,a.state,null)}function Qh(n,a,u,p){var k=n.stateNode;k.props=u,k.state=n.memoizedState,k.refs={},vu(n);var j=a.contextType;typeof j=="object"&&j!==null?k.context=Rn(j):(j=ea(a)?Vo:ui.current,k.context=pl(n,j)),k.state=n.memoizedState,j=a.getDerivedStateFromProps,typeof j=="function"&&(Xh(n,a,j,u),k.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(a=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),a!==k.state&&wd.enqueueReplaceState(k,k.state,null),Gs(n,u,k,p),k.state=n.memoizedState),typeof k.componentDidMount=="function"&&(n.flags|=4194308)}function ju(n,a){try{var u="",p=a;do u+=ie(p),p=p.return;while(p);var k=u}catch(j){k=`
Error generating stack: `+j.message+`
`+j.stack}return{value:n,source:a,stack:k,digest:null}}function Zh(n,a,u){return{value:n,source:null,stack:u??null,digest:a??null}}function ef(n,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var q1=typeof WeakMap=="function"?WeakMap:Map;function N0(n,a,u){u=Ma(-1,u),u.tag=3,u.payload={element:null};var p=a.value;return u.callback=function(){Ad||(Ad=!0,mf=p),ef(n,a)},u}function A0(n,a,u){u=Ma(-1,u),u.tag=3;var p=n.type.getDerivedStateFromError;if(typeof p=="function"){var k=a.value;u.payload=function(){return p(k)},u.callback=function(){ef(n,a)}}var j=n.stateNode;return j!==null&&typeof j.componentDidCatch=="function"&&(u.callback=function(){ef(n,a),typeof p!="function"&&(_l===null?_l=new Set([this]):_l.add(this));var q=a.stack;this.componentDidCatch(a.value,{componentStack:q!==null?q:""})}),u}function j0(n,a,u){var p=n.pingCache;if(p===null){p=n.pingCache=new q1;var k=new Set;p.set(a,k)}else k=p.get(a),k===void 0&&(k=new Set,p.set(a,k));k.has(u)||(k.add(u),n=ey.bind(null,n,a,u),a.then(n,n))}function E0(n){do{var a;if((a=n.tag===13)&&(a=n.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return n;n=n.return}while(n!==null);return null}function C0(n,a,u,p,k){return(n.mode&1)===0?(n===a?n.flags|=65536:(n.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=Ma(-1,1),a.tag=2,Ba(u,a,1))),u.lanes|=1),n):(n.flags|=65536,n.lanes=k,n)}var U1=oe.ReactCurrentOwner,Ua=!1;function ka(n,a,u,p){a.child=n===null?$r(a,null,u,p):Hn(a,n.child,u,p)}function P0(n,a,u,p,k){u=u.render;var j=a.ref;return kn(a,k),p=Kl(n,a,u,p,j,k),u=Ps(),n!==null&&!Ua?(a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~k,Jo(n,a,k)):(Ze&&u&&Ye(a),a.flags|=1,ka(n,a,p,k),a.child)}function L0(n,a,u,p,k){if(n===null){var j=u.type;return typeof j=="function"&&!kf(j)&&j.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=j,I0(n,a,j,p,k)):(n=Id(u.type,null,p,a,a.mode,k),n.ref=a.ref,n.return=a,a.child=n)}if(j=n.child,(n.lanes&k)===0){var q=j.memoizedProps;if(u=u.compare,u=u!==null?u:Re,u(q,p)&&n.ref===a.ref)return Jo(n,a,k)}return a.flags|=1,n=Al(j,p),n.ref=a.ref,n.return=a,a.child=n}function I0(n,a,u,p,k){if(n!==null){var j=n.memoizedProps;if(Re(j,p)&&n.ref===a.ref)if(Ua=!1,a.pendingProps=p=j,(n.lanes&k)!==0)(n.flags&131072)!==0&&(Ua=!0);else return a.lanes=n.lanes,Jo(n,a,k)}return tf(n,a,u,p,k)}function O0(n,a,u){var p=a.pendingProps,k=p.children,j=n!==null?n.memoizedState:null;if(p.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Jr(Cu,os),os|=u;else{if((u&1073741824)===0)return n=j!==null?j.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:n,cachePool:null,transitions:null},a.updateQueue=null,Jr(Cu,os),os|=n,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=j!==null?j.baseLanes:u,Jr(Cu,os),os|=p}else j!==null?(p=j.baseLanes|u,a.memoizedState=null):p=u,Jr(Cu,os),os|=p;return ka(n,a,k,u),a.child}function T0(n,a){var u=a.ref;(n===null&&u!==null||n!==null&&n.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function tf(n,a,u,p,k){var j=ea(u)?Vo:ui.current;return j=pl(a,j),kn(a,k),u=Kl(n,a,u,p,j,k),p=Ps(),n!==null&&!Ua?(a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~k,Jo(n,a,k)):(Ze&&p&&Ye(a),a.flags|=1,ka(n,a,u,k),a.child)}function R0(n,a,u,p,k){if(ea(u)){var j=!0;Wo(a)}else j=!1;if(kn(a,k),a.stateNode===null)xd(n,a),k0(a,u,p),Qh(a,u,p,k),p=!0;else if(n===null){var q=a.stateNode,ce=a.memoizedProps;q.props=ce;var ke=q.context,Ge=u.contextType;typeof Ge=="object"&&Ge!==null?Ge=Rn(Ge):(Ge=ea(u)?Vo:ui.current,Ge=pl(a,Ge));var ft=u.getDerivedStateFromProps,mt=typeof ft=="function"||typeof q.getSnapshotBeforeUpdate=="function";mt||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(ce!==p||ke!==Ge)&&S0(a,q,p,Ge),js=!1;var ct=a.memoizedState;q.state=ct,Gs(a,p,q,k),ke=a.memoizedState,ce!==p||ct!==ke||Zi.current||js?(typeof ft=="function"&&(Xh(a,u,ft,p),ke=a.memoizedState),(ce=js||_0(a,u,ce,p,ct,ke,Ge))?(mt||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(a.flags|=4194308)):(typeof q.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=ke),q.props=p,q.state=ke,q.context=Ge,p=ce):(typeof q.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{q=a.stateNode,dc(n,a),ce=a.memoizedProps,Ge=a.type===a.elementType?ce:Qs(a.type,ce),q.props=Ge,mt=a.pendingProps,ct=q.context,ke=u.contextType,typeof ke=="object"&&ke!==null?ke=Rn(ke):(ke=ea(u)?Vo:ui.current,ke=pl(a,ke));var Ot=u.getDerivedStateFromProps;(ft=typeof Ot=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(ce!==mt||ct!==ke)&&S0(a,q,p,ke),js=!1,ct=a.memoizedState,q.state=ct,Gs(a,p,q,k);var Mt=a.memoizedState;ce!==mt||ct!==Mt||Zi.current||js?(typeof Ot=="function"&&(Xh(a,u,Ot,p),Mt=a.memoizedState),(Ge=js||_0(a,u,Ge,p,ct,Mt,ke)||!1)?(ft||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(p,Mt,ke),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(p,Mt,ke)),typeof q.componentDidUpdate=="function"&&(a.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof q.componentDidUpdate!="function"||ce===n.memoizedProps&&ct===n.memoizedState||(a.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||ce===n.memoizedProps&&ct===n.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=Mt),q.props=p,q.state=Mt,q.context=ke,p=Ge):(typeof q.componentDidUpdate!="function"||ce===n.memoizedProps&&ct===n.memoizedState||(a.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||ce===n.memoizedProps&&ct===n.memoizedState||(a.flags|=1024),p=!1)}return rf(n,a,u,p,j,k)}function rf(n,a,u,p,k,j){T0(n,a);var q=(a.flags&128)!==0;if(!p&&!q)return k&&hd(a,u,!1),Jo(n,a,j);p=a.stateNode,U1.current=a;var ce=q&&typeof u.getDerivedStateFromError!="function"?null:p.render();return a.flags|=1,n!==null&&q?(a.child=Hn(a,n.child,null,j),a.child=Hn(a,null,ce,j)):ka(n,a,ce,j),a.memoizedState=p.state,k&&hd(a,u,!0),a.child}function D0(n){var a=n.stateNode;a.pendingContext?dd(n,a.pendingContext,a.pendingContext!==a.context):a.context&&dd(n,a.context,!1),vl(n,a.containerInfo)}function F0(n,a,u,p,k){return xr(),Kr(k),a.flags|=256,ka(n,a,u,p),a.child}var nf={dehydrated:null,treeContext:null,retryLane:0};function af(n){return{baseLanes:n,cachePool:null,transitions:null}}function M0(n,a,u){var p=a.pendingProps,k=un.current,j=!1,q=(a.flags&128)!==0,ce;if((ce=q)||(ce=n!==null&&n.memoizedState===null?!1:(k&2)!==0),ce?(j=!0,a.flags&=-129):(n===null||n.memoizedState!==null)&&(k|=1),Jr(un,k&1),n===null)return jt(a),n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((a.mode&1)===0?a.lanes=1:n.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(q=p.children,n=p.fallback,j?(p=a.mode,j=a.child,q={mode:"hidden",children:q},(p&1)===0&&j!==null?(j.childLanes=0,j.pendingProps=q):j=Od(q,p,0,null),n=eu(n,p,u,null),j.return=a,n.return=a,j.sibling=n,a.child=j,a.child.memoizedState=af(u),a.memoizedState=nf,n):sf(a,q));if(k=n.memoizedState,k!==null&&(ce=k.dehydrated,ce!==null))return z1(n,a,q,p,ce,k,u);if(j){j=p.fallback,q=a.mode,k=n.child,ce=k.sibling;var ke={mode:"hidden",children:p.children};return(q&1)===0&&a.child!==k?(p=a.child,p.childLanes=0,p.pendingProps=ke,a.deletions=null):(p=Al(k,ke),p.subtreeFlags=k.subtreeFlags&14680064),ce!==null?j=Al(ce,j):(j=eu(j,q,u,null),j.flags|=2),j.return=a,p.return=a,p.sibling=j,a.child=p,p=j,j=a.child,q=n.child.memoizedState,q=q===null?af(u):{baseLanes:q.baseLanes|u,cachePool:null,transitions:q.transitions},j.memoizedState=q,j.childLanes=n.childLanes&~u,a.memoizedState=nf,p}return j=n.child,n=j.sibling,p=Al(j,{mode:"visible",children:p.children}),(a.mode&1)===0&&(p.lanes=u),p.return=a,p.sibling=null,n!==null&&(u=a.deletions,u===null?(a.deletions=[n],a.flags|=16):u.push(n)),a.child=p,a.memoizedState=null,p}function sf(n,a){return a=Od({mode:"visible",children:a},n.mode,0,null),a.return=n,n.child=a}function bd(n,a,u,p){return p!==null&&Kr(p),Hn(a,n.child,null,u),n=sf(a,a.pendingProps.children),n.flags|=2,a.memoizedState=null,n}function z1(n,a,u,p,k,j,q){if(u)return a.flags&256?(a.flags&=-257,p=Zh(Error(r(422))),bd(n,a,q,p)):a.memoizedState!==null?(a.child=n.child,a.flags|=128,null):(j=p.fallback,k=a.mode,p=Od({mode:"visible",children:p.children},k,0,null),j=eu(j,k,q,null),j.flags|=2,p.return=a,j.return=a,p.sibling=j,a.child=p,(a.mode&1)!==0&&Hn(a,n.child,null,q),a.child.memoizedState=af(q),a.memoizedState=nf,j);if((a.mode&1)===0)return bd(n,a,q,null);if(k.data==="$!"){if(p=k.nextSibling&&k.nextSibling.dataset,p)var ce=p.dgst;return p=ce,j=Error(r(419)),p=Zh(j,p,void 0),bd(n,a,q,p)}if(ce=(q&n.childLanes)!==0,Ua||ce){if(p=Ni,p!==null){switch(q&-q){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:k=32;break;case 536870912:k=268435456;break;default:k=0}k=(k&(p.suspendedLanes|q))!==0?0:k,k!==0&&k!==j.retryLane&&(j.retryLane=k,Vr(n,k),to(p,n,k,-1))}return _f(),p=Zh(Error(r(421))),bd(n,a,q,p)}return k.data==="$?"?(a.flags|=128,a.child=n.child,a=ty.bind(null,n),k._reactRetry=a,null):(n=j.treeContext,et=Di(k.nextSibling),Ne=a,Ze=!0,tt=null,n!==null&&(K[Q++]=Be,K[Q++]=qe,K[Q++]=we,Be=n.id,qe=n.overflow,we=a),a=sf(a,p.children),a.flags|=4096,a)}function B0(n,a,u){n.lanes|=a;var p=n.alternate;p!==null&&(p.lanes|=a),Fa(n.return,a,u)}function of(n,a,u,p,k){var j=n.memoizedState;j===null?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:k}:(j.isBackwards=a,j.rendering=null,j.renderingStartTime=0,j.last=p,j.tail=u,j.tailMode=k)}function q0(n,a,u){var p=a.pendingProps,k=p.revealOrder,j=p.tail;if(ka(n,a,p.children,u),p=un.current,(p&2)!==0)p=p&1|2,a.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=a.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&B0(n,u,a);else if(n.tag===19)B0(n,u,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}p&=1}if(Jr(un,p),(a.mode&1)===0)a.memoizedState=null;else switch(k){case"forwards":for(u=a.child,k=null;u!==null;)n=u.alternate,n!==null&&is(n)===null&&(k=u),u=u.sibling;u=k,u===null?(k=a.child,a.child=null):(k=u.sibling,u.sibling=null),of(a,!1,k,u,j);break;case"backwards":for(u=null,k=a.child,a.child=null;k!==null;){if(n=k.alternate,n!==null&&is(n)===null){a.child=k;break}n=k.sibling,k.sibling=u,u=k,k=n}of(a,!0,u,null,j);break;case"together":of(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function xd(n,a){(a.mode&1)===0&&n!==null&&(n.alternate=null,a.alternate=null,a.flags|=2)}function Jo(n,a,u){if(n!==null&&(a.dependencies=n.dependencies),Yl|=a.lanes,(u&a.childLanes)===0)return null;if(n!==null&&a.child!==n.child)throw Error(r(153));if(a.child!==null){for(n=a.child,u=Al(n,n.pendingProps),a.child=u,u.return=a;n.sibling!==null;)n=n.sibling,u=u.sibling=Al(n,n.pendingProps),u.return=a;u.sibling=null}return a.child}function $1(n,a,u){switch(a.tag){case 3:D0(a),xr();break;case 5:fd(a);break;case 1:ea(a.type)&&Wo(a);break;case 4:vl(a,a.stateNode.containerInfo);break;case 10:var p=a.type._context,k=a.memoizedProps.value;Jr(ki,p._currentValue),p._currentValue=k;break;case 13:if(p=a.memoizedState,p!==null)return p.dehydrated!==null?(Jr(un,un.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?M0(n,a,u):(Jr(un,un.current&1),n=Jo(n,a,u),n!==null?n.sibling:null);Jr(un,un.current&1);break;case 19:if(p=(u&a.childLanes)!==0,(n.flags&128)!==0){if(p)return q0(n,a,u);a.flags|=128}if(k=a.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),Jr(un,un.current),p)break;return null;case 22:case 23:return a.lanes=0,O0(n,a,u)}return Jo(n,a,u)}var U0,lf,z0,$0;U0=function(n,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)n.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},lf=function(){},z0=function(n,a,u,p){var k=n.memoizedProps;if(k!==p){n=a.stateNode,Js(ba.current);var j=null;switch(u){case"input":k=qt(n,k),p=qt(n,p),j=[];break;case"select":k=_e({},k,{value:void 0}),p=_e({},p,{value:void 0}),j=[];break;case"textarea":k=St(n,k),p=St(n,p),j=[];break;default:typeof k.onClick!="function"&&typeof p.onClick=="function"&&(n.onclick=dl)}xt(u,p);var q;u=null;for(Ge in k)if(!p.hasOwnProperty(Ge)&&k.hasOwnProperty(Ge)&&k[Ge]!=null)if(Ge==="style"){var ce=k[Ge];for(q in ce)ce.hasOwnProperty(q)&&(u||(u={}),u[q]="")}else Ge!=="dangerouslySetInnerHTML"&&Ge!=="children"&&Ge!=="suppressContentEditableWarning"&&Ge!=="suppressHydrationWarning"&&Ge!=="autoFocus"&&(o.hasOwnProperty(Ge)?j||(j=[]):(j=j||[]).push(Ge,null));for(Ge in p){var ke=p[Ge];if(ce=k?.[Ge],p.hasOwnProperty(Ge)&&ke!==ce&&(ke!=null||ce!=null))if(Ge==="style")if(ce){for(q in ce)!ce.hasOwnProperty(q)||ke&&ke.hasOwnProperty(q)||(u||(u={}),u[q]="");for(q in ke)ke.hasOwnProperty(q)&&ce[q]!==ke[q]&&(u||(u={}),u[q]=ke[q])}else u||(j||(j=[]),j.push(Ge,u)),u=ke;else Ge==="dangerouslySetInnerHTML"?(ke=ke?ke.__html:void 0,ce=ce?ce.__html:void 0,ke!=null&&ce!==ke&&(j=j||[]).push(Ge,ke)):Ge==="children"?typeof ke!="string"&&typeof ke!="number"||(j=j||[]).push(Ge,""+ke):Ge!=="suppressContentEditableWarning"&&Ge!=="suppressHydrationWarning"&&(o.hasOwnProperty(Ge)?(ke!=null&&Ge==="onScroll"&&Zr("scroll",n),j||ce===ke||(j=[])):(j=j||[]).push(Ge,ke))}u&&(j=j||[]).push("style",u);var Ge=j;(a.updateQueue=Ge)&&(a.flags|=4)}},$0=function(n,a,u,p){u!==p&&(a.flags|=4)};function vc(n,a){if(!Ze)switch(n.tailMode){case"hidden":a=n.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?n.tail=null:u.sibling=null;break;case"collapsed":u=n.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?a||n.tail===null?n.tail=null:n.tail.sibling=null:p.sibling=null}}function ra(n){var a=n.alternate!==null&&n.alternate.child===n.child,u=0,p=0;if(a)for(var k=n.child;k!==null;)u|=k.lanes|k.childLanes,p|=k.subtreeFlags&14680064,p|=k.flags&14680064,k.return=n,k=k.sibling;else for(k=n.child;k!==null;)u|=k.lanes|k.childLanes,p|=k.subtreeFlags,p|=k.flags,k.return=n,k=k.sibling;return n.subtreeFlags|=p,n.childLanes=u,a}function V1(n,a,u){var p=a.pendingProps;switch(Se(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ra(a),null;case 1:return ea(a.type)&&mu(),ra(a),null;case 3:return p=a.stateNode,Es(),Hr(Zi),Hr(ui),pc(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(n===null||n.child===null)&&(Fr(a)?a.flags|=4:n===null||n.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,tt!==null&&(wf(tt),tt=null))),lf(n,a),ra(a),null;case 5:hc(a);var k=Js(jo.current);if(u=a.type,n!==null&&a.stateNode!=null)z0(n,a,u,p,k),n.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!p){if(a.stateNode===null)throw Error(r(166));return ra(a),null}if(n=Js(ba.current),Fr(a)){p=a.stateNode,u=a.type;var j=a.memoizedProps;switch(p[As]=a,p[hl]=j,n=(a.mode&1)!==0,u){case"dialog":Zr("cancel",p),Zr("close",p);break;case"iframe":case"object":case"embed":Zr("load",p);break;case"video":case"audio":for(k=0;k<ko.length;k++)Zr(ko[k],p);break;case"source":Zr("error",p);break;case"img":case"image":case"link":Zr("error",p),Zr("load",p);break;case"details":Zr("toggle",p);break;case"input":Je(p,j),Zr("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!j.multiple},Zr("invalid",p);break;case"textarea":Rt(p,j),Zr("invalid",p)}xt(u,j),k=null;for(var q in j)if(j.hasOwnProperty(q)){var ce=j[q];q==="children"?typeof ce=="string"?p.textContent!==ce&&(j.suppressHydrationWarning!==!0&&gu(p.textContent,ce,n),k=["children",ce]):typeof ce=="number"&&p.textContent!==""+ce&&(j.suppressHydrationWarning!==!0&&gu(p.textContent,ce,n),k=["children",""+ce]):o.hasOwnProperty(q)&&ce!=null&&q==="onScroll"&&Zr("scroll",p)}switch(u){case"input":at(p),Tt(p,j,!0);break;case"textarea":at(p),Qt(p);break;case"select":case"option":break;default:typeof j.onClick=="function"&&(p.onclick=dl)}p=k,a.updateQueue=p,p!==null&&(a.flags|=4)}else{q=k.nodeType===9?k:k.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=nr(u)),n==="http://www.w3.org/1999/xhtml"?u==="script"?(n=q.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof p.is=="string"?n=q.createElement(u,{is:p.is}):(n=q.createElement(u),u==="select"&&(q=n,p.multiple?q.multiple=!0:p.size&&(q.size=p.size))):n=q.createElementNS(n,u),n[As]=a,n[hl]=p,U0(n,a,!1,!1),a.stateNode=n;e:{switch(q=On(u,p),u){case"dialog":Zr("cancel",n),Zr("close",n),k=p;break;case"iframe":case"object":case"embed":Zr("load",n),k=p;break;case"video":case"audio":for(k=0;k<ko.length;k++)Zr(ko[k],n);k=p;break;case"source":Zr("error",n),k=p;break;case"img":case"image":case"link":Zr("error",n),Zr("load",n),k=p;break;case"details":Zr("toggle",n),k=p;break;case"input":Je(n,p),k=qt(n,p),Zr("invalid",n);break;case"option":k=p;break;case"select":n._wrapperState={wasMultiple:!!p.multiple},k=_e({},p,{value:void 0}),Zr("invalid",n);break;case"textarea":Rt(n,p),k=St(n,p),Zr("invalid",n);break;default:k=p}xt(u,k),ce=k;for(j in ce)if(ce.hasOwnProperty(j)){var ke=ce[j];j==="style"?Zn(n,ke):j==="dangerouslySetInnerHTML"?(ke=ke?ke.__html:void 0,ke!=null&&zt(n,ke)):j==="children"?typeof ke=="string"?(u!=="textarea"||ke!=="")&&ar(n,ke):typeof ke=="number"&&ar(n,""+ke):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(o.hasOwnProperty(j)?ke!=null&&j==="onScroll"&&Zr("scroll",n):ke!=null&&H(n,j,ke,q))}switch(u){case"input":at(n),Tt(n,p,!1);break;case"textarea":at(n),Qt(n);break;case"option":p.value!=null&&n.setAttribute("value",""+Ie(p.value));break;case"select":n.multiple=!!p.multiple,j=p.value,j!=null?vt(n,!!p.multiple,j,!1):p.defaultValue!=null&&vt(n,!!p.multiple,p.defaultValue,!0);break;default:typeof k.onClick=="function"&&(n.onclick=dl)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return ra(a),null;case 6:if(n&&a.stateNode!=null)$0(n,a,n.memoizedProps,p);else{if(typeof p!="string"&&a.stateNode===null)throw Error(r(166));if(u=Js(jo.current),Js(ba.current),Fr(a)){if(p=a.stateNode,u=a.memoizedProps,p[As]=a,(j=p.nodeValue!==u)&&(n=Ne,n!==null))switch(n.tag){case 3:gu(p.nodeValue,u,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&gu(p.nodeValue,u,(n.mode&1)!==0)}j&&(a.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[As]=a,a.stateNode=p}return ra(a),null;case 13:if(Hr(un),p=a.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ze&&et!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Ir(),xr(),a.flags|=98560,j=!1;else if(j=Fr(a),p!==null&&p.dehydrated!==null){if(n===null){if(!j)throw Error(r(318));if(j=a.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(r(317));j[As]=a}else xr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ra(a),j=!1}else tt!==null&&(wf(tt),tt=null),j=!0;if(!j)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(p=p!==null,p!==(n!==null&&n.memoizedState!==null)&&p&&(a.child.flags|=8192,(a.mode&1)!==0&&(n===null||(un.current&1)!==0?di===0&&(di=3):_f())),a.updateQueue!==null&&(a.flags|=4),ra(a),null);case 4:return Es(),lf(n,a),n===null&&qo(a.stateNode.containerInfo),ra(a),null;case 10:return ta(a.type._context),ra(a),null;case 17:return ea(a.type)&&mu(),ra(a),null;case 19:if(Hr(un),j=a.memoizedState,j===null)return ra(a),null;if(p=(a.flags&128)!==0,q=j.rendering,q===null)if(p)vc(j,!1);else{if(di!==0||n!==null&&(n.flags&128)!==0)for(n=a.child;n!==null;){if(q=is(n),q!==null){for(a.flags|=128,vc(j,!1),p=q.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),a.subtreeFlags=0,p=u,u=a.child;u!==null;)j=u,n=p,j.flags&=14680066,q=j.alternate,q===null?(j.childLanes=0,j.lanes=n,j.child=null,j.subtreeFlags=0,j.memoizedProps=null,j.memoizedState=null,j.updateQueue=null,j.dependencies=null,j.stateNode=null):(j.childLanes=q.childLanes,j.lanes=q.lanes,j.child=q.child,j.subtreeFlags=0,j.deletions=null,j.memoizedProps=q.memoizedProps,j.memoizedState=q.memoizedState,j.updateQueue=q.updateQueue,j.type=q.type,n=q.dependencies,j.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),u=u.sibling;return Jr(un,un.current&1|2),a.child}n=n.sibling}j.tail!==null&&Or()>Pu&&(a.flags|=128,p=!0,vc(j,!1),a.lanes=4194304)}else{if(!p)if(n=is(q),n!==null){if(a.flags|=128,p=!0,u=n.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),vc(j,!0),j.tail===null&&j.tailMode==="hidden"&&!q.alternate&&!Ze)return ra(a),null}else 2*Or()-j.renderingStartTime>Pu&&u!==1073741824&&(a.flags|=128,p=!0,vc(j,!1),a.lanes=4194304);j.isBackwards?(q.sibling=a.child,a.child=q):(u=j.last,u!==null?u.sibling=q:a.child=q,j.last=q)}return j.tail!==null?(a=j.tail,j.rendering=a,j.tail=a.sibling,j.renderingStartTime=Or(),a.sibling=null,u=un.current,Jr(un,p?u&1|2:u&1),a):(ra(a),null);case 22:case 23:return xf(),p=a.memoizedState!==null,n!==null&&n.memoizedState!==null!==p&&(a.flags|=8192),p&&(a.mode&1)!==0?(os&1073741824)!==0&&(ra(a),a.subtreeFlags&6&&(a.flags|=8192)):ra(a),null;case 24:return null;case 25:return null}throw Error(r(156,a.tag))}function W1(n,a){switch(Se(a),a.tag){case 1:return ea(a.type)&&mu(),n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 3:return Es(),Hr(Zi),Hr(ui),pc(),n=a.flags,(n&65536)!==0&&(n&128)===0?(a.flags=n&-65537|128,a):null;case 5:return hc(a),null;case 13:if(Hr(un),n=a.memoizedState,n!==null&&n.dehydrated!==null){if(a.alternate===null)throw Error(r(340));xr()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 19:return Hr(un),null;case 4:return Es(),null;case 10:return ta(a.type._context),null;case 22:case 23:return xf(),null;case 24:return null;default:return null}}var _d=!1,na=!1,H1=typeof WeakSet=="function"?WeakSet:Set,Dt=null;function Eu(n,a){var u=n.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){Fn(n,a,p)}else u.current=null}function uf(n,a,u){try{u()}catch(p){Fn(n,a,p)}}var V0=!1;function K1(n,a){if(Vl=Pa,n=Ce(),Ve(n)){if("selectionStart"in n)var u={start:n.selectionStart,end:n.selectionEnd};else e:{u=(u=n.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var k=p.anchorOffset,j=p.focusNode;p=p.focusOffset;try{u.nodeType,j.nodeType}catch{u=null;break e}var q=0,ce=-1,ke=-1,Ge=0,ft=0,mt=n,ct=null;t:for(;;){for(var Ot;mt!==u||k!==0&&mt.nodeType!==3||(ce=q+k),mt!==j||p!==0&&mt.nodeType!==3||(ke=q+p),mt.nodeType===3&&(q+=mt.nodeValue.length),(Ot=mt.firstChild)!==null;)ct=mt,mt=Ot;for(;;){if(mt===n)break t;if(ct===u&&++Ge===k&&(ce=q),ct===j&&++ft===p&&(ke=q),(Ot=mt.nextSibling)!==null)break;mt=ct,ct=mt.parentNode}mt=Ot}u=ce===-1||ke===-1?null:{start:ce,end:ke}}else u=null}u=u||{start:0,end:0}}else u=null;for(zo={focusedElem:n,selectionRange:u},Pa=!1,Dt=a;Dt!==null;)if(a=Dt,n=a.child,(a.subtreeFlags&1028)!==0&&n!==null)n.return=a,Dt=n;else for(;Dt!==null;){a=Dt;try{var Mt=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Mt!==null){var Wt=Mt.memoizedProps,Jn=Mt.memoizedState,$e=a.stateNode,Pe=$e.getSnapshotBeforeUpdate(a.elementType===a.type?Wt:Qs(a.type,Wt),Jn);$e.__reactInternalSnapshotBeforeUpdate=Pe}break;case 3:var We=a.stateNode.containerInfo;We.nodeType===1?We.textContent="":We.nodeType===9&&We.documentElement&&We.removeChild(We.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(_t){Fn(a,a.return,_t)}if(n=a.sibling,n!==null){n.return=a.return,Dt=n;break}Dt=a.return}return Mt=V0,V0=!1,Mt}function yc(n,a,u){var p=a.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var k=p=p.next;do{if((k.tag&n)===n){var j=k.destroy;k.destroy=void 0,j!==void 0&&uf(a,u,j)}k=k.next}while(k!==p)}}function kd(n,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&n)===n){var p=u.create;u.destroy=p()}u=u.next}while(u!==a)}}function cf(n){var a=n.ref;if(a!==null){var u=n.stateNode;switch(n.tag){case 5:n=u;break;default:n=u}typeof a=="function"?a(n):a.current=n}}function W0(n){var a=n.alternate;a!==null&&(n.alternate=null,W0(a)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(a=n.stateNode,a!==null&&(delete a[As],delete a[hl],delete a[Qi],delete a[Kh],delete a[Gh])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function H0(n){return n.tag===5||n.tag===3||n.tag===4}function K0(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||H0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function df(n,a,u){var p=n.tag;if(p===5||p===6)n=n.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(n,a):u.insertBefore(n,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(n,u)):(a=u,a.appendChild(n)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=dl));else if(p!==4&&(n=n.child,n!==null))for(df(n,a,u),n=n.sibling;n!==null;)df(n,a,u),n=n.sibling}function hf(n,a,u){var p=n.tag;if(p===5||p===6)n=n.stateNode,a?u.insertBefore(n,a):u.appendChild(n);else if(p!==4&&(n=n.child,n!==null))for(hf(n,a,u),n=n.sibling;n!==null;)hf(n,a,u),n=n.sibling}var Mi=null,Zs=!1;function xl(n,a,u){for(u=u.child;u!==null;)G0(n,a,u),u=u.sibling}function G0(n,a,u){if(si&&typeof si.onCommitFiberUnmount=="function")try{si.onCommitFiberUnmount(gs,u)}catch{}switch(u.tag){case 5:na||Eu(u,a);case 6:var p=Mi,k=Zs;Mi=null,xl(n,a,u),Mi=p,Zs=k,Mi!==null&&(Zs?(n=Mi,u=u.stateNode,n.nodeType===8?n.parentNode.removeChild(u):n.removeChild(u)):Mi.removeChild(u.stateNode));break;case 18:Mi!==null&&(Zs?(n=Mi,u=u.stateNode,n.nodeType===8?lc(n.parentNode,u):n.nodeType===1&&lc(n,u),Hi(n)):lc(Mi,u.stateNode));break;case 4:p=Mi,k=Zs,Mi=u.stateNode.containerInfo,Zs=!0,xl(n,a,u),Mi=p,Zs=k;break;case 0:case 11:case 14:case 15:if(!na&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){k=p=p.next;do{var j=k,q=j.destroy;j=j.tag,q!==void 0&&((j&2)!==0||(j&4)!==0)&&uf(u,a,q),k=k.next}while(k!==p)}xl(n,a,u);break;case 1:if(!na&&(Eu(u,a),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(ce){Fn(u,a,ce)}xl(n,a,u);break;case 21:xl(n,a,u);break;case 22:u.mode&1?(na=(p=na)||u.memoizedState!==null,xl(n,a,u),na=p):xl(n,a,u);break;default:xl(n,a,u)}}function J0(n){var a=n.updateQueue;if(a!==null){n.updateQueue=null;var u=n.stateNode;u===null&&(u=n.stateNode=new H1),a.forEach(function(p){var k=ry.bind(null,n,p);u.has(p)||(u.add(p),p.then(k,k))})}}function eo(n,a){var u=a.deletions;if(u!==null)for(var p=0;p<u.length;p++){var k=u[p];try{var j=n,q=a,ce=q;e:for(;ce!==null;){switch(ce.tag){case 5:Mi=ce.stateNode,Zs=!1;break e;case 3:Mi=ce.stateNode.containerInfo,Zs=!0;break e;case 4:Mi=ce.stateNode.containerInfo,Zs=!0;break e}ce=ce.return}if(Mi===null)throw Error(r(160));G0(j,q,k),Mi=null,Zs=!1;var ke=k.alternate;ke!==null&&(ke.return=null),k.return=null}catch(Ge){Fn(k,a,Ge)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)Y0(a,n),a=a.sibling}function Y0(n,a){var u=n.alternate,p=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(eo(a,n),Co(n),p&4){try{yc(3,n,n.return),kd(3,n)}catch(Wt){Fn(n,n.return,Wt)}try{yc(5,n,n.return)}catch(Wt){Fn(n,n.return,Wt)}}break;case 1:eo(a,n),Co(n),p&512&&u!==null&&Eu(u,u.return);break;case 5:if(eo(a,n),Co(n),p&512&&u!==null&&Eu(u,u.return),n.flags&32){var k=n.stateNode;try{ar(k,"")}catch(Wt){Fn(n,n.return,Wt)}}if(p&4&&(k=n.stateNode,k!=null)){var j=n.memoizedProps,q=u!==null?u.memoizedProps:j,ce=n.type,ke=n.updateQueue;if(n.updateQueue=null,ke!==null)try{ce==="input"&&j.type==="radio"&&j.name!=null&&se(k,j),On(ce,q);var Ge=On(ce,j);for(q=0;q<ke.length;q+=2){var ft=ke[q],mt=ke[q+1];ft==="style"?Zn(k,mt):ft==="dangerouslySetInnerHTML"?zt(k,mt):ft==="children"?ar(k,mt):H(k,ft,mt,Ge)}switch(ce){case"input":Xt(k,j);break;case"textarea":Yt(k,j);break;case"select":var ct=k._wrapperState.wasMultiple;k._wrapperState.wasMultiple=!!j.multiple;var Ot=j.value;Ot!=null?vt(k,!!j.multiple,Ot,!1):ct!==!!j.multiple&&(j.defaultValue!=null?vt(k,!!j.multiple,j.defaultValue,!0):vt(k,!!j.multiple,j.multiple?[]:"",!1))}k[hl]=j}catch(Wt){Fn(n,n.return,Wt)}}break;case 6:if(eo(a,n),Co(n),p&4){if(n.stateNode===null)throw Error(r(162));k=n.stateNode,j=n.memoizedProps;try{k.nodeValue=j}catch(Wt){Fn(n,n.return,Wt)}}break;case 3:if(eo(a,n),Co(n),p&4&&u!==null&&u.memoizedState.isDehydrated)try{Hi(a.containerInfo)}catch(Wt){Fn(n,n.return,Wt)}break;case 4:eo(a,n),Co(n);break;case 13:eo(a,n),Co(n),k=n.child,k.flags&8192&&(j=k.memoizedState!==null,k.stateNode.isHidden=j,!j||k.alternate!==null&&k.alternate.memoizedState!==null||(gf=Or())),p&4&&J0(n);break;case 22:if(ft=u!==null&&u.memoizedState!==null,n.mode&1?(na=(Ge=na)||ft,eo(a,n),na=Ge):eo(a,n),Co(n),p&8192){if(Ge=n.memoizedState!==null,(n.stateNode.isHidden=Ge)&&!ft&&(n.mode&1)!==0)for(Dt=n,ft=n.child;ft!==null;){for(mt=Dt=ft;Dt!==null;){switch(ct=Dt,Ot=ct.child,ct.tag){case 0:case 11:case 14:case 15:yc(4,ct,ct.return);break;case 1:Eu(ct,ct.return);var Mt=ct.stateNode;if(typeof Mt.componentWillUnmount=="function"){p=ct,u=ct.return;try{a=p,Mt.props=a.memoizedProps,Mt.state=a.memoizedState,Mt.componentWillUnmount()}catch(Wt){Fn(p,u,Wt)}}break;case 5:Eu(ct,ct.return);break;case 22:if(ct.memoizedState!==null){Z0(mt);continue}}Ot!==null?(Ot.return=ct,Dt=Ot):Z0(mt)}ft=ft.sibling}e:for(ft=null,mt=n;;){if(mt.tag===5){if(ft===null){ft=mt;try{k=mt.stateNode,Ge?(j=k.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none"):(ce=mt.stateNode,ke=mt.memoizedProps.style,q=ke!=null&&ke.hasOwnProperty("display")?ke.display:null,ce.style.display=kr("display",q))}catch(Wt){Fn(n,n.return,Wt)}}}else if(mt.tag===6){if(ft===null)try{mt.stateNode.nodeValue=Ge?"":mt.memoizedProps}catch(Wt){Fn(n,n.return,Wt)}}else if((mt.tag!==22&&mt.tag!==23||mt.memoizedState===null||mt===n)&&mt.child!==null){mt.child.return=mt,mt=mt.child;continue}if(mt===n)break e;for(;mt.sibling===null;){if(mt.return===null||mt.return===n)break e;ft===mt&&(ft=null),mt=mt.return}ft===mt&&(ft=null),mt.sibling.return=mt.return,mt=mt.sibling}}break;case 19:eo(a,n),Co(n),p&4&&J0(n);break;case 21:break;default:eo(a,n),Co(n)}}function Co(n){var a=n.flags;if(a&2){try{e:{for(var u=n.return;u!==null;){if(H0(u)){var p=u;break e}u=u.return}throw Error(r(160))}switch(p.tag){case 5:var k=p.stateNode;p.flags&32&&(ar(k,""),p.flags&=-33);var j=K0(n);hf(n,j,k);break;case 3:case 4:var q=p.stateNode.containerInfo,ce=K0(n);df(n,ce,q);break;default:throw Error(r(161))}}catch(ke){Fn(n,n.return,ke)}n.flags&=-3}a&4096&&(n.flags&=-4097)}function G1(n,a,u){Dt=n,X0(n)}function X0(n,a,u){for(var p=(n.mode&1)!==0;Dt!==null;){var k=Dt,j=k.child;if(k.tag===22&&p){var q=k.memoizedState!==null||_d;if(!q){var ce=k.alternate,ke=ce!==null&&ce.memoizedState!==null||na;ce=_d;var Ge=na;if(_d=q,(na=ke)&&!Ge)for(Dt=k;Dt!==null;)q=Dt,ke=q.child,q.tag===22&&q.memoizedState!==null?eg(k):ke!==null?(ke.return=q,Dt=ke):eg(k);for(;j!==null;)Dt=j,X0(j),j=j.sibling;Dt=k,_d=ce,na=Ge}Q0(n)}else(k.subtreeFlags&8772)!==0&&j!==null?(j.return=k,Dt=j):Q0(n)}}function Q0(n){for(;Dt!==null;){var a=Dt;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:na||kd(5,a);break;case 1:var p=a.stateNode;if(a.flags&4&&!na)if(u===null)p.componentDidMount();else{var k=a.elementType===a.type?u.memoizedProps:Qs(a.type,u.memoizedProps);p.componentDidUpdate(k,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var j=a.updateQueue;j!==null&&Ko(a,j,p);break;case 3:var q=a.updateQueue;if(q!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}Ko(a,q,u)}break;case 5:var ce=a.stateNode;if(u===null&&a.flags&4){u=ce;var ke=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":ke.autoFocus&&u.focus();break;case"img":ke.src&&(u.src=ke.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var Ge=a.alternate;if(Ge!==null){var ft=Ge.memoizedState;if(ft!==null){var mt=ft.dehydrated;mt!==null&&Hi(mt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}na||a.flags&512&&cf(a)}catch(ct){Fn(a,a.return,ct)}}if(a===n){Dt=null;break}if(u=a.sibling,u!==null){u.return=a.return,Dt=u;break}Dt=a.return}}function Z0(n){for(;Dt!==null;){var a=Dt;if(a===n){Dt=null;break}var u=a.sibling;if(u!==null){u.return=a.return,Dt=u;break}Dt=a.return}}function eg(n){for(;Dt!==null;){var a=Dt;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{kd(4,a)}catch(ke){Fn(a,u,ke)}break;case 1:var p=a.stateNode;if(typeof p.componentDidMount=="function"){var k=a.return;try{p.componentDidMount()}catch(ke){Fn(a,k,ke)}}var j=a.return;try{cf(a)}catch(ke){Fn(a,j,ke)}break;case 5:var q=a.return;try{cf(a)}catch(ke){Fn(a,q,ke)}}}catch(ke){Fn(a,a.return,ke)}if(a===n){Dt=null;break}var ce=a.sibling;if(ce!==null){ce.return=a.return,Dt=ce;break}Dt=a.return}}var J1=Math.ceil,Sd=oe.ReactCurrentDispatcher,ff=oe.ReactCurrentOwner,Ls=oe.ReactCurrentBatchConfig,Br=0,Ni=null,ni=null,Bi=0,os=0,Cu=ns(0),di=0,wc=null,Yl=0,Nd=0,pf=0,bc=null,za=null,gf=0,Pu=1/0,Yo=null,Ad=!1,mf=null,_l=null,jd=!1,kl=null,Ed=0,xc=0,vf=null,Cd=-1,Pd=0;function Sa(){return(Br&6)!==0?Or():Cd!==-1?Cd:Cd=Or()}function Sl(n){return(n.mode&1)===0?1:(Br&2)!==0&&Bi!==0?Bi&-Bi:Yr.transition!==null?(Pd===0&&(Pd=po()),Pd):(n=Rr,n!==0||(n=window.event,n=n===void 0?16:Bo(n.type)),n)}function to(n,a,u,p){if(50<xc)throw xc=0,vf=null,Error(r(185));Ga(n,u,p),((Br&2)===0||n!==Ni)&&(n===Ni&&((Br&2)===0&&(Nd|=u),di===4&&Nl(n,Bi)),$a(n,p),u===1&&Br===0&&(a.mode&1)===0&&(Pu=Or()+500,Hl&&E()))}function $a(n,a){var u=n.callbackNode;ti(n,a);var p=En(n,n===Ni?Bi:0);if(p===0)u!==null&&Ka(u),n.callbackNode=null,n.callbackPriority=0;else if(a=p&-p,n.callbackPriority!==a){if(u!=null&&Ka(u),a===1)n.tag===0?S(rg.bind(null,n)):m(rg.bind(null,n)),Wh(function(){(Br&6)===0&&E()}),u=null;else{switch(Nr(p)){case 1:u=Oi;break;case 4:u=fs;break;case 16:u=ps;break;case 536870912:u=Ea;break;default:u=ps}u=cg(u,tg.bind(null,n))}n.callbackPriority=a,n.callbackNode=u}}function tg(n,a){if(Cd=-1,Pd=0,(Br&6)!==0)throw Error(r(327));var u=n.callbackNode;if(Lu()&&n.callbackNode!==u)return null;var p=En(n,n===Ni?Bi:0);if(p===0)return null;if((p&30)!==0||(p&n.expiredLanes)!==0||a)a=Ld(n,p);else{a=p;var k=Br;Br|=2;var j=ig();(Ni!==n||Bi!==a)&&(Yo=null,Pu=Or()+500,Ql(n,a));do try{Q1();break}catch(ce){ng(n,ce)}while(!0);ci(),Sd.current=j,Br=k,ni!==null?a=0:(Ni=null,Bi=0,a=di)}if(a!==0){if(a===2&&(k=Ca(n),k!==0&&(p=k,a=yf(n,k))),a===1)throw u=wc,Ql(n,0),Nl(n,p),$a(n,Or()),u;if(a===6)Nl(n,p);else{if(k=n.current.alternate,(p&30)===0&&!Y1(k)&&(a=Ld(n,p),a===2&&(j=Ca(n),j!==0&&(p=j,a=yf(n,j))),a===1))throw u=wc,Ql(n,0),Nl(n,p),$a(n,Or()),u;switch(n.finishedWork=k,n.finishedLanes=p,a){case 0:case 1:throw Error(r(345));case 2:Zl(n,za,Yo);break;case 3:if(Nl(n,p),(p&130023424)===p&&(a=gf+500-Or(),10<a)){if(En(n,0)!==0)break;if(k=n.suspendedLanes,(k&p)!==p){Sa(),n.pingedLanes|=n.suspendedLanes&k;break}n.timeoutHandle=oc(Zl.bind(null,n,za,Yo),a);break}Zl(n,za,Yo);break;case 4:if(Nl(n,p),(p&4194240)===p)break;for(a=n.eventTimes,k=-1;0<p;){var q=31-ir(p);j=1<<q,q=a[q],q>k&&(k=q),p&=~j}if(p=k,p=Or()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*J1(p/1960))-p,10<p){n.timeoutHandle=oc(Zl.bind(null,n,za,Yo),p);break}Zl(n,za,Yo);break;case 5:Zl(n,za,Yo);break;default:throw Error(r(329))}}}return $a(n,Or()),n.callbackNode===u?tg.bind(null,n):null}function yf(n,a){var u=bc;return n.current.memoizedState.isDehydrated&&(Ql(n,a).flags|=256),n=Ld(n,a),n!==2&&(a=za,za=u,a!==null&&wf(a)),n}function wf(n){za===null?za=n:za.push.apply(za,n)}function Y1(n){for(var a=n;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var k=u[p],j=k.getSnapshot;k=k.value;try{if(!re(j(),k))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Nl(n,a){for(a&=~pf,a&=~Nd,n.suspendedLanes|=a,n.pingedLanes&=~a,n=n.expirationTimes;0<a;){var u=31-ir(a),p=1<<u;n[u]=-1,a&=~p}}function rg(n){if((Br&6)!==0)throw Error(r(327));Lu();var a=En(n,0);if((a&1)===0)return $a(n,Or()),null;var u=Ld(n,a);if(n.tag!==0&&u===2){var p=Ca(n);p!==0&&(a=p,u=yf(n,p))}if(u===1)throw u=wc,Ql(n,0),Nl(n,a),$a(n,Or()),u;if(u===6)throw Error(r(345));return n.finishedWork=n.current.alternate,n.finishedLanes=a,Zl(n,za,Yo),$a(n,Or()),null}function bf(n,a){var u=Br;Br|=1;try{return n(a)}finally{Br=u,Br===0&&(Pu=Or()+500,Hl&&E())}}function Xl(n){kl!==null&&kl.tag===0&&(Br&6)===0&&Lu();var a=Br;Br|=1;var u=Ls.transition,p=Rr;try{if(Ls.transition=null,Rr=1,n)return n()}finally{Rr=p,Ls.transition=u,Br=a,(Br&6)===0&&E()}}function xf(){os=Cu.current,Hr(Cu)}function Ql(n,a){n.finishedWork=null,n.finishedLanes=0;var u=n.timeoutHandle;if(u!==-1&&(n.timeoutHandle=-1,ud(u)),ni!==null)for(u=ni.return;u!==null;){var p=u;switch(Se(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&mu();break;case 3:Es(),Hr(Zi),Hr(ui),pc();break;case 5:hc(p);break;case 4:Es();break;case 13:Hr(un);break;case 19:Hr(un);break;case 10:ta(p.type._context);break;case 22:case 23:xf()}u=u.return}if(Ni=n,ni=n=Al(n.current,null),Bi=os=a,di=0,wc=null,pf=Nd=Yl=0,za=bc=null,wa!==null){for(a=0;a<wa.length;a++)if(u=wa[a],p=u.interleaved,p!==null){u.interleaved=null;var k=p.next,j=u.pending;if(j!==null){var q=j.next;j.next=k,p.next=q}u.pending=p}wa=null}return n}function ng(n,a){do{var u=ni;try{if(ci(),yu.current=yd,yl){for(var p=vn.memoizedState;p!==null;){var k=p.queue;k!==null&&(k.pending=null),p=p.next}yl=!1}if(Cs=0,Ln=Dn=vn=null,Ys=!1,wl=0,ff.current=null,u===null||u.return===null){di=1,wc=a,ni=null;break}e:{var j=n,q=u.return,ce=u,ke=a;if(a=Bi,ce.flags|=32768,ke!==null&&typeof ke=="object"&&typeof ke.then=="function"){var Ge=ke,ft=ce,mt=ft.tag;if((ft.mode&1)===0&&(mt===0||mt===11||mt===15)){var ct=ft.alternate;ct?(ft.updateQueue=ct.updateQueue,ft.memoizedState=ct.memoizedState,ft.lanes=ct.lanes):(ft.updateQueue=null,ft.memoizedState=null)}var Ot=E0(q);if(Ot!==null){Ot.flags&=-257,C0(Ot,q,ce,j,a),Ot.mode&1&&j0(j,Ge,a),a=Ot,ke=Ge;var Mt=a.updateQueue;if(Mt===null){var Wt=new Set;Wt.add(ke),a.updateQueue=Wt}else Mt.add(ke);break e}else{if((a&1)===0){j0(j,Ge,a),_f();break e}ke=Error(r(426))}}else if(Ze&&ce.mode&1){var Jn=E0(q);if(Jn!==null){(Jn.flags&65536)===0&&(Jn.flags|=256),C0(Jn,q,ce,j,a),Kr(ju(ke,ce));break e}}j=ke=ju(ke,ce),di!==4&&(di=2),bc===null?bc=[j]:bc.push(j),j=q;do{switch(j.tag){case 3:j.flags|=65536,a&=-a,j.lanes|=a;var $e=N0(j,ke,a);qa(j,$e);break e;case 1:ce=ke;var Pe=j.type,We=j.stateNode;if((j.flags&128)===0&&(typeof Pe.getDerivedStateFromError=="function"||We!==null&&typeof We.componentDidCatch=="function"&&(_l===null||!_l.has(We)))){j.flags|=65536,a&=-a,j.lanes|=a;var _t=A0(j,ce,a);qa(j,_t);break e}}j=j.return}while(j!==null)}sg(u)}catch(Ht){a=Ht,ni===u&&u!==null&&(ni=u=u.return);continue}break}while(!0)}function ig(){var n=Sd.current;return Sd.current=yd,n===null?yd:n}function _f(){(di===0||di===3||di===2)&&(di=4),Ni===null||(Yl&268435455)===0&&(Nd&268435455)===0||Nl(Ni,Bi)}function Ld(n,a){var u=Br;Br|=2;var p=ig();(Ni!==n||Bi!==a)&&(Yo=null,Ql(n,a));do try{X1();break}catch(k){ng(n,k)}while(!0);if(ci(),Br=u,Sd.current=p,ni!==null)throw Error(r(261));return Ni=null,Bi=0,di}function X1(){for(;ni!==null;)ag(ni)}function Q1(){for(;ni!==null&&!Gr();)ag(ni)}function ag(n){var a=ug(n.alternate,n,os);n.memoizedProps=n.pendingProps,a===null?sg(n):ni=a,ff.current=null}function sg(n){var a=n;do{var u=a.alternate;if(n=a.return,(a.flags&32768)===0){if(u=V1(u,a,os),u!==null){ni=u;return}}else{if(u=W1(u,a),u!==null){u.flags&=32767,ni=u;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{di=6,ni=null;return}}if(a=a.sibling,a!==null){ni=a;return}ni=a=n}while(a!==null);di===0&&(di=5)}function Zl(n,a,u){var p=Rr,k=Ls.transition;try{Ls.transition=null,Rr=1,Z1(n,a,u,p)}finally{Ls.transition=k,Rr=p}return null}function Z1(n,a,u,p){do Lu();while(kl!==null);if((Br&6)!==0)throw Error(r(327));u=n.finishedWork;var k=n.finishedLanes;if(u===null)return null;if(n.finishedWork=null,n.finishedLanes=0,u===n.current)throw Error(r(177));n.callbackNode=null,n.callbackPriority=0;var j=u.lanes|u.childLanes;if(Ds(n,j),n===Ni&&(ni=Ni=null,Bi=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||jd||(jd=!0,cg(ps,function(){return Lu(),null})),j=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||j){j=Ls.transition,Ls.transition=null;var q=Rr;Rr=1;var ce=Br;Br|=4,ff.current=null,K1(n,u),Y0(u,n),He(zo),Pa=!!Vl,zo=Vl=null,n.current=u,G1(u),ja(),Br=ce,Rr=q,Ls.transition=j}else n.current=u;if(jd&&(jd=!1,kl=n,Ed=k),j=n.pendingLanes,j===0&&(_l=null),Rs(u.stateNode),$a(n,Or()),a!==null)for(p=n.onRecoverableError,u=0;u<a.length;u++)k=a[u],p(k.value,{componentStack:k.stack,digest:k.digest});if(Ad)throw Ad=!1,n=mf,mf=null,n;return(Ed&1)!==0&&n.tag!==0&&Lu(),j=n.pendingLanes,(j&1)!==0?n===vf?xc++:(xc=0,vf=n):xc=0,E(),null}function Lu(){if(kl!==null){var n=Nr(Ed),a=Ls.transition,u=Rr;try{if(Ls.transition=null,Rr=16>n?16:n,kl===null)var p=!1;else{if(n=kl,kl=null,Ed=0,(Br&6)!==0)throw Error(r(331));var k=Br;for(Br|=4,Dt=n.current;Dt!==null;){var j=Dt,q=j.child;if((Dt.flags&16)!==0){var ce=j.deletions;if(ce!==null){for(var ke=0;ke<ce.length;ke++){var Ge=ce[ke];for(Dt=Ge;Dt!==null;){var ft=Dt;switch(ft.tag){case 0:case 11:case 15:yc(8,ft,j)}var mt=ft.child;if(mt!==null)mt.return=ft,Dt=mt;else for(;Dt!==null;){ft=Dt;var ct=ft.sibling,Ot=ft.return;if(W0(ft),ft===Ge){Dt=null;break}if(ct!==null){ct.return=Ot,Dt=ct;break}Dt=Ot}}}var Mt=j.alternate;if(Mt!==null){var Wt=Mt.child;if(Wt!==null){Mt.child=null;do{var Jn=Wt.sibling;Wt.sibling=null,Wt=Jn}while(Wt!==null)}}Dt=j}}if((j.subtreeFlags&2064)!==0&&q!==null)q.return=j,Dt=q;else e:for(;Dt!==null;){if(j=Dt,(j.flags&2048)!==0)switch(j.tag){case 0:case 11:case 15:yc(9,j,j.return)}var $e=j.sibling;if($e!==null){$e.return=j.return,Dt=$e;break e}Dt=j.return}}var Pe=n.current;for(Dt=Pe;Dt!==null;){q=Dt;var We=q.child;if((q.subtreeFlags&2064)!==0&&We!==null)We.return=q,Dt=We;else e:for(q=Pe;Dt!==null;){if(ce=Dt,(ce.flags&2048)!==0)try{switch(ce.tag){case 0:case 11:case 15:kd(9,ce)}}catch(Ht){Fn(ce,ce.return,Ht)}if(ce===q){Dt=null;break e}var _t=ce.sibling;if(_t!==null){_t.return=ce.return,Dt=_t;break e}Dt=ce.return}}if(Br=k,E(),si&&typeof si.onPostCommitFiberRoot=="function")try{si.onPostCommitFiberRoot(gs,n)}catch{}p=!0}return p}finally{Rr=u,Ls.transition=a}}return!1}function og(n,a,u){a=ju(u,a),a=N0(n,a,1),n=Ba(n,a,1),a=Sa(),n!==null&&(Ga(n,1,a),$a(n,a))}function Fn(n,a,u){if(n.tag===3)og(n,n,u);else for(;a!==null;){if(a.tag===3){og(a,n,u);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(_l===null||!_l.has(p))){n=ju(u,n),n=A0(a,n,1),a=Ba(a,n,1),n=Sa(),a!==null&&(Ga(a,1,n),$a(a,n));break}}a=a.return}}function ey(n,a,u){var p=n.pingCache;p!==null&&p.delete(a),a=Sa(),n.pingedLanes|=n.suspendedLanes&u,Ni===n&&(Bi&u)===u&&(di===4||di===3&&(Bi&130023424)===Bi&&500>Or()-gf?Ql(n,0):pf|=u),$a(n,a)}function lg(n,a){a===0&&((n.mode&1)===0?a=1:(a=zi,zi<<=1,(zi&130023424)===0&&(zi=4194304)));var u=Sa();n=Vr(n,a),n!==null&&(Ga(n,a,u),$a(n,u))}function ty(n){var a=n.memoizedState,u=0;a!==null&&(u=a.retryLane),lg(n,u)}function ry(n,a){var u=0;switch(n.tag){case 13:var p=n.stateNode,k=n.memoizedState;k!==null&&(u=k.retryLane);break;case 19:p=n.stateNode;break;default:throw Error(r(314))}p!==null&&p.delete(a),lg(n,u)}var ug;ug=function(n,a,u){if(n!==null)if(n.memoizedProps!==a.pendingProps||Zi.current)Ua=!0;else{if((n.lanes&u)===0&&(a.flags&128)===0)return Ua=!1,$1(n,a,u);Ua=(n.flags&131072)!==0}else Ua=!1,Ze&&(a.flags&1048576)!==0&&nt(a,W,a.index);switch(a.lanes=0,a.tag){case 2:var p=a.type;xd(n,a),n=a.pendingProps;var k=pl(a,ui.current);kn(a,u),k=Kl(null,a,p,n,k,u);var j=Ps();return a.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,ea(p)?(j=!0,Wo(a)):j=!1,a.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,vu(a),k.updater=wd,a.stateNode=k,k._reactInternals=a,Qh(a,p,n,u),a=rf(null,a,p,!0,j,u)):(a.tag=0,Ze&&j&&Ye(a),ka(null,a,k,u),a=a.child),a;case 16:p=a.elementType;e:{switch(xd(n,a),n=a.pendingProps,k=p._init,p=k(p._payload),a.type=p,k=a.tag=iy(p),n=Qs(p,n),k){case 0:a=tf(null,a,p,n,u);break e;case 1:a=R0(null,a,p,n,u);break e;case 11:a=P0(null,a,p,n,u);break e;case 14:a=L0(null,a,p,Qs(p.type,n),u);break e}throw Error(r(306,p,""))}return a;case 0:return p=a.type,k=a.pendingProps,k=a.elementType===p?k:Qs(p,k),tf(n,a,p,k,u);case 1:return p=a.type,k=a.pendingProps,k=a.elementType===p?k:Qs(p,k),R0(n,a,p,k,u);case 3:e:{if(D0(a),n===null)throw Error(r(387));p=a.pendingProps,j=a.memoizedState,k=j.element,dc(n,a),Gs(a,p,null,u);var q=a.memoizedState;if(p=q.element,j.isDehydrated)if(j={element:p,isDehydrated:!1,cache:q.cache,pendingSuspenseBoundaries:q.pendingSuspenseBoundaries,transitions:q.transitions},a.updateQueue.baseState=j,a.memoizedState=j,a.flags&256){k=ju(Error(r(423)),a),a=F0(n,a,p,u,k);break e}else if(p!==k){k=ju(Error(r(424)),a),a=F0(n,a,p,u,k);break e}else for(et=Di(a.stateNode.containerInfo.firstChild),Ne=a,Ze=!0,tt=null,u=$r(a,null,p,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(xr(),p===k){a=Jo(n,a,u);break e}ka(n,a,p,u)}a=a.child}return a;case 5:return fd(a),n===null&&jt(a),p=a.type,k=a.pendingProps,j=n!==null?n.memoizedProps:null,q=k.children,sc(p,k)?q=null:j!==null&&sc(p,j)&&(a.flags|=32),T0(n,a),ka(n,a,q,u),a.child;case 6:return n===null&&jt(a),null;case 13:return M0(n,a,u);case 4:return vl(a,a.stateNode.containerInfo),p=a.pendingProps,n===null?a.child=Hn(a,null,p,u):ka(n,a,p,u),a.child;case 11:return p=a.type,k=a.pendingProps,k=a.elementType===p?k:Qs(p,k),P0(n,a,p,k,u);case 7:return ka(n,a,a.pendingProps,u),a.child;case 8:return ka(n,a,a.pendingProps.children,u),a.child;case 12:return ka(n,a,a.pendingProps.children,u),a.child;case 10:e:{if(p=a.type._context,k=a.pendingProps,j=a.memoizedProps,q=k.value,Jr(ki,p._currentValue),p._currentValue=q,j!==null)if(re(j.value,q)){if(j.children===k.children&&!Zi.current){a=Jo(n,a,u);break e}}else for(j=a.child,j!==null&&(j.return=a);j!==null;){var ce=j.dependencies;if(ce!==null){q=j.child;for(var ke=ce.firstContext;ke!==null;){if(ke.context===p){if(j.tag===1){ke=Ma(-1,u&-u),ke.tag=2;var Ge=j.updateQueue;if(Ge!==null){Ge=Ge.shared;var ft=Ge.pending;ft===null?ke.next=ke:(ke.next=ft.next,ft.next=ke),Ge.pending=ke}}j.lanes|=u,ke=j.alternate,ke!==null&&(ke.lanes|=u),Fa(j.return,u,a),ce.lanes|=u;break}ke=ke.next}}else if(j.tag===10)q=j.type===a.type?null:j.child;else if(j.tag===18){if(q=j.return,q===null)throw Error(r(341));q.lanes|=u,ce=q.alternate,ce!==null&&(ce.lanes|=u),Fa(q,u,a),q=j.sibling}else q=j.child;if(q!==null)q.return=j;else for(q=j;q!==null;){if(q===a){q=null;break}if(j=q.sibling,j!==null){j.return=q.return,q=j;break}q=q.return}j=q}ka(n,a,k.children,u),a=a.child}return a;case 9:return k=a.type,p=a.pendingProps.children,kn(a,u),k=Rn(k),p=p(k),a.flags|=1,ka(n,a,p,u),a.child;case 14:return p=a.type,k=Qs(p,a.pendingProps),k=Qs(p.type,k),L0(n,a,p,k,u);case 15:return I0(n,a,a.type,a.pendingProps,u);case 17:return p=a.type,k=a.pendingProps,k=a.elementType===p?k:Qs(p,k),xd(n,a),a.tag=1,ea(p)?(n=!0,Wo(a)):n=!1,kn(a,u),k0(a,p,k),Qh(a,p,k,u),rf(null,a,p,!0,n,u);case 19:return q0(n,a,u);case 22:return O0(n,a,u)}throw Error(r(156,a.tag))};function cg(n,a){return hs(n,a)}function ny(n,a,u,p){this.tag=n,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Is(n,a,u,p){return new ny(n,a,u,p)}function kf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function iy(n){if(typeof n=="function")return kf(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Y)return 11;if(n===Ue)return 14}return 2}function Al(n,a){var u=n.alternate;return u===null?(u=Is(n.tag,a,n.key,n.mode),u.elementType=n.elementType,u.type=n.type,u.stateNode=n.stateNode,u.alternate=n,n.alternate=u):(u.pendingProps=a,u.type=n.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=n.flags&14680064,u.childLanes=n.childLanes,u.lanes=n.lanes,u.child=n.child,u.memoizedProps=n.memoizedProps,u.memoizedState=n.memoizedState,u.updateQueue=n.updateQueue,a=n.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=n.sibling,u.index=n.index,u.ref=n.ref,u}function Id(n,a,u,p,k,j){var q=2;if(p=n,typeof n=="function")kf(n)&&(q=1);else if(typeof n=="string")q=5;else e:switch(n){case ne:return eu(u.children,k,j,a);case G:q=8,k|=8;break;case fe:return n=Is(12,u,a,k|2),n.elementType=fe,n.lanes=j,n;case pe:return n=Is(13,u,a,k),n.elementType=pe,n.lanes=j,n;case te:return n=Is(19,u,a,k),n.elementType=te,n.lanes=j,n;case ze:return Od(u,k,j,a);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Te:q=10;break e;case V:q=9;break e;case Y:q=11;break e;case Ue:q=14;break e;case Me:q=16,p=null;break e}throw Error(r(130,n==null?n:typeof n,""))}return a=Is(q,u,a,k),a.elementType=n,a.type=p,a.lanes=j,a}function eu(n,a,u,p){return n=Is(7,n,p,a),n.lanes=u,n}function Od(n,a,u,p){return n=Is(22,n,p,a),n.elementType=ze,n.lanes=u,n.stateNode={isHidden:!1},n}function Sf(n,a,u){return n=Is(6,n,null,a),n.lanes=u,n}function Nf(n,a,u){return a=Is(4,n.children!==null?n.children:[],n.key,a),a.lanes=u,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}function ay(n,a,u,p,k){this.tag=a,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vs(0),this.expirationTimes=vs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vs(0),this.identifierPrefix=p,this.onRecoverableError=k,this.mutableSourceEagerHydrationData=null}function Af(n,a,u,p,k,j,q,ce,ke){return n=new ay(n,a,u,ce,ke),a===1?(a=1,j===!0&&(a|=8)):a=0,j=Is(3,null,null,a),n.current=j,j.stateNode=n,j.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},vu(j),n}function sy(n,a,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:be,key:p==null?null:""+p,children:n,containerInfo:a,implementation:u}}function dg(n){if(!n)return No;n=n._reactInternals;e:{if(tn(n)!==n||n.tag!==1)throw Error(r(170));var a=n;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(ea(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(r(171))}if(n.tag===1){var u=n.type;if(ea(u))return cc(n,u,a)}return a}function hg(n,a,u,p,k,j,q,ce,ke){return n=Af(u,p,!0,n,k,j,q,ce,ke),n.context=dg(null),u=n.current,p=Sa(),k=Sl(u),j=Ma(p,k),j.callback=a??null,Ba(u,j,k),n.current.lanes=k,Ga(n,k,p),$a(n,p),n}function Td(n,a,u,p){var k=a.current,j=Sa(),q=Sl(k);return u=dg(u),a.context===null?a.context=u:a.pendingContext=u,a=Ma(j,q),a.payload={element:n},p=p===void 0?null:p,p!==null&&(a.callback=p),n=Ba(k,a,q),n!==null&&(to(n,k,q,j),Ho(n,k,q)),q}function Rd(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function fg(n,a){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var u=n.retryLane;n.retryLane=u!==0&&u<a?u:a}}function jf(n,a){fg(n,a),(n=n.alternate)&&fg(n,a)}function oy(){return null}var pg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Ef(n){this._internalRoot=n}Dd.prototype.render=Ef.prototype.render=function(n){var a=this._internalRoot;if(a===null)throw Error(r(409));Td(n,a,null,null)},Dd.prototype.unmount=Ef.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var a=n.containerInfo;Xl(function(){Td(null,n,null,null)}),a[_i]=null}};function Dd(n){this._internalRoot=n}Dd.prototype.unstable_scheduleHydration=function(n){if(n){var a=fn();n={blockedOn:null,target:n,priority:a};for(var u=0;u<yi.length&&a!==0&&a<yi[u].priority;u++);yi.splice(u,0,n),u===0&&ws(n)}};function Cf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Fd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function gg(){}function ly(n,a,u,p,k){if(k){if(typeof p=="function"){var j=p;p=function(){var Ge=Rd(q);j.call(Ge)}}var q=hg(a,p,n,0,null,!1,!1,"",gg);return n._reactRootContainer=q,n[_i]=q.current,qo(n.nodeType===8?n.parentNode:n),Xl(),q}for(;k=n.lastChild;)n.removeChild(k);if(typeof p=="function"){var ce=p;p=function(){var Ge=Rd(ke);ce.call(Ge)}}var ke=Af(n,0,!1,null,null,!1,!1,"",gg);return n._reactRootContainer=ke,n[_i]=ke.current,qo(n.nodeType===8?n.parentNode:n),Xl(function(){Td(a,ke,u,p)}),ke}function Md(n,a,u,p,k){var j=u._reactRootContainer;if(j){var q=j;if(typeof k=="function"){var ce=k;k=function(){var ke=Rd(q);ce.call(ke)}}Td(a,q,n,k)}else q=ly(u,a,n,k,p);return Rd(q)}go=function(n){switch(n.tag){case 3:var a=n.stateNode;if(a.current.memoizedState.isDehydrated){var u=ua(a.pendingLanes);u!==0&&(Fs(a,u|1),$a(a,Or()),(Br&6)===0&&(Pu=Or()+500,E()))}break;case 13:Xl(function(){var p=Vr(n,1);if(p!==null){var k=Sa();to(p,n,1,k)}}),jf(n,1)}},Fo=function(n){if(n.tag===13){var a=Vr(n,134217728);if(a!==null){var u=Sa();to(a,n,134217728,u)}jf(n,134217728)}},ll=function(n){if(n.tag===13){var a=Sl(n),u=Vr(n,a);if(u!==null){var p=Sa();to(u,n,a,p)}jf(n,a)}},fn=function(){return Rr},$i=function(n,a){var u=Rr;try{return Rr=n,a()}finally{Rr=u}},dt=function(n,a,u){switch(a){case"input":if(Xt(n,u),a=u.name,u.type==="radio"&&a!=null){for(u=n;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var p=u[a];if(p!==n&&p.form===n.form){var k=Wl(p);if(!k)throw Error(r(90));it(p),Xt(p,k)}}}break;case"textarea":Yt(n,u);break;case"select":a=u.value,a!=null&&vt(n,!!u.multiple,a,!1)}},wn=bf,Cr=Xl;var uy={usingClientEntryPoint:!1,Events:[fl,$o,Wl,Ft,pr,bf]},_c={findFiberByHostInstance:So,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cy={bundleType:_c.bundleType,version:_c.version,rendererPackageName:_c.rendererPackageName,rendererConfig:_c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Ha(n),n===null?null:n.stateNode},findFiberByHostInstance:_c.findFiberByHostInstance||oy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bd.isDisabled&&Bd.supportsFiber)try{gs=Bd.inject(cy),si=Bd}catch{}}return Va.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uy,Va.createPortal=function(n,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cf(a))throw Error(r(200));return sy(n,a,null,u)},Va.createRoot=function(n,a){if(!Cf(n))throw Error(r(299));var u=!1,p="",k=pg;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(k=a.onRecoverableError)),a=Af(n,1,!1,null,null,u,!1,p,k),n[_i]=a.current,qo(n.nodeType===8?n.parentNode:n),new Ef(a)},Va.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var a=n._reactInternals;if(a===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=Ha(a),n=n===null?null:n.stateNode,n},Va.flushSync=function(n){return Xl(n)},Va.hydrate=function(n,a,u){if(!Fd(a))throw Error(r(200));return Md(null,n,a,!0,u)},Va.hydrateRoot=function(n,a,u){if(!Cf(n))throw Error(r(405));var p=u!=null&&u.hydratedSources||null,k=!1,j="",q=pg;if(u!=null&&(u.unstable_strictMode===!0&&(k=!0),u.identifierPrefix!==void 0&&(j=u.identifierPrefix),u.onRecoverableError!==void 0&&(q=u.onRecoverableError)),a=hg(a,null,n,1,u??null,k,!1,j,q),n[_i]=a.current,qo(n),p)for(n=0;n<p.length;n++)u=p[n],k=u._getVersion,k=k(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,k]:a.mutableSourceEagerHydrationData.push(u,k);return new Dd(a)},Va.render=function(n,a,u){if(!Fd(a))throw Error(r(200));return Md(null,n,a,!1,u)},Va.unmountComponentAtNode=function(n){if(!Fd(n))throw Error(r(40));return n._reactRootContainer?(Xl(function(){Md(null,null,n,!1,function(){n._reactRootContainer=null,n[_i]=null})}),!0):!1},Va.unstable_batchedUpdates=bf,Va.unstable_renderSubtreeIntoContainer=function(n,a,u,p){if(!Fd(u))throw Error(r(200));if(n==null||n._reactInternals===void 0)throw Error(r(38));return Md(n,a,u,!1,p)},Va.version="18.3.1-next-f1338f8080-20240426",Va}var kg;function Vm(){if(kg)return If.exports;kg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),If.exports=yy(),If.exports}var Sg;function wy(){if(Sg)return qd;Sg=1;var t=Vm();return qd.createRoot=t.createRoot,qd.hydrateRoot=t.hydrateRoot,qd}var by=wy();/**
 * react-router v7.7.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ng="popstate";function xy(t={}){function e(i,o){let{pathname:s,search:l,hash:c}=i.location;return sp("",{pathname:s,search:l,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(i,o){return typeof o=="string"?o:Fc(o)}return ky(e,r,null,t)}function jn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function lo(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _y(){return Math.random().toString(36).substring(2,10)}function Ag(t,e){return{usr:t.state,key:t.key,idx:e}}function sp(t,e,r=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ec(e):e,state:r,key:e&&e.key||i||_y()}}function Fc({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ec(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function ky(t,e,r,i={}){let{window:o=document.defaultView,v5Compat:s=!1}=i,l=o.history,c="POP",h=null,g=w();g==null&&(g=0,l.replaceState({...l.state,idx:g},""));function w(){return(l.state||{idx:null}).idx}function _(){c="POP";let R=w(),L=R==null?null:R-g;g=R,h&&h({action:c,location:P.location,delta:L})}function N(R,L){c="PUSH";let M=sp(P.location,R,L);g=w()+1;let H=Ag(M,g),oe=P.createHref(M);try{l.pushState(H,"",oe)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;o.location.assign(oe)}s&&h&&h({action:c,location:P.location,delta:1})}function x(R,L){c="REPLACE";let M=sp(P.location,R,L);g=w();let H=Ag(M,g),oe=P.createHref(M);l.replaceState(H,"",oe),s&&h&&h({action:c,location:P.location,delta:0})}function I(R){return Sy(R)}let P={get action(){return c},get location(){return t(o,l)},listen(R){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(Ng,_),h=R,()=>{o.removeEventListener(Ng,_),h=null}},createHref(R){return e(o,R)},createURL:I,encodeLocation(R){let L=I(R);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:N,replace:x,go(R){return l.go(R)}};return P}function Sy(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),jn(r,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:Fc(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=r+i),new URL(i,r)}function Wm(t,e,r="/"){return Ny(t,e,r,!1)}function Ny(t,e,r,i){let o=typeof e=="string"?ec(e):e,s=rl(o.pathname||"/",r);if(s==null)return null;let l=Hm(t);Ay(l);let c=null;for(let h=0;c==null&&h<l.length;++h){let g=Fy(s);c=Ry(l[h],g,i)}return c}function Hm(t,e=[],r=[],i=""){let o=(s,l,c)=>{let h={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:l,route:s};h.relativePath.startsWith("/")&&(jn(h.relativePath.startsWith(i),`Absolute route path "${h.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(i.length));let g=tl([i,h.relativePath]),w=r.concat(h);s.children&&s.children.length>0&&(jn(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),Hm(s.children,e,w,g)),!(s.path==null&&!s.index)&&e.push({path:g,score:Oy(g,s.index),routesMeta:w})};return t.forEach((s,l)=>{if(s.path===""||!s.path?.includes("?"))o(s,l);else for(let c of Km(s.path))o(s,l,c)}),e}function Km(t){let e=t.split("/");if(e.length===0)return[];let[r,...i]=e,o=r.endsWith("?"),s=r.replace(/\?$/,"");if(i.length===0)return o?[s,""]:[s];let l=Km(i.join("/")),c=[];return c.push(...l.map(h=>h===""?s:[s,h].join("/"))),o&&c.push(...l),c.map(h=>t.startsWith("/")&&h===""?"/":h)}function Ay(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:Ty(e.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var jy=/^:[\w-]+$/,Ey=3,Cy=2,Py=1,Ly=10,Iy=-2,jg=t=>t==="*";function Oy(t,e){let r=t.split("/"),i=r.length;return r.some(jg)&&(i+=Iy),e&&(i+=Cy),r.filter(o=>!jg(o)).reduce((o,s)=>o+(jy.test(s)?Ey:s===""?Py:Ly),i)}function Ty(t,e){return t.length===e.length&&t.slice(0,-1).every((i,o)=>i===e[o])?t[t.length-1]-e[e.length-1]:0}function Ry(t,e,r=!1){let{routesMeta:i}=t,o={},s="/",l=[];for(let c=0;c<i.length;++c){let h=i[c],g=c===i.length-1,w=s==="/"?e:e.slice(s.length)||"/",_=oh({path:h.relativePath,caseSensitive:h.caseSensitive,end:g},w),N=h.route;if(!_&&g&&r&&!i[i.length-1].route.index&&(_=oh({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},w)),!_)return null;Object.assign(o,_.params),l.push({params:o,pathname:tl([s,_.pathname]),pathnameBase:Uy(tl([s,_.pathnameBase])),route:N}),_.pathnameBase!=="/"&&(s=tl([s,_.pathnameBase]))}return l}function oh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,i]=Dy(t.path,t.caseSensitive,t.end),o=e.match(r);if(!o)return null;let s=o[0],l=s.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:i.reduce((g,{paramName:w,isOptional:_},N)=>{if(w==="*"){let I=c[N]||"";l=s.slice(0,s.length-I.length).replace(/(.)\/+$/,"$1")}const x=c[N];return _&&!x?g[w]=void 0:g[w]=(x||"").replace(/%2F/g,"/"),g},{}),pathname:s,pathnameBase:l,pattern:t}}function Dy(t,e=!1,r=!0){lo(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,h)=>(i.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function Fy(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return lo(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function rl(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,i=t.charAt(r);return i&&i!=="/"?null:t.slice(r)||"/"}function My(t,e="/"){let{pathname:r,search:i="",hash:o=""}=typeof t=="string"?ec(t):t;return{pathname:r?r.startsWith("/")?r:By(r,e):e,search:zy(i),hash:$y(o)}}function By(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function Rf(t,e,r,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function qy(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Up(t){let e=qy(t);return e.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase)}function zp(t,e,r,i=!1){let o;typeof t=="string"?o=ec(t):(o={...t},jn(!o.pathname||!o.pathname.includes("?"),Rf("?","pathname","search",o)),jn(!o.pathname||!o.pathname.includes("#"),Rf("#","pathname","hash",o)),jn(!o.search||!o.search.includes("#"),Rf("#","search","hash",o)));let s=t===""||o.pathname==="",l=s?"/":o.pathname,c;if(l==null)c=r;else{let _=e.length-1;if(!i&&l.startsWith("..")){let N=l.split("/");for(;N[0]==="..";)N.shift(),_-=1;o.pathname=N.join("/")}c=_>=0?e[_]:"/"}let h=My(o,c),g=l&&l!=="/"&&l.endsWith("/"),w=(s||l===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(g||w)&&(h.pathname+="/"),h}var tl=t=>t.join("/").replace(/\/\/+/g,"/"),Uy=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),zy=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,$y=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Vy(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Gm=["POST","PUT","PATCH","DELETE"];new Set(Gm);var Wy=["GET",...Gm];new Set(Wy);var tc=J.createContext(null);tc.displayName="DataRouter";var Ah=J.createContext(null);Ah.displayName="DataRouterState";J.createContext(!1);var Jm=J.createContext({isTransitioning:!1});Jm.displayName="ViewTransition";var Hy=J.createContext(new Map);Hy.displayName="Fetchers";var Ky=J.createContext(null);Ky.displayName="Await";var co=J.createContext(null);co.displayName="Navigation";var Xc=J.createContext(null);Xc.displayName="Location";var Oo=J.createContext({outlet:null,matches:[],isDataRoute:!1});Oo.displayName="Route";var $p=J.createContext(null);$p.displayName="RouteError";function Gy(t,{relative:e}={}){jn(rc(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=J.useContext(co),{hash:o,pathname:s,search:l}=Qc(t,{relative:e}),c=s;return r!=="/"&&(c=s==="/"?r:tl([r,s])),i.createHref({pathname:c,search:l,hash:o})}function rc(){return J.useContext(Xc)!=null}function al(){return jn(rc(),"useLocation() may be used only in the context of a <Router> component."),J.useContext(Xc).location}var Ym="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Xm(t){J.useContext(co).static||J.useLayoutEffect(t)}function Qm(){let{isDataRoute:t}=J.useContext(Oo);return t?o2():Jy()}function Jy(){jn(rc(),"useNavigate() may be used only in the context of a <Router> component.");let t=J.useContext(tc),{basename:e,navigator:r}=J.useContext(co),{matches:i}=J.useContext(Oo),{pathname:o}=al(),s=JSON.stringify(Up(i)),l=J.useRef(!1);return Xm(()=>{l.current=!0}),J.useCallback((h,g={})=>{if(lo(l.current,Ym),!l.current)return;if(typeof h=="number"){r.go(h);return}let w=zp(h,JSON.parse(s),o,g.relative==="path");t==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:tl([e,w.pathname])),(g.replace?r.replace:r.push)(w,g.state,g)},[e,r,s,o,t])}J.createContext(null);function Qc(t,{relative:e}={}){let{matches:r}=J.useContext(Oo),{pathname:i}=al(),o=JSON.stringify(Up(r));return J.useMemo(()=>zp(t,JSON.parse(o),i,e==="path"),[t,o,i,e])}function Yy(t,e){return Zm(t,e)}function Zm(t,e,r,i){jn(rc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=J.useContext(co),{matches:s}=J.useContext(Oo),l=s[s.length-1],c=l?l.params:{},h=l?l.pathname:"/",g=l?l.pathnameBase:"/",w=l&&l.route;{let L=w&&w.path||"";ev(h,!w||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let _=al(),N;if(e){let L=typeof e=="string"?ec(e):e;jn(g==="/"||L.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${L.pathname}" was given in the \`location\` prop.`),N=L}else N=_;let x=N.pathname||"/",I=x;if(g!=="/"){let L=g.replace(/^\//,"").split("/");I="/"+x.replace(/^\//,"").split("/").slice(L.length).join("/")}let P=Wm(t,{pathname:I});lo(w||P!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),lo(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=t2(P&&P.map(L=>Object.assign({},L,{params:Object.assign({},c,L.params),pathname:tl([g,o.encodeLocation?o.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?g:tl([g,o.encodeLocation?o.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),s,r,i);return e&&R?J.createElement(Xc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},R):R}function Xy(){let t=s2(),e=Vy(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=J.createElement(J.Fragment,null,J.createElement("p",null," Hey developer "),J.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",J.createElement("code",{style:s},"ErrorBoundary")," or"," ",J.createElement("code",{style:s},"errorElement")," prop on your route.")),J.createElement(J.Fragment,null,J.createElement("h2",null,"Unexpected Application Error!"),J.createElement("h3",{style:{fontStyle:"italic"}},e),r?J.createElement("pre",{style:o},r):null,l)}var Qy=J.createElement(Xy,null),Zy=class extends J.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?J.createElement(Oo.Provider,{value:this.props.routeContext},J.createElement($p.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function e2({routeContext:t,match:e,children:r}){let i=J.useContext(tc);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),J.createElement(Oo.Provider,{value:t},r)}function t2(t,e=[],r=null,i=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,s=r?.errors;if(s!=null){let h=o.findIndex(g=>g.route.id&&s?.[g.route.id]!==void 0);jn(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(r)for(let h=0;h<o.length;h++){let g=o[h];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(c=h),g.route.id){let{loaderData:w,errors:_}=r,N=g.route.loader&&!w.hasOwnProperty(g.route.id)&&(!_||_[g.route.id]===void 0);if(g.route.lazy||N){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,g,w)=>{let _,N=!1,x=null,I=null;r&&(_=s&&g.route.id?s[g.route.id]:void 0,x=g.route.errorElement||Qy,l&&(c<0&&w===0?(ev("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,I=null):c===w&&(N=!0,I=g.route.hydrateFallbackElement||null)));let P=e.concat(o.slice(0,w+1)),R=()=>{let L;return _?L=x:N?L=I:g.route.Component?L=J.createElement(g.route.Component,null):g.route.element?L=g.route.element:L=h,J.createElement(e2,{match:g,routeContext:{outlet:h,matches:P,isDataRoute:r!=null},children:L})};return r&&(g.route.ErrorBoundary||g.route.errorElement||w===0)?J.createElement(Zy,{location:r.location,revalidation:r.revalidation,component:x,error:_,children:R(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):R()},null)}function Vp(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function r2(t){let e=J.useContext(tc);return jn(e,Vp(t)),e}function n2(t){let e=J.useContext(Ah);return jn(e,Vp(t)),e}function i2(t){let e=J.useContext(Oo);return jn(e,Vp(t)),e}function Wp(t){let e=i2(t),r=e.matches[e.matches.length-1];return jn(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function a2(){return Wp("useRouteId")}function s2(){let t=J.useContext($p),e=n2("useRouteError"),r=Wp("useRouteError");return t!==void 0?t:e.errors?.[r]}function o2(){let{router:t}=r2("useNavigate"),e=Wp("useNavigate"),r=J.useRef(!1);return Xm(()=>{r.current=!0}),J.useCallback(async(o,s={})=>{lo(r.current,Ym),r.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:e,...s}))},[t,e])}var Eg={};function ev(t,e,r){!e&&!Eg[t]&&(Eg[t]=!0,lo(!1,r))}J.memo(l2);function l2({routes:t,future:e,state:r}){return Zm(t,void 0,r,e)}function Cg({to:t,replace:e,state:r,relative:i}){jn(rc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=J.useContext(co);lo(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=J.useContext(Oo),{pathname:l}=al(),c=Qm(),h=zp(t,Up(s),l,i==="path"),g=JSON.stringify(h);return J.useEffect(()=>{c(JSON.parse(g),{replace:e,state:r,relative:i})},[c,g,i,e,r]),null}function Ec(t){jn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function u2({basename:t="/",children:e=null,location:r,navigationType:i="POP",navigator:o,static:s=!1}){jn(!rc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=J.useMemo(()=>({basename:l,navigator:o,static:s,future:{}}),[l,o,s]);typeof r=="string"&&(r=ec(r));let{pathname:h="/",search:g="",hash:w="",state:_=null,key:N="default"}=r,x=J.useMemo(()=>{let I=rl(h,l);return I==null?null:{location:{pathname:I,search:g,hash:w,state:_,key:N},navigationType:i}},[l,h,g,w,_,N,i]);return lo(x!=null,`<Router basename="${l}"> is not able to match the URL "${h}${g}${w}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:J.createElement(co.Provider,{value:c},J.createElement(Xc.Provider,{children:e,value:x}))}function c2({children:t,location:e}){return Yy(op(t),e)}function op(t,e=[]){let r=[];return J.Children.forEach(t,(i,o)=>{if(!J.isValidElement(i))return;let s=[...e,o];if(i.type===J.Fragment){r.push.apply(r,op(i.props.children,s));return}jn(i.type===Ec,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),jn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let l={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=op(i.props.children,s)),r.push(l)}),r}var Zd="get",eh="application/x-www-form-urlencoded";function jh(t){return t!=null&&typeof t.tagName=="string"}function d2(t){return jh(t)&&t.tagName.toLowerCase()==="button"}function h2(t){return jh(t)&&t.tagName.toLowerCase()==="form"}function f2(t){return jh(t)&&t.tagName.toLowerCase()==="input"}function p2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function g2(t,e){return t.button===0&&(!e||e==="_self")&&!p2(t)}var Ud=null;function m2(){if(Ud===null)try{new FormData(document.createElement("form"),0),Ud=!1}catch{Ud=!0}return Ud}var v2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Df(t){return t!=null&&!v2.has(t)?(lo(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${eh}"`),null):t}function y2(t,e){let r,i,o,s,l;if(h2(t)){let c=t.getAttribute("action");i=c?rl(c,e):null,r=t.getAttribute("method")||Zd,o=Df(t.getAttribute("enctype"))||eh,s=new FormData(t)}else if(d2(t)||f2(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=t.getAttribute("formaction")||c.getAttribute("action");if(i=h?rl(h,e):null,r=t.getAttribute("formmethod")||c.getAttribute("method")||Zd,o=Df(t.getAttribute("formenctype"))||Df(c.getAttribute("enctype"))||eh,s=new FormData(c,t),!m2()){let{name:g,type:w,value:_}=t;if(w==="image"){let N=g?`${g}.`:"";s.append(`${N}x`,"0"),s.append(`${N}y`,"0")}else g&&s.append(g,_)}}else{if(jh(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Zd,i=null,o=eh,l=t}return s&&o==="text/plain"&&(l=s,s=void 0),{action:i,method:r.toLowerCase(),encType:o,formData:s,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Hp(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function w2(t,e,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${r}`:e&&rl(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function b2(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function x2(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function _2(t,e,r){let i=await Promise.all(t.map(async o=>{let s=e.routes[o.route.id];if(s){let l=await b2(s,r);return l.links?l.links():[]}return[]}));return A2(i.flat(1).filter(x2).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Pg(t,e,r,i,o,s){let l=(h,g)=>r[g]?h.route.id!==r[g].route.id:!0,c=(h,g)=>r[g].pathname!==h.pathname||r[g].route.path?.endsWith("*")&&r[g].params["*"]!==h.params["*"];return s==="assets"?e.filter((h,g)=>l(h,g)||c(h,g)):s==="data"?e.filter((h,g)=>{let w=i.routes[h.route.id];if(!w||!w.hasLoader)return!1;if(l(h,g)||c(h,g))return!0;if(h.route.shouldRevalidate){let _=h.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function k2(t,e,{includeHydrateFallback:r}={}){return S2(t.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let s=[o.module];return o.clientActionModule&&(s=s.concat(o.clientActionModule)),o.clientLoaderModule&&(s=s.concat(o.clientLoaderModule)),r&&o.hydrateFallbackModule&&(s=s.concat(o.hydrateFallbackModule)),o.imports&&(s=s.concat(o.imports)),s}).flat(1))}function S2(t){return[...new Set(t)]}function N2(t){let e={},r=Object.keys(t).sort();for(let i of r)e[i]=t[i];return e}function A2(t,e){let r=new Set;return new Set(e),t.reduce((i,o)=>{let s=JSON.stringify(N2(o));return r.has(s)||(r.add(s),i.push({key:s,link:o})),i},[])}function tv(){let t=J.useContext(tc);return Hp(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function j2(){let t=J.useContext(Ah);return Hp(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Kp=J.createContext(void 0);Kp.displayName="FrameworkContext";function rv(){let t=J.useContext(Kp);return Hp(t,"You must render this element inside a <HydratedRouter> element"),t}function E2(t,e){let r=J.useContext(Kp),[i,o]=J.useState(!1),[s,l]=J.useState(!1),{onFocus:c,onBlur:h,onMouseEnter:g,onMouseLeave:w,onTouchStart:_}=e,N=J.useRef(null);J.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let P=L=>{L.forEach(M=>{l(M.isIntersecting)})},R=new IntersectionObserver(P,{threshold:.5});return N.current&&R.observe(N.current),()=>{R.disconnect()}}},[t]),J.useEffect(()=>{if(i){let P=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(P)}}},[i]);let x=()=>{o(!0)},I=()=>{o(!1),l(!1)};return r?t!=="intent"?[s,N,{}]:[s,N,{onFocus:Sc(c,x),onBlur:Sc(h,I),onMouseEnter:Sc(g,x),onMouseLeave:Sc(w,I),onTouchStart:Sc(_,x)}]:[!1,N,{}]}function Sc(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function C2({page:t,...e}){let{router:r}=tv(),i=J.useMemo(()=>Wm(r.routes,t,r.basename),[r.routes,t,r.basename]);return i?J.createElement(L2,{page:t,matches:i,...e}):null}function P2(t){let{manifest:e,routeModules:r}=rv(),[i,o]=J.useState([]);return J.useEffect(()=>{let s=!1;return _2(t,e,r).then(l=>{s||o(l)}),()=>{s=!0}},[t,e,r]),i}function L2({page:t,matches:e,...r}){let i=al(),{manifest:o,routeModules:s}=rv(),{basename:l}=tv(),{loaderData:c,matches:h}=j2(),g=J.useMemo(()=>Pg(t,e,h,o,i,"data"),[t,e,h,o,i]),w=J.useMemo(()=>Pg(t,e,h,o,i,"assets"),[t,e,h,o,i]),_=J.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let I=new Set,P=!1;if(e.forEach(L=>{let M=o.routes[L.route.id];!M||!M.hasLoader||(!g.some(H=>H.route.id===L.route.id)&&L.route.id in c&&s[L.route.id]?.shouldRevalidate||M.hasClientLoader?P=!0:I.add(L.route.id))}),I.size===0)return[];let R=w2(t,l,"data");return P&&I.size>0&&R.searchParams.set("_routes",e.filter(L=>I.has(L.route.id)).map(L=>L.route.id).join(",")),[R.pathname+R.search]},[l,c,i,o,g,e,t,s]),N=J.useMemo(()=>k2(w,o),[w,o]),x=P2(w);return J.createElement(J.Fragment,null,_.map(I=>J.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...r})),N.map(I=>J.createElement("link",{key:I,rel:"modulepreload",href:I,...r})),x.map(({key:I,link:P})=>J.createElement("link",{key:I,...P})))}function I2(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var nv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{nv&&(window.__reactRouterVersion="7.7.0")}catch{}function O2({basename:t,children:e,window:r}){let i=J.useRef();i.current==null&&(i.current=xy({window:r,v5Compat:!0}));let o=i.current,[s,l]=J.useState({action:o.action,location:o.location}),c=J.useCallback(h=>{J.startTransition(()=>l(h))},[l]);return J.useLayoutEffect(()=>o.listen(c),[o,c]),J.createElement(u2,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:o})}var iv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lh=J.forwardRef(function({onClick:e,discover:r="render",prefetch:i="none",relative:o,reloadDocument:s,replace:l,state:c,target:h,to:g,preventScrollReset:w,viewTransition:_,...N},x){let{basename:I}=J.useContext(co),P=typeof g=="string"&&iv.test(g),R,L=!1;if(typeof g=="string"&&P&&(R=g,nv))try{let fe=new URL(window.location.href),Te=g.startsWith("//")?new URL(fe.protocol+g):new URL(g),V=rl(Te.pathname,I);Te.origin===fe.origin&&V!=null?g=V+Te.search+Te.hash:L=!0}catch{lo(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let M=Gy(g,{relative:o}),[H,oe,le]=E2(i,N),be=F2(g,{replace:l,state:c,target:h,preventScrollReset:w,relative:o,viewTransition:_});function ne(fe){e&&e(fe),fe.defaultPrevented||be(fe)}let G=J.createElement("a",{...N,...le,href:R||M,onClick:L||s?e:ne,ref:I2(x,oe),target:h,"data-discover":!P&&r==="render"?"true":void 0});return H&&!P?J.createElement(J.Fragment,null,G,J.createElement(C2,{page:M})):G});lh.displayName="Link";var T2=J.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:i="",end:o=!1,style:s,to:l,viewTransition:c,children:h,...g},w){let _=Qc(l,{relative:g.relative}),N=al(),x=J.useContext(Ah),{navigator:I,basename:P}=J.useContext(co),R=x!=null&&z2(_)&&c===!0,L=I.encodeLocation?I.encodeLocation(_).pathname:_.pathname,M=N.pathname,H=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(M=M.toLowerCase(),H=H?H.toLowerCase():null,L=L.toLowerCase()),H&&P&&(H=rl(H,P)||H);const oe=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let le=M===L||!o&&M.startsWith(L)&&M.charAt(oe)==="/",be=H!=null&&(H===L||!o&&H.startsWith(L)&&H.charAt(L.length)==="/"),ne={isActive:le,isPending:be,isTransitioning:R},G=le?e:void 0,fe;typeof i=="function"?fe=i(ne):fe=[i,le?"active":null,be?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let Te=typeof s=="function"?s(ne):s;return J.createElement(lh,{...g,"aria-current":G,className:fe,ref:w,style:Te,to:l,viewTransition:c},typeof h=="function"?h(ne):h)});T2.displayName="NavLink";var R2=J.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:i,replace:o,state:s,method:l=Zd,action:c,onSubmit:h,relative:g,preventScrollReset:w,viewTransition:_,...N},x)=>{let I=q2(),P=U2(c,{relative:g}),R=l.toLowerCase()==="get"?"get":"post",L=typeof c=="string"&&iv.test(c),M=H=>{if(h&&h(H),H.defaultPrevented)return;H.preventDefault();let oe=H.nativeEvent.submitter,le=oe?.getAttribute("formmethod")||l;I(oe||H.currentTarget,{fetcherKey:e,method:le,navigate:r,replace:o,state:s,relative:g,preventScrollReset:w,viewTransition:_})};return J.createElement("form",{ref:x,method:R,action:P,onSubmit:i?h:M,...N,"data-discover":!L&&t==="render"?"true":void 0})});R2.displayName="Form";function D2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function av(t){let e=J.useContext(tc);return jn(e,D2(t)),e}function F2(t,{target:e,replace:r,state:i,preventScrollReset:o,relative:s,viewTransition:l}={}){let c=Qm(),h=al(),g=Qc(t,{relative:s});return J.useCallback(w=>{if(g2(w,e)){w.preventDefault();let _=r!==void 0?r:Fc(h)===Fc(g);c(t,{replace:_,state:i,preventScrollReset:o,relative:s,viewTransition:l})}},[h,c,g,r,i,e,t,o,s,l])}var M2=0,B2=()=>`__${String(++M2)}__`;function q2(){let{router:t}=av("useSubmit"),{basename:e}=J.useContext(co),r=a2();return J.useCallback(async(i,o={})=>{let{action:s,method:l,encType:c,formData:h,body:g}=y2(i,e);if(o.navigate===!1){let w=o.fetcherKey||B2();await t.fetch(w,r,o.action||s,{preventScrollReset:o.preventScrollReset,formData:h,body:g,formMethod:o.method||l,formEncType:o.encType||c,flushSync:o.flushSync})}else await t.navigate(o.action||s,{preventScrollReset:o.preventScrollReset,formData:h,body:g,formMethod:o.method||l,formEncType:o.encType||c,replace:o.replace,state:o.state,fromRouteId:r,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,e,r])}function U2(t,{relative:e}={}){let{basename:r}=J.useContext(co),i=J.useContext(Oo);jn(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),s={...Qc(t||".",{relative:e})},l=al();if(t==null){s.search=l.search;let c=new URLSearchParams(s.search),h=c.getAll("index");if(h.some(w=>w==="")){c.delete("index"),h.filter(_=>_).forEach(_=>c.append("index",_));let w=c.toString();s.search=w?`?${w}`:""}}return(!t||t===".")&&o.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:tl([r,s.pathname])),Fc(s)}function z2(t,e={}){let r=J.useContext(Jm);jn(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=av("useViewTransitionState"),o=Qc(t,{relative:e.relative});if(!r.isTransitioning)return!1;let s=rl(r.currentLocation.pathname,i)||r.currentLocation.pathname,l=rl(r.nextLocation.pathname,i)||r.nextLocation.pathname;return oh(o.pathname,l)!=null||oh(o.pathname,s)!=null}var Cc=Vm();/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),_r=(t,e)=>{const r=J.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:s=2,absoluteStrokeWidth:l,className:c="",children:h,...g},w)=>J.createElement("svg",{ref:w,...$2,width:o,height:o,stroke:i,strokeWidth:l?Number(s)*24/Number(o):s,className:["lucide",`lucide-${V2(t)}`,c].join(" "),...g},[...e.map(([_,N])=>J.createElement(_,N)),...Array.isArray(h)?h:[h]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=_r("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=_r("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=_r("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=_r("BedDouble",[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=_r("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=_r("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uh=_r("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=_r("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=_r("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=_r("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eh=_r("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=_r("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=_r("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=_r("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=_r("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=_r("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=_r("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=_r("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=_r("Hotel",[["path",{d:"M18 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2Z",key:"p9z69c"}],["path",{d:"m9 16 .348-.24c1.465-1.013 3.84-1.013 5.304 0L15 16",key:"1bvcvh"}],["path",{d:"M8 7h.01",key:"1vti4s"}],["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M12 7h.01",key:"1ivr5q"}],["path",{d:"M12 11h.01",key:"z322tv"}],["path",{d:"M16 11h.01",key:"xkw8gn"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M10 22v-6.5m4 0V22",key:"16gs4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=_r("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=_r("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=_r("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=_r("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=_r("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=_r("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=_r("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ch=_r("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dh=_r("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=_r("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=_r("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=_r("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=_r("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yp=_r("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=_r("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=_r("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=_r("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hh=_r("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=_r("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=_r("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=_r("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=_r("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=_r("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xp=_r("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),gv=J.createContext(void 0),Qp=()=>{const t=J.useContext(gv);if(!t)throw new Error("useSettings must be used within a SettingsProvider");return t},s5=({children:t})=>{const[e,r]=J.useState(()=>localStorage.getItem("travelpro-theme")||"light"),[i,o]=J.useState(()=>localStorage.getItem("travelpro-language")||"en");J.useEffect(()=>{localStorage.setItem("travelpro-theme",e),e==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[e]),J.useEffect(()=>{localStorage.setItem("travelpro-language",i),i==="ar"?(document.documentElement.dir="rtl",document.documentElement.lang="ar"):(document.documentElement.dir="ltr",document.documentElement.lang=i)},[i]);const s=c=>{r(c)},l=c=>{o(c)};return y.jsx(gv.Provider,{value:{theme:e,language:i,setTheme:s,setLanguage:l},children:t})},Tg={en:{welcome:"Welcome to Agence de Voyage!",dashboard:"Dashboard",settings:"Settings",save:"Save",cancel:"Cancel",close:"Close",loading:"Loading...",error:"Error",success:"Success",agentDashboard:"Agent Dashboard",createInvoice:"Create Invoice",createAndManage:"Create and manage client invoices efficiently",todaysActivity:"Today's Activity",performance:"Performance",quickTip:"Quick Tip",recentInvoices:"Your Recent Invoices",readyToStart:"Ready to get started?",createFirstInvoice:"Create your first invoice to begin tracking your client billing.",createYourFirst:"Create Your First Invoice",createNewInvoice:"Create New Invoice",fillDetails:"Fill in the details to generate an invoice for your client",clientInformation:"Client Information",clientName:"Client Name",emailAddress:"Email Address",phoneNumber:"Phone Number",dueDate:"Due Date",address:"Address",servicesItems:"Services & Items",addItem:"Add Item",serviceDescription:"Service/Description",quantity:"Quantity",unitPrice:"Unit Price",total:"Total",invoiceSummary:"Invoice Summary",subtotal:"Subtotal",tax:"Tax",currency:"DH",additionalNotes:"Additional Notes",saveAsDraft:"Save as Draft",createAndSend:"Create & Send",umrahDetails:"Umrah Details",travelInfo:"Travel and accommodation information",passportNumber:"Passport Number",flightNumber:"Flight Number",departureDate:"Departure Date",roomType:"Room Type",visaStatus:"Visa Status",gender:"Gender",male:"Male",female:"Female",double:"Double",triple:"Triple",quad:"Quad",quint:"Quint",visaPending:"Pending",visaIssued:"Issued",scanPassport:"Scan ",scanning:"Scanning...",dateOfBirth:"Date of Birth",ocrError:"Failed to scan . Please try again.",settingsTitle:"Settings",appearance:"Appearance",theme:"Theme",lightMode:"Light Mode",darkMode:"Dark Mode",language:"Language",selectLanguage:"Select Language",english:"English",arabic:"",french:"Franais",chinese:"",draft:"Draft",sent:"Sent",paid:"Paid",overdue:"Overdue",totalRevenue:"Total Revenue",totalInvoices:"Total Invoices",pending:"Pending",followUpTip:"Follow up on pending invoices within 3 days to improve your collection rate and maintain good client relationships."},ar:{welcome:"    !",dashboard:" ",settings:"",save:"",cancel:"",close:"",loading:" ...",error:"",success:"",agentDashboard:"  ",createInvoice:" ",createAndManage:"    ",todaysActivity:" ",performance:"",quickTip:" ",recentInvoices:" ",readyToStart:" ",createFirstInvoice:"      .",createYourFirst:"  ",createNewInvoice:"  ",fillDetails:"    ",clientInformation:" ",clientName:" ",emailAddress:"  ",phoneNumber:" ",dueDate:" ",address:"",servicesItems:" ",addItem:" ",serviceDescription:"/",quantity:"",unitPrice:" ",total:"",invoiceSummary:" ",subtotal:" ",tax:"",currency:"",additionalNotes:" ",saveAsDraft:" ",createAndSend:" ",umrahDetails:" ",travelInfo:"  ",passportNumber:" ",flightNumber:" ",departureDate:" ",roomType:" ",visaStatus:" ",gender:"",male:"",female:"",double:"",triple:"",quad:"",quint:"",visaPending:" ",visaIssued:"",scanPassport:" ",scanning:" ...",dateOfBirth:" ",ocrError:"  .   .",settingsTitle:"",appearance:"",theme:"",lightMode:" ",darkMode:" ",language:"",selectLanguage:" ",english:"English",arabic:"",french:"Franais",chinese:"",draft:"",sent:"",paid:"",overdue:"",totalRevenue:" ",totalInvoices:" ",pending:"",followUpTip:"    3          ."},fr:{welcome:"Bienvenue chez Agence de Voyage!",dashboard:"Tableau de bord",settings:"Paramtres",save:"Enregistrer",cancel:"Annuler",close:"Fermer",loading:"Chargement...",error:"Erreur",success:"Succs",agentDashboard:"Tableau de bord Agent",createInvoice:"Crer une facture",createAndManage:"Crer et grer efficacement les factures clients",todaysActivity:"Activit d'aujourd'hui",performance:"Performance",quickTip:"Conseil rapide",recentInvoices:"Vos factures rcentes",readyToStart:"Prt  commencer?",createFirstInvoice:"Crez votre premire facture pour commencer  suivre la facturation client.",createYourFirst:"Crez votre premire facture",createNewInvoice:"Crer une nouvelle facture",fillDetails:"Remplissez les dtails pour gnrer une facture pour votre client",clientInformation:"Informations client",clientName:"Nom du client",emailAddress:"Adresse e-mail",phoneNumber:"Numro de tlphone",dueDate:"Date d'chance",address:"Adresse",servicesItems:"Services et articles",addItem:"Ajouter un article",serviceDescription:"Service/Description",quantity:"Quantit",unitPrice:"Prix unitaire",total:"Total",invoiceSummary:"Rsum de la facture",subtotal:"Sous-total",tax:"Taxe",currency:"DH",additionalNotes:"Notes supplmentaires",saveAsDraft:"Enregistrer comme brouillon",createAndSend:"Crer et envoyer",umrahDetails:"Dtails de l'Umrah",travelInfo:"Informations de voyage et d'hbergement",passportNumber:"Numro de passeport",flightNumber:"Numro de vol",departureDate:"Date de dpart",roomType:"Type de chambre",visaStatus:"Statut du visa",gender:"Genre",male:"Homme",female:"Femme",double:"Double",triple:"Triple",quad:"Quad",quint:"Quint",visaPending:"En attente",visaIssued:"Dlivr",scanPassport:"Scanner le passeport",scanning:"Numrisation...",dateOfBirth:"Date de naissance",ocrError:"chec de la numrisation du passeport. Veuillez ressayer.",settingsTitle:"Paramtres",appearance:"Apparence",theme:"Thme",lightMode:"Mode clair",darkMode:"Mode sombre",language:"Langue",selectLanguage:"Slectionner la langue",english:"English",arabic:"",french:"Franais",chinese:"",draft:"Brouillon",sent:"Envoy",paid:"Pay",overdue:"En retard",totalRevenue:"Revenus totaux",totalInvoices:"Total des factures",pending:"En attente",followUpTip:"Suivez les factures en attente dans les 3 jours pour amliorer votre taux de recouvrement et maintenir de bonnes relations clients."},zh:{welcome:"",dashboard:"",settings:"",save:"",cancel:"",close:"",loading:"...",error:"",success:"",agentDashboard:"",createInvoice:"",createAndManage:"",todaysActivity:"",performance:"",quickTip:"",recentInvoices:"",readyToStart:"",createFirstInvoice:"",createYourFirst:"",createNewInvoice:"",fillDetails:"",clientInformation:"",clientName:"",emailAddress:"",phoneNumber:"",dueDate:"",address:"",servicesItems:"",addItem:"",serviceDescription:"/",quantity:"",unitPrice:"",total:"",invoiceSummary:"",subtotal:"",tax:"",currency:"",additionalNotes:"",saveAsDraft:"",createAndSend:"",umrahDetails:"",travelInfo:"",passportNumber:"",flightNumber:"",departureDate:"",roomType:"",visaStatus:"",gender:"",male:"",female:"",double:"",triple:"",quad:"",quint:"",visaPending:"",visaIssued:"",scanPassport:"",scanning:"...",dateOfBirth:"",ocrError:"",settingsTitle:"",appearance:"",theme:"",lightMode:"",darkMode:"",language:"",selectLanguage:"",english:"English",arabic:"",french:"Franais",chinese:"",draft:"",sent:"",paid:"",overdue:"",totalRevenue:"",totalInvoices:"",pending:"",followUpTip:"3"}},Zp=t=>({t:e=>Tg[t][e]||Tg.en[e]||e}),o5=({isOpen:t,onClose:e})=>{const{theme:r,language:i,setTheme:o,setLanguage:s}=Qp(),{t:l}=Zp(i);if(!t)return null;const c=[{code:"en",name:"English",nativeName:"English"},{code:"ar",name:"Arabic",nativeName:""},{code:"fr",name:"French",nativeName:"Franais"},{code:"zh",name:"Chinese",nativeName:""}];return y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:y.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[y.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700",children:[y.jsxs("div",{className:"flex items-center space-x-3",children:[y.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 p-2 rounded-lg",children:y.jsx(Lg,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),y.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:l("settingsTitle")})]}),y.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-2 rounded-lg transition-colors duration-200",children:y.jsx(Xp,{className:"h-5 w-5"})})]}),y.jsxs("div",{className:"p-6 space-y-8",children:[y.jsxs("div",{children:[y.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center space-x-2",children:[y.jsx(Og,{className:"h-5 w-5 text-yellow-500"}),y.jsx("span",{children:l("appearance")})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:l("theme")}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsx("button",{onClick:()=>o("light"),className:`p-4 rounded-lg border-2 transition-all duration-200 ${r==="light"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:y.jsxs("div",{className:"flex items-center space-x-3",children:[y.jsx("div",{className:"bg-yellow-100 p-2 rounded-full",children:y.jsx(Og,{className:"h-4 w-4 text-yellow-600"})}),y.jsxs("div",{className:"text-left",children:[y.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:l("lightMode")}),r==="light"&&y.jsx(Ff,{className:"h-4 w-4 text-blue-500 mt-1"})]})]})}),y.jsx("button",{onClick:()=>o("dark"),className:`p-4 rounded-lg border-2 transition-all duration-200 ${r==="dark"?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:y.jsxs("div",{className:"flex items-center space-x-3",children:[y.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 p-2 rounded-full",children:y.jsx(e5,{className:"h-4 w-4 text-gray-600 dark:text-gray-300"})}),y.jsxs("div",{className:"text-left",children:[y.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:l("darkMode")}),r==="dark"&&y.jsx(Ff,{className:"h-4 w-4 text-blue-500 mt-1"})]})]})})]})]})]}),y.jsxs("div",{children:[y.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center space-x-2",children:[y.jsx(Lg,{className:"h-5 w-5 text-blue-500"}),y.jsx("span",{children:l("language")})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:l("selectLanguage")}),y.jsx("div",{className:"space-y-2",children:c.map(h=>y.jsx("button",{onClick:()=>s(h.code),className:`w-full p-3 rounded-lg border-2 transition-all duration-200 text-left ${i===h.code?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:h.nativeName}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:h.name})]}),i===h.code&&y.jsx(Ff,{className:"h-5 w-5 text-blue-500"})]})},h.code))})]})]})]}),y.jsx("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:y.jsx("button",{onClick:e,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-lg font-medium transition-colors duration-200",children:l("close")})})]})})},el=({children:t,title:e,userType:r,userName:i,onLogout:o,onSignOut:s})=>{const[l,c]=J.useState(!1),{theme:h,language:g}=Qp(),{t:w}=Zp(g),_=s||o;return y.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-200",children:[y.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 transition-colors duration-200",children:y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"flex justify-between items-center h-16",children:[y.jsxs("div",{className:"flex items-center space-x-3",children:[y.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:r==="director"?"#7c3aed":"#03989e"},children:y.jsx(ch,{className:"h-6 w-6 text-white"})}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Agence de Voyage"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e})]})]}),y.jsxs("div",{className:"flex items-center space-x-4",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 p-2 rounded-full",children:y.jsx(cu,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})}),y.jsxs("div",{className:"hidden sm:block",children:[y.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:i||(r==="agent"?"Agent Portal":"Director Dashboard")}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:r==="agent"?"Travel Agent":"Director"})]})]}),y.jsx("button",{onClick:()=>c(!0),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:w("settings"),children:y.jsx(r5,{className:"h-5 w-5"})}),_&&y.jsx("button",{onClick:_,className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors duration-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",title:r==="director"?"Logout":"Sign Out",children:y.jsx(Gp,{className:"h-5 w-5"})})]})]})})}),y.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t}),y.jsx(o5,{isOpen:l,onClose:()=>c(!1)})]})},l5=()=>{const t=new Date,e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),o=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return`INV-${e}${r}${i}-${o}`},u5=(t,e)=>t*e,c5=t=>t.reduce((e,r)=>e+r.total,0),d5=(t,e=0)=>t*e,h5=(t,e)=>t+e,pi=t=>new Intl.NumberFormat("fr-MA",{style:"currency",currency:"MAD",currencyDisplay:"code"}).format(t).replace("MAD","DH"),Rl=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),mv=t=>{switch(t){case"draft":return"bg-gray-100 text-gray-800";case"sent":return"bg-blue-100 text-blue-800";case"paid":return"bg-green-100 text-green-800";case"overdue":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Rg=0,f5=["Flight Booking","Hotel Reservation","Car Rental","Travel Insurance","Visa Processing","Tour Package","Airport Transfer","Travel Consultation","Group Booking","Cruise Booking","Desert Safari","Atlas Mountains Trek","Marrakech City Tour","Casablanca Tour","Fes Cultural Tour","Chefchaouen Day Trip","Sahara Desert Tour","Essaouira Excursion"],p5="AIzaSyDB4EEBC-iAoWSttL9hKC3LfoctV1Z_AzY",g5="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-lite-preview-09-2025:generateContent",m5=async t=>{const e=t.match(/^data:([a-zA-Z0-9]+\/[a-zA-Z0-9-.+]+);base64,(.+)$/);if(!e)throw new Error("Invalid image format. Please upload a valid image file.");const r=e[1],i=e[2],o={contents:[{parts:[{text:"Extract ALL relevant details from this image to fill an invoice form. Return a JSON object with these keys: passportNumber, name (full name), dateOfBirth (YYYY-MM-DD), gender (Male/Female), nationality, address (if available), flightNumber (if available), departureDate (YYYY-MM-DD, if available). Also infer logical defaults if possible: visaStatus ('Issued' if visa is visible, else 'Pending'). Return ONLY the JSON object, no markdown."},{inline_data:{mime_type:r,data:i}}]}]};try{const s=await fetch(`${g5}?key=${p5}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!s.ok){const g=await s.json();console.error("Gemini API Error Detail:",g);const w=g.error?.message||s.statusText||"Unknown Error";throw new Error(`Gemini API Error (${s.status}): ${w}`)}const c=(await s.json()).candidates?.[0]?.content?.parts?.[0]?.text;if(!c)throw new Error("No text extracted from the image");const h=c.replace(/```json/g,"").replace(/```/g,"").trim();try{const g=JSON.parse(h);return{passportNumber:g.passportNumber,name:g.name,dateOfBirth:g.dateOfBirth,gender:g.gender==="M"?"Male":g.gender==="F"?"Female":g.gender,nationality:g.nationality,address:g.address,flightNumber:g.flightNumber,departureDate:g.departureDate,visaStatus:g.visaStatus}}catch{throw console.error("Failed to parse Gemini response:",c),new Error("Failed to parse extracted passport data")}}catch(s){throw console.error("OCR Error:",s),s}};let v5={data:""},y5=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||v5,w5=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,b5=/\/\*[^]*?\*\/|  +/g,Dg=/\n+/g,Il=(t,e)=>{let r="",i="",o="";for(let s in t){let l=t[s];s[0]=="@"?s[1]=="i"?r=s+" "+l+";":i+=s[1]=="f"?Il(l,s):s+"{"+Il(l,s[1]=="k"?"":e)+"}":typeof l=="object"?i+=Il(l,e?e.replace(/([^,])+/g,c=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,h=>/&/.test(h)?h.replace(/&/g,c):c?c+" "+h:h)):s):l!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=Il.p?Il.p(s,l):s+":"+l+";")}return r+(e&&o?e+"{"+o+"}":o)+i},Xo={},vv=t=>{if(typeof t=="object"){let e="";for(let r in t)e+=r+vv(t[r]);return e}return t},x5=(t,e,r,i,o)=>{let s=vv(t),l=Xo[s]||(Xo[s]=(h=>{let g=0,w=11;for(;g<h.length;)w=101*w+h.charCodeAt(g++)>>>0;return"go"+w})(s));if(!Xo[l]){let h=s!==t?t:(g=>{let w,_,N=[{}];for(;w=w5.exec(g.replace(b5,""));)w[4]?N.shift():w[3]?(_=w[3].replace(Dg," ").trim(),N.unshift(N[0][_]=N[0][_]||{})):N[0][w[1]]=w[2].replace(Dg," ").trim();return N[0]})(t);Xo[l]=Il(o?{["@keyframes "+l]:h}:h,r?"":"."+l)}let c=r&&Xo.g?Xo.g:null;return r&&(Xo.g=Xo[l]),((h,g,w,_)=>{_?g.data=g.data.replace(_,h):g.data.indexOf(h)===-1&&(g.data=w?h+g.data:g.data+h)})(Xo[l],e,i,c),l},_5=(t,e,r)=>t.reduce((i,o,s)=>{let l=e[s];if(l&&l.call){let c=l(r),h=c&&c.props&&c.props.className||/^go/.test(c)&&c;l=h?"."+h:c&&typeof c=="object"?c.props?"":Il(c,""):c===!1?"":c}return i+o+(l??"")},"");function Ch(t){let e=this||{},r=t.call?t(e.p):t;return x5(r.unshift?r.raw?_5(r,[].slice.call(arguments,1),e.p):r.reduce((i,o)=>Object.assign(i,o&&o.call?o(e.p):o),{}):r,y5(e.target),e.g,e.o,e.k)}let yv,cp,dp;Ch.bind({g:1});let nl=Ch.bind({k:1});function k5(t,e,r,i){Il.p=e,yv=t,cp=r,dp=i}function Ml(t,e){let r=this||{};return function(){let i=arguments;function o(s,l){let c=Object.assign({},s),h=c.className||o.className;r.p=Object.assign({theme:cp&&cp()},c),r.o=/ *go\d+/.test(h),c.className=Ch.apply(r,i)+(h?" "+h:"");let g=t;return t[0]&&(g=c.as||t,delete c.as),dp&&g[0]&&dp(c),yv(g,c)}return o}}var S5=t=>typeof t=="function",hp=(t,e)=>S5(t)?t(e):t,N5=(()=>{let t=0;return()=>(++t).toString()})(),A5=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),j5=20,wv=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,j5)};case 1:return{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:r}=e;return wv(t,{type:t.toasts.find(s=>s.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=e;return{...t,toasts:t.toasts.map(s=>s.id===i||i===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let o=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+o}))}}},E5=[],Mf={toasts:[],pausedAt:void 0},e0=t=>{Mf=wv(Mf,t),E5.forEach(e=>{e(Mf)})},C5=(t,e="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:r?.id||N5()}),ed=t=>(e,r)=>{let i=C5(e,t,r);return e0({type:2,toast:i}),i.id},us=(t,e)=>ed("blank")(t,e);us.error=ed("error");us.success=ed("success");us.loading=ed("loading");us.custom=ed("custom");us.dismiss=t=>{e0({type:3,toastId:t})};us.remove=t=>e0({type:4,toastId:t});us.promise=(t,e,r)=>{let i=us.loading(e.loading,{...r,...r?.loading});return typeof t=="function"&&(t=t()),t.then(o=>{let s=e.success?hp(e.success,o):void 0;return s?us.success(s,{id:i,...r,...r?.success}):us.dismiss(i),o}).catch(o=>{let s=e.error?hp(e.error,o):void 0;s?us.error(s,{id:i,...r,...r?.error}):us.dismiss(i)}),t};var P5=nl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,L5=nl`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,I5=nl`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,O5=Ml("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${P5} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${L5} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${I5} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,T5=nl`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,R5=Ml("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${T5} 1s linear infinite;
`,D5=nl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,F5=nl`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,M5=Ml("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${D5} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${F5} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,B5=Ml("div")`
  position: absolute;
`,q5=Ml("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,U5=nl`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,z5=Ml("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${U5} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,$5=({toast:t})=>{let{icon:e,type:r,iconTheme:i}=t;return e!==void 0?typeof e=="string"?J.createElement(z5,null,e):e:r==="blank"?null:J.createElement(q5,null,J.createElement(R5,{...i}),r!=="loading"&&J.createElement(B5,null,r==="error"?J.createElement(O5,{...i}):J.createElement(M5,{...i})))},V5=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,W5=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,H5="0%{opacity:0;} 100%{opacity:1;}",K5="0%{opacity:1;} 100%{opacity:0;}",G5=Ml("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,J5=Ml("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Y5=(t,e)=>{let r=t.includes("top")?1:-1,[i,o]=A5()?[H5,K5]:[V5(r),W5(r)];return{animation:e?`${nl(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${nl(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};J.memo(({toast:t,position:e,style:r,children:i})=>{let o=t.height?Y5(t.position||e||"top-center",t.visible):{opacity:0},s=J.createElement($5,{toast:t}),l=J.createElement(J5,{...t.ariaProps},hp(t.message,t));return J.createElement(G5,{className:t.className,style:{...o,...r,...t.style}},typeof i=="function"?i({icon:s,message:l}):J.createElement(J.Fragment,null,s,l))});k5(J.createElement);Ch`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;var Fg=us;const Bf=t=>{if(!t)return"";try{const e=new Date(t);return isNaN(e.getTime())?"":e.toISOString().split("T")[0]}catch{return""}},fp=({onSave:t,onCancel:e,currentAgent:r,editingInvoice:i})=>{const{language:o}=Qp(),{t:s}=Zp(o),l=J.useRef(null),[c,h]=J.useState(!1),[g,w]=J.useState({id:i?.client?.id||"",name:i?.client?.name||i?.clientName||"",email:i?.client?.email||i?.clientEmail||"",phone:i?.client?.phone||"",address:i?.client?.address||"",passportNumber:i?.client?.passportNumber||"",gender:i?.client?.gender,dateOfBirth:i?.client?.dateOfBirth||""}),[_,N]=J.useState(i?.items||[{id:Date.now().toString(),description:"",quantity:1,unitPrice:0,total:0,invoiceId:""}]),[x,I]=J.useState(Bf(i?.dueDate||i?.createdAt)),[P,R]=J.useState(i?.notes||""),[L,M]=J.useState(i?.passportNumber||""),[H,oe]=J.useState(i?.gender),[le,be]=J.useState(i?.flightNumber||""),[ne,G]=J.useState(i?.roomType||"Double"),[fe,Te]=J.useState(i?.visaStatus||"Pending"),[V,Y]=J.useState(Bf(i?.departureDate)),[pe,te]=J.useState(Bf(i?.dateOfBirth)),Ue=async $=>{const X=$.target.files?.[0];if(!X)return;h(!0);const ie=new FileReader;ie.onloadend=async()=>{try{const he=ie.result,ye=await m5(he);ye.name&&w(Ie=>({...Ie,name:ye.name})),ye.passportNumber&&(w(Ie=>({...Ie,passportNumber:ye.passportNumber})),M(ye.passportNumber)),ye.gender&&(w(Ie=>({...Ie,gender:ye.gender})),oe(ye.gender)),ye.dateOfBirth&&(w(Ie=>({...Ie,dateOfBirth:ye.dateOfBirth})),te(ye.dateOfBirth)),ye.address&&w(Ie=>({...Ie,address:ye.address})),ye.flightNumber&&be(ye.flightNumber),ye.departureDate&&Y(ye.departureDate),ye.visaStatus&&Te(ye.visaStatus),Fg.success("Passport details extracted successfully!")}catch(he){console.error("OCR Error:",he),Fg.error(he.message||s("ocrError"))}finally{h(!1),l.current&&(l.current.value="")}},ie.readAsDataURL(X)},Me=()=>{N([..._,{id:Date.now().toString(),description:"",quantity:1,unitPrice:0,total:0,invoiceId:""}])},ze=$=>{_.length>1&&N(_.filter(X=>X.id!==$))},de=($,X,ie)=>{N(_.map(he=>{if(he.id===$){const ye={...he,[X]:ie};return(X==="quantity"||X==="unitPrice")&&(ye.total=u5(ye.quantity,ye.unitPrice)),ye}return he}))},je=c5(_),_e=d5(je,Rg),ae=h5(je,_e),O=$=>{if(!g.name||!g.email){alert("Please fill in required client information");return}if(_.some(ie=>!ie.description||!ie.quantity||!ie.unitPrice)){alert("Please complete all item details");return}const X={...i?.id?{id:i.id}:{},invoiceNumber:i?.invoiceNumber||l5(),client:{...g,...i?.client?.id?{id:i.client.id}:{}},agentId:r?.id||i?.agentId||"",agentName:r?.name||i?.agentName||"Unknown Agent",items:_,subtotal:je,tax:_e,total:ae,status:$,createdAt:i?.createdAt||new Date().toISOString(),dueDate:x,notes:P,passportNumber:L,gender:H,flightNumber:le,roomType:ne,visaStatus:fe,departureDate:V,dateOfBirth:pe};t(X)};return y.jsxs("div",{className:"max-w-4xl mx-auto",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i?o==="ar"?" ":"Edit Invoice":s("createInvoice")}),y.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors duration-200",children:y.jsx(hh,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"})})]}),y.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-8",children:[y.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[y.jsx(cu,{className:"w-5 h-5 text-[#03989e]"}),"Client Information"]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Client Name *"}),y.jsx("input",{type:"text",value:g.name,onChange:$=>w({...g,name:$.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:border-transparent transition-all duration-200 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",style:{"--tw-ring-color":"#03989e"},placeholder:"Enter client name"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address *"}),y.jsx("input",{type:"email",value:g.email,onChange:$=>w({...g,email:$.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:border-transparent transition-all duration-200 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",style:{"--tw-ring-color":"#03989e"},placeholder:"client@example.com"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone Number"}),y.jsx("input",{type:"tel",value:g.phone,onChange:$=>w({...g,phone:$.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:border-transparent transition-all duration-200 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",style:{"--tw-ring-color":"#03989e"},placeholder:"+1 (555) 000-0000"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Address"}),y.jsx("input",{type:"text",value:g.address,onChange:$=>w({...g,address:$.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:border-transparent transition-all duration-200 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",style:{"--tw-ring-color":"#03989e"},placeholder:"Enter address"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Due Date *"}),y.jsx("input",{type:"date",value:x,onChange:$=>I($.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:border-transparent transition-all duration-200 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",style:{"--tw-ring-color":"#03989e"}})]})]})]}),y.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-8",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[y.jsx(ch,{className:"w-5 h-5 text-[#03989e]"}),s("umrahDetails")]}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:"file",ref:l,onChange:Ue,accept:"image/*",className:"hidden"}),y.jsx("button",{onClick:()=>l.current?.click(),disabled:c,className:"flex items-center gap-2 px-4 py-2 bg-[#03989e] text-white rounded-lg hover:bg-[#02868b] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?y.jsxs(y.Fragment,{children:[y.jsx(hv,{className:"w-4 h-4 animate-spin"}),s("scanning")]}):y.jsxs(y.Fragment,{children:[y.jsx(t5,{className:"w-4 h-4"}),s("scanPassport")]})})]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:s("passportNumber")}),y.jsxs("div",{className:"relative",children:[y.jsx(Mc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),y.jsx("input",{type:"text",value:L,onChange:$=>M($.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:border-transparent transition-all duration-200 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",style:{"--tw-ring-color":"#03989e"},placeholder:s("passportNumber")})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:s("gender")}),y.jsxs("div",{className:"flex gap-4 h-[50px] items-center",children:[y.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[y.jsx("input",{type:"radio",name:"gender",value:"Male",checked:H==="Male",onChange:$=>oe($.target.value),className:"w-4 h-4 text-[#03989e] focus:ring-[#03989e]"}),y.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:s("male")})]}),y.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[y.jsx("input",{type:"radio",name:"gender",value:"Female",checked:H==="Female",onChange:$=>oe($.target.value),className:"w-4 h-4 text-[#03989e] focus:ring-[#03989e]"}),y.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:s("female")})]})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:s("dateOfBirth")}),y.jsxs("div",{className:"relative",children:[y.jsx(Ku,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),y.jsx("input",{type:"date",value:pe,onChange:$=>te($.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:border-transparent transition-all duration-200 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",style:{"--tw-ring-color":"#03989e"}})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:s("flightNumber")}),y.jsxs("div",{className:"relative",children:[y.jsx(ch,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),y.jsx("input",{type:"text",value:le,onChange:$=>be($.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:border-transparent transition-all duration-200 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",style:{"--tw-ring-color":"#03989e"},placeholder:"SVW123"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:s("roomType")}),y.jsxs("div",{className:"relative",children:[y.jsx(ov,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),y.jsxs("select",{value:ne,onChange:$=>G($.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:border-transparent transition-all duration-200 bg-white dark:bg-gray-800 text-gray-900 dark:text-white appearance-none",style:{"--tw-ring-color":"#03989e"},children:[y.jsx("option",{value:"Double",children:s("double")}),y.jsx("option",{value:"Triple",children:s("triple")}),y.jsx("option",{value:"Quad",children:s("quad")}),y.jsx("option",{value:"Quint",children:s("quint")})]})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:s("visaStatus")}),y.jsxs("div",{className:"relative",children:[y.jsx(Mc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),y.jsxs("select",{value:fe,onChange:$=>Te($.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:border-transparent transition-all duration-200 bg-white dark:bg-gray-800 text-gray-900 dark:text-white appearance-none",style:{"--tw-ring-color":"#03989e"},children:[y.jsx("option",{value:"Pending",children:s("visaPending")}),y.jsx("option",{value:"Issued",children:s("visaIssued")})]})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:s("departureDate")}),y.jsxs("div",{className:"relative",children:[y.jsx(Ku,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),y.jsx("input",{type:"date",value:V,onChange:$=>Y($.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:border-transparent transition-all duration-200 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",style:{"--tw-ring-color":"#03989e"}})]})]})]})]}),y.jsxs("div",{className:"mb-8",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Services & Items"}),y.jsxs("button",{onClick:Me,className:"text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors duration-200",style:{backgroundColor:"#03989e"},onMouseEnter:$=>{$.currentTarget.style.backgroundColor="#027a7f"},onMouseLeave:$=>{$.currentTarget.style.backgroundColor="#03989e"},children:[y.jsx(dh,{className:"h-4 w-4"}),y.jsx("span",{children:"Add Item"})]})]}),y.jsx("div",{className:"space-y-4",children:_.map($=>y.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg",children:y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-end",children:[y.jsxs("div",{className:"md:col-span-5",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Service/Description *"}),y.jsxs("select",{value:$.description||"",onChange:X=>de($.id,"description",X.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:border-transparent transition-all duration-200 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",style:{"--tw-ring-color":"#03989e"},children:[y.jsx("option",{value:"",children:"Select a service"}),f5.map(X=>y.jsx("option",{value:X,children:X},X))]})]}),y.jsxs("div",{className:"md:col-span-2",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Quantity *"}),y.jsx("input",{type:"number",min:"1",value:$.quantity??0,onChange:X=>de($.id,"quantity",parseInt(X.target.value)||1),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:border-transparent transition-all duration-200 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",style:{"--tw-ring-color":"#03989e"}})]}),y.jsxs("div",{className:"md:col-span-2",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Unit Price *"}),y.jsx("input",{type:"number",min:"0",step:"0.01",value:$.unitPrice??0,onChange:X=>de($.id,"unitPrice",parseFloat(X.target.value)||0),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:border-transparent transition-all duration-200 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",style:{"--tw-ring-color":"#03989e"}})]}),y.jsxs("div",{className:"md:col-span-2",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Total"}),y.jsx("div",{className:"px-4 py-3 bg-gray-100 dark:bg-gray-600 rounded-lg text-gray-900 dark:text-white font-medium",children:pi($.total||0)})]}),y.jsx("div",{className:"md:col-span-1",children:y.jsx("button",{onClick:()=>ze($.id),disabled:_.length===1,className:"w-full p-3 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:y.jsx(hh,{className:"h-4 w-4 mx-auto"})})})]})},$.id))})]}),y.jsx("div",{className:"mb-8",children:y.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg",children:[y.jsx("div",{className:"flex justify-between items-center mb-4",children:y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Invoice Summary"})}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Subtotal:"}),y.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:pi(je)})]}),y.jsxs("div",{className:"flex justify-between",children:[y.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Tax (",(Rg*100).toFixed(0),"%):"]}),y.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:pi(_e)})]}),y.jsx("div",{className:"border-t dark:border-gray-600 pt-3",children:y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Total:"}),y.jsx("span",{className:"text-lg font-bold",style:{color:"#03989e"},children:pi(ae)})]})})]})]})}),y.jsxs("div",{className:"mb-8",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Additional Notes"}),y.jsx("textarea",{value:P,onChange:$=>R($.target.value),rows:4,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:border-transparent transition-all duration-200 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",style:{"--tw-ring-color":"#03989e"},placeholder:"Add any additional notes or terms..."})]}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-end",children:[y.jsx("button",{onClick:e,className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:"Cancel"}),y.jsxs("button",{onClick:()=>O("draft"),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg flex items-center justify-center space-x-2 transition-colors duration-200",children:[y.jsx(Jp,{className:"h-4 w-4"}),y.jsx("span",{children:i?"Update as Draft":"Save as Draft"})]}),y.jsxs("button",{onClick:()=>O("sent"),className:"px-6 py-3 text-white rounded-lg flex items-center justify-center space-x-2 transition-colors duration-200",style:{backgroundColor:"#03989e"},onMouseEnter:$=>{$.currentTarget.style.backgroundColor="#027a7f"},onMouseLeave:$=>{$.currentTarget.style.backgroundColor="#03989e"},children:[y.jsx(Yp,{className:"h-4 w-4"}),y.jsx("span",{children:i?"Update & Send":"Create & Send"})]})]})]})},X5="modulepreload",Q5=function(t){return"/"+t},Mg={},Bc=function(e,r,i){let o=Promise.resolve();if(r&&r.length>0){let h=function(g){return Promise.all(g.map(w=>Promise.resolve(w).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");o=h(r.map(g=>{if(g=Q5(g),g in Mg)return;Mg[g]=!0;const w=g.endsWith(".css"),_=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${_}`))return;const N=document.createElement("link");if(N.rel=w?"stylesheet":X5,w||(N.as="script"),N.crossOrigin="",N.href=g,c&&N.setAttribute("nonce",c),document.head.appendChild(N),w)return new Promise((x,I)=>{N.addEventListener("load",x),N.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${g}`)))})}))}function s(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return o.then(l=>{for(const c of l||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})};function en(t){"@babel/helpers - typeof";return en=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},en(t)}var la=Uint8Array,ds=Uint16Array,t0=Int32Array,Ph=new la([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Lh=new la([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),pp=new la([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),bv=function(t,e){for(var r=new ds(31),i=0;i<31;++i)r[i]=e+=1<<t[i-1];for(var o=new t0(r[30]),i=1;i<30;++i)for(var s=r[i];s<r[i+1];++s)o[s]=s-r[i]<<5|i;return{b:r,r:o}},xv=bv(Ph,2),_v=xv.b,gp=xv.r;_v[28]=258,gp[258]=28;var kv=bv(Lh,0),Z5=kv.b,Bg=kv.r,mp=new ds(32768);for(var Sn=0;Sn<32768;++Sn){var El=(Sn&43690)>>1|(Sn&21845)<<1;El=(El&52428)>>2|(El&13107)<<2,El=(El&61680)>>4|(El&3855)<<4,mp[Sn]=((El&65280)>>8|(El&255)<<8)>>1}var Io=function(t,e,r){for(var i=t.length,o=0,s=new ds(e);o<i;++o)t[o]&&++s[t[o]-1];var l=new ds(e);for(o=1;o<e;++o)l[o]=l[o-1]+s[o-1]<<1;var c;if(r){c=new ds(1<<e);var h=15-e;for(o=0;o<i;++o)if(t[o])for(var g=o<<4|t[o],w=e-t[o],_=l[t[o]-1]++<<w,N=_|(1<<w)-1;_<=N;++_)c[mp[_]>>h]=g}else for(c=new ds(i),o=0;o<i;++o)t[o]&&(c[o]=mp[l[t[o]-1]++]>>15-t[o]);return c},Dl=new la(288);for(var Sn=0;Sn<144;++Sn)Dl[Sn]=8;for(var Sn=144;Sn<256;++Sn)Dl[Sn]=9;for(var Sn=256;Sn<280;++Sn)Dl[Sn]=7;for(var Sn=280;Sn<288;++Sn)Dl[Sn]=8;var qc=new la(32);for(var Sn=0;Sn<32;++Sn)qc[Sn]=5;var ew=Io(Dl,9,0),tw=Io(Dl,9,1),rw=Io(qc,5,0),nw=Io(qc,5,1),qf=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},ro=function(t,e,r){var i=e/8|0;return(t[i]|t[i+1]<<8)>>(e&7)&r},Uf=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},r0=function(t){return(t+7)/8|0},Sv=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new la(t.subarray(e,r))},iw=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ao=function(t,e,r){var i=new Error(e||iw[t]);if(i.code=t,Error.captureStackTrace&&Error.captureStackTrace(i,ao),!r)throw i;return i},aw=function(t,e,r,i){var o=t.length,s=0;if(!o||e.f&&!e.l)return r||new la(0);var l=!r,c=l||e.i!=2,h=e.i;l&&(r=new la(o*3));var g=function(at){var it=r.length;if(at>it){var bt=new la(Math.max(it*2,at));bt.set(r),r=bt}},w=e.f||0,_=e.p||0,N=e.b||0,x=e.l,I=e.d,P=e.m,R=e.n,L=o*8;do{if(!x){w=ro(t,_,1);var M=ro(t,_+1,3);if(_+=3,M)if(M==1)x=tw,I=nw,P=9,R=5;else if(M==2){var be=ro(t,_,31)+257,ne=ro(t,_+10,15)+4,G=be+ro(t,_+5,31)+1;_+=14;for(var fe=new la(G),Te=new la(19),V=0;V<ne;++V)Te[pp[V]]=ro(t,_+V*3,7);_+=ne*3;for(var Y=qf(Te),pe=(1<<Y)-1,te=Io(Te,Y,1),V=0;V<G;){var Ue=te[ro(t,_,pe)];_+=Ue&15;var H=Ue>>4;if(H<16)fe[V++]=H;else{var Me=0,ze=0;for(H==16?(ze=3+ro(t,_,3),_+=2,Me=fe[V-1]):H==17?(ze=3+ro(t,_,7),_+=3):H==18&&(ze=11+ro(t,_,127),_+=7);ze--;)fe[V++]=Me}}var de=fe.subarray(0,be),je=fe.subarray(be);P=qf(de),R=qf(je),x=Io(de,P,1),I=Io(je,R,1)}else ao(1);else{var H=r0(_)+4,oe=t[H-4]|t[H-3]<<8,le=H+oe;if(le>o){h&&ao(0);break}c&&g(N+oe),r.set(t.subarray(H,le),N),e.b=N+=oe,e.p=_=le*8,e.f=w;continue}if(_>L){h&&ao(0);break}}c&&g(N+131072);for(var _e=(1<<P)-1,ae=(1<<R)-1,O=_;;O=_){var Me=x[Uf(t,_)&_e],$=Me>>4;if(_+=Me&15,_>L){h&&ao(0);break}if(Me||ao(2),$<256)r[N++]=$;else if($==256){O=_,x=null;break}else{var X=$-254;if($>264){var V=$-257,ie=Ph[V];X=ro(t,_,(1<<ie)-1)+_v[V],_+=ie}var he=I[Uf(t,_)&ae],ye=he>>4;he||ao(3),_+=he&15;var je=Z5[ye];if(ye>3){var ie=Lh[ye];je+=Uf(t,_)&(1<<ie)-1,_+=ie}if(_>L){h&&ao(0);break}c&&g(N+131072);var Ie=N+X;if(N<je){var ge=s-je,rt=Math.min(je,Ie);for(ge+N<0&&ao(3);N<rt;++N)r[N]=i[ge+N]}for(;N<Ie;++N)r[N]=r[N-je]}}e.l=x,e.p=O,e.b=N,e.f=w,x&&(w=1,e.m=P,e.d=I,e.n=R)}while(!w);return N!=r.length&&l?Sv(r,0,N):r.subarray(0,N)},Qo=function(t,e,r){r<<=e&7;var i=e/8|0;t[i]|=r,t[i+1]|=r>>8},Nc=function(t,e,r){r<<=e&7;var i=e/8|0;t[i]|=r,t[i+1]|=r>>8,t[i+2]|=r>>16},zf=function(t,e){for(var r=[],i=0;i<t.length;++i)t[i]&&r.push({s:i,f:t[i]});var o=r.length,s=r.slice();if(!o)return{t:Av,l:0};if(o==1){var l=new la(r[0].s+1);return l[r[0].s]=1,{t:l,l:1}}r.sort(function(le,be){return le.f-be.f}),r.push({s:-1,f:25001});var c=r[0],h=r[1],g=0,w=1,_=2;for(r[0]={s:-1,f:c.f+h.f,l:c,r:h};w!=o-1;)c=r[r[g].f<r[_].f?g++:_++],h=r[g!=w&&r[g].f<r[_].f?g++:_++],r[w++]={s:-1,f:c.f+h.f,l:c,r:h};for(var N=s[0].s,i=1;i<o;++i)s[i].s>N&&(N=s[i].s);var x=new ds(N+1),I=vp(r[w-1],x,0);if(I>e){var i=0,P=0,R=I-e,L=1<<R;for(s.sort(function(be,ne){return x[ne.s]-x[be.s]||be.f-ne.f});i<o;++i){var M=s[i].s;if(x[M]>e)P+=L-(1<<I-x[M]),x[M]=e;else break}for(P>>=R;P>0;){var H=s[i].s;x[H]<e?P-=1<<e-x[H]++-1:++i}for(;i>=0&&P;--i){var oe=s[i].s;x[oe]==e&&(--x[oe],++P)}I=e}return{t:new la(x),l:I}},vp=function(t,e,r){return t.s==-1?Math.max(vp(t.l,e,r+1),vp(t.r,e,r+1)):e[t.s]=r},qg=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new ds(++e),i=0,o=t[0],s=1,l=function(h){r[i++]=h},c=1;c<=e;++c)if(t[c]==o&&c!=e)++s;else{if(!o&&s>2){for(;s>138;s-=138)l(32754);s>2&&(l(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(l(o),--s;s>6;s-=6)l(8304);s>2&&(l(s-3<<5|8208),s=0)}for(;s--;)l(o);s=1,o=t[c]}return{c:r.subarray(0,i),n:e}},Ac=function(t,e){for(var r=0,i=0;i<e.length;++i)r+=t[i]*e[i];return r},Nv=function(t,e,r){var i=r.length,o=r0(e+2);t[o]=i&255,t[o+1]=i>>8,t[o+2]=t[o]^255,t[o+3]=t[o+1]^255;for(var s=0;s<i;++s)t[o+s+4]=r[s];return(o+4+i)*8},Ug=function(t,e,r,i,o,s,l,c,h,g,w){Qo(e,w++,r),++o[256];for(var _=zf(o,15),N=_.t,x=_.l,I=zf(s,15),P=I.t,R=I.l,L=qg(N),M=L.c,H=L.n,oe=qg(P),le=oe.c,be=oe.n,ne=new ds(19),G=0;G<M.length;++G)++ne[M[G]&31];for(var G=0;G<le.length;++G)++ne[le[G]&31];for(var fe=zf(ne,7),Te=fe.t,V=fe.l,Y=19;Y>4&&!Te[pp[Y-1]];--Y);var pe=g+5<<3,te=Ac(o,Dl)+Ac(s,qc)+l,Ue=Ac(o,N)+Ac(s,P)+l+14+3*Y+Ac(ne,Te)+2*ne[16]+3*ne[17]+7*ne[18];if(h>=0&&pe<=te&&pe<=Ue)return Nv(e,w,t.subarray(h,h+g));var Me,ze,de,je;if(Qo(e,w,1+(Ue<te)),w+=2,Ue<te){Me=Io(N,x,0),ze=N,de=Io(P,R,0),je=P;var _e=Io(Te,V,0);Qo(e,w,H-257),Qo(e,w+5,be-1),Qo(e,w+10,Y-4),w+=14;for(var G=0;G<Y;++G)Qo(e,w+3*G,Te[pp[G]]);w+=3*Y;for(var ae=[M,le],O=0;O<2;++O)for(var $=ae[O],G=0;G<$.length;++G){var X=$[G]&31;Qo(e,w,_e[X]),w+=Te[X],X>15&&(Qo(e,w,$[G]>>5&127),w+=$[G]>>12)}}else Me=ew,ze=Dl,de=rw,je=qc;for(var G=0;G<c;++G){var ie=i[G];if(ie>255){var X=ie>>18&31;Nc(e,w,Me[X+257]),w+=ze[X+257],X>7&&(Qo(e,w,ie>>23&31),w+=Ph[X]);var he=ie&31;Nc(e,w,de[he]),w+=je[he],he>3&&(Nc(e,w,ie>>5&8191),w+=Lh[he])}else Nc(e,w,Me[ie]),w+=ze[ie]}return Nc(e,w,Me[256]),w+ze[256]},sw=new t0([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Av=new la(0),ow=function(t,e,r,i,o,s){var l=s.z||t.length,c=new la(i+l+5*(1+Math.ceil(l/7e3))+o),h=c.subarray(i,c.length-o),g=s.l,w=(s.r||0)&7;if(e){w&&(h[0]=s.r>>3);for(var _=sw[e-1],N=_>>13,x=_&8191,I=(1<<r)-1,P=s.p||new ds(32768),R=s.h||new ds(I+1),L=Math.ceil(r/3),M=2*L,H=function(qt){return(t[qt]^t[qt+1]<<L^t[qt+2]<<M)&I},oe=new t0(25e3),le=new ds(288),be=new ds(32),ne=0,G=0,fe=s.i||0,Te=0,V=s.w||0,Y=0;fe+2<l;++fe){var pe=H(fe),te=fe&32767,Ue=R[pe];if(P[te]=Ue,R[pe]=te,V<=fe){var Me=l-fe;if((ne>7e3||Te>24576)&&(Me>423||!g)){w=Ug(t,h,0,oe,le,be,G,Te,Y,fe-Y,w),Te=ne=G=0,Y=fe;for(var ze=0;ze<286;++ze)le[ze]=0;for(var ze=0;ze<30;++ze)be[ze]=0}var de=2,je=0,_e=x,ae=te-Ue&32767;if(Me>2&&pe==H(fe-ae))for(var O=Math.min(N,Me)-1,$=Math.min(32767,fe),X=Math.min(258,Me);ae<=$&&--_e&&te!=Ue;){if(t[fe+de]==t[fe+de-ae]){for(var ie=0;ie<X&&t[fe+ie]==t[fe+ie-ae];++ie);if(ie>de){if(de=ie,je=ae,ie>O)break;for(var he=Math.min(ae,ie-2),ye=0,ze=0;ze<he;++ze){var Ie=fe-ae+ze&32767,ge=P[Ie],rt=Ie-ge&32767;rt>ye&&(ye=rt,Ue=Ie)}}}te=Ue,Ue=P[te],ae+=te-Ue&32767}if(je){oe[Te++]=268435456|gp[de]<<18|Bg[je];var at=gp[de]&31,it=Bg[je]&31;G+=Ph[at]+Lh[it],++le[257+at],++be[it],V=fe+de,++ne}else oe[Te++]=t[fe],++le[t[fe]]}}for(fe=Math.max(fe,V);fe<l;++fe)oe[Te++]=t[fe],++le[t[fe]];w=Ug(t,h,g,oe,le,be,G,Te,Y,fe-Y,w),g||(s.r=w&7|h[w/8|0]<<3,w-=7,s.h=R,s.p=P,s.i=fe,s.w=V)}else{for(var fe=s.w||0;fe<l+g;fe+=65535){var bt=fe+65535;bt>=l&&(h[w/8|0]=g,bt=l),w=Nv(h,w+1,t.subarray(fe,bt))}s.i=l}return Sv(c,0,i+r0(w)+o)},jv=function(){var t=1,e=0;return{p:function(r){for(var i=t,o=e,s=r.length|0,l=0;l!=s;){for(var c=Math.min(l+2655,s);l<c;++l)o+=i+=r[l];i=(i&65535)+15*(i>>16),o=(o&65535)+15*(o>>16)}t=i,e=o},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},lw=function(t,e,r,i,o){if(!o&&(o={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),l=new la(s.length+t.length);l.set(s),l.set(t,s.length),t=l,o.w=s.length}return ow(t,e.level==null?6:e.level,e.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,i,o)},Ev=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},uw=function(t,e){var r=e.level,i=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=i<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var o=jv();o.p(e.dictionary),Ev(t,2,o.d())}},cw=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&ao(6,"invalid zlib data"),(t[1]>>5&1)==1&&ao(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function yp(t,e){e||(e={});var r=jv();r.p(t);var i=lw(t,e,e.dictionary?6:2,4);return uw(i,e),Ev(i,i.length-4,r.d()),i}function dw(t,e){return aw(t.subarray(cw(t),-4),{i:2},e,e)}var hw=typeof TextDecoder<"u"&&new TextDecoder,fw=0;try{hw.decode(Av,{stream:!0}),fw=1}catch{}var cr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function $f(){cr.console&&typeof cr.console.log=="function"&&cr.console.log.apply(cr.console,arguments)}var cn={log:$f,warn:function(t){cr.console&&(typeof cr.console.warn=="function"?cr.console.warn.apply(cr.console,arguments):$f.call(null,arguments))},error:function(t){cr.console&&(typeof cr.console.error=="function"?cr.console.error.apply(cr.console,arguments):$f(t))}};function Vf(t,e,r){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){nu(i.response,e,r)},i.onerror=function(){cn.error("could not download file")},i.send()}function zg(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function zd(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Lc,wp,nu=cr.saveAs||((typeof window>"u"?"undefined":en(window))!=="object"||window!==cr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var i=cr.URL||cr.webkitURL,o=document.createElement("a");e=e||t.name||"download",o.download=e,o.rel="noopener",typeof t=="string"?(o.href=t,o.origin!==location.origin?zg(o.href)?Vf(t,e,r):zd(o,o.target="_blank"):zd(o)):(o.href=i.createObjectURL(t),setTimeout(function(){i.revokeObjectURL(o.href)},4e4),setTimeout(function(){zd(o)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(zg(t))Vf(t,e,r);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout(function(){zd(i)})}else navigator.msSaveOrOpenBlob(function(o,s){return s===void 0?s={autoBom:!1}:en(s)!=="object"&&(cn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}(t,r),e)}:function(t,e,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof t=="string")return Vf(t,e,r);var o=t.type==="application/octet-stream",s=/constructor/i.test(cr.HTMLElement)||cr.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||o&&s)&&(typeof FileReader>"u"?"undefined":en(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var w=c.result;w=l?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=w:location=w,i=null},c.readAsDataURL(t)}else{var h=cr.URL||cr.webkitURL,g=h.createObjectURL(t);i?i.location=g:location.href=g,i=null,setTimeout(function(){h.revokeObjectURL(g)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Cv(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],i=0;i<r.length;i++){var o=r[i].re,s=r[i].process,l=o.exec(t);l&&(e=s(l),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),h=this.g.toString(16),g=this.b.toString(16);return c.length==1&&(c="0"+c),h.length==1&&(h="0"+h),g.length==1&&(g="0"+g),"#"+c+h+g}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Wf(t,e){var r=t[0],i=t[1],o=t[2],s=t[3];r=ia(r,i,o,s,e[0],7,-680876936),s=ia(s,r,i,o,e[1],12,-389564586),o=ia(o,s,r,i,e[2],17,606105819),i=ia(i,o,s,r,e[3],22,-1044525330),r=ia(r,i,o,s,e[4],7,-176418897),s=ia(s,r,i,o,e[5],12,1200080426),o=ia(o,s,r,i,e[6],17,-1473231341),i=ia(i,o,s,r,e[7],22,-45705983),r=ia(r,i,o,s,e[8],7,1770035416),s=ia(s,r,i,o,e[9],12,-1958414417),o=ia(o,s,r,i,e[10],17,-42063),i=ia(i,o,s,r,e[11],22,-1990404162),r=ia(r,i,o,s,e[12],7,1804603682),s=ia(s,r,i,o,e[13],12,-40341101),o=ia(o,s,r,i,e[14],17,-1502002290),r=aa(r,i=ia(i,o,s,r,e[15],22,1236535329),o,s,e[1],5,-165796510),s=aa(s,r,i,o,e[6],9,-1069501632),o=aa(o,s,r,i,e[11],14,643717713),i=aa(i,o,s,r,e[0],20,-373897302),r=aa(r,i,o,s,e[5],5,-701558691),s=aa(s,r,i,o,e[10],9,38016083),o=aa(o,s,r,i,e[15],14,-660478335),i=aa(i,o,s,r,e[4],20,-405537848),r=aa(r,i,o,s,e[9],5,568446438),s=aa(s,r,i,o,e[14],9,-1019803690),o=aa(o,s,r,i,e[3],14,-187363961),i=aa(i,o,s,r,e[8],20,1163531501),r=aa(r,i,o,s,e[13],5,-1444681467),s=aa(s,r,i,o,e[2],9,-51403784),o=aa(o,s,r,i,e[7],14,1735328473),r=sa(r,i=aa(i,o,s,r,e[12],20,-1926607734),o,s,e[5],4,-378558),s=sa(s,r,i,o,e[8],11,-2022574463),o=sa(o,s,r,i,e[11],16,1839030562),i=sa(i,o,s,r,e[14],23,-35309556),r=sa(r,i,o,s,e[1],4,-1530992060),s=sa(s,r,i,o,e[4],11,1272893353),o=sa(o,s,r,i,e[7],16,-155497632),i=sa(i,o,s,r,e[10],23,-1094730640),r=sa(r,i,o,s,e[13],4,681279174),s=sa(s,r,i,o,e[0],11,-358537222),o=sa(o,s,r,i,e[3],16,-722521979),i=sa(i,o,s,r,e[6],23,76029189),r=sa(r,i,o,s,e[9],4,-640364487),s=sa(s,r,i,o,e[12],11,-421815835),o=sa(o,s,r,i,e[15],16,530742520),r=oa(r,i=sa(i,o,s,r,e[2],23,-995338651),o,s,e[0],6,-198630844),s=oa(s,r,i,o,e[7],10,1126891415),o=oa(o,s,r,i,e[14],15,-1416354905),i=oa(i,o,s,r,e[5],21,-57434055),r=oa(r,i,o,s,e[12],6,1700485571),s=oa(s,r,i,o,e[3],10,-1894986606),o=oa(o,s,r,i,e[10],15,-1051523),i=oa(i,o,s,r,e[1],21,-2054922799),r=oa(r,i,o,s,e[8],6,1873313359),s=oa(s,r,i,o,e[15],10,-30611744),o=oa(o,s,r,i,e[6],15,-1560198380),i=oa(i,o,s,r,e[13],21,1309151649),r=oa(r,i,o,s,e[4],6,-145523070),s=oa(s,r,i,o,e[11],10,-1120210379),o=oa(o,s,r,i,e[2],15,718787259),i=oa(i,o,s,r,e[9],21,-343485551),t[0]=Tl(r,t[0]),t[1]=Tl(i,t[1]),t[2]=Tl(o,t[2]),t[3]=Tl(s,t[3])}function Ih(t,e,r,i,o,s){return e=Tl(Tl(e,t),Tl(i,s)),Tl(e<<o|e>>>32-o,r)}function ia(t,e,r,i,o,s,l){return Ih(e&r|~e&i,t,e,o,s,l)}function aa(t,e,r,i,o,s,l){return Ih(e&i|r&~i,t,e,o,s,l)}function sa(t,e,r,i,o,s,l){return Ih(e^r^i,t,e,o,s,l)}function oa(t,e,r,i,o,s,l){return Ih(r^(e|~i),t,e,o,s,l)}function Pv(t){var e,r=t.length,i=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Wf(i,pw(t.substring(e-64,e)));t=t.substring(e-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)o[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(Wf(i,o),e=0;e<16;e++)o[e]=0;return o[14]=8*r,Wf(i,o),i}function pw(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}Lc=cr.atob.bind(cr),wp=cr.btoa.bind(cr);var $g="0123456789abcdef".split("");function gw(t){for(var e="",r=0;r<4;r++)e+=$g[t>>8*r+4&15]+$g[t>>8*r&15];return e}function mw(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function bp(t){return Pv(t).map(mw).join("")}var vw=function(t){for(var e=0;e<t.length;e++)t[e]=gw(t[e]);return t.join("")}(Pv("hello"))!="5d41402abc4b2a76b9719d911017c592";function Tl(t,e){if(vw){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function xp(t,e){var r,i,o,s;if(t!==r){for(var l=(o=t,s=1+(256/t.length>>0),new Array(s+1).join(o)),c=[],h=0;h<256;h++)c[h]=h;var g=0;for(h=0;h<256;h++){var w=c[h];g=(g+w+l.charCodeAt(h))%256,c[h]=c[g],c[g]=w}r=t,i=c}else c=i;var _=e.length,N=0,x=0,I="";for(h=0;h<_;h++)x=(x+(w=c[N=(N+1)%256]))%256,c[N]=c[x],c[x]=w,l=c[(c[N]+c[x])%256],I+=String.fromCharCode(e.charCodeAt(h)^l);return I}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Vg={print:4,modify:8,copy:16,"annot-forms":32};function qu(t,e,r,i){this.v=1,this.r=2;var o=192;t.forEach(function(c){if(Vg.perm!==void 0)throw new Error("Invalid permission: "+c);o+=Vg[c]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),l=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,l),this.P=-(1+(255^o)),this.encryptionKey=bp(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=xp(this.encryptionKey,this.padding)}function Uu(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,i=0;i<r;i++){var o=t.charCodeAt(i);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?e+="#"+("0"+o.toString(16)).slice(-2):e+=t[i]}return e}function Wg(t){if(en(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,i,o){if(o=o||!1,typeof r!="string"||typeof i!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var s=Math.random().toString(35);return e[r][s]=[i,!!o],s},this.unsubscribe=function(r){for(var i in e)if(e[i][r])return delete e[i][r],Object.keys(e[i]).length===0&&delete e[i],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var i=Array.prototype.slice.call(arguments,1),o=[];for(var s in e[r]){var l=e[r][s];try{l[0].apply(t,i)}catch(c){cr.console&&cn.error("jsPDF PubSub Error",c.message,c)}l[1]&&o.push(s)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function fh(t){if(!(this instanceof fh))return new fh(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function Lv(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function au(t,e,r,i,o){if(!(this instanceof au))return new au(t,e,r,i,o);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,Lv.call(this,i,o)}function Wu(t,e,r,i,o){if(!(this instanceof Wu))return new Wu(t,e,r,i,o);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,Lv.call(this,i,o)}function lr(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],o=arguments[2],s=arguments[3],l=[],c=1,h=16,g="S",w=null;en(t=t||{})==="object"&&(r=t.orientation,i=t.unit||i,o=t.format||o,s=t.compress||t.compressPdf||s,(w=t.encryption||null)!==null&&(w.userPassword=w.userPassword||"",w.ownerPassword=w.ownerPassword||"",w.userPermissions=w.userPermissions||[]),c=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(h=t.floatPrecision),g=t.defaultPathOperation||"S"),l=t.filters||(s===!0?["FlateEncode"]:l),i=i||"mm",r=(""+(r||"P")).toLowerCase();var _=t.putOnlyUsedFonts||!1,N={},x={internal:{},__private__:{}};x.__private__.PubSub=Wg;var I="1.3",P=x.__private__.getPdfVersion=function(){return I};x.__private__.setPdfVersion=function(b){I=b};var R={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return R};var L=x.__private__.getPageFormat=function(b){return R[b]};o=o||"a4";var M={COMPAT:"compat",ADVANCED:"advanced"},H=M.COMPAT;function oe(){this.saveGraphicsState(),se(new Ct(wt,0,0,-wt,0,ma()*wt).toString()+" cm"),this.setFontSize(this.getFontSize()/wt),g="n",H=M.ADVANCED}function le(){this.restoreGraphicsState(),g="S",H=M.COMPAT}var be=x.__private__.combineFontStyleAndFontWeight=function(b,F){if(b=="bold"&&F=="normal"||b=="bold"&&F==400||b=="normal"&&F=="italic"||b=="bold"&&F=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return F&&(b=F==400||F==="normal"?b==="italic"?"italic":"normal":F!=700&&F!=="bold"||b!=="normal"?(F==700?"bold":F)+""+b:"bold"),b};x.advancedAPI=function(b){var F=H===M.COMPAT;return F&&oe.call(this),typeof b!="function"||(b(this),F&&le.call(this)),this},x.compatAPI=function(b){var F=H===M.ADVANCED;return F&&le.call(this),typeof b!="function"||(b(this),F&&oe.call(this)),this},x.isAdvancedAPI=function(){return H===M.ADVANCED};var ne,G=function(b){if(H!==M.ADVANCED)throw new Error(b+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},fe=x.roundToPrecision=x.__private__.roundToPrecision=function(b,F){var ee=e||F;if(isNaN(b)||isNaN(ee))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return b.toFixed(ee).replace(/0+$/,"")};ne=x.hpf=x.__private__.hpf=typeof h=="number"?function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.hpf");return fe(b,h)}:h==="smart"?function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.hpf");return fe(b,b>-1&&b<1?16:5)}:function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.hpf");return fe(b,16)};var Te=x.f2=x.__private__.f2=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.f2");return fe(b,2)},V=x.__private__.f3=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.f3");return fe(b,3)},Y=x.scale=x.__private__.scale=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.scale");return H===M.COMPAT?b*wt:H===M.ADVANCED?b:void 0},pe=function(b){return H===M.COMPAT?ma()-b:H===M.ADVANCED?b:void 0},te=function(b){return Y(pe(b))};x.__private__.setPrecision=x.setPrecision=function(b){typeof parseInt(b,10)=="number"&&(e=parseInt(b,10))};var Ue,Me="00000000000000000000000000000000",ze=x.__private__.getFileId=function(){return Me},de=x.__private__.setFileId=function(b){return Me=b!==void 0&&/^[a-fA-F0-9]{32}$/.test(b)?b.toUpperCase():Me.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),w!==null&&(rn=new qu(w.userPermissions,w.userPassword,w.ownerPassword,Me)),Me};x.setFileId=function(b){return de(b),this},x.getFileId=function(){return ze()};var je=x.__private__.convertDateToPDFDate=function(b){var F=b.getTimezoneOffset(),ee=F<0?"+":"-",me=Math.floor(Math.abs(F/60)),Fe=Math.abs(F%60),Qe=[ee,X(me),"'",X(Fe),"'"].join("");return["D:",b.getFullYear(),X(b.getMonth()+1),X(b.getDate()),X(b.getHours()),X(b.getMinutes()),X(b.getSeconds()),Qe].join("")},_e=x.__private__.convertPDFDateToDate=function(b){var F=parseInt(b.substr(2,4),10),ee=parseInt(b.substr(6,2),10)-1,me=parseInt(b.substr(8,2),10),Fe=parseInt(b.substr(10,2),10),Qe=parseInt(b.substr(12,2),10),st=parseInt(b.substr(14,2),10);return new Date(F,ee,me,Fe,Qe,st,0)},ae=x.__private__.setCreationDate=function(b){var F;if(b===void 0&&(b=new Date),b instanceof Date)F=je(b);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(b))throw new Error("Invalid argument passed to jsPDF.setCreationDate");F=b}return Ue=F},O=x.__private__.getCreationDate=function(b){var F=Ue;return b==="jsDate"&&(F=_e(Ue)),F};x.setCreationDate=function(b){return ae(b),this},x.getCreationDate=function(b){return O(b)};var $,X=x.__private__.padd2=function(b){return("0"+parseInt(b)).slice(-2)},ie=x.__private__.padd2Hex=function(b){return("00"+(b=b.toString())).substr(b.length)},he=0,ye=[],Ie=[],ge=0,rt=[],at=[],it=!1,bt=Ie,qt=function(){he=0,ge=0,Ie=[],ye=[],rt=[],Pi=Pr(),Tn=Pr()};x.__private__.setCustomOutputDestination=function(b){it=!0,bt=b};var Je=function(b){it||(bt=b)};x.__private__.resetCustomOutputDestination=function(){it=!1,bt=Ie};var se=x.__private__.out=function(b){return b=b.toString(),ge+=b.length+1,bt.push(b),bt},Xt=x.__private__.write=function(b){return se(arguments.length===1?b.toString():Array.prototype.join.call(arguments," "))},Tt=x.__private__.getArrayBuffer=function(b){for(var F=b.length,ee=new ArrayBuffer(F),me=new Uint8Array(ee);F--;)me[F]=b.charCodeAt(F);return ee},ot=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return ot};var pt=t.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(b){return pt=H===M.ADVANCED?b/wt:b,this};var vt,St=x.__private__.getFontSize=x.getFontSize=function(){return H===M.COMPAT?pt:pt*wt},Rt=t.R2L||!1;x.__private__.setR2L=x.setR2L=function(b){return Rt=b,this},x.__private__.getR2L=x.getR2L=function(){return Rt};var Yt,Qt=x.__private__.setZoomMode=function(b){var F=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(b))vt=b;else if(isNaN(b)){if(F.indexOf(b)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+b+'" is not recognized.');vt=b}else vt=parseInt(b,10)};x.__private__.getZoomMode=function(){return vt};var nr,Zt=x.__private__.setPageMode=function(b){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(b)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+b+'" is not recognized.');Yt=b};x.__private__.getPageMode=function(){return Yt};var yr=x.__private__.setLayoutMode=function(b){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(b)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+b+'" is not recognized.');nr=b};x.__private__.getLayoutMode=function(){return nr},x.__private__.setDisplayMode=x.setDisplayMode=function(b,F,ee){return Qt(b),yr(F),Zt(ee),this};var zt={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(b){if(Object.keys(zt).indexOf(b)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return zt[b]},x.__private__.getDocumentProperties=function(){return zt},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(b){for(var F in zt)zt.hasOwnProperty(F)&&b[F]&&(zt[F]=b[F]);return this},x.__private__.setDocumentProperty=function(b,F){if(Object.keys(zt).indexOf(b)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return zt[b]=F};var ar,wt,Xr,kr,Zn,Sr={},xt={},On=[],mr={},gi={},dt={},Nn={},Er=null,br=0,Ft=[],pr=new Wg(x),wn=t.hotfixes||[],Cr={},qr={},an=[],Ct=function b(F,ee,me,Fe,Qe,st){if(!(this instanceof b))return new b(F,ee,me,Fe,Qe,st);isNaN(F)&&(F=1),isNaN(ee)&&(ee=0),isNaN(me)&&(me=0),isNaN(Fe)&&(Fe=1),isNaN(Qe)&&(Qe=0),isNaN(st)&&(st=0),this._matrix=[F,ee,me,Fe,Qe,st]};Object.defineProperty(Ct.prototype,"sx",{get:function(){return this._matrix[0]},set:function(b){this._matrix[0]=b}}),Object.defineProperty(Ct.prototype,"shy",{get:function(){return this._matrix[1]},set:function(b){this._matrix[1]=b}}),Object.defineProperty(Ct.prototype,"shx",{get:function(){return this._matrix[2]},set:function(b){this._matrix[2]=b}}),Object.defineProperty(Ct.prototype,"sy",{get:function(){return this._matrix[3]},set:function(b){this._matrix[3]=b}}),Object.defineProperty(Ct.prototype,"tx",{get:function(){return this._matrix[4]},set:function(b){this._matrix[4]=b}}),Object.defineProperty(Ct.prototype,"ty",{get:function(){return this._matrix[5]},set:function(b){this._matrix[5]=b}}),Object.defineProperty(Ct.prototype,"a",{get:function(){return this._matrix[0]},set:function(b){this._matrix[0]=b}}),Object.defineProperty(Ct.prototype,"b",{get:function(){return this._matrix[1]},set:function(b){this._matrix[1]=b}}),Object.defineProperty(Ct.prototype,"c",{get:function(){return this._matrix[2]},set:function(b){this._matrix[2]=b}}),Object.defineProperty(Ct.prototype,"d",{get:function(){return this._matrix[3]},set:function(b){this._matrix[3]=b}}),Object.defineProperty(Ct.prototype,"e",{get:function(){return this._matrix[4]},set:function(b){this._matrix[4]=b}}),Object.defineProperty(Ct.prototype,"f",{get:function(){return this._matrix[5]},set:function(b){this._matrix[5]=b}}),Object.defineProperty(Ct.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ct.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ct.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ct.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ct.prototype.join=function(b){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ne).join(b)},Ct.prototype.multiply=function(b){var F=b.sx*this.sx+b.shy*this.shx,ee=b.sx*this.shy+b.shy*this.sy,me=b.shx*this.sx+b.sy*this.shx,Fe=b.shx*this.shy+b.sy*this.sy,Qe=b.tx*this.sx+b.ty*this.shx+this.tx,st=b.tx*this.shy+b.ty*this.sy+this.ty;return new Ct(F,ee,me,Fe,Qe,st)},Ct.prototype.decompose=function(){var b=this.sx,F=this.shy,ee=this.shx,me=this.sy,Fe=this.tx,Qe=this.ty,st=Math.sqrt(b*b+F*F),Et=(b/=st)*ee+(F/=st)*me;ee-=b*Et,me-=F*Et;var Vt=Math.sqrt(ee*ee+me*me);return Et/=Vt,b*(me/=Vt)<F*(ee/=Vt)&&(b=-b,F=-F,Et=-Et,st=-st),{scale:new Ct(st,0,0,Vt,0,0),translate:new Ct(1,0,0,1,Fe,Qe),rotate:new Ct(b,F,-F,b,0,0),skew:new Ct(1,0,Et,1,0,0)}},Ct.prototype.toString=function(b){return this.join(" ")},Ct.prototype.inversed=function(){var b=this.sx,F=this.shy,ee=this.shx,me=this.sy,Fe=this.tx,Qe=this.ty,st=1/(b*me-F*ee),Et=me*st,Vt=-F*st,hr=-ee*st,sr=b*st;return new Ct(Et,Vt,hr,sr,-Et*Fe-hr*Qe,-Vt*Fe-sr*Qe)},Ct.prototype.applyToPoint=function(b){var F=b.x*this.sx+b.y*this.shx+this.tx,ee=b.x*this.shy+b.y*this.sy+this.ty;return new Ji(F,ee)},Ct.prototype.applyToRectangle=function(b){var F=this.applyToPoint(b),ee=this.applyToPoint(new Ji(b.x+b.w,b.y+b.h));return new sn(F.x,F.y,ee.x-F.x,ee.y-F.y)},Ct.prototype.clone=function(){var b=this.sx,F=this.shy,ee=this.shx,me=this.sy,Fe=this.tx,Qe=this.ty;return new Ct(b,F,ee,me,Fe,Qe)},x.Matrix=Ct;var Qr=x.matrixMult=function(b,F){return F.multiply(b)},er=new Ct(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=er;var vr=function(b,F){if(!gi[b]){var ee=(F instanceof au?"Sh":"P")+(Object.keys(mr).length+1).toString(10);F.id=ee,gi[b]=ee,mr[ee]=F,pr.publish("addPattern",F)}};x.ShadingPattern=au,x.TilingPattern=Wu,x.addShadingPattern=function(b,F){return G("addShadingPattern()"),vr(b,F),this},x.beginTilingPattern=function(b){G("beginTilingPattern()"),ks(b.boundingBox[0],b.boundingBox[1],b.boundingBox[2]-b.boundingBox[0],b.boundingBox[3]-b.boundingBox[1],b.matrix)},x.endTilingPattern=function(b,F){G("endTilingPattern()"),F.stream=at[$].join(`
`),vr(b,F),pr.publish("endTilingPattern",F),an.pop().restore()};var Mr=x.__private__.newObject=function(){var b=Pr();return Ur(b,!0),b},Pr=x.__private__.newObjectDeferred=function(){return he++,ye[he]=function(){return ge},he},Ur=function(b,F){return F=typeof F=="boolean"&&F,ye[b]=ge,F&&se(b+" 0 obj"),b},qn=x.__private__.newAdditionalObject=function(){var b={objId:Pr(),content:""};return rt.push(b),b},Pi=Pr(),Tn=Pr(),ei=x.__private__.decodeColorString=function(b){var F=b.split(" ");if(F.length!==2||F[1]!=="g"&&F[1]!=="G")F.length===5&&(F[4]==="k"||F[4]==="K")&&(F=[(1-F[0])*(1-F[3]),(1-F[1])*(1-F[3]),(1-F[2])*(1-F[3]),"r"]);else{var ee=parseFloat(F[0]);F=[ee,ee,ee,"r"]}for(var me="#",Fe=0;Fe<3;Fe++)me+=("0"+Math.floor(255*parseFloat(F[Fe])).toString(16)).slice(-2);return me},tn=x.__private__.encodeColorString=function(b){var F;typeof b=="string"&&(b={ch1:b});var ee=b.ch1,me=b.ch2,Fe=b.ch3,Qe=b.ch4,st=b.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ee=="string"&&ee.charAt(0)!=="#"){var Et=new Cv(ee);if(Et.ok)ee=Et.toHex();else if(!/^\d*\.?\d*$/.test(ee))throw new Error('Invalid color "'+ee+'" passed to jsPDF.encodeColorString.')}if(typeof ee=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ee)&&(ee="#"+ee[1]+ee[1]+ee[2]+ee[2]+ee[3]+ee[3]),typeof ee=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ee)){var Vt=parseInt(ee.substr(1),16);ee=Vt>>16&255,me=Vt>>8&255,Fe=255&Vt}if(me===void 0||Qe===void 0&&ee===me&&me===Fe)if(typeof ee=="string")F=ee+" "+st[0];else switch(b.precision){case 2:F=Te(ee/255)+" "+st[0];break;case 3:default:F=V(ee/255)+" "+st[0]}else if(Qe===void 0||en(Qe)==="object"){if(Qe&&!isNaN(Qe.a)&&Qe.a===0)return F=["1.","1.","1.",st[1]].join(" ");if(typeof ee=="string")F=[ee,me,Fe,st[1]].join(" ");else switch(b.precision){case 2:F=[Te(ee/255),Te(me/255),Te(Fe/255),st[1]].join(" ");break;default:case 3:F=[V(ee/255),V(me/255),V(Fe/255),st[1]].join(" ")}}else if(typeof ee=="string")F=[ee,me,Fe,Qe,st[2]].join(" ");else switch(b.precision){case 2:F=[Te(ee),Te(me),Te(Fe),Te(Qe),st[2]].join(" ");break;case 3:default:F=[V(ee),V(me),V(Fe),V(Qe),st[2]].join(" ")}return F},mi=x.__private__.getFilters=function(){return l},Li=x.__private__.putStream=function(b){var F=(b=b||{}).data||"",ee=b.filters||mi(),me=b.alreadyAppliedFilters||[],Fe=b.addLength1||!1,Qe=F.length,st=b.objectId,Et=function($n){return $n};if(w!==null&&st===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");w!==null&&(Et=rn.encryptor(st,0));var Vt={};ee===!0&&(ee=["FlateEncode"]);var hr=b.additionalKeyValues||[],sr=(Vt=lr.API.processDataByFilters!==void 0?lr.API.processDataByFilters(F,ee):{data:F,reverseChain:[]}).reverseChain+(Array.isArray(me)?me.join(" "):me.toString());if(Vt.data.length!==0&&(hr.push({key:"Length",value:Vt.data.length}),Fe===!0&&hr.push({key:"Length1",value:Qe})),sr.length!=0)if(sr.split("/").length-1==1)hr.push({key:"Filter",value:sr});else{hr.push({key:"Filter",value:"["+sr+"]"});for(var Ar=0;Ar<hr.length;Ar+=1)if(hr[Ar].key==="DecodeParms"){for(var on=[],ln=0;ln<Vt.reverseChain.split("/").length-1;ln+=1)on.push("null");on.push(hr[Ar].value),hr[Ar].value="["+on.join(" ")+"]"}}se("<<");for(var An=0;An<hr.length;An++)se("/"+hr[An].key+" "+hr[An].value);se(">>"),Vt.data.length!==0&&(se("stream"),se(Et(Vt.data)),se("endstream"))},Un=x.__private__.putPage=function(b){var F=b.number,ee=b.data,me=b.objId,Fe=b.contentsObjId;Ur(me,!0),se("<</Type /Page"),se("/Parent "+b.rootDictionaryObjId+" 0 R"),se("/Resources "+b.resourceDictionaryObjId+" 0 R"),se("/MediaBox ["+parseFloat(ne(b.mediaBox.bottomLeftX))+" "+parseFloat(ne(b.mediaBox.bottomLeftY))+" "+ne(b.mediaBox.topRightX)+" "+ne(b.mediaBox.topRightY)+"]"),b.cropBox!==null&&se("/CropBox ["+ne(b.cropBox.bottomLeftX)+" "+ne(b.cropBox.bottomLeftY)+" "+ne(b.cropBox.topRightX)+" "+ne(b.cropBox.topRightY)+"]"),b.bleedBox!==null&&se("/BleedBox ["+ne(b.bleedBox.bottomLeftX)+" "+ne(b.bleedBox.bottomLeftY)+" "+ne(b.bleedBox.topRightX)+" "+ne(b.bleedBox.topRightY)+"]"),b.trimBox!==null&&se("/TrimBox ["+ne(b.trimBox.bottomLeftX)+" "+ne(b.trimBox.bottomLeftY)+" "+ne(b.trimBox.topRightX)+" "+ne(b.trimBox.topRightY)+"]"),b.artBox!==null&&se("/ArtBox ["+ne(b.artBox.bottomLeftX)+" "+ne(b.artBox.bottomLeftY)+" "+ne(b.artBox.topRightX)+" "+ne(b.artBox.topRightY)+"]"),typeof b.userUnit=="number"&&b.userUnit!==1&&se("/UserUnit "+b.userUnit),pr.publish("putPage",{objId:me,pageContext:Ft[F],pageNumber:F,page:ee}),se("/Contents "+Fe+" 0 R"),se(">>"),se("endobj");var Qe=ee.join(`
`);return H===M.ADVANCED&&(Qe+=`
Q`),Ur(Fe,!0),Li({data:Qe,filters:mi(),objectId:Fe}),se("endobj"),me},Ha=x.__private__.putPages=function(){var b,F,ee=[];for(b=1;b<=br;b++)Ft[b].objId=Pr(),Ft[b].contentsObjId=Pr();for(b=1;b<=br;b++)ee.push(Un({number:b,data:at[b],objId:Ft[b].objId,contentsObjId:Ft[b].contentsObjId,mediaBox:Ft[b].mediaBox,cropBox:Ft[b].cropBox,bleedBox:Ft[b].bleedBox,trimBox:Ft[b].trimBox,artBox:Ft[b].artBox,userUnit:Ft[b].userUnit,rootDictionaryObjId:Pi,resourceDictionaryObjId:Tn}));Ur(Pi,!0),se("<</Type /Pages");var me="/Kids [";for(F=0;F<br;F++)me+=ee[F]+" 0 R ";se(me+"]"),se("/Count "+br),se(">>"),se("endobj"),pr.publish("postPutPages")},Ii=function(b){pr.publish("putFont",{font:b,out:se,newObject:Mr,putStream:Li}),b.isAlreadyPutted!==!0&&(b.objectNumber=Mr(),se("<<"),se("/Type /Font"),se("/BaseFont /"+Uu(b.postScriptName)),se("/Subtype /Type1"),typeof b.encoding=="string"&&se("/Encoding /"+b.encoding),se("/FirstChar 32"),se("/LastChar 255"),se(">>"),se("endobj"))},hs=function(){for(var b in Sr)Sr.hasOwnProperty(b)&&(_===!1||_===!0&&N.hasOwnProperty(b))&&Ii(Sr[b])},Ka=function(b){b.objectNumber=Mr();var F=[];F.push({key:"Type",value:"/XObject"}),F.push({key:"Subtype",value:"/Form"}),F.push({key:"BBox",value:"["+[ne(b.x),ne(b.y),ne(b.x+b.width),ne(b.y+b.height)].join(" ")+"]"}),F.push({key:"Matrix",value:"["+b.matrix.toString()+"]"});var ee=b.pages[1].join(`
`);Li({data:ee,additionalKeyValues:F,objectId:b.objectNumber}),se("endobj")},Gr=function(){for(var b in Cr)Cr.hasOwnProperty(b)&&Ka(Cr[b])},ja=function(b,F){var ee,me=[],Fe=1/(F-1);for(ee=0;ee<1;ee+=Fe)me.push(ee);if(me.push(1),b[0].offset!=0){var Qe={offset:0,color:b[0].color};b.unshift(Qe)}if(b[b.length-1].offset!=1){var st={offset:1,color:b[b.length-1].color};b.push(st)}for(var Et="",Vt=0,hr=0;hr<me.length;hr++){for(ee=me[hr];ee>b[Vt+1].offset;)Vt++;var sr=b[Vt].offset,Ar=(ee-sr)/(b[Vt+1].offset-sr),on=b[Vt].color,ln=b[Vt+1].color;Et+=ie(Math.round((1-Ar)*on[0]+Ar*ln[0]).toString(16))+ie(Math.round((1-Ar)*on[1]+Ar*ln[1]).toString(16))+ie(Math.round((1-Ar)*on[2]+Ar*ln[2]).toString(16))}return Et.trim()},Or=function(b,F){F||(F=21);var ee=Mr(),me=ja(b.colors,F),Fe=[];Fe.push({key:"FunctionType",value:"0"}),Fe.push({key:"Domain",value:"[0.0 1.0]"}),Fe.push({key:"Size",value:"["+F+"]"}),Fe.push({key:"BitsPerSample",value:"8"}),Fe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Fe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Li({data:me,additionalKeyValues:Fe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ee}),se("endobj"),b.objectNumber=Mr(),se("<< /ShadingType "+b.type),se("/ColorSpace /DeviceRGB");var Qe="/Coords ["+ne(parseFloat(b.coords[0]))+" "+ne(parseFloat(b.coords[1]))+" ";b.type===2?Qe+=ne(parseFloat(b.coords[2]))+" "+ne(parseFloat(b.coords[3])):Qe+=ne(parseFloat(b.coords[2]))+" "+ne(parseFloat(b.coords[3]))+" "+ne(parseFloat(b.coords[4]))+" "+ne(parseFloat(b.coords[5])),se(Qe+="]"),b.matrix&&se("/Matrix ["+b.matrix.toString()+"]"),se("/Function "+ee+" 0 R"),se("/Extend [true true]"),se(">>"),se("endobj")},ol=function(b,F){var ee=Pr(),me=Mr();F.push({resourcesOid:ee,objectOid:me}),b.objectNumber=me;var Fe=[];Fe.push({key:"Type",value:"/Pattern"}),Fe.push({key:"PatternType",value:"1"}),Fe.push({key:"PaintType",value:"1"}),Fe.push({key:"TilingType",value:"1"}),Fe.push({key:"BBox",value:"["+b.boundingBox.map(ne).join(" ")+"]"}),Fe.push({key:"XStep",value:ne(b.xStep)}),Fe.push({key:"YStep",value:ne(b.yStep)}),Fe.push({key:"Resources",value:ee+" 0 R"}),b.matrix&&Fe.push({key:"Matrix",value:"["+b.matrix.toString()+"]"}),Li({data:b.stream,additionalKeyValues:Fe,objectId:b.objectNumber}),se("endobj")},Oi=function(b){var F;for(F in mr)mr.hasOwnProperty(F)&&(mr[F]instanceof au?Or(mr[F]):mr[F]instanceof Wu&&ol(mr[F],b))},fs=function(b){for(var F in b.objectNumber=Mr(),se("<<"),b)switch(F){case"opacity":se("/ca "+Te(b[F]));break;case"stroke-opacity":se("/CA "+Te(b[F]))}se(">>"),se("endobj")},ps=function(){var b;for(b in dt)dt.hasOwnProperty(b)&&fs(dt[b])},Ts=function(){for(var b in se("/XObject <<"),Cr)Cr.hasOwnProperty(b)&&Cr[b].objectNumber>=0&&se("/"+b+" "+Cr[b].objectNumber+" 0 R");pr.publish("putXobjectDict"),se(">>")},Ea=function(){rn.oid=Mr(),se("<<"),se("/Filter /Standard"),se("/V "+rn.v),se("/R "+rn.r),se("/U <"+rn.toHexString(rn.U)+">"),se("/O <"+rn.toHexString(rn.O)+">"),se("/P "+rn.P),se(">>"),se("endobj")},gs=function(){for(var b in se("/Font <<"),Sr)Sr.hasOwnProperty(b)&&(_===!1||_===!0&&N.hasOwnProperty(b))&&se("/"+b+" "+Sr[b].objectNumber+" 0 R");se(">>")},si=function(){if(Object.keys(mr).length>0){for(var b in se("/Shading <<"),mr)mr.hasOwnProperty(b)&&mr[b]instanceof au&&mr[b].objectNumber>=0&&se("/"+b+" "+mr[b].objectNumber+" 0 R");pr.publish("putShadingPatternDict"),se(">>")}},Rs=function(b){if(Object.keys(mr).length>0){for(var F in se("/Pattern <<"),mr)mr.hasOwnProperty(F)&&mr[F]instanceof x.TilingPattern&&mr[F].objectNumber>=0&&mr[F].objectNumber<b&&se("/"+F+" "+mr[F].objectNumber+" 0 R");pr.publish("putTilingPatternDict"),se(">>")}},ir=function(){if(Object.keys(dt).length>0){var b;for(b in se("/ExtGState <<"),dt)dt.hasOwnProperty(b)&&dt[b].objectNumber>=0&&se("/"+b+" "+dt[b].objectNumber+" 0 R");pr.publish("putGStateDict"),se(">>")}},hn=function(b){Ur(b.resourcesOid,!0),se("<<"),se("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),gs(),si(),Rs(b.objectOid),ir(),Ts(),se(">>"),se("endobj")},Ro=function(){var b=[];hs(),ps(),Gr(),Oi(b),pr.publish("putResources"),b.forEach(hn),hn({resourcesOid:Tn,objectOid:Number.MAX_SAFE_INTEGER}),pr.publish("postPutResources")},Do=function(){pr.publish("putAdditionalObjects");for(var b=0;b<rt.length;b++){var F=rt[b];Ur(F.objId,!0),se(F.content),se("endobj")}pr.publish("postPutAdditionalObjects")},Tr=function(b){xt[b.fontName]=xt[b.fontName]||{},xt[b.fontName][b.fontStyle]=b.id},zi=function(b,F,ee,me,Fe){var Qe={id:"F"+(Object.keys(Sr).length+1).toString(10),postScriptName:b,fontName:F,fontStyle:ee,encoding:me,isStandardFont:Fe||!1,metadata:{}};return pr.publish("addFont",{font:Qe,instance:this}),Sr[Qe.id]=Qe,Tr(Qe),Qe.id},ua=function(b){for(var F=0,ee=ot.length;F<ee;F++){var me=zi.call(this,b[F][0],b[F][1],b[F][2],ot[F][3],!0);_===!1&&(N[me]=!0);var Fe=b[F][0].split("-");Tr({id:me,fontName:Fe[0],fontStyle:Fe[1]||""})}pr.publish("addFonts",{fonts:Sr,dictionary:xt})},En=function(b){return b.foo=function(){try{return b.apply(this,arguments)}catch(me){var F=me.stack||"";~F.indexOf(" at ")&&(F=F.split(" at ")[1]);var ee="Error in function "+F.split(`
`)[0].split("<")[0]+": "+me.message;if(!cr.console)throw new Error(ee);cr.console.error(ee,me),cr.alert&&alert(ee)}},b.foo.bar=b,b.foo},ms=function(b,F){var ee,me,Fe,Qe,st,Et,Vt,hr,sr;if(Fe=(F=F||{}).sourceEncoding||"Unicode",st=F.outputEncoding,(F.autoencode||st)&&Sr[ar].metadata&&Sr[ar].metadata[Fe]&&Sr[ar].metadata[Fe].encoding&&(Qe=Sr[ar].metadata[Fe].encoding,!st&&Sr[ar].encoding&&(st=Sr[ar].encoding),!st&&Qe.codePages&&(st=Qe.codePages[0]),typeof st=="string"&&(st=Qe[st]),st)){for(Vt=!1,Et=[],ee=0,me=b.length;ee<me;ee++)(hr=st[b.charCodeAt(ee)])?Et.push(String.fromCharCode(hr)):Et.push(b[ee]),Et[ee].charCodeAt(0)>>8&&(Vt=!0);b=Et.join("")}for(ee=b.length;Vt===void 0&&ee!==0;)b.charCodeAt(ee-1)>>8&&(Vt=!0),ee--;if(!Vt)return b;for(Et=F.noBOM?[]:[254,255],ee=0,me=b.length;ee<me;ee++){if((sr=(hr=b.charCodeAt(ee))>>8)>>8)throw new Error("Character at position "+ee+" of string '"+b+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Et.push(sr),Et.push(hr-(sr<<8))}return String.fromCharCode.apply(void 0,Et)},ti=x.__private__.pdfEscape=x.pdfEscape=function(b,F){return ms(b,F).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ca=x.__private__.beginPage=function(b){at[++br]=[],Ft[br]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(b[0]),topRightY:Number(b[1])}},Ga(br),Je(at[$])},po=function(b,F){var ee,me,Fe;switch(r=F||r,typeof b=="string"&&(ee=L(b.toLowerCase()),Array.isArray(ee)&&(me=ee[0],Fe=ee[1])),Array.isArray(b)&&(me=b[0]*wt,Fe=b[1]*wt),isNaN(me)&&(me=o[0],Fe=o[1]),(me>14400||Fe>14400)&&(cn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),me=Math.min(14400,me),Fe=Math.min(14400,Fe)),o=[me,Fe],r.substr(0,1)){case"l":Fe>me&&(o=[Fe,me]);break;case"p":me>Fe&&(o=[Fe,me])}Ca(o),La(Mo),se(zn),Us!==0&&se(Us+" J"),Xa!==0&&se(Xa+" j"),pr.publish("addPage",{pageNumber:br})},vs=function(b){b>0&&b<=br&&(at.splice(b,1),Ft.splice(b,1),br--,$>br&&($=br),this.setPage($))},Ga=function(b){b>0&&b<=br&&($=b)},Ds=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return at.length-1},Fs=function(b,F,ee){var me,Fe=void 0;return ee=ee||{},b=b!==void 0?b:Sr[ar].fontName,F=F!==void 0?F:Sr[ar].fontStyle,me=b.toLowerCase(),xt[me]!==void 0&&xt[me][F]!==void 0?Fe=xt[me][F]:xt[b]!==void 0&&xt[b][F]!==void 0?Fe=xt[b][F]:ee.disableWarning===!1&&cn.warn("Unable to look up font label for font '"+b+"', '"+F+"'. Refer to getFontList() for available fonts."),Fe||ee.noFallback||(Fe=xt.times[F])==null&&(Fe=xt.times.normal),Fe},Rr=x.__private__.putInfo=function(){var b=Mr(),F=function(me){return me};for(var ee in w!==null&&(F=rn.encryptor(b,0)),se("<<"),se("/Producer ("+ti(F("jsPDF "+lr.version))+")"),zt)zt.hasOwnProperty(ee)&&zt[ee]&&se("/"+ee.substr(0,1).toUpperCase()+ee.substr(1)+" ("+ti(F(zt[ee]))+")");se("/CreationDate ("+ti(F(Ue))+")"),se(">>"),se("endobj")},Nr=x.__private__.putCatalog=function(b){var F=(b=b||{}).rootDictionaryObjId||Pi;switch(Mr(),se("<<"),se("/Type /Catalog"),se("/Pages "+F+" 0 R"),vt||(vt="fullwidth"),vt){case"fullwidth":se("/OpenAction [3 0 R /FitH null]");break;case"fullheight":se("/OpenAction [3 0 R /FitV null]");break;case"fullpage":se("/OpenAction [3 0 R /Fit]");break;case"original":se("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ee=""+vt;ee.substr(ee.length-1)==="%"&&(vt=parseInt(vt)/100),typeof vt=="number"&&se("/OpenAction [3 0 R /XYZ null null "+Te(vt)+"]")}switch(nr||(nr="continuous"),nr){case"continuous":se("/PageLayout /OneColumn");break;case"single":se("/PageLayout /SinglePage");break;case"two":case"twoleft":se("/PageLayout /TwoColumnLeft");break;case"tworight":se("/PageLayout /TwoColumnRight")}Yt&&se("/PageMode /"+Yt),pr.publish("putCatalog"),se(">>"),se("endobj")},go=x.__private__.putTrailer=function(){se("trailer"),se("<<"),se("/Size "+(he+1)),se("/Root "+he+" 0 R"),se("/Info "+(he-1)+" 0 R"),w!==null&&se("/Encrypt "+rn.oid+" 0 R"),se("/ID [ <"+Me+"> <"+Me+"> ]"),se(">>")},Fo=x.__private__.putHeader=function(){se("%PDF-"+I),se("%")},ll=x.__private__.putXRef=function(){var b="0000000000";se("xref"),se("0 "+(he+1)),se("0000000000 65535 f ");for(var F=1;F<=he;F++)typeof ye[F]=="function"?se((b+ye[F]()).slice(-10)+" 00000 n "):ye[F]!==void 0?se((b+ye[F]).slice(-10)+" 00000 n "):se("0000000000 00000 n ")},fn=x.__private__.buildDocument=function(){qt(),Je(Ie),pr.publish("buildDocument"),Fo(),Ha(),Do(),Ro(),w!==null&&Ea(),Rr(),Nr();var b=ge;return ll(),go(),se("startxref"),se(""+b),se("%%EOF"),Je(at[$]),Ie.join(`
`)},$i=x.__private__.getBlob=function(b){return new Blob([Tt(b)],{type:"application/pdf"})},ca=x.output=x.__private__.output=En(function(b,F){switch(typeof(F=F||{})=="string"?F={filename:F}:F.filename=F.filename||"generated.pdf",b){case void 0:return fn();case"save":x.save(F.filename);break;case"arraybuffer":return Tt(fn());case"blob":return $i(fn());case"bloburi":case"bloburl":if(cr.URL!==void 0&&typeof cr.URL.createObjectURL=="function")return cr.URL&&cr.URL.createObjectURL($i(fn()))||void 0;cn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ee="",me=fn();try{ee=wp(me)}catch{ee=wp(unescape(encodeURIComponent(me)))}return"data:application/pdf;filename="+F.filename+";base64,"+ee;case"pdfobjectnewwindow":if(Object.prototype.toString.call(cr)==="[object Window]"){var Fe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Qe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';F.pdfObjectUrl&&(Fe=F.pdfObjectUrl,Qe="");var st='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Fe+'"'+Qe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(F)+");<\/script></body></html>",Et=cr.open();return Et!==null&&Et.document.write(st),Et}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(cr)==="[object Window]"){var Vt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(F.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+F.filename+'" width="500px" height="400px" /></body></html>',hr=cr.open();if(hr!==null){hr.document.write(Vt);var sr=this;hr.document.documentElement.querySelector("#pdfViewer").onload=function(){hr.document.title=F.filename,hr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(sr.output("bloburl"))}}return hr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(cr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ar='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",F)+'"></iframe></body></html>',on=cr.open();if(on!==null&&(on.document.write(Ar),on.document.title=F.filename),on||typeof safari>"u")return on;break;case"datauri":case"dataurl":return cr.document.location.href=this.output("datauristring",F);default:return null}}),vi=function(b){return Array.isArray(wn)===!0&&wn.indexOf(b)>-1};switch(i){case"pt":wt=1;break;case"mm":wt=72/25.4;break;case"cm":wt=72/2.54;break;case"in":wt=72;break;case"px":wt=vi("px_scaling")==1?.75:96/72;break;case"pc":case"em":wt=12;break;case"ex":wt=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);wt=i}var rn=null;ae(),de();var da=function(b){return w!==null?rn.encryptor(b,0):function(F){return F}},zr=x.__private__.getPageInfo=x.getPageInfo=function(b){if(isNaN(b)||b%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ft[b].objId,pageNumber:b,pageContext:Ft[b]}},$t=x.__private__.getPageInfoByObjId=function(b){if(isNaN(b)||b%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var F in Ft)if(Ft[F].objId===b)break;return zr(F)},ha=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:Ft[$].objId,pageNumber:$,pageContext:Ft[$]}};x.addPage=function(){return po.apply(this,arguments),this},x.setPage=function(){return Ga.apply(this,arguments),Je.call(this,at[$]),this},x.insertPage=function(b){return this.addPage(),this.movePage($,b),this},x.movePage=function(b,F){var ee,me;if(b>F){ee=at[b],me=Ft[b];for(var Fe=b;Fe>F;Fe--)at[Fe]=at[Fe-1],Ft[Fe]=Ft[Fe-1];at[F]=ee,Ft[F]=me,this.setPage(F)}else if(b<F){ee=at[b],me=Ft[b];for(var Qe=b;Qe<F;Qe++)at[Qe]=at[Qe+1],Ft[Qe]=Ft[Qe+1];at[F]=ee,Ft[F]=me,this.setPage(F)}return this},x.deletePage=function(){return vs.apply(this,arguments),this},x.__private__.text=x.text=function(b,F,ee,me,Fe){var Qe,st,Et,Vt,hr,sr,Ar,on,ln,An=(me=me||{}).scope||this;if(typeof b=="number"&&typeof F=="number"&&(typeof ee=="string"||Array.isArray(ee))){var $n=ee;ee=F,F=b,b=$n}if(arguments[3]instanceof Ct?(G("The transform parameter of text() with a Matrix value"),ln=Fe):(Et=arguments[4],Vt=arguments[5],en(Ar=arguments[3])==="object"&&Ar!==null||(typeof Et=="string"&&(Vt=Et,Et=null),typeof Ar=="string"&&(Vt=Ar,Ar=null),typeof Ar=="number"&&(Et=Ar,Ar=null),me={flags:Ar,angle:Et,align:Vt})),isNaN(F)||isNaN(ee)||b==null)throw new Error("Invalid arguments passed to jsPDF.text");if(b.length===0)return An;var Cn="",va=!1,bi=typeof me.lineHeightFactor=="number"?me.lineHeightFactor:qs,xi=An.internal.scaleFactor;function Za(Lt){return Lt=Lt.split("	").join(Array(me.TabLen||9).join(" ")),ti(Lt,Ar)}function wo(Lt){for(var It,Ut=Lt.concat(),Lr=[],Gt=Ut.length;Gt--;)typeof(It=Ut.shift())=="string"?Lr.push(It):Array.isArray(Lt)&&(It.length===1||It[1]===void 0&&It[2]===void 0)?Lr.push(It[0]):Lr.push([It[0],It[1],It[2]]);return Lr}function bo(Lt,It){var Ut;if(typeof Lt=="string")Ut=It(Lt)[0];else if(Array.isArray(Lt)){for(var Lr,Gt,bn=Lt.concat(),mn=[],Ns=bn.length;Ns--;)typeof(Lr=bn.shift())=="string"?mn.push(It(Lr)[0]):Array.isArray(Lr)&&typeof Lr[0]=="string"&&(Gt=It(Lr[0],Lr[1],Lr[2]),mn.push([Gt[0],Gt[1],Gt[2]]));Ut=mn}return Ut}var $s=!1,xo=!0;if(typeof b=="string")$s=!0;else if(Array.isArray(b)){var es=b.concat();st=[];for(var li,gr=es.length;gr--;)(typeof(li=es.shift())!="string"||Array.isArray(li)&&typeof li[0]!="string")&&(xo=!1);$s=xo}if($s===!1)throw new Error('Type of text must be string or Array. "'+b+'" is not recognized.');typeof b=="string"&&(b=b.match(/[\r?\n]/)?b.split(/\r\n|\r|\n/g):[b]);var ts=pt/An.internal.scaleFactor,Vn=ts*(bi-1);switch(me.baseline){case"bottom":ee-=Vn;break;case"top":ee+=ts-Vn;break;case"hanging":ee+=ts-2*Vn;break;case"middle":ee+=ts/2-Vn}if((sr=me.maxWidth||0)>0&&(typeof b=="string"?b=An.splitTextToSize(b,sr):Object.prototype.toString.call(b)==="[object Array]"&&(b=b.reduce(function(Lt,It){return Lt.concat(An.splitTextToSize(It,sr))},[]))),Qe={text:b,x:F,y:ee,options:me,mutex:{pdfEscape:ti,activeFontKey:ar,fonts:Sr,activeFontSize:pt}},pr.publish("preProcessText",Qe),b=Qe.text,Et=(me=Qe.options).angle,!(ln instanceof Ct)&&Et&&typeof Et=="number"){Et*=Math.PI/180,me.rotationDirection===0&&(Et=-Et),H===M.ADVANCED&&(Et=-Et);var _o=Math.cos(Et),Ss=Math.sin(Et);ln=new Ct(_o,Ss,-Ss,_o,0,0)}else Et&&Et instanceof Ct&&(ln=Et);H!==M.ADVANCED||ln||(ln=er),(hr=me.charSpace||xs)!==void 0&&(Cn+=ne(Y(hr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(on=me.horizontalScale)!==void 0&&(Cn+=ne(100*on)+` Tz
`),me.lang;var ri=-1,Ri=me.renderingMode!==void 0?me.renderingMode:me.stroke,ya=An.internal.getCurrentPageInfo().pageContext;switch(Ri){case 0:case!1:case"fill":ri=0;break;case 1:case!0:case"stroke":ri=1;break;case 2:case"fillThenStroke":ri=2;break;case 3:case"invisible":ri=3;break;case 4:case"fillAndAddForClipping":ri=4;break;case 5:case"strokeAndAddPathForClipping":ri=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ri=6;break;case 7:case"addToPathForClipping":ri=7}var rs=ya.usedRenderingMode!==void 0?ya.usedRenderingMode:-1;ri!==-1?Cn+=ri+` Tr
`:rs!==-1&&(Cn+=`0 Tr
`),ri!==-1&&(ya.usedRenderingMode=ri),Vt=me.align||"left";var gn,Vs=pt*bi,f=An.internal.pageSize.getWidth(),v=Sr[ar];hr=me.charSpace||xs,sr=me.maxWidth||0,Ar=Object.assign({autoencode:!0,noBOM:!0},me.flags);var A=[],C=function(Lt){return An.getStringUnitWidth(Lt,{font:v,charSpace:hr,fontSize:pt,doKerning:!1})*pt/xi};if(Object.prototype.toString.call(b)==="[object Array]"){var T;st=wo(b),Vt!=="left"&&(gn=st.map(C));var U,Z=0;if(Vt==="right"){F-=gn[0],b=[],gr=st.length;for(var ue=0;ue<gr;ue++)ue===0?(U=Ki(F),T=wi(ee)):(U=Y(Z-gn[ue]),T=-Vs),b.push([st[ue],U,T]),Z=gn[ue]}else if(Vt==="center"){F-=gn[0]/2,b=[],gr=st.length;for(var xe=0;xe<gr;xe++)xe===0?(U=Ki(F),T=wi(ee)):(U=Y((Z-gn[xe])/2),T=-Vs),b.push([st[xe],U,T]),Z=gn[xe]}else if(Vt==="left"){b=[],gr=st.length;for(var Ae=0;Ae<gr;Ae++)b.push(st[Ae])}else if(Vt==="justify"&&v.encoding==="Identity-H"){b=[],gr=st.length,sr=sr!==0?sr:f;for(var Le=0,re=0;re<gr;re++)if(T=re===0?wi(ee):-Vs,U=re===0?Ki(F):Le,re<gr-1){var Re=Y((sr-gn[re])/(st[re].split(" ").length-1)),ve=st[re].split(" ");b.push([ve[0]+" ",U,T]),Le=0;for(var Ee=1;Ee<ve.length;Ee++){var De=(C(ve[Ee-1]+" "+ve[Ee])-C(ve[Ee]))*xi+Re;Ee==ve.length-1?b.push([ve[Ee],De,0]):b.push([ve[Ee]+" ",De,0]),Le-=De}}else b.push([st[re],U,T]);b.push(["",Le,0])}else{if(Vt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(b=[],gr=st.length,sr=sr!==0?sr:f,re=0;re<gr;re++)T=re===0?wi(ee):-Vs,U=re===0?Ki(F):0,re<gr-1?A.push(ne(Y((sr-gn[re])/(st[re].split(" ").length-1)))):A.push(0),b.push([st[re],U,T])}}var Ce=typeof me.R2L=="boolean"?me.R2L:Rt;Ce===!0&&(b=bo(b,function(Lt,It,Ut){return[Lt.split("").reverse().join(""),It,Ut]})),Qe={text:b,x:F,y:ee,options:me,mutex:{pdfEscape:ti,activeFontKey:ar,fonts:Sr,activeFontSize:pt}},pr.publish("postProcessText",Qe),b=Qe.text,va=Qe.mutex.isHex||!1;var Ve=Sr[ar].encoding;Ve!=="WinAnsiEncoding"&&Ve!=="StandardEncoding"||(b=bo(b,function(Lt,It,Ut){return[Za(Lt),It,Ut]})),st=wo(b),b=[];for(var He,Ke,Xe,lt=0,yt=1,ut=Array.isArray(st[0])?yt:lt,gt="",kt=function(Lt,It,Ut){var Lr="";return Ut instanceof Ct?(Ut=typeof me.angle=="number"?Qr(Ut,new Ct(1,0,0,1,Lt,It)):Qr(new Ct(1,0,0,1,Lt,It),Ut),H===M.ADVANCED&&(Ut=Qr(new Ct(1,0,0,-1,0,0),Ut)),Lr=Ut.join(" ")+` Tm
`):Lr=ne(Lt)+" "+ne(It)+` Td
`,Lr},ht=0;ht<st.length;ht++){switch(gt="",ut){case yt:Xe=(va?"<":"(")+st[ht][0]+(va?">":")"),He=parseFloat(st[ht][1]),Ke=parseFloat(st[ht][2]);break;case lt:Xe=(va?"<":"(")+st[ht]+(va?">":")"),He=Ki(F),Ke=wi(ee)}A!==void 0&&A[ht]!==void 0&&(gt=A[ht]+` Tw
`),ht===0?b.push(gt+kt(He,Ke,ln)+Xe):ut===lt?b.push(gt+Xe):ut===yt&&b.push(gt+kt(He,Ke,ln)+Xe)}b=ut===lt?b.join(` Tj
T* `):b.join(` Tj
`),b+=` Tj
`;var Nt=`BT
/`;return Nt+=ar+" "+pt+` Tf
`,Nt+=ne(pt*bi)+` TL
`,Nt+=pn+`
`,Nt+=Cn,Nt+=b,se(Nt+="ET"),N[ar]=!0,An};var yi=x.__private__.clip=x.clip=function(b){return se(b==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return yi("evenodd")},x.__private__.discardPath=x.discardPath=function(){return se("n"),this};var Vi=x.__private__.isValidStyle=function(b){var F=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(b)!==-1&&(F=!0),F};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(b){return Vi(b)&&(g=b),this};var Wi=x.__private__.getStyle=x.getStyle=function(b){var F=g;switch(b){case"D":case"S":F="S";break;case"F":F="f";break;case"FD":case"DF":F="B";break;case"f":case"f*":case"B":case"B*":F=b}return F},ys=x.close=function(){return se("h"),this};x.stroke=function(){return se("S"),this},x.fill=function(b){return oi("f",b),this},x.fillEvenOdd=function(b){return oi("f*",b),this},x.fillStroke=function(b){return oi("B",b),this},x.fillStrokeEvenOdd=function(b){return oi("B*",b),this};var oi=function(b,F){en(F)==="object"?mo(F,b):se(b)},ws=function(b){b===null||H===M.ADVANCED&&b===void 0||(b=Wi(b),se(b))};function Ms(b,F,ee,me,Fe){var Qe=new Wu(F||this.boundingBox,ee||this.xStep,me||this.yStep,this.gState,Fe||this.matrix);Qe.stream=this.stream;var st=b+"$$"+this.cloneIndex+++"$$";return vr(st,Qe),Qe}var mo=function(b,F){var ee=gi[b.key],me=mr[ee];if(me instanceof au)se("q"),se(Bs(F)),me.gState&&x.setGState(me.gState),se(b.matrix.toString()+" cm"),se("/"+ee+" sh"),se("Q");else if(me instanceof Wu){var Fe=new Ct(1,0,0,-1,0,ma());b.matrix&&(Fe=Fe.multiply(b.matrix||er),ee=Ms.call(me,b.key,b.boundingBox,b.xStep,b.yStep,Fe).id),se("q"),se("/Pattern cs"),se("/"+ee+" scn"),me.gState&&x.setGState(me.gState),se(F),se("Q")}},Bs=function(b){switch(b){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},fa=x.moveTo=function(b,F){return se(ne(Y(b))+" "+ne(te(F))+" m"),this},Hi=x.lineTo=function(b,F){return se(ne(Y(b))+" "+ne(te(F))+" l"),this},Ti=x.curveTo=function(b,F,ee,me,Fe,Qe){return se([ne(Y(b)),ne(te(F)),ne(Y(ee)),ne(te(me)),ne(Y(Fe)),ne(te(Qe)),"c"].join(" ")),this};x.__private__.line=x.line=function(b,F,ee,me,Fe){if(isNaN(b)||isNaN(F)||isNaN(ee)||isNaN(me)||!Vi(Fe))throw new Error("Invalid arguments passed to jsPDF.line");return H===M.COMPAT?this.lines([[ee-b,me-F]],b,F,[1,1],Fe||"S"):this.lines([[ee-b,me-F]],b,F,[1,1]).stroke()},x.__private__.lines=x.lines=function(b,F,ee,me,Fe,Qe){var st,Et,Vt,hr,sr,Ar,on,ln,An,$n,Cn,va;if(typeof b=="number"&&(va=ee,ee=F,F=b,b=va),me=me||[1,1],Qe=Qe||!1,isNaN(F)||isNaN(ee)||!Array.isArray(b)||!Array.isArray(me)||!Vi(Fe)||typeof Qe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(fa(F,ee),st=me[0],Et=me[1],hr=b.length,$n=F,Cn=ee,Vt=0;Vt<hr;Vt++)(sr=b[Vt]).length===2?($n=sr[0]*st+$n,Cn=sr[1]*Et+Cn,Hi($n,Cn)):(Ar=sr[0]*st+$n,on=sr[1]*Et+Cn,ln=sr[2]*st+$n,An=sr[3]*Et+Cn,$n=sr[4]*st+$n,Cn=sr[5]*Et+Cn,Ti(Ar,on,ln,An,$n,Cn));return Qe&&ys(),ws(Fe),this},x.path=function(b){for(var F=0;F<b.length;F++){var ee=b[F],me=ee.c;switch(ee.op){case"m":fa(me[0],me[1]);break;case"l":Hi(me[0],me[1]);break;case"c":Ti.apply(this,me);break;case"h":ys()}}return this},x.__private__.rect=x.rect=function(b,F,ee,me,Fe){if(isNaN(b)||isNaN(F)||isNaN(ee)||isNaN(me)||!Vi(Fe))throw new Error("Invalid arguments passed to jsPDF.rect");return H===M.COMPAT&&(me=-me),se([ne(Y(b)),ne(te(F)),ne(Y(ee)),ne(Y(me)),"re"].join(" ")),ws(Fe),this},x.__private__.triangle=x.triangle=function(b,F,ee,me,Fe,Qe,st){if(isNaN(b)||isNaN(F)||isNaN(ee)||isNaN(me)||isNaN(Fe)||isNaN(Qe)||!Vi(st))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ee-b,me-F],[Fe-ee,Qe-me],[b-Fe,F-Qe]],b,F,[1,1],st,!0),this},x.__private__.roundedRect=x.roundedRect=function(b,F,ee,me,Fe,Qe,st){if(isNaN(b)||isNaN(F)||isNaN(ee)||isNaN(me)||isNaN(Fe)||isNaN(Qe)||!Vi(st))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Et=4/3*(Math.SQRT2-1);return Fe=Math.min(Fe,.5*ee),Qe=Math.min(Qe,.5*me),this.lines([[ee-2*Fe,0],[Fe*Et,0,Fe,Qe-Qe*Et,Fe,Qe],[0,me-2*Qe],[0,Qe*Et,-Fe*Et,Qe,-Fe,Qe],[2*Fe-ee,0],[-Fe*Et,0,-Fe,-Qe*Et,-Fe,-Qe],[0,2*Qe-me],[0,-Qe*Et,Fe*Et,-Qe,Fe,-Qe]],b+Fe,F,[1,1],st,!0),this},x.__private__.ellipse=x.ellipse=function(b,F,ee,me,Fe){if(isNaN(b)||isNaN(F)||isNaN(ee)||isNaN(me)||!Vi(Fe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Qe=4/3*(Math.SQRT2-1)*ee,st=4/3*(Math.SQRT2-1)*me;return fa(b+ee,F),Ti(b+ee,F-st,b+Qe,F-me,b,F-me),Ti(b-Qe,F-me,b-ee,F-st,b-ee,F),Ti(b-ee,F+st,b-Qe,F+me,b,F+me),Ti(b+Qe,F+me,b+ee,F+st,b+ee,F),ws(Fe),this},x.__private__.circle=x.circle=function(b,F,ee,me){if(isNaN(b)||isNaN(F)||isNaN(ee)||!Vi(me))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(b,F,ee,ee,me)},x.setFont=function(b,F,ee){return ee&&(F=be(F,ee)),ar=Fs(b,F,{disableWarning:!1}),this};var Pa=x.__private__.getFont=x.getFont=function(){return Sr[Fs.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var b,F,ee={};for(b in xt)if(xt.hasOwnProperty(b))for(F in ee[b]=[],xt[b])xt[b].hasOwnProperty(F)&&ee[b].push(F);return ee},x.addFont=function(b,F,ee,me,Fe){var Qe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Qe.indexOf(arguments[3])!==-1?Fe=arguments[3]:arguments[3]&&Qe.indexOf(arguments[3])==-1&&(ee=be(ee,me)),Fe=Fe||"Identity-H",zi.call(this,b,F,ee,Fe)};var qs,Mo=t.lineWidth||.200025,pa=x.__private__.getLineWidth=x.getLineWidth=function(){return Mo},La=x.__private__.setLineWidth=x.setLineWidth=function(b){return Mo=b,se(ne(Y(b))+" w"),this};x.__private__.setLineDash=lr.API.setLineDash=lr.API.setLineDashPattern=function(b,F){if(b=b||[],F=F||0,isNaN(F)||!Array.isArray(b))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return b=b.map(function(ee){return ne(Y(ee))}).join(" "),F=ne(Y(F)),se("["+b+"] "+F+" d"),this};var bs=x.__private__.getLineHeight=x.getLineHeight=function(){return pt*qs};x.__private__.getLineHeight=x.getLineHeight=function(){return pt*qs};var Bo=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(b){return typeof(b=b||1.15)=="number"&&(qs=b),this},ga=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return qs};Bo(t.lineHeight);var Ki=x.__private__.getHorizontalCoordinate=function(b){return Y(b)},wi=x.__private__.getVerticalCoordinate=function(b){return H===M.ADVANCED?b:Ft[$].mediaBox.topRightY-Ft[$].mediaBox.bottomLeftY-Y(b)},vo=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(b){return ne(Ki(b))},Gi=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(b){return ne(wi(b))},zn=t.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return ei(zn)},x.__private__.setStrokeColor=x.setDrawColor=function(b,F,ee,me){return zn=tn({ch1:b,ch2:F,ch3:ee,ch4:me,pdfColorType:"draw",precision:2}),se(zn),this};var Ja=t.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return ei(Ja)},x.__private__.setFillColor=x.setFillColor=function(b,F,ee,me){return Ja=tn({ch1:b,ch2:F,ch3:ee,ch4:me,pdfColorType:"fill",precision:2}),se(Ja),this};var pn=t.textColor||"0 g",Ya=x.__private__.getTextColor=x.getTextColor=function(){return ei(pn)};x.__private__.setTextColor=x.setTextColor=function(b,F,ee,me){return pn=tn({ch1:b,ch2:F,ch3:ee,ch4:me,pdfColorType:"text",precision:3}),this};var xs=t.charSpace,Ia=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(xs||0)};x.__private__.setCharSpace=x.setCharSpace=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return xs=b,this};var Us=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(b){var F=x.CapJoinStyles[b];if(F===void 0)throw new Error("Line cap style of '"+b+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Us=F,se(F+" J"),this};var Xa=0;x.__private__.setLineJoin=x.setLineJoin=function(b){var F=x.CapJoinStyles[b];if(F===void 0)throw new Error("Line join style of '"+b+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Xa=F,se(F+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(b){if(b=b||0,isNaN(b))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return se(ne(Y(b))+" M"),this},x.GState=fh,x.setGState=function(b){(b=typeof b=="string"?dt[Nn[b]]:_s(null,b)).equals(Er)||(se("/"+b.id+" gs"),Er=b)};var _s=function(b,F){if(!b||!Nn[b]){var ee=!1;for(var me in dt)if(dt.hasOwnProperty(me)&&dt[me].equals(F)){ee=!0;break}if(ee)F=dt[me];else{var Fe="GS"+(Object.keys(dt).length+1).toString(10);dt[Fe]=F,F.id=Fe}return b&&(Nn[b]=F.id),pr.publish("addGState",F),F}};x.addGState=function(b,F){return _s(b,F),this},x.saveGraphicsState=function(){return se("q"),On.push({key:ar,size:pt,color:pn}),this},x.restoreGraphicsState=function(){se("Q");var b=On.pop();return ar=b.key,pt=b.size,pn=b.color,Er=null,this},x.setCurrentTransformationMatrix=function(b){return se(b.toString()+" cm"),this},x.comment=function(b){return se("#"+b),this};var Ji=function(b,F){var ee=b||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ee},set:function(Qe){isNaN(Qe)||(ee=parseFloat(Qe))}});var me=F||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return me},set:function(Qe){isNaN(Qe)||(me=parseFloat(Qe))}});var Fe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Fe},set:function(Qe){Fe=Qe.toString()}}),this},sn=function(b,F,ee,me){Ji.call(this,b,F),this.type="rect";var Fe=ee||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Fe},set:function(st){isNaN(st)||(Fe=parseFloat(st))}});var Qe=me||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Qe},set:function(st){isNaN(st)||(Qe=parseFloat(st))}}),this},Oa=function(){this.page=br,this.currentPage=$,this.pages=at.slice(0),this.pagesContext=Ft.slice(0),this.x=Xr,this.y=kr,this.matrix=Zn,this.width=Ta($),this.height=ma($),this.outputDestination=bt,this.id="",this.objectNumber=-1};Oa.prototype.restore=function(){br=this.page,$=this.currentPage,Ft=this.pagesContext,at=this.pages,Xr=this.x,kr=this.y,Zn=this.matrix,yo($,this.width),zs($,this.height),bt=this.outputDestination};var ks=function(b,F,ee,me,Fe){an.push(new Oa),br=$=0,at=[],Xr=b,kr=F,Zn=Fe,Ca([ee,me])},ul=function(b){if(qr[b])an.pop().restore();else{var F=new Oa,ee="Xo"+(Object.keys(Cr).length+1).toString(10);F.id=ee,qr[b]=ee,Cr[ee]=F,pr.publish("addFormObject",F),an.pop().restore()}};for(var Qa in x.beginFormObject=function(b,F,ee,me,Fe){return ks(b,F,ee,me,Fe),this},x.endFormObject=function(b){return ul(b),this},x.doFormObject=function(b,F){var ee=Cr[qr[b]];return se("q"),se(F.toString()+" cm"),se("/"+ee.id+" Do"),se("Q"),this},x.getFormObject=function(b){var F=Cr[qr[b]];return{x:F.x,y:F.y,width:F.width,height:F.height,matrix:F.matrix}},x.save=function(b,F){return b=b||"generated.pdf",(F=F||{}).returnPromise=F.returnPromise||!1,F.returnPromise===!1?(nu($i(fn()),b),typeof nu.unload=="function"&&cr.setTimeout&&setTimeout(nu.unload,911),this):new Promise(function(ee,me){try{var Fe=nu($i(fn()),b);typeof nu.unload=="function"&&cr.setTimeout&&setTimeout(nu.unload,911),ee(Fe)}catch(Qe){me(Qe.message)}})},lr.API)lr.API.hasOwnProperty(Qa)&&(Qa==="events"&&lr.API.events.length?function(b,F){var ee,me,Fe;for(Fe=F.length-1;Fe!==-1;Fe--)ee=F[Fe][0],me=F[Fe][1],b.subscribe.apply(b,[ee].concat(typeof me=="function"?[me]:me))}(pr,lr.API.events):x[Qa]=lr.API[Qa]);var Ta=x.getPageWidth=function(b){return(Ft[b=b||$].mediaBox.topRightX-Ft[b].mediaBox.bottomLeftX)/wt},yo=x.setPageWidth=function(b,F){Ft[b].mediaBox.topRightX=F*wt+Ft[b].mediaBox.bottomLeftX},ma=x.getPageHeight=function(b){return(Ft[b=b||$].mediaBox.topRightY-Ft[b].mediaBox.bottomLeftY)/wt},zs=x.setPageHeight=function(b,F){Ft[b].mediaBox.topRightY=F*wt+Ft[b].mediaBox.bottomLeftY};return x.internal={pdfEscape:ti,getStyle:Wi,getFont:Pa,getFontSize:St,getCharSpace:Ia,getTextColor:Ya,getLineHeight:bs,getLineHeightFactor:ga,getLineWidth:pa,write:Xt,getHorizontalCoordinate:Ki,getVerticalCoordinate:wi,getCoordinateString:vo,getVerticalCoordinateString:Gi,collections:{},newObject:Mr,newAdditionalObject:qn,newObjectDeferred:Pr,newObjectDeferredBegin:Ur,getFilters:mi,putStream:Li,events:pr,scaleFactor:wt,pageSize:{getWidth:function(){return Ta($)},setWidth:function(b){yo($,b)},getHeight:function(){return ma($)},setHeight:function(b){zs($,b)}},encryptionOptions:w,encryption:rn,getEncryptor:da,output:ca,getNumberOfPages:Ds,pages:at,out:se,f2:Te,f3:V,getPageInfo:zr,getPageInfoByObjId:$t,getCurrentPageInfo:ha,getPDFVersion:P,Point:Ji,Rectangle:sn,Matrix:Ct,hasHotfix:vi},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return Ta($)},set:function(b){yo($,b)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return ma($)},set:function(b){zs($,b)},enumerable:!0,configurable:!0}),ua.call(x,ot),ar="F1",po(o,r),pr.publish("initialized"),x}qu.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},qu.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},qu.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},qu.prototype.processOwnerPassword=function(t,e){return xp(bp(e).substr(0,5),t)},qu.prototype.encryptor=function(t,e){var r=bp(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(i){return xp(r,i)}},fh.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||en(t)!==en(this))return!1;var i=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;i++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&i--;return i===0},lr.API={events:[]},lr.version="3.0.1";var Mn=lr.API,n0=1,du=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Iu=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},wr=function(t){return t.toFixed(2)},Cl=function(t){return t.toFixed(5)};Mn.__acroform__={};var Wa=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},Hg=function(t){return t*n0},Po=function(t){var e=new Ov,r=Bt.internal.getHeight(t)||0,i=Bt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(wr(i)),Number(wr(r))],e},yw=Mn.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},ww=Mn.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},bw=Mn.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},Yn=Mn.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return bw(t,e-1)},Xn=Mn.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return yw(t,e-1)},Qn=Mn.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return ww(t,e-1)},xw=Mn.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,i=e.internal.getVerticalCoordinate,o=t[0],s=t[1],l=t[2],c=t[3],h={};return h.lowerLeft_X=r(o)||0,h.lowerLeft_Y=i(s+c)||0,h.upperRight_X=r(o+l)||0,h.upperRight_Y=i(s)||0,[Number(wr(h.lowerLeft_X)),Number(wr(h.lowerLeft_Y)),Number(wr(h.upperRight_X)),Number(wr(h.upperRight_Y))]},_w=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,i=_p(t,r),o=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+o+" "+wr(i.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(i.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Po(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},_p=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,i={text:"",fontSize:""},o=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");o=t.multiline?o.map(function(V){return V.split(`
`)}):o.map(function(V){return[V]});var s=r,l=Bt.internal.getHeight(t)||0;l=l<0?-l:l;var c=Bt.internal.getWidth(t)||0;c=c<0?-c:c;var h=function(V,Y,pe){if(V+1<o.length){var te=Y+" "+o[V+1][0];return $d(te,t,pe).width<=c-4}return!1};s++;e:for(;s>0;){e="",s--;var g,w,_=$d("3",t,s).height,N=t.multiline?l-s:(l-_)/2,x=N+=2,I=0,P=0,R=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+$d(e,t,s=12).width+", FieldWidth:"+c+`
`;break}for(var L="",M=0,H=0;H<o.length;H++)if(o.hasOwnProperty(H)){var oe=!1;if(o[H].length!==1&&R!==o[H].length-1){if((_+2)*(M+2)+2>l)continue e;L+=o[H][R],oe=!0,P=H,H--}else{L=(L+=o[H][R]+" ").substr(L.length-1)==" "?L.substr(0,L.length-1):L;var le=parseInt(H),be=h(le,L,s),ne=H>=o.length-1;if(be&&!ne){L+=" ",R=0;continue}if(be||ne){if(ne)P=le;else if(t.multiline&&(_+2)*(M+2)+2>l)continue e}else{if(!t.multiline||(_+2)*(M+2)+2>l)continue e;P=le}}for(var G="",fe=I;fe<=P;fe++){var Te=o[fe];if(t.multiline){if(fe===P){G+=Te[R]+" ",R=(R+1)%Te.length;continue}if(fe===I){G+=Te[Te.length-1]+" ";continue}}G+=Te[0]+" "}switch(G=G.substr(G.length-1)==" "?G.substr(0,G.length-1):G,w=$d(G,t,s).width,t.textAlign){case"right":g=c-w-2;break;case"center":g=(c-w)/2;break;case"left":default:g=2}e+=wr(g)+" "+wr(x)+` Td
`,e+="("+du(G)+`) Tj
`,e+=-wr(g)+` 0 Td
`,x=-(s+2),w=0,I=oe?P:P+1,M++,L=""}break}return i.text=e,i.fontSize=s,i},$d=function(t,e,r){var i=e.scope.internal.getFont(e.fontName,e.fontStyle),o=e.scope.getStringUnitWidth(t,{font:i,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:o}},kw={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Sw=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(i){return i.type===r.type&&i.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},Nw=function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var i=r,o=t[r];e.internal.newObjectDeferredBegin(o.objId,!0),en(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete t[i]}},Aw=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(ho.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(kw)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");n0=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Tv,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];s.objId=void 0,s.hasAnnotation&&Sw(s,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(i,o){var s=!i;for(var l in i||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(l)){var c=i[l],h=[],g=c.Rect;if(c.Rect&&(c.Rect=xw(c.Rect,o)),o.internal.newObjectDeferredBegin(c.objId,!0),c.DA=Bt.createDefaultAppearanceStream(c),en(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(h=c.getKeyValueListForStream()),c.Rect=g,c.hasAppearanceStream&&!c.appearanceStreamContent){var w=_w(c);h.push({key:"AP",value:"<</N "+w+">>"}),o.internal.acroformPlugin.xForms.push(w)}if(c.appearanceStreamContent){var _="";for(var N in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(N)){var x=c.appearanceStreamContent[N];if(_+="/"+N+" ",_+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var l in x)if(x.hasOwnProperty(l)){var I=x[l];typeof I=="function"&&(I=I.call(o,c)),_+="/"+l+" "+I+" ",o.internal.acroformPlugin.xForms.indexOf(I)>=0||o.internal.acroformPlugin.xForms.push(I)}}else typeof(I=x)=="function"&&(I=I.call(o,c)),_+="/"+l+" "+I,o.internal.acroformPlugin.xForms.indexOf(I)>=0||o.internal.acroformPlugin.xForms.push(I);_+=">>"}h.push({key:"AP",value:`<<
`+_+">>"})}o.internal.putStream({additionalKeyValues:h,objectId:c.objId}),o.internal.out("endobj")}s&&Nw(o.internal.acroformPlugin.xForms,o)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},Iv=Mn.__acroform__.arrayToPdfArray=function(t,e,r){var i=function(l){return l};if(Array.isArray(t)){for(var o="[",s=0;s<t.length;s++)switch(s!==0&&(o+=" "),en(t[s])){case"boolean":case"number":case"object":o+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&r&&(i=r.internal.getEncryptor(e)),o+="("+du(i(t[s].toString()))+")"):o+=t[s].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Hf=function(t,e,r){var i=function(o){return o};return e!==void 0&&r&&(i=r.internal.getEncryptor(e)),(t=t||"").toString(),t="("+du(i(t))+")"},Lo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Lo.prototype.toString=function(){return this.objId+" 0 R"},Lo.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Lo.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var i=e[r],o=this[i];o&&(Array.isArray(o)?t.push({key:i,value:Iv(o,this.objId,this.scope)}):o instanceof Lo?(o.scope=this.scope,t.push({key:i,value:o.objId+" 0 R"})):typeof o!="function"&&t.push({key:i,value:o}))}return t};var Ov=function(){Lo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Wa(Ov,Lo);var Tv=function(){Lo.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(i){return i};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+du(r(t))+")"}},set:function(r){t=r}})};Wa(Tv,Lo);var ho=function t(){Lo.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(L){if(isNaN(L))throw new Error('Invalid value "'+L+'" for attribute F supplied.');e=L}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Yn(e,3)},set:function(L){L?this.F=Xn(e,3):this.F=Qn(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(L){if(isNaN(L))throw new Error('Invalid value "'+L+'" for attribute Ff supplied.');r=L}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(L){i=L!==void 0?L:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(L){i[0]=L}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(L){i[1]=L}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(L){i[2]=L}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(L){i[3]=L}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(L){switch(L){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=L;break;default:throw new Error('Invalid value "'+L+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof ph)return;s="FieldObject"+t.FieldNum++}var L=function(M){return M};return this.scope&&(L=this.scope.internal.getEncryptor(this.objId)),"("+du(L(s))+")"},set:function(L){s=L.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(L){s=L}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(L){l=L}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(L){c=L}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(L){h=L}});var g=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return g===void 0?50/n0:g},set:function(L){g=L}});var w="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return w},set:function(L){w=L}});var _="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!_||this instanceof ph||this instanceof uu))return Hf(_,this.objId,this.scope)},set:function(L){L=L.toString(),_=L}});var N=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(N)return this instanceof Ei?N:Hf(N,this.objId,this.scope)},set:function(L){L=L.toString(),N=this instanceof Ei?L:L.substr(0,1)==="("?Iu(L.substr(1,L.length-2)):Iu(L)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ei?Iu(N.substr(1,N.length-1)):N},set:function(L){L=L.toString(),N=this instanceof Ei?"/"+L:L}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(L){this.V=L}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Ei?x:Hf(x,this.objId,this.scope)},set:function(L){L=L.toString(),x=this instanceof Ei?L:L.substr(0,1)==="("?Iu(L.substr(1,L.length-2)):Iu(L)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ei?Iu(x.substr(1,x.length-1)):x},set:function(L){L=L.toString(),x=this instanceof Ei?"/"+L:L}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var I,P=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return P},set:function(L){L=!!L,P=L}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(I)return I},set:function(L){I=L}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,1)},set:function(L){L?this.Ff=Xn(this.Ff,1):this.Ff=Qn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,2)},set:function(L){L?this.Ff=Xn(this.Ff,2):this.Ff=Qn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,3)},set:function(L){L?this.Ff=Xn(this.Ff,3):this.Ff=Qn(this.Ff,3)}});var R=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(R!==null)return R},set:function(L){if([0,1,2].indexOf(L)===-1)throw new Error('Invalid value "'+L+'" for attribute Q supplied.');R=L}}),Object.defineProperty(this,"textAlign",{get:function(){var L;switch(R){case 0:default:L="left";break;case 1:L="center";break;case 2:L="right"}return L},configurable:!0,enumerable:!0,set:function(L){switch(L){case"right":case 2:R=2;break;case"center":case 1:R=1;break;case"left":case 0:default:R=0}}})};Wa(ho,Lo);var Gu=function(){ho.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Iv(e,this.objId,this.scope)},set:function(r){var i,o;o=[],typeof(i=r)=="string"&&(o=function(s,l,c){c||(c=1);for(var h,g=[];h=l.exec(s);)g.push(h[c]);return g}(i,/\((.*?)\)/g)),e=o}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,i){for(i=i||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,18)},set:function(r){r?this.Ff=Xn(this.Ff,18):this.Ff=Qn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Xn(this.Ff,19):this.Ff=Qn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,20)},set:function(r){r?(this.Ff=Xn(this.Ff,20),e.sort()):this.Ff=Qn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,22)},set:function(r){r?this.Ff=Xn(this.Ff,22):this.Ff=Qn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,23)},set:function(r){r?this.Ff=Xn(this.Ff,23):this.Ff=Qn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,27)},set:function(r){r?this.Ff=Xn(this.Ff,27):this.Ff=Qn(this.Ff,27)}}),this.hasAppearanceStream=!1};Wa(Gu,ho);var Ju=function(){Gu.call(this),this.fontName="helvetica",this.combo=!1};Wa(Ju,Gu);var Yu=function(){Ju.call(this),this.combo=!0};Wa(Yu,Ju);var th=function(){Yu.call(this),this.edit=!0};Wa(th,Yu);var Ei=function(){ho.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,15)},set:function(r){r?this.Ff=Xn(this.Ff,15):this.Ff=Qn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,16)},set:function(r){r?this.Ff=Xn(this.Ff,16):this.Ff=Qn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,17)},set:function(r){r?this.Ff=Xn(this.Ff,17):this.Ff=Qn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,26)},set:function(r){r?this.Ff=Xn(this.Ff,26):this.Ff=Qn(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var i,o=[];for(i in o.push("<<"),e)o.push("/"+i+" ("+du(r(e[i]))+")");return o.push(">>"),o.join(`
`)}},set:function(r){en(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Wa(Ei,ho);var rh=function(){Ei.call(this),this.pushButton=!0};Wa(rh,Ei);var Xu=function(){Ei.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Wa(Xu,Ei);var ph=function(){var t,e;ho.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(o){t=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(o){e=o}});var r,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(c){return c};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var s,l=[];for(s in l.push("<<"),i)l.push("/"+s+" ("+du(o(i[s]))+")");return l.push(">>"),l.join(`
`)},set:function(o){en(o)==="object"&&(i=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(o){typeof o=="string"&&(i.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(o){r=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(o){r="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Bt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Wa(ph,ho),Xu.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},Xu.prototype.createOption=function(t){var e=new ph;return e.Parent=this,e.optionName=t,this.Kids.push(e),jw.call(this.scope,e),e};var nh=function(){Ei.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Bt.CheckBox.createAppearanceStream()};Wa(nh,Ei);var uu=function(){ho.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,13)},set:function(e){e?this.Ff=Xn(this.Ff,13):this.Ff=Qn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,21)},set:function(e){e?this.Ff=Xn(this.Ff,21):this.Ff=Qn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,23)},set:function(e){e?this.Ff=Xn(this.Ff,23):this.Ff=Qn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,24)},set:function(e){e?this.Ff=Xn(this.Ff,24):this.Ff=Qn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,25)},set:function(e){e?this.Ff=Xn(this.Ff,25):this.Ff=Qn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,26)},set:function(e){e?this.Ff=Xn(this.Ff,26):this.Ff=Qn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Wa(uu,ho);var ih=function(){uu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Yn(this.Ff,14)},set:function(t){t?this.Ff=Xn(this.Ff,14):this.Ff=Qn(this.Ff,14)}}),this.password=!0};Wa(ih,uu);var Bt={CheckBox:{createAppearanceStream:function(){return{N:{On:Bt.CheckBox.YesNormal},D:{On:Bt.CheckBox.YesPushDown,Off:Bt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Po(t);e.scope=t.scope;var r=[],i=t.scope.internal.getFont(t.fontName,t.fontStyle).id,o=t.scope.__private__.encodeColorString(t.color),s=_p(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+wr(Bt.internal.getWidth(t))+" "+wr(Bt.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+i+" "+wr(s.fontSize)+" Tf "+o),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=Po(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),o=[],s=Bt.internal.getHeight(t),l=Bt.internal.getWidth(t),c=_p(t,t.caption);return o.push("1 g"),o.push("0 0 "+wr(l)+" "+wr(s)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+wr(l-1)+" "+wr(s-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+r+" "+wr(c.fontSize)+" Tf "+i),o.push(c.text),o.push("ET"),o.push("Q"),e.stream=o.join(`
`),e},OffPushDown:function(t){var e=Po(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+wr(Bt.internal.getWidth(t))+" "+wr(Bt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Bt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Bt.RadioButton.Circle.YesNormal,e.D[t]=Bt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Po(t);e.scope=t.scope;var r=[],i=Bt.internal.getWidth(t)<=Bt.internal.getHeight(t)?Bt.internal.getWidth(t)/4:Bt.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var o=Bt.internal.Bezier_C,s=Number((i*o).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Cl(Bt.internal.getWidth(t)/2)+" "+Cl(Bt.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),r.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),r.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),r.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Po(t);e.scope=t.scope;var r=[],i=Bt.internal.getWidth(t)<=Bt.internal.getHeight(t)?Bt.internal.getWidth(t)/4:Bt.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var o=Number((2*i).toFixed(5)),s=Number((o*Bt.internal.Bezier_C).toFixed(5)),l=Number((i*Bt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Cl(Bt.internal.getWidth(t)/2)+" "+Cl(Bt.internal.getHeight(t)/2)+" cm"),r.push(o+" 0 m"),r.push(o+" "+s+" "+s+" "+o+" 0 "+o+" c"),r.push("-"+s+" "+o+" -"+o+" "+s+" -"+o+" 0 c"),r.push("-"+o+" -"+s+" -"+s+" -"+o+" 0 -"+o+" c"),r.push(s+" -"+o+" "+o+" -"+s+" "+o+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Cl(Bt.internal.getWidth(t)/2)+" "+Cl(Bt.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),r.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),r.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),r.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Po(t);e.scope=t.scope;var r=[],i=Bt.internal.getWidth(t)<=Bt.internal.getHeight(t)?Bt.internal.getWidth(t)/4:Bt.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var o=Number((2*i).toFixed(5)),s=Number((o*Bt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Cl(Bt.internal.getWidth(t)/2)+" "+Cl(Bt.internal.getHeight(t)/2)+" cm"),r.push(o+" 0 m"),r.push(o+" "+s+" "+s+" "+o+" 0 "+o+" c"),r.push("-"+s+" "+o+" -"+o+" "+s+" -"+o+" 0 c"),r.push("-"+o+" -"+s+" -"+s+" -"+o+" 0 -"+o+" c"),r.push(s+" -"+o+" "+o+" -"+s+" "+o+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Bt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Bt.RadioButton.Cross.YesNormal,e.D[t]=Bt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Po(t);e.scope=t.scope;var r=[],i=Bt.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+wr(Bt.internal.getWidth(t)-2)+" "+wr(Bt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(wr(i.x1.x)+" "+wr(i.x1.y)+" m"),r.push(wr(i.x2.x)+" "+wr(i.x2.y)+" l"),r.push(wr(i.x4.x)+" "+wr(i.x4.y)+" m"),r.push(wr(i.x3.x)+" "+wr(i.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Po(t);e.scope=t.scope;var r=Bt.internal.calculateCross(t),i=[];return i.push("0.749023 g"),i.push("0 0 "+wr(Bt.internal.getWidth(t))+" "+wr(Bt.internal.getHeight(t))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+wr(Bt.internal.getWidth(t)-2)+" "+wr(Bt.internal.getHeight(t)-2)+" re"),i.push("W"),i.push("n"),i.push(wr(r.x1.x)+" "+wr(r.x1.y)+" m"),i.push(wr(r.x2.x)+" "+wr(r.x2.y)+" l"),i.push(wr(r.x4.x)+" "+wr(r.x4.y)+" m"),i.push(wr(r.x3.x)+" "+wr(r.x3.y)+" l"),i.push("s"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Po(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+wr(Bt.internal.getWidth(t))+" "+wr(Bt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};Bt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Bt.internal.getWidth(t),r=Bt.internal.getHeight(t),i=Math.min(e,r);return{x1:{x:(e-i)/2,y:(r-i)/2+i},x2:{x:(e-i)/2+i,y:(r-i)/2},x3:{x:(e-i)/2,y:(r-i)/2},x4:{x:(e-i)/2+i,y:(r-i)/2+i}}}},Bt.internal.getWidth=function(t){var e=0;return en(t)==="object"&&(e=Hg(t.Rect[2])),e},Bt.internal.getHeight=function(t){var e=0;return en(t)==="object"&&(e=Hg(t.Rect[3])),e};var jw=Mn.addField=function(t){if(Aw(this,t),!(t instanceof ho))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Mn.AcroFormChoiceField=Gu,Mn.AcroFormListBox=Ju,Mn.AcroFormComboBox=Yu,Mn.AcroFormEditBox=th,Mn.AcroFormButton=Ei,Mn.AcroFormPushButton=rh,Mn.AcroFormRadioButton=Xu,Mn.AcroFormCheckBox=nh,Mn.AcroFormTextField=uu,Mn.AcroFormPasswordField=ih,Mn.AcroFormAppearance=Bt,Mn.AcroForm={ChoiceField:Gu,ListBox:Ju,ComboBox:Yu,EditBox:th,Button:Ei,PushButton:rh,RadioButton:Xu,CheckBox:nh,TextField:uu,PasswordField:ih,Appearance:Bt},lr.AcroForm={ChoiceField:Gu,ListBox:Ju,ComboBox:Yu,EditBox:th,Button:Ei,PushButton:rh,RadioButton:Xu,CheckBox:nh,TextField:uu,PasswordField:ih,Appearance:Bt};lr.AcroForm;function Rv(t){return t.reduce(function(e,r,i){return e[r]=i,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(V,Y){var pe,te,Ue,Me,ze,de=e;if((Y=Y||e)==="RGBA"||V.data!==void 0&&V.data instanceof Uint8ClampedArray&&"height"in V&&"width"in V)return"RGBA";if(be(V))for(ze in r)for(Ue=r[ze],pe=0;pe<Ue.length;pe+=1){for(Me=!0,te=0;te<Ue[pe].length;te+=1)if(Ue[pe][te]!==void 0&&Ue[pe][te]!==V[te]){Me=!1;break}if(Me===!0){de=ze;break}}else for(ze in r)for(Ue=r[ze],pe=0;pe<Ue.length;pe+=1){for(Me=!0,te=0;te<Ue[pe].length;te+=1)if(Ue[pe][te]!==void 0&&Ue[pe][te]!==V.charCodeAt(te)){Me=!1;break}if(Me===!0){de=ze;break}}return de===e&&Y!==e&&(de=Y),de},o=function V(Y){for(var pe=this.internal.write,te=this.internal.putStream,Ue=(0,this.internal.getFilters)();Ue.indexOf("FlateEncode")!==-1;)Ue.splice(Ue.indexOf("FlateEncode"),1);Y.objectId=this.internal.newObject();var Me=[];if(Me.push({key:"Type",value:"/XObject"}),Me.push({key:"Subtype",value:"/Image"}),Me.push({key:"Width",value:Y.width}),Me.push({key:"Height",value:Y.height}),Y.colorSpace===R.INDEXED?Me.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Y.palette.length/3-1)+" "+("sMask"in Y&&Y.sMask!==void 0?Y.objectId+2:Y.objectId+1)+" 0 R]"}):(Me.push({key:"ColorSpace",value:"/"+Y.colorSpace}),Y.colorSpace===R.DEVICE_CMYK&&Me.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Me.push({key:"BitsPerComponent",value:Y.bitsPerComponent}),"decodeParameters"in Y&&Y.decodeParameters!==void 0&&Me.push({key:"DecodeParms",value:"<<"+Y.decodeParameters+">>"}),"transparency"in Y&&Array.isArray(Y.transparency)){for(var ze="",de=0,je=Y.transparency.length;de<je;de++)ze+=Y.transparency[de]+" "+Y.transparency[de]+" ";Me.push({key:"Mask",value:"["+ze+"]"})}Y.sMask!==void 0&&Me.push({key:"SMask",value:Y.objectId+1+" 0 R"});var _e=Y.filter!==void 0?["/"+Y.filter]:void 0;if(te({data:Y.data,additionalKeyValues:Me,alreadyAppliedFilters:_e,objectId:Y.objectId}),pe("endobj"),"sMask"in Y&&Y.sMask!==void 0){var ae="/Predictor "+Y.predictor+" /Colors 1 /BitsPerComponent "+Y.bitsPerComponent+" /Columns "+Y.width,O={width:Y.width,height:Y.height,colorSpace:"DeviceGray",bitsPerComponent:Y.bitsPerComponent,decodeParameters:ae,data:Y.sMask};"filter"in Y&&(O.filter=Y.filter),V.call(this,O)}if(Y.colorSpace===R.INDEXED){var $=this.internal.newObject();te({data:G(new Uint8Array(Y.palette)),objectId:$}),pe("endobj")}},s=function(){var V=this.internal.collections.addImage_images;for(var Y in V)o.call(this,V[Y])},l=function(){var V,Y=this.internal.collections.addImage_images,pe=this.internal.write;for(var te in Y)pe("/I"+(V=Y[te]).index,V.objectId,"0","R")},c=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",l))},h=function(){var V=this.internal.collections.addImage_images;return c.call(this),V},g=function(){return Object.keys(this.internal.collections.addImage_images).length},w=function(V){return typeof t["process"+V.toUpperCase()]=="function"},_=function(V){return en(V)==="object"&&V.nodeType===1},N=function(V,Y){if(V.nodeName==="IMG"&&V.hasAttribute("src")){var pe=""+V.getAttribute("src");if(pe.indexOf("data:image/")===0)return Lc(unescape(pe).split("base64,").pop());var te=t.loadFile(pe,!0);if(te!==void 0)return te}if(V.nodeName==="CANVAS"){if(V.width===0||V.height===0)throw new Error("Given canvas must have data. Canvas width: "+V.width+", height: "+V.height);var Ue;switch(Y){case"PNG":Ue="image/png";break;case"WEBP":Ue="image/webp";break;case"JPEG":case"JPG":default:Ue="image/jpeg"}return Lc(V.toDataURL(Ue,1).split("base64,").pop())}},x=function(V){var Y=this.internal.collections.addImage_images;if(Y){for(var pe in Y)if(V===Y[pe].alias)return Y[pe]}},I=function(V,Y,pe){return V||Y||(V=-96,Y=-96),V<0&&(V=-1*pe.width*72/V/this.internal.scaleFactor),Y<0&&(Y=-1*pe.height*72/Y/this.internal.scaleFactor),V===0&&(V=Y*pe.width/pe.height),Y===0&&(Y=V*pe.height/pe.width),[V,Y]},P=function(V,Y,pe,te,Ue,Me){var ze=I.call(this,pe,te,Ue),de=this.internal.getCoordinateString,je=this.internal.getVerticalCoordinateString,_e=h.call(this);if(pe=ze[0],te=ze[1],_e[Ue.index]=Ue,Me){Me*=Math.PI/180;var ae=Math.cos(Me),O=Math.sin(Me),$=function(ie){return ie.toFixed(4)},X=[$(ae),$(O),$(-1*O),$(ae),0,0,"cm"]}this.internal.write("q"),Me?(this.internal.write([1,"0","0",1,de(V),je(Y+te),"cm"].join(" ")),this.internal.write(X.join(" ")),this.internal.write([de(pe),"0","0",de(te),"0","0","cm"].join(" "))):this.internal.write([de(pe),"0","0",de(te),de(V),je(Y+te),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Ue.index+" Do"),this.internal.write("Q")},R=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var L=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},M=t.__addimage__.sHashCode=function(V){var Y,pe,te=0;if(typeof V=="string")for(pe=V.length,Y=0;Y<pe;Y++)te=(te<<5)-te+V.charCodeAt(Y),te|=0;else if(be(V))for(pe=V.byteLength/2,Y=0;Y<pe;Y++)te=(te<<5)-te+V[Y],te|=0;return te},H=t.__addimage__.validateStringAsBase64=function(V){(V=V||"").toString().trim();var Y=!0;return V.length===0&&(Y=!1),V.length%4!=0&&(Y=!1),/^[A-Za-z0-9+/]+$/.test(V.substr(0,V.length-2))===!1&&(Y=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(V.substr(-2))===!1&&(Y=!1),Y},oe=t.__addimage__.extractImageFromDataUrl=function(V){if(V==null||!(V=V.trim()).startsWith("data:"))return null;var Y=V.indexOf(",");return Y<0?null:V.substring(0,Y).trim().endsWith("base64")?V.substring(Y+1):null},le=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(V){return le()&&V instanceof ArrayBuffer};var be=t.__addimage__.isArrayBufferView=function(V){return le()&&typeof Uint32Array<"u"&&(V instanceof Int8Array||V instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&V instanceof Uint8ClampedArray||V instanceof Int16Array||V instanceof Uint16Array||V instanceof Int32Array||V instanceof Uint32Array||V instanceof Float32Array||V instanceof Float64Array)},ne=t.__addimage__.binaryStringToUint8Array=function(V){for(var Y=V.length,pe=new Uint8Array(Y),te=0;te<Y;te++)pe[te]=V.charCodeAt(te);return pe},G=t.__addimage__.arrayBufferToBinaryString=function(V){for(var Y="",pe=be(V)?V:new Uint8Array(V),te=0;te<pe.length;te+=8192)Y+=String.fromCharCode.apply(null,pe.subarray(te,te+8192));return Y};t.addImage=function(){var V,Y,pe,te,Ue,Me,ze,de,je;if(typeof arguments[1]=="number"?(Y=e,pe=arguments[1],te=arguments[2],Ue=arguments[3],Me=arguments[4],ze=arguments[5],de=arguments[6],je=arguments[7]):(Y=arguments[1],pe=arguments[2],te=arguments[3],Ue=arguments[4],Me=arguments[5],ze=arguments[6],de=arguments[7],je=arguments[8]),en(V=arguments[0])==="object"&&!_(V)&&"imageData"in V){var _e=V;V=_e.imageData,Y=_e.format||Y||e,pe=_e.x||pe||0,te=_e.y||te||0,Ue=_e.w||_e.width||Ue,Me=_e.h||_e.height||Me,ze=_e.alias||ze,de=_e.compression||de,je=_e.rotation||_e.angle||je}var ae=this.internal.getFilters();if(de===void 0&&ae.indexOf("FlateEncode")!==-1&&(de="SLOW"),isNaN(pe)||isNaN(te))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var O=fe.call(this,V,Y,ze,de);return P.call(this,pe,te,Ue,Me,O,je),this};var fe=function(V,Y,pe,te){var Ue,Me,ze;if(typeof V=="string"&&i(V)===e){V=unescape(V);var de=Te(V,!1);(de!==""||(de=t.loadFile(V,!0))!==void 0)&&(V=de)}if(_(V)&&(V=N(V,Y)),Y=i(V,Y),!w(Y))throw new Error("addImage does not support files of type '"+Y+"', please ensure that a plugin for '"+Y+"' support is added.");if(((ze=pe)==null||ze.length===0)&&(pe=function(je){return typeof je=="string"||be(je)?M(je):be(je.data)?M(je.data):null}(V)),(Ue=x.call(this,pe))||(le()&&(V instanceof Uint8Array||Y==="RGBA"||(Me=V,V=ne(V))),Ue=this["process"+Y.toUpperCase()](V,g.call(this),pe,function(je){return je&&typeof je=="string"&&(je=je.toUpperCase()),je in t.image_compression?je:L.NONE}(te),Me)),!Ue)throw new Error("An unknown error occurred whilst processing the image.");return Ue},Te=t.__addimage__.convertBase64ToBinaryString=function(V,Y){Y=typeof Y!="boolean"||Y;var pe,te="";if(typeof V=="string"){var Ue;pe=(Ue=oe(V))!==null&&Ue!==void 0?Ue:V;try{te=Lc(pe)}catch(Me){if(Y)throw H(pe)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Me.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return te};t.getImageProperties=function(V){var Y,pe,te="";if(_(V)&&(V=N(V)),typeof V=="string"&&i(V)===e&&((te=Te(V,!1))===""&&(te=t.loadFile(V)||""),V=te),pe=i(V),!w(pe))throw new Error("addImage does not support files of type '"+pe+"', please ensure that a plugin for '"+pe+"' support is added.");if(!le()||V instanceof Uint8Array||(V=ne(V)),!(Y=this["process"+pe.toUpperCase()](V)))throw new Error("An unknown error occurred whilst processing the image");return Y.fileType=pe,Y}})(lr.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};lr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var i,o,s,l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(r.objId),g=r.pageContext.annotations,w=!1,_=0;_<g.length&&!w;_++)switch((i=g[_]).type){case"link":(e(i.options.url)||e(i.options.pageNumber))&&(w=!0);break;case"reference":case"text":case"freetext":w=!0}if(w!=0){this.internal.write("/Annots [");for(var N=0;N<g.length;N++){i=g[N];var x=this.internal.pdfEscape,I=this.internal.getEncryptor(r.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var P=this.internal.newAdditionalObject(),R=this.internal.newAdditionalObject(),L=this.internal.getEncryptor(P.objId),M=i.title||"Note";s="<</Type /Annot /Subtype /Text "+(o="/Rect ["+l(i.bounds.x)+" "+c(i.bounds.y+i.bounds.h)+" "+l(i.bounds.x+i.bounds.w)+" "+c(i.bounds.y)+"] ")+"/Contents ("+x(L(i.contents))+")",s+=" /Popup "+R.objId+" 0 R",s+=" /P "+h.objId+" 0 R",s+=" /T ("+x(L(M))+") >>",P.content=s;var H=P.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+l(i.bounds.x+30)+" "+c(i.bounds.y+i.bounds.h)+" "+l(i.bounds.x+i.bounds.w+30)+" "+c(i.bounds.y)+"] ")+" /Parent "+H,i.open&&(s+=" /Open true"),s+=" >>",R.content=s,this.internal.write(P.objId,"0 R",R.objId,"0 R");break;case"freetext":o="/Rect ["+l(i.bounds.x)+" "+c(i.bounds.y)+" "+l(i.bounds.x+i.bounds.w)+" "+c(i.bounds.y+i.bounds.h)+"] ";var oe=i.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+x(I(i.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+oe+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(i.options.name){var le=this.annotations._nameMap[i.options.name];i.options.pageNumber=le.page,i.options.top=le.y}else i.options.top||(i.options.top=0);if(o="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",s="",i.options.url)s="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+x(I(i.options.url))+") >>";else if(i.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,s+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var be=c(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),s+=" /XYZ "+i.options.left+" "+be+" "+i.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var i=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":i.pageContext.annotations.push(r)}},t.link=function(r,i,o,s,l){var c=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,g=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:h(r),y:g(i),w:h(r+o),h:g(i+s)},options:l,type:"link"})},t.textWithLink=function(r,i,o,s){var l,c,h=this.getTextWidth(r),g=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){c=s.maxWidth;var w=this.splitTextToSize(r,c).length;l=Math.ceil(g*w)}else c=h,l=g;return this.text(r,i,o,s),o+=.2*g,s.align==="center"&&(i-=h/2),s.align==="right"&&(i-=h),this.link(i,o-g,c,l,s),h},t.getTextWidth=function(r){var i=this.internal.getFontSize();return this.getStringUnitWidth(r)*i/this.internal.scaleFactor}}(lr.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(P){return e[P.charCodeAt(0)]!==void 0},l=t.__arabicParser__.isArabicLetter=function(P){return typeof P=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(P)},c=t.__arabicParser__.isArabicEndLetter=function(P){return l(P)&&s(P)&&e[P.charCodeAt(0)].length<=2},h=t.__arabicParser__.isArabicAlfLetter=function(P){return l(P)&&o.indexOf(P.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(P){return l(P)&&s(P)&&e[P.charCodeAt(0)].length>=1};var g=t.__arabicParser__.arabicLetterHasFinalForm=function(P){return l(P)&&s(P)&&e[P.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(P){return l(P)&&s(P)&&e[P.charCodeAt(0)].length>=3};var w=t.__arabicParser__.arabicLetterHasMedialForm=function(P){return l(P)&&s(P)&&e[P.charCodeAt(0)].length==4},_=t.__arabicParser__.resolveLigatures=function(P){var R=0,L=r,M="",H=0;for(R=0;R<P.length;R+=1)L[P.charCodeAt(R)]!==void 0?(H++,typeof(L=L[P.charCodeAt(R)])=="number"&&(M+=String.fromCharCode(L),L=r,H=0),R===P.length-1&&(L=r,M+=P.charAt(R-(H-1)),R-=H-1,H=0)):(L=r,M+=P.charAt(R-H),R-=H,H=0);return M};t.__arabicParser__.isArabicDiacritic=function(P){return P!==void 0&&i[P.charCodeAt(0)]!==void 0};var N=t.__arabicParser__.getCorrectForm=function(P,R,L){return l(P)?s(P)===!1?-1:!g(P)||!l(R)&&!l(L)||!l(L)&&c(R)||c(P)&&!l(R)||c(P)&&h(R)||c(P)&&c(R)?0:w(P)&&l(R)&&!c(R)&&l(L)&&g(L)?3:c(P)||!l(L)?1:2:-1},x=function(P){var R=0,L=0,M=0,H="",oe="",le="",be=(P=P||"").split("\\s+"),ne=[];for(R=0;R<be.length;R+=1){for(ne.push(""),L=0;L<be[R].length;L+=1)H=be[R][L],oe=be[R][L-1],le=be[R][L+1],l(H)?(M=N(H,oe,le),ne[R]+=M!==-1?String.fromCharCode(e[H.charCodeAt(0)][M]):H):ne[R]+=H;ne[R]=_(ne[R])}return ne.join(" ")},I=t.__arabicParser__.processArabic=t.processArabic=function(){var P,R=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,L=[];if(Array.isArray(R)){var M=0;for(L=[],M=0;M<R.length;M+=1)Array.isArray(R[M])?L.push([x(R[M][0]),R[M][1],R[M][2]]):L.push([x(R[M])]);P=L}else P=x(R);return typeof arguments[0]=="string"?P:(arguments[0].text=P,arguments[0])};t.events.push(["preProcessText",I])}(lr.API),lr.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(c){r=c}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(c){i=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(c){o=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(c){s=c}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(c){l=c}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,i){var o;if((r=r||"2d")!=="2d")return null;for(o in i)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=i[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(lr.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(P){h=P}});var g=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return g},set:function(P){g=P}});var w=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return w},set:function(P){w=P}});var _=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return _},set:function(P){_=P}});var N=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return N},set:function(P){N=P}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(P){x=P}});var I=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return I},set:function(P){I=P}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(h){return i.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},t.getTextDimensions=function(h,g){i.call(this);var w=(g=g||{}).fontSize||this.getFontSize(),_=g.font||this.getFont(),N=g.scaleFactor||this.internal.scaleFactor,x=0,I=0,P=0,R=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var L=g.maxWidth;L>0?typeof h=="string"?h=this.splitTextToSize(h,L):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(H,oe){return H.concat(R.splitTextToSize(oe,L))},[])):h=Array.isArray(h)?h:[h];for(var M=0;M<h.length;M++)x<(P=this.getStringUnitWidth(h[M],{font:_})*w)&&(x=P);return x!==0&&(I=h.length),{w:x/=N,h:Math.max((I*w*this.getLineHeightFactor()-w*(this.getLineHeightFactor()-1))/N,0)}},t.cellAddPage=function(){i.call(this),this.addPage();var h=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=t.cell=function(){var h;h=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var g=this.internal.__cell__.lastCell,w=this.internal.__cell__.padding,_=this.internal.__cell__.margins||e,N=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return g.lineNumber!==void 0&&(g.lineNumber===h.lineNumber?(h.x=(g.x||0)+(g.width||0),h.y=g.y||0):g.y+g.height+h.height+_.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=_.top,x&&N&&(this.printHeaderRow(h.lineNumber,!0),h.y+=N[0].height)):h.y=g.y+g.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,r===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-w,h.y+w,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+w,{align:"center",baseline:"top",maxWidth:h.width-w-w}):this.text(h.text,h.x+w,h.y+w,{align:"left",baseline:"top",maxWidth:h.width-w-w})),this.internal.__cell__.lastCell=h,this};t.table=function(h,g,w,_,N){if(i.call(this),!w)throw new Error("No data for PDF table.");var x,I,P,R,L=[],M=[],H=[],oe={},le={},be=[],ne=[],G=(N=N||{}).autoSize||!1,fe=N.printHeaders!==!1,Te=N.css&&N.css["font-size"]!==void 0?16*N.css["font-size"]:N.fontSize||12,V=N.margins||Object.assign({width:this.getPageWidth()},e),Y=typeof N.padding=="number"?N.padding:3,pe=N.headerBackgroundColor||"#c8c8c8",te=N.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=fe,this.internal.__cell__.margins=V,this.internal.__cell__.table_font_size=Te,this.internal.__cell__.padding=Y,this.internal.__cell__.headerBackgroundColor=pe,this.internal.__cell__.headerTextColor=te,this.setFontSize(Te),_==null)M=L=Object.keys(w[0]),H=L.map(function(){return"left"});else if(Array.isArray(_)&&en(_[0])==="object")for(L=_.map(function(_e){return _e.name}),M=_.map(function(_e){return _e.prompt||_e.name||""}),H=_.map(function(_e){return _e.align||"left"}),x=0;x<_.length;x+=1)le[_[x].name]=_[x].width*(19.049976/25.4);else Array.isArray(_)&&typeof _[0]=="string"&&(M=L=_,H=L.map(function(){return"left"}));if(G||Array.isArray(_)&&typeof _[0]=="string")for(x=0;x<L.length;x+=1){for(oe[R=L[x]]=w.map(function(_e){return _e[R]}),this.setFont(void 0,"bold"),be.push(this.getTextDimensions(M[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),I=oe[R],this.setFont(void 0,"normal"),P=0;P<I.length;P+=1)be.push(this.getTextDimensions(I[P],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);le[R]=Math.max.apply(null,be)+Y+Y,be=[]}if(fe){var Ue={};for(x=0;x<L.length;x+=1)Ue[L[x]]={},Ue[L[x]].text=M[x],Ue[L[x]].align=H[x];var Me=c.call(this,Ue,le);ne=L.map(function(_e){return new s(h,g,le[_e],Me,Ue[_e].text,void 0,Ue[_e].align)}),this.setTableHeaderRow(ne),this.printHeaderRow(1,!1)}var ze=_.reduce(function(_e,ae){return _e[ae.name]=ae.align,_e},{});for(x=0;x<w.length;x+=1){"rowStart"in N&&N.rowStart instanceof Function&&N.rowStart({row:x,data:w[x]},this);var de=c.call(this,w[x],le);for(P=0;P<L.length;P+=1){var je=w[x][L[P]];"cellStart"in N&&N.cellStart instanceof Function&&N.cellStart({row:x,col:P,data:je},this),l.call(this,new s(h,g,le[L[P]],de,je,x+2,ze[L[P]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=g,this};var c=function(h,g){var w=this.internal.__cell__.padding,_=this.internal.__cell__.table_font_size,N=this.internal.scaleFactor;return Object.keys(h).map(function(x){var I=h[x];return this.splitTextToSize(I.hasOwnProperty("text")?I.text:I,g[x]-w-w)},this).map(function(x){return this.getLineHeightFactor()*x.length*_/N+w+w},this).reduce(function(x,I){return Math.max(x,I)},0)};t.setTableHeaderRow=function(h){i.call(this),this.internal.__cell__.tableHeaderRow=h},t.printHeaderRow=function(h,g){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var w;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var _=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(_[0],_[1],_[2],_[3],void 0,-1)}this.setFont(void 0,"bold");for(var N=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){w=this.internal.__cell__.tableHeaderRow[x].clone(),g&&(w.y=this.internal.__cell__.margins.top||0,N.push(w)),w.lineNumber=h;var I=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,w),this.setTextColor(I)}N.length>0&&this.setTableHeaderRow(N),this.setFont(void 0,"normal"),r=!1}}(lr.API);var Dv={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Fv=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],kp=Rv(Fv),Mv=[100,200,300,400,500,600,700,800,900],Ew=Rv(Mv);function Sp(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return Dv[s=s||"normal"]?s:"normal"}(t.style),i=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),o=function(s){return typeof kp[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:r,weight:i,stretch:o,src:t.src||[],ref:t.ref||{name:e,style:[o,r,i].join(" ")}}}function Kg(t,e,r,i){var o;for(o=r;o>=0&&o<e.length;o+=i)if(t[e[o]])return t[e[o]];for(o=r;o>=0&&o<e.length;o-=i)if(t[e[o]])return t[e[o]]}var Cw={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Gg={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Jg(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Pw(t,e,r){for(var i=(r=r||{}).defaultFontFamily||"times",o=Object.assign({},Cw,r.genericFontFamilies||{}),s=null,l=null,c=0;c<e.length;++c)if(o[(s=Sp(e[c])).family]&&(s.family=o[s.family]),t.hasOwnProperty(s.family)){l=t[s.family];break}if(!(l=l||t[i]))throw new Error("Could not find a font-family for the rule '"+Jg(s)+"' and default family '"+i+"'.");if(l=function(h,g){if(g[h])return g[h];var w=kp[h],_=w<=kp.normal?-1:1,N=Kg(g,Fv,w,_);if(!N)throw new Error("Could not find a matching font-stretch value for "+h);return N}(s.stretch,l),l=function(h,g){if(g[h])return g[h];for(var w=Dv[h],_=0;_<w.length;++_)if(g[w[_]])return g[w[_]];throw new Error("Could not find a matching font-style for "+h)}(s.style,l),!(l=function(h,g){if(g[h])return g[h];if(h===400&&g[500])return g[500];if(h===500&&g[400])return g[400];var w=Ew[h],_=Kg(g,Mv,w,h<400?-1:1);if(!_)throw new Error("Could not find a matching font-weight for value "+h);return _}(s.weight,l)))throw new Error("Failed to resolve a font for the rule '"+Jg(s)+"'.");return l}function Yg(t){return t.trimLeft()}function Lw(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function Iw(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Vd,Xg,Qg,Kf=["times"];(function(t){var e,r,i,o,s,l,c,h,g,w=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new h,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new l,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new l,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new _(this),e=this.internal.f2,r=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,l=this.internal.Point,c=this.internal.Rectangle,h=this.internal.Matrix,g=new w}]);var _=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var $=O;Object.defineProperty(this,"pdf",{get:function(){return $}});var X=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return X},set:function(Je){X=!!Je}});var ie=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ie},set:function(Je){ie=!!Je}});var he=0;Object.defineProperty(this,"posX",{get:function(){return he},set:function(Je){isNaN(Je)||(he=Je)}});var ye=0;Object.defineProperty(this,"posY",{get:function(){return ye},set:function(Je){isNaN(Je)||(ye=Je)}}),Object.defineProperty(this,"margin",{get:function(){return g.margin},set:function(Je){var se;typeof Je=="number"?se=[Je,Je,Je,Je]:((se=new Array(4))[0]=Je[0],se[1]=Je.length>=2?Je[1]:se[0],se[2]=Je.length>=3?Je[2]:se[0],se[3]=Je.length>=4?Je[3]:se[1]),g.margin=se}});var Ie=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ie},set:function(Je){Ie=Je}});var ge=0;Object.defineProperty(this,"lastBreak",{get:function(){return ge},set:function(Je){ge=Je}});var rt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return rt},set:function(Je){rt=Je}}),Object.defineProperty(this,"ctx",{get:function(){return g},set:function(Je){Je instanceof w&&(g=Je)}}),Object.defineProperty(this,"path",{get:function(){return g.path},set:function(Je){g.path=Je}});var at=[];Object.defineProperty(this,"ctxStack",{get:function(){return at},set:function(Je){at=Je}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Je){var se;se=N(Je),this.ctx.fillStyle=se.style,this.ctx.isFillTransparent=se.a===0,this.ctx.fillOpacity=se.a,this.pdf.setFillColor(se.r,se.g,se.b,{a:se.a}),this.pdf.setTextColor(se.r,se.g,se.b,{a:se.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Je){var se=N(Je);this.ctx.strokeStyle=se.style,this.ctx.isStrokeTransparent=se.a===0,this.ctx.strokeOpacity=se.a,se.a===0?this.pdf.setDrawColor(255,255,255):(se.a,this.pdf.setDrawColor(se.r,se.g,se.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Je){["butt","round","square"].indexOf(Je)!==-1&&(this.ctx.lineCap=Je,this.pdf.setLineCap(Je))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Je){isNaN(Je)||(this.ctx.lineWidth=Je,this.pdf.setLineWidth(Je))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Je){["bevel","round","miter"].indexOf(Je)!==-1&&(this.ctx.lineJoin=Je,this.pdf.setLineJoin(Je))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Je){isNaN(Je)||(this.ctx.miterLimit=Je,this.pdf.setMiterLimit(Je))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Je){this.ctx.textBaseline=Je}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Je){["right","end","center","left","start"].indexOf(Je)!==-1&&(this.ctx.textAlign=Je)}});var it=null;function bt(Je,se){if(it===null){var Xt=function(Tt){var ot=[];return Object.keys(Tt).forEach(function(pt){Tt[pt].forEach(function(vt){var St=null;switch(vt){case"bold":St={family:pt,weight:"bold"};break;case"italic":St={family:pt,style:"italic"};break;case"bolditalic":St={family:pt,weight:"bold",style:"italic"};break;case"":case"normal":St={family:pt}}St!==null&&(St.ref={name:pt,style:vt},ot.push(St))})}),ot}(Je.getFontList());it=function(Tt){for(var ot={},pt=0;pt<Tt.length;++pt){var vt=Sp(Tt[pt]),St=vt.family,Rt=vt.stretch,Yt=vt.style,Qt=vt.weight;ot[St]=ot[St]||{},ot[St][Rt]=ot[St][Rt]||{},ot[St][Rt][Yt]=ot[St][Rt][Yt]||{},ot[St][Rt][Yt][Qt]=vt}return ot}(Xt.concat(se))}return it}var qt=null;Object.defineProperty(this,"fontFaces",{get:function(){return qt},set:function(Je){it=null,qt=Je}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Je){var se;if(this.ctx.font=Je,(se=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Je))!==null){var Xt=se[1];se[2];var Tt=se[3],ot=se[4];se[5];var pt=se[6],vt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ot)[2];ot=Math.floor(vt==="px"?parseFloat(ot)*this.pdf.internal.scaleFactor:vt==="em"?parseFloat(ot)*this.pdf.getFontSize():parseFloat(ot)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ot);var St=function(zt){var ar,wt,Xr=[],kr=zt.trim();if(kr==="")return Kf;if(kr in Gg)return[Gg[kr]];for(;kr!=="";){switch(wt=null,ar=(kr=Yg(kr)).charAt(0)){case'"':case"'":wt=Lw(kr.substring(1),ar);break;default:wt=Iw(kr)}if(wt===null||(Xr.push(wt[0]),(kr=Yg(wt[1]))!==""&&kr.charAt(0)!==","))return Kf;kr=kr.replace(/^,/,"")}return Xr}(pt);if(this.fontFaces){var Rt=Pw(bt(this.pdf,this.fontFaces),St.map(function(zt){return{family:zt,stretch:"normal",weight:Tt,style:Xt}}));this.pdf.setFont(Rt.ref.name,Rt.ref.style)}else{var Yt="";(Tt==="bold"||parseInt(Tt,10)>=700||Xt==="bold")&&(Yt="bold"),Xt==="italic"&&(Yt+="italic"),Yt.length===0&&(Yt="normal");for(var Qt="",nr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Zt=0;Zt<St.length;Zt++){if(this.pdf.internal.getFont(St[Zt],Yt,{noFallback:!0,disableWarning:!0})!==void 0){Qt=St[Zt];break}if(Yt==="bolditalic"&&this.pdf.internal.getFont(St[Zt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Qt=St[Zt],Yt="bold";else if(this.pdf.internal.getFont(St[Zt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Qt=St[Zt],Yt="normal";break}}if(Qt===""){for(var yr=0;yr<St.length;yr++)if(nr[St[yr]]){Qt=nr[St[yr]];break}}Qt=Qt===""?"Times":Qt,this.pdf.setFont(Qt,Yt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Je){this.ctx.globalCompositeOperation=Je}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Je){this.ctx.globalAlpha=Je}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Je){this.ctx.lineDashOffset=Je,ae.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Je){this.ctx.lineDash=Je,ae.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Je){this.ctx.ignoreClearRect=!!Je}})};_.prototype.setLineDash=function(O){this.lineDash=O},_.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},_.prototype.fill=function(){oe.call(this,"fill",!1)},_.prototype.stroke=function(){oe.call(this,"stroke",!1)},_.prototype.beginPath=function(){this.path=[{type:"begin"}]},_.prototype.moveTo=function(O,$){if(isNaN(O)||isNaN($))throw cn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var X=this.ctx.transform.applyToPoint(new l(O,$));this.path.push({type:"mt",x:X.x,y:X.y}),this.ctx.lastPoint=new l(O,$)},_.prototype.closePath=function(){var O=new l(0,0),$=0;for($=this.path.length-1;$!==-1;$--)if(this.path[$].type==="begin"&&en(this.path[$+1])==="object"&&typeof this.path[$+1].x=="number"){O=new l(this.path[$+1].x,this.path[$+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(O.x,O.y)},_.prototype.lineTo=function(O,$){if(isNaN(O)||isNaN($))throw cn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var X=this.ctx.transform.applyToPoint(new l(O,$));this.path.push({type:"lt",x:X.x,y:X.y}),this.ctx.lastPoint=new l(X.x,X.y)},_.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),oe.call(this,null,!0)},_.prototype.quadraticCurveTo=function(O,$,X,ie){if(isNaN(X)||isNaN(ie)||isNaN(O)||isNaN($))throw cn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var he=this.ctx.transform.applyToPoint(new l(X,ie)),ye=this.ctx.transform.applyToPoint(new l(O,$));this.path.push({type:"qct",x1:ye.x,y1:ye.y,x:he.x,y:he.y}),this.ctx.lastPoint=new l(he.x,he.y)},_.prototype.bezierCurveTo=function(O,$,X,ie,he,ye){if(isNaN(he)||isNaN(ye)||isNaN(O)||isNaN($)||isNaN(X)||isNaN(ie))throw cn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ie=this.ctx.transform.applyToPoint(new l(he,ye)),ge=this.ctx.transform.applyToPoint(new l(O,$)),rt=this.ctx.transform.applyToPoint(new l(X,ie));this.path.push({type:"bct",x1:ge.x,y1:ge.y,x2:rt.x,y2:rt.y,x:Ie.x,y:Ie.y}),this.ctx.lastPoint=new l(Ie.x,Ie.y)},_.prototype.arc=function(O,$,X,ie,he,ye){if(isNaN(O)||isNaN($)||isNaN(X)||isNaN(ie)||isNaN(he))throw cn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ye=!!ye,!this.ctx.transform.isIdentity){var Ie=this.ctx.transform.applyToPoint(new l(O,$));O=Ie.x,$=Ie.y;var ge=this.ctx.transform.applyToPoint(new l(0,X)),rt=this.ctx.transform.applyToPoint(new l(0,0));X=Math.sqrt(Math.pow(ge.x-rt.x,2)+Math.pow(ge.y-rt.y,2))}Math.abs(he-ie)>=2*Math.PI&&(ie=0,he=2*Math.PI),this.path.push({type:"arc",x:O,y:$,radius:X,startAngle:ie,endAngle:he,counterclockwise:ye})},_.prototype.arcTo=function(O,$,X,ie,he){throw new Error("arcTo not implemented.")},_.prototype.rect=function(O,$,X,ie){if(isNaN(O)||isNaN($)||isNaN(X)||isNaN(ie))throw cn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,$),this.lineTo(O+X,$),this.lineTo(O+X,$+ie),this.lineTo(O,$+ie),this.lineTo(O,$),this.lineTo(O+X,$),this.lineTo(O,$)},_.prototype.fillRect=function(O,$,X,ie){if(isNaN(O)||isNaN($)||isNaN(X)||isNaN(ie))throw cn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var he={};this.lineCap!=="butt"&&(he.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(he.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,$,X,ie),this.fill(),he.hasOwnProperty("lineCap")&&(this.lineCap=he.lineCap),he.hasOwnProperty("lineJoin")&&(this.lineJoin=he.lineJoin)}},_.prototype.strokeRect=function(O,$,X,ie){if(isNaN(O)||isNaN($)||isNaN(X)||isNaN(ie))throw cn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");I.call(this)||(this.beginPath(),this.rect(O,$,X,ie),this.stroke())},_.prototype.clearRect=function(O,$,X,ie){if(isNaN(O)||isNaN($)||isNaN(X)||isNaN(ie))throw cn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,$,X,ie))},_.prototype.save=function(O){O=typeof O!="boolean"||O;for(var $=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("q");if(this.pdf.setPage($),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var ie=new w(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ie}},_.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var $=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("Q");this.pdf.setPage($),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},_.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var N=function(O){var $,X,ie,he;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))$=0,X=0,ie=0,he=0;else{var ye=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(ye!==null)$=parseInt(ye[1]),X=parseInt(ye[2]),ie=parseInt(ye[3]),he=1;else if((ye=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)$=parseInt(ye[1]),X=parseInt(ye[2]),ie=parseInt(ye[3]),he=parseFloat(ye[4]);else{if(he=1,typeof O=="string"&&O.charAt(0)!=="#"){var Ie=new Cv(O);O=Ie.ok?Ie.toHex():"#000000"}O.length===4?($=O.substring(1,2),$+=$,X=O.substring(2,3),X+=X,ie=O.substring(3,4),ie+=ie):($=O.substring(1,3),X=O.substring(3,5),ie=O.substring(5,7)),$=parseInt($,16),X=parseInt(X,16),ie=parseInt(ie,16)}}return{r:$,g:X,b:ie,a:he,style:O}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},I=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};_.prototype.fillText=function(O,$,X,ie){if(isNaN($)||isNaN(X)||typeof O!="string")throw cn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ie=isNaN(ie)?void 0:ie,!x.call(this)){var he=de(this.ctx.transform.rotation),ye=this.ctx.transform.scaleX;Y.call(this,{text:O,x:$,y:X,scale:ye,angle:he,align:this.textAlign,maxWidth:ie})}},_.prototype.strokeText=function(O,$,X,ie){if(isNaN($)||isNaN(X)||typeof O!="string")throw cn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!I.call(this)){ie=isNaN(ie)?void 0:ie;var he=de(this.ctx.transform.rotation),ye=this.ctx.transform.scaleX;Y.call(this,{text:O,x:$,y:X,scale:ye,renderingMode:"stroke",angle:he,align:this.textAlign,maxWidth:ie})}},_.prototype.measureText=function(O){if(typeof O!="string")throw cn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var $=this.pdf,X=this.pdf.internal.scaleFactor,ie=$.internal.getFontSize(),he=$.getStringUnitWidth(O)*ie/$.internal.scaleFactor,ye=function(Ie){var ge=(Ie=Ie||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ge}}),this};return new ye({width:he*=Math.round(96*X/72*1e4)/1e4})},_.prototype.scale=function(O,$){if(isNaN(O)||isNaN($))throw cn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var X=new h(O,0,0,$,0,0);this.ctx.transform=this.ctx.transform.multiply(X)},_.prototype.rotate=function(O){if(isNaN(O))throw cn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var $=new h(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply($)},_.prototype.translate=function(O,$){if(isNaN(O)||isNaN($))throw cn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var X=new h(1,0,0,1,O,$);this.ctx.transform=this.ctx.transform.multiply(X)},_.prototype.transform=function(O,$,X,ie,he,ye){if(isNaN(O)||isNaN($)||isNaN(X)||isNaN(ie)||isNaN(he)||isNaN(ye))throw cn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ie=new h(O,$,X,ie,he,ye);this.ctx.transform=this.ctx.transform.multiply(Ie)},_.prototype.setTransform=function(O,$,X,ie,he,ye){O=isNaN(O)?1:O,$=isNaN($)?0:$,X=isNaN(X)?0:X,ie=isNaN(ie)?1:ie,he=isNaN(he)?0:he,ye=isNaN(ye)?0:ye,this.ctx.transform=new h(O,$,X,ie,he,ye)};var P=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};_.prototype.drawImage=function(O,$,X,ie,he,ye,Ie,ge,rt){var at=this.pdf.getImageProperties(O),it=1,bt=1,qt=1,Je=1;ie!==void 0&&ge!==void 0&&(qt=ge/ie,Je=rt/he,it=at.width/ie*ge/ie,bt=at.height/he*rt/he),ye===void 0&&(ye=$,Ie=X,$=0,X=0),ie!==void 0&&ge===void 0&&(ge=ie,rt=he),ie===void 0&&ge===void 0&&(ge=at.width,rt=at.height);for(var se,Xt=this.ctx.transform.decompose(),Tt=de(Xt.rotate.shx),ot=new h,pt=(ot=(ot=(ot=ot.multiply(Xt.translate)).multiply(Xt.skew)).multiply(Xt.scale)).applyToRectangle(new c(ye-$*qt,Ie-X*Je,ie*it,he*bt)),vt=R.call(this,pt),St=[],Rt=0;Rt<vt.length;Rt+=1)St.indexOf(vt[Rt])===-1&&St.push(vt[Rt]);if(H(St),this.autoPaging)for(var Yt=St[0],Qt=St[St.length-1],nr=Yt;nr<Qt+1;nr++){this.pdf.setPage(nr);var Zt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],yr=nr===1?this.posY+this.margin[0]:this.margin[0],zt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ar=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],wt=nr===1?0:zt+(nr-2)*ar;if(this.ctx.clip_path.length!==0){var Xr=this.path;se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=M(se,this.posX+this.margin[3],-wt+yr+this.ctx.prevPageLastElemOffset),le.call(this,"fill",!0),this.path=Xr}var kr=JSON.parse(JSON.stringify(pt));kr=M([kr],this.posX+this.margin[3],-wt+yr+this.ctx.prevPageLastElemOffset)[0];var Zn=(nr>Yt||nr<Qt)&&P.call(this);Zn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Zt,ar,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",kr.x,kr.y,kr.w,kr.h,null,null,Tt),Zn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(O,"JPEG",pt.x,pt.y,pt.w,pt.h,null,null,Tt)};var R=function(O,$,X){var ie=[];$=$||this.pdf.internal.pageSize.width,X=X||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var he=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":ie.push(Math.floor((O.y+he)/X)+1);break;case"arc":ie.push(Math.floor((O.y+he-O.radius)/X)+1),ie.push(Math.floor((O.y+he+O.radius)/X)+1);break;case"qct":var ye=je(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);ie.push(Math.floor((ye.y+he)/X)+1),ie.push(Math.floor((ye.y+ye.h+he)/X)+1);break;case"bct":var Ie=_e(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);ie.push(Math.floor((Ie.y+he)/X)+1),ie.push(Math.floor((Ie.y+Ie.h+he)/X)+1);break;case"rect":ie.push(Math.floor((O.y+he)/X)+1),ie.push(Math.floor((O.y+O.h+he)/X)+1)}for(var ge=0;ge<ie.length;ge+=1)for(;this.pdf.internal.getNumberOfPages()<ie[ge];)L.call(this);return ie},L=function(){var O=this.fillStyle,$=this.strokeStyle,X=this.font,ie=this.lineCap,he=this.lineWidth,ye=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=$,this.font=X,this.lineCap=ie,this.lineWidth=he,this.lineJoin=ye},M=function(O,$,X){for(var ie=0;ie<O.length;ie++)switch(O[ie].type){case"bct":O[ie].x2+=$,O[ie].y2+=X;case"qct":O[ie].x1+=$,O[ie].y1+=X;case"mt":case"lt":case"arc":default:O[ie].x+=$,O[ie].y+=X}return O},H=function(O){return O.sort(function($,X){return $-X})},oe=function(O,$){for(var X,ie,he=this.fillStyle,ye=this.strokeStyle,Ie=this.lineCap,ge=this.lineWidth,rt=Math.abs(ge*this.ctx.transform.scaleX),at=this.lineJoin,it=JSON.parse(JSON.stringify(this.path)),bt=JSON.parse(JSON.stringify(this.path)),qt=[],Je=0;Je<bt.length;Je++)if(bt[Je].x!==void 0)for(var se=R.call(this,bt[Je]),Xt=0;Xt<se.length;Xt+=1)qt.indexOf(se[Xt])===-1&&qt.push(se[Xt]);for(var Tt=0;Tt<qt.length;Tt++)for(;this.pdf.internal.getNumberOfPages()<qt[Tt];)L.call(this);if(H(qt),this.autoPaging)for(var ot=qt[0],pt=qt[qt.length-1],vt=ot;vt<pt+1;vt++){this.pdf.setPage(vt),this.fillStyle=he,this.strokeStyle=ye,this.lineCap=Ie,this.lineWidth=rt,this.lineJoin=at;var St=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Rt=vt===1?this.posY+this.margin[0]:this.margin[0],Yt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],nr=vt===1?0:Yt+(vt-2)*Qt;if(this.ctx.clip_path.length!==0){var Zt=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=M(X,this.posX+this.margin[3],-nr+Rt+this.ctx.prevPageLastElemOffset),le.call(this,O,!0),this.path=Zt}if(ie=JSON.parse(JSON.stringify(it)),this.path=M(ie,this.posX+this.margin[3],-nr+Rt+this.ctx.prevPageLastElemOffset),$===!1||vt===0){var yr=(vt>ot||vt<pt)&&P.call(this);yr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],St,Qt,null).clip().discardPath()),le.call(this,O,$),yr&&this.pdf.restoreGraphicsState()}this.lineWidth=ge}else this.lineWidth=rt,le.call(this,O,$),this.lineWidth=ge;this.path=it},le=function(O,$){if((O!=="stroke"||$||!I.call(this))&&(O==="stroke"||$||!x.call(this))){for(var X,ie,he=[],ye=this.path,Ie=0;Ie<ye.length;Ie++){var ge=ye[Ie];switch(ge.type){case"begin":he.push({begin:!0});break;case"close":he.push({close:!0});break;case"mt":he.push({start:ge,deltas:[],abs:[]});break;case"lt":var rt=he.length;if(ye[Ie-1]&&!isNaN(ye[Ie-1].x)&&(X=[ge.x-ye[Ie-1].x,ge.y-ye[Ie-1].y],rt>0)){for(;rt>=0;rt--)if(he[rt-1].close!==!0&&he[rt-1].begin!==!0){he[rt-1].deltas.push(X),he[rt-1].abs.push(ge);break}}break;case"bct":X=[ge.x1-ye[Ie-1].x,ge.y1-ye[Ie-1].y,ge.x2-ye[Ie-1].x,ge.y2-ye[Ie-1].y,ge.x-ye[Ie-1].x,ge.y-ye[Ie-1].y],he[he.length-1].deltas.push(X);break;case"qct":var at=ye[Ie-1].x+2/3*(ge.x1-ye[Ie-1].x),it=ye[Ie-1].y+2/3*(ge.y1-ye[Ie-1].y),bt=ge.x+2/3*(ge.x1-ge.x),qt=ge.y+2/3*(ge.y1-ge.y),Je=ge.x,se=ge.y;X=[at-ye[Ie-1].x,it-ye[Ie-1].y,bt-ye[Ie-1].x,qt-ye[Ie-1].y,Je-ye[Ie-1].x,se-ye[Ie-1].y],he[he.length-1].deltas.push(X);break;case"arc":he.push({deltas:[],abs:[],arc:!0}),Array.isArray(he[he.length-1].abs)&&he[he.length-1].abs.push(ge)}}ie=$?null:O==="stroke"?"stroke":"fill";for(var Xt=!1,Tt=0;Tt<he.length;Tt++)if(he[Tt].arc)for(var ot=he[Tt].abs,pt=0;pt<ot.length;pt++){var vt=ot[pt];vt.type==="arc"?G.call(this,vt.x,vt.y,vt.radius,vt.startAngle,vt.endAngle,vt.counterclockwise,void 0,$,!Xt):pe.call(this,vt.x,vt.y),Xt=!0}else if(he[Tt].close===!0)this.pdf.internal.out("h"),Xt=!1;else if(he[Tt].begin!==!0){var St=he[Tt].start.x,Rt=he[Tt].start.y;te.call(this,he[Tt].deltas,St,Rt),Xt=!0}ie&&fe.call(this,ie),$&&Te.call(this)}},be=function(O){var $=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,X=$*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-X;case"top":return O+$-X;case"hanging":return O+$-2*X;case"middle":return O+$/2-X;case"ideographic":return O;case"alphabetic":default:return O}},ne=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};_.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function($,X){this.colorStops.push([$,X])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},_.prototype.createPattern=function(){return this.createLinearGradient()},_.prototype.createRadialGradient=function(){return this.createLinearGradient()};var G=function(O,$,X,ie,he,ye,Ie,ge,rt){for(var at=Me.call(this,X,ie,he,ye),it=0;it<at.length;it++){var bt=at[it];it===0&&(rt?V.call(this,bt.x1+O,bt.y1+$):pe.call(this,bt.x1+O,bt.y1+$)),Ue.call(this,O,$,bt.x2,bt.y2,bt.x3,bt.y3,bt.x4,bt.y4)}ge?Te.call(this):fe.call(this,Ie)},fe=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Te=function(){this.pdf.clip(),this.pdf.discardPath()},V=function(O,$){this.pdf.internal.out(r(O)+" "+i($)+" m")},Y=function(O){var $;switch(O.align){case"right":case"end":$="right";break;case"center":$="center";break;case"left":case"start":default:$="left"}var X=this.pdf.getTextDimensions(O.text),ie=be.call(this,O.y),he=ne.call(this,ie)-X.h,ye=this.ctx.transform.applyToPoint(new l(O.x,ie)),Ie=this.ctx.transform.decompose(),ge=new h;ge=(ge=(ge=ge.multiply(Ie.translate)).multiply(Ie.skew)).multiply(Ie.scale);for(var rt,at,it,bt=this.ctx.transform.applyToRectangle(new c(O.x,ie,X.w,X.h)),qt=ge.applyToRectangle(new c(O.x,he,X.w,X.h)),Je=R.call(this,qt),se=[],Xt=0;Xt<Je.length;Xt+=1)se.indexOf(Je[Xt])===-1&&se.push(Je[Xt]);if(H(se),this.autoPaging)for(var Tt=se[0],ot=se[se.length-1],pt=Tt;pt<ot+1;pt++){this.pdf.setPage(pt);var vt=pt===1?this.posY+this.margin[0]:this.margin[0],St=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Rt=this.pdf.internal.pageSize.height-this.margin[2],Yt=Rt-this.margin[0],Qt=this.pdf.internal.pageSize.width-this.margin[1],nr=Qt-this.margin[3],Zt=pt===1?0:St+(pt-2)*Yt;if(this.ctx.clip_path.length!==0){var yr=this.path;rt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=M(rt,this.posX+this.margin[3],-1*Zt+vt),le.call(this,"fill",!0),this.path=yr}var zt=M([JSON.parse(JSON.stringify(qt))],this.posX+this.margin[3],-Zt+vt+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(at=this.pdf.internal.getFontSize(),this.pdf.setFontSize(at*O.scale),it=this.lineWidth,this.lineWidth=it*O.scale);var ar=this.autoPaging!=="text";if(ar||zt.y+zt.h<=Rt){if(ar||zt.y>=vt&&zt.x<=Qt){var wt=ar?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||Qt-zt.x)[0],Xr=M([JSON.parse(JSON.stringify(bt))],this.posX+this.margin[3],-Zt+vt+this.ctx.prevPageLastElemOffset)[0],kr=ar&&(pt>Tt||pt<ot)&&P.call(this);kr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],nr,Yt,null).clip().discardPath()),this.pdf.text(wt,Xr.x,Xr.y,{angle:O.angle,align:$,renderingMode:O.renderingMode}),kr&&this.pdf.restoreGraphicsState()}}else zt.y<Rt&&(this.ctx.prevPageLastElemOffset+=Rt-zt.y);O.scale>=.01&&(this.pdf.setFontSize(at),this.lineWidth=it)}else O.scale>=.01&&(at=this.pdf.internal.getFontSize(),this.pdf.setFontSize(at*O.scale),it=this.lineWidth,this.lineWidth=it*O.scale),this.pdf.text(O.text,ye.x+this.posX,ye.y+this.posY,{angle:O.angle,align:$,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(at),this.lineWidth=it)},pe=function(O,$,X,ie){X=X||0,ie=ie||0,this.pdf.internal.out(r(O+X)+" "+i($+ie)+" l")},te=function(O,$,X){return this.pdf.lines(O,$,X,null,null)},Ue=function(O,$,X,ie,he,ye,Ie,ge){this.pdf.internal.out([e(o(X+O)),e(s(ie+$)),e(o(he+O)),e(s(ye+$)),e(o(Ie+O)),e(s(ge+$)),"c"].join(" "))},Me=function(O,$,X,ie){for(var he=2*Math.PI,ye=Math.PI/2;$>X;)$-=he;var Ie=Math.abs(X-$);Ie<he&&ie&&(Ie=he-Ie);for(var ge=[],rt=ie?-1:1,at=$;Ie>1e-5;){var it=at+rt*Math.min(Ie,ye);ge.push(ze.call(this,O,at,it)),Ie-=Math.abs(it-at),at=it}return ge},ze=function(O,$,X){var ie=(X-$)/2,he=O*Math.cos(ie),ye=O*Math.sin(ie),Ie=he,ge=-ye,rt=Ie*Ie+ge*ge,at=rt+Ie*he+ge*ye,it=4/3*(Math.sqrt(2*rt*at)-at)/(Ie*ye-ge*he),bt=Ie-it*ge,qt=ge+it*Ie,Je=bt,se=-qt,Xt=ie+$,Tt=Math.cos(Xt),ot=Math.sin(Xt);return{x1:O*Math.cos($),y1:O*Math.sin($),x2:bt*Tt-qt*ot,y2:bt*ot+qt*Tt,x3:Je*Tt-se*ot,y3:Je*ot+se*Tt,x4:O*Math.cos(X),y4:O*Math.sin(X)}},de=function(O){return 180*O/Math.PI},je=function(O,$,X,ie,he,ye){var Ie=O+.5*(X-O),ge=$+.5*(ie-$),rt=he+.5*(X-he),at=ye+.5*(ie-ye),it=Math.min(O,he,Ie,rt),bt=Math.max(O,he,Ie,rt),qt=Math.min($,ye,ge,at),Je=Math.max($,ye,ge,at);return new c(it,qt,bt-it,Je-qt)},_e=function(O,$,X,ie,he,ye,Ie,ge){var rt,at,it,bt,qt,Je,se,Xt,Tt,ot,pt,vt,St,Rt,Yt=X-O,Qt=ie-$,nr=he-X,Zt=ye-ie,yr=Ie-he,zt=ge-ye;for(at=0;at<41;at++)Tt=(se=(it=O+(rt=at/40)*Yt)+rt*((qt=X+rt*nr)-it))+rt*(qt+rt*(he+rt*yr-qt)-se),ot=(Xt=(bt=$+rt*Qt)+rt*((Je=ie+rt*Zt)-bt))+rt*(Je+rt*(ye+rt*zt-Je)-Xt),at==0?(pt=Tt,vt=ot,St=Tt,Rt=ot):(pt=Math.min(pt,Tt),vt=Math.min(vt,ot),St=Math.max(St,Tt),Rt=Math.max(Rt,ot));return new c(Math.round(pt),Math.round(vt),Math.round(St-pt),Math.round(Rt-vt))},ae=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,$,X=(O=this.ctx.lineDash,$=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:$}));this.prevLineDash!==X&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=X)}}})(lr.API),function(t){var e=function(s){var l,c,h,g,w,_,N,x,I,P;for(c=[],h=0,g=(s+=l="\0\0\0\0".slice(s.length%4||4)).length;g>h;h+=4)(w=(s.charCodeAt(h)<<24)+(s.charCodeAt(h+1)<<16)+(s.charCodeAt(h+2)<<8)+s.charCodeAt(h+3))!==0?(_=(w=((w=((w=((w=(w-(P=w%85))/85)-(I=w%85))/85)-(x=w%85))/85)-(N=w%85))/85)%85,c.push(_+33,N+33,x+33,I+33,P+33)):c.push(122);return function(R,L){for(var M=L;M>0;M--)R.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},r=function(s){var l,c,h,g,w,_=String,N="length",x=255,I="charCodeAt",P="slice",R="replace";for(s[P](-2),s=s[P](0,-2)[R](/\s/g,"")[R]("z","!!!!!"),h=[],g=0,w=(s+=l="uuuuu"[P](s[N]%5||5))[N];w>g;g+=5)c=52200625*(s[I](g)-33)+614125*(s[I](g+1)-33)+7225*(s[I](g+2)-33)+85*(s[I](g+3)-33)+(s[I](g+4)-33),h.push(x&c>>24,x&c>>16,x&c>>8,x&c);return function(L,M){for(var H=M;H>0;H--)L.pop()}(h,l[N]),_.fromCharCode.apply(_,h)},i=function(s){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),l.test(s)===!1)return"";for(var c="",h=0;h<s.length;h+=2)c+=String.fromCharCode("0x"+(s[h]+s[h+1]));return c},o=function(s){for(var l=new Uint8Array(s.length),c=s.length;c--;)l[c]=s.charCodeAt(c);return s=(l=yp(l)).reduce(function(h,g){return h+String.fromCharCode(g)},"")};t.processDataByFilters=function(s,l){var c=0,h=s||"",g=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":h=r(h),g.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":h=e(h),g.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":h=i(h),g.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":h=h.split("").map(function(w){return("0"+w.charCodeAt().toString(16)).slice(-2)}).join("")+">",g.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":h=o(h),g.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:h,reverseChain:g.reverse().join(" ")}}}(lr.API),function(t){t.loadFile=function(e,r,i){return function(o,s,l){s=s!==!1,l=typeof l=="function"?l:function(){};var c=void 0;try{c=function(h,g,w){var _=new XMLHttpRequest,N=0,x=function(I){var P=I.length,R=[],L=String.fromCharCode;for(N=0;N<P;N+=1)R.push(L(255&I.charCodeAt(N)));return R.join("")};if(_.open("GET",h,!g),_.overrideMimeType("text/plain; charset=x-user-defined"),g===!1&&(_.onload=function(){_.status===200?w(x(this.responseText)):w(void 0)}),_.send(null),g&&_.status===200)return x(_.responseText)}(o,s,l)}catch{}return c}(e,r,i)},t.loadImageFile=t.loadFile}(lr.API),function(t){function e(){return(cr.html2canvas?Promise.resolve(cr.html2canvas):Bc(()=>import("./html2canvas.esm-BfxBtG_O.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(cr.DOMPurify?Promise.resolve(cr.DOMPurify):Bc(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var i=function(l){var c=en(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},o=function(l,c){var h=document.createElement(l);for(var g in c.className&&(h.className=c.className),c.innerHTML&&c.dompurify&&(h.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)h.style[g]=c.style[g];return h},s=function l(c){var h=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),g=l.convert(Promise.resolve(),h);return g=(g=g.setProgress(1,l,1,[l])).set(c)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(l,c){return l.__proto__=c||s.prototype,l},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(h){switch(i(h)){case"string":return"string";case"element":return h.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l)){case"string":return this.then(r).then(function(h){return this.set({src:o("div",{innerHTML:l,dompurify:h})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},s.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=function h(g,w){for(var _=g.nodeType===3?document.createTextNode(g.nodeValue):g.cloneNode(!1),N=g.firstChild;N;N=N.nextSibling)w!==!0&&N.nodeType===1&&N.nodeName==="SCRIPT"||_.appendChild(h(N,w));return g.nodeType===1&&(g.nodeName==="CANVAS"?(_.width=g.width,_.height=g.height,_.getContext("2d").drawImage(g,0,0)):g.nodeName!=="TEXTAREA"&&g.nodeName!=="SELECT"||(_.value=g.value),_.addEventListener("load",function(){_.scrollTop=g.scrollTop,_.scrollLeft=g.scrollLeft},!0)),_}(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var h=Object.assign({},this.opt.html2canvas);return delete h.onrendered,c(this.prop.container,h)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var h=this.opt.jsPDF,g=this.opt.fontFaces,w=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,_=Object.assign({async:!0,allowTaint:!0,scale:w,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete _.onrendered,h.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,h.context2d.posX=this.opt.x,h.context2d.posY=this.opt.y,h.context2d.margin=this.opt.margin,h.context2d.fontFaces=g,g)for(var N=0;N<g.length;++N){var x=g[N],I=x.src.find(function(P){return P.format==="truetype"});I&&h.addFont(I.url,x.ref.name,x.ref.style)}return _.windowHeight=_.windowHeight||0,_.windowHeight=_.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):_.windowHeight,h.context2d.save(!0),c(this.prop.container,_)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(l,c,h){return(h=h||"pdf").toLowerCase()==="img"||h.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},s.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},s.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},s.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(l){if(i(l)!=="object")return this;var c=Object.keys(l||{}).map(function(h){if(h in s.template.prop)return function(){this.prop[h]=l[h]};switch(h){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[h]=l[h]}}},this);return this.then(function(){return this.thenList(c)})},s.prototype.get=function(l,c){return this.then(function(){var h=l in s.template.prop?this.prop[l]:this.opt[l];return c?c(h):h})},s.prototype.setMargin=function(l){return this.then(function(){switch(i(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},s.prototype.setPageSize=function(l){function c(h,g){return Math.floor(h*g/72*96)}return this.then(function(){(l=l||lr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},s.prototype.setProgress=function(l,c,h,g){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),h!=null&&(this.progress.n=h),g!=null&&(this.progress.stack=g),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(l,c,h,g){return this.setProgress(l?this.progress.val+l:null,c||null,h?this.progress.n+h:null,g?this.progress.stack.concat(g):null)},s.prototype.then=function(l,c){var h=this;return this.thenCore(l,c,function(g,w){return h.updateProgress(null,null,1,[g]),Promise.prototype.then.call(this,function(_){return h.updateProgress(null,g),_}).then(g,w).then(function(_){return h.updateProgress(1),_})})},s.prototype.thenCore=function(l,c,h){h=h||Promise.prototype.then,l&&(l=l.bind(this)),c&&(c=c.bind(this));var g=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),w=h.call(g,l,c);return s.convert(w,this.__proto__)},s.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},s.prototype.thenList=function(l){var c=this;return l.forEach(function(h){c=c.thenCore(h)}),c},s.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return s.convert(c,this)},s.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},s.prototype.error=function(l){return this.then(function(){throw new Error(l)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,lr.getPageSize=function(l,c,h){if(en(l)==="object"){var g=l;l=g.orientation,c=g.unit||c,h=g.format||h}c=c||"mm",h=h||"a4",l=(""+(l||"P")).toLowerCase();var w,_=(""+h).toLowerCase(),N={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":w=1;break;case"mm":w=72/25.4;break;case"cm":w=72/2.54;break;case"in":w=72;break;case"px":w=.75;break;case"pc":case"em":w=12;break;case"ex":w=6;break;default:throw"Invalid unit: "+c}var x,I=0,P=0;if(N.hasOwnProperty(_))I=N[_][1]/w,P=N[_][0]/w;else try{I=h[1],P=h[0]}catch{throw new Error("Invalid format: "+h)}if(l==="p"||l==="portrait")l="p",P>I&&(x=P,P=I,I=x);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",I>P&&(x=P,P=I,I=x)}return{width:P,height:I,unit:c,k:w,orientation:l}},t.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(Sp):null;var h=new s(c);return c.worker?h:h.from(l).doCallback()}}(lr.API),lr.API.addJS=function(t){return Qg=t,this.internal.events.subscribe("postPutResources",function(){Vd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Vd+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Xg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Qg+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Vd!==void 0&&Xg!==void 0&&this.internal.out("/Names <</JavaScript "+Vd+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=r.outline.render().split(/\r\n/),s=0;s<o.length;s++){var l=o[s],c=i.exec(l);if(c!=null){var h=c[1];r.internal.newObjectDeferredBegin(h,!1)}r.internal.write(l)}if(this.outline.createNamedDestinations){var g=this.internal.pages.length,w=[];for(s=0;s<g;s++){var _=r.internal.newObject();w.push(_);var N=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+N.objId+" 0 R /XYZ null null null]>> endobj")}var x=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<w.length;s++)r.internal.write("(page_"+(s+1)+")"+w[s]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+x+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(i,o,s){var l={title:o,options:s,children:[]};return i==null&&(i=this.root),i.children.push(l),l},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(i){i.id=r.internal.newObjectDeferred();for(var o=0;o<i.children.length;o++)this.genIds_r(i.children[o])},r.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},r.outline.renderItems=function(i){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<i.children.length;s++){var l=i.children[s];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(i)),s>0&&this.line("/Prev "+this.makeRef(i.children[s-1])),s<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[s+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var c=this.count=this.count_r({count:0},l);if(c>0&&this.line("/Count "+c),l.options&&l.options.pageNumber){var h=r.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var g=0;g<i.children.length;g++)this.renderItems(i.children[g])},r.outline.line=function(i){this.ctx.val+=i+`\r
`},r.outline.makeRef=function(i){return i.id+" 0 R"},r.outline.makeString=function(i){return"("+r.internal.pdfEscape(i)+")"},r.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(i,o){for(var s=0;s<o.children.length;s++)i.count++,this.count_r(i,o.children[s]);return i.count}}])}(lr.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,i,o,s,l,c){var h,g=this.decode.DCT_DECODE,w=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=l||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(h=function(_){for(var N,x=256*_.charCodeAt(4)+_.charCodeAt(5),I=_.length,P={width:0,height:0,numcomponents:1},R=4;R<I;R+=2){if(R+=x,e.indexOf(_.charCodeAt(R+1))!==-1){N=256*_.charCodeAt(R+5)+_.charCodeAt(R+6),P={width:256*_.charCodeAt(R+7)+_.charCodeAt(R+8),height:N,numcomponents:_.charCodeAt(R+9)};break}x=256*_.charCodeAt(R+2)+_.charCodeAt(R+3)}return P}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}w={data:r,width:h.width,height:h.height,colorSpace:c,bitsPerComponent:8,filter:g,index:i,alias:o}}return w}}(lr.API);var Ou,Wd,Zg,em,tm,Ow=function(){var t,e,r;function i(s){var l,c,h,g,w,_,N,x,I,P,R,L,M,H;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},_=null;;){switch(l=this.readUInt32(),I=(function(){var oe,le;for(le=[],oe=0;oe<4;++oe)le.push(String.fromCharCode(this.data[this.pos++]));return le}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(l);break;case"fcTL":_&&this.animation.frames.push(_),this.pos+=4,_={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},w=this.readUInt16(),g=this.readUInt16()||100,_.delay=1e3*w/g,_.disposeOp=this.data[this.pos++],_.blendOp=this.data[this.pos++],_.data=[];break;case"IDAT":case"fdAT":for(I==="fdAT"&&(this.pos+=4,l-=4),s=_?.data||this.imgData,L=0;0<=l?L<l:L>l;0<=l?++L:--L)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(h=this.palette.length/3,this.transparency.indexed=this.read(l),this.transparency.indexed.length>h)throw new Error("More transparent colors than palette size");if((P=h-this.transparency.indexed.length)>0)for(M=0;0<=P?M<P:M>P;0<=P?++M:--M)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(l)[0];break;case 2:this.transparency.rgb=this.read(l)}break;case"tEXt":N=(R=this.read(l)).indexOf(0),x=String.fromCharCode.apply(String,R.slice(0,N)),this.text[x]=String.fromCharCode.apply(String,R.slice(N+1));break;case"IEND":return _&&this.animation.frames.push(_),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(H=this.colorType)===4||H===6,c=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*c,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=l}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(s){var l,c;for(c=[],l=0;0<=s?l<s:l>s;0<=s?++l:--l)c.push(this.data[this.pos++]);return c},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(s){var l=this.pixelBitlength/8,c=new Uint8Array(this.width*this.height*l),h=0,g=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function w(_,N,x,I){var P,R,L,M,H,oe,le,be,ne,G,fe,Te,V,Y,pe,te,Ue,Me,ze,de,je,_e=Math.ceil((g.width-_)/x),ae=Math.ceil((g.height-N)/I),O=g.width==_e&&g.height==ae;for(Y=l*_e,Te=O?c:new Uint8Array(Y*ae),oe=s.length,V=0,R=0;V<ae&&h<oe;){switch(s[h++]){case 0:for(M=Ue=0;Ue<Y;M=Ue+=1)Te[R++]=s[h++];break;case 1:for(M=Me=0;Me<Y;M=Me+=1)P=s[h++],H=M<l?0:Te[R-l],Te[R++]=(P+H)%256;break;case 2:for(M=ze=0;ze<Y;M=ze+=1)P=s[h++],L=(M-M%l)/l,pe=V&&Te[(V-1)*Y+L*l+M%l],Te[R++]=(pe+P)%256;break;case 3:for(M=de=0;de<Y;M=de+=1)P=s[h++],L=(M-M%l)/l,H=M<l?0:Te[R-l],pe=V&&Te[(V-1)*Y+L*l+M%l],Te[R++]=(P+Math.floor((H+pe)/2))%256;break;case 4:for(M=je=0;je<Y;M=je+=1)P=s[h++],L=(M-M%l)/l,H=M<l?0:Te[R-l],V===0?pe=te=0:(pe=Te[(V-1)*Y+L*l+M%l],te=L&&Te[(V-1)*Y+(L-1)*l+M%l]),le=H+pe-te,be=Math.abs(le-H),G=Math.abs(le-pe),fe=Math.abs(le-te),ne=be<=G&&be<=fe?H:G<=fe?pe:te,Te[R++]=(P+ne)%256;break;default:throw new Error("Invalid filter algorithm: "+s[h-1])}if(!O){var $=((N+V*I)*g.width+_)*l,X=V*Y;for(M=0;M<_e;M+=1){for(var ie=0;ie<l;ie+=1)c[$++]=Te[X++];$+=(x-1)*l}}V++}}return s=dw(s),g.interlaceMethod==1?(w(0,0,8,8),w(4,0,8,8),w(0,4,4,8),w(2,0,4,4),w(0,2,2,4),w(1,0,2,2),w(0,1,1,2)):w(0,0,1,1),c},i.prototype.decodePalette=function(){var s,l,c,h,g,w,_,N,x;for(c=this.palette,w=this.transparency.indexed||[],g=new Uint8Array((w.length||0)+c.length),h=0,s=0,l=_=0,N=c.length;_<N;l=_+=3)g[h++]=c[l],g[h++]=c[l+1],g[h++]=c[l+2],g[h++]=(x=w[s++])!=null?x:255;return g},i.prototype.copyToImageData=function(s,l){var c,h,g,w,_,N,x,I,P,R,L;if(h=this.colors,P=null,c=this.hasAlphaChannel,this.palette.length&&(P=(L=this._decodedPalette)!=null?L:this._decodedPalette=this.decodePalette(),h=4,c=!0),I=(g=s.data||s).length,_=P||l,w=N=0,h===1)for(;w<I;)x=P?4*l[w/4]:N,R=_[x++],g[w++]=R,g[w++]=R,g[w++]=R,g[w++]=c?_[x++]:255,N=x;else for(;w<I;)x=P?4*l[w/4]:N,g[w++]=_[x++],g[w++]=_[x++],g[w++]=_[x++],g[w++]=c?_[x++]:255,N=x},i.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var o=function(){if(Object.prototype.toString.call(cr)==="[object Window]"){try{e=cr.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return o(),t=function(s){var l;if(o()===!0)return r.width=s.width,r.height=s.height,r.clearRect(0,0,s.width,s.height),r.putImageData(s,0,0),(l=new Image).src=e.toDataURL(),l;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(s){var l,c,h,g,w,_,N,x;if(this.animation){for(x=[],c=w=0,_=(N=this.animation.frames).length;w<_;c=++w)l=N[c],h=s.createImageData(l.width,l.height),g=this.decodePixels(new Uint8Array(l.data)),this.copyToImageData(h,g),l.imageData=h,x.push(l.image=t(h));return x}},i.prototype.renderFrame=function(s,l){var c,h,g;return c=(h=this.animation.frames)[l],g=h[l-1],l===0&&s.clearRect(0,0,this.width,this.height),g?.disposeOp===1?s.clearRect(g.xOffset,g.yOffset,g.width,g.height):g?.disposeOp===2&&s.putImageData(g.imageData,g.xOffset,g.yOffset),c.blendOp===0&&s.clearRect(c.xOffset,c.yOffset,c.width,c.height),s.drawImage(c.image,c.xOffset,c.yOffset)},i.prototype.animate=function(s){var l,c,h,g,w,_,N=this;return c=0,_=this.animation,g=_.numFrames,h=_.frames,w=_.numPlays,(l=function(){var x,I;if(x=c++%g,I=h[x],N.renderFrame(s,x),g>1&&c/g<w)return N.animation._timeout=setTimeout(l,I.delay)})()},i.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},i.prototype.render=function(s){var l,c;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,l=s.getContext("2d"),this.animation?(this.decodeFrames(l),this.animate(l)):(c=l.createImageData(this.width,this.height),this.copyToImageData(c,this.decodePixels()),l.putImageData(c,0,0))},i}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Tw(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,i=t[e++]|t[e++]<<8,o=t[e++],s=o>>7,l=1<<(7&o)+1;t[e++],t[e++];var c=null,h=null;s&&(c=e,h=l,e+=3*l);var g=!0,w=[],_=0,N=null,x=0,I=null;for(this.width=r,this.height=i;g&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,I=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((V=t[e++])>=0))throw Error("Invalid block size");if(V===0)break;e+=V}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var P=t[e++];_=t[e++]|t[e++]<<8,N=t[e++],(1&P)==0&&(N=null),x=P>>2&7,e++;break;case 254:for(;;){if(!((V=t[e++])>=0))throw Error("Invalid block size");if(V===0)break;e+=V}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var R=t[e++]|t[e++]<<8,L=t[e++]|t[e++]<<8,M=t[e++]|t[e++]<<8,H=t[e++]|t[e++]<<8,oe=t[e++],le=oe>>6&1,be=1<<(7&oe)+1,ne=c,G=h,fe=!1;oe>>7&&(fe=!0,ne=e,G=be,e+=3*be);var Te=e;for(e++;;){var V;if(!((V=t[e++])>=0))throw Error("Invalid block size");if(V===0)break;e+=V}w.push({x:R,y:L,width:M,height:H,has_local_palette:fe,palette_offset:ne,palette_size:G,data_offset:Te,data_length:e-Te,transparent_index:N,interlaced:!!le,delay:_,disposal:x});break;case 59:g=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return w.length},this.loopCount=function(){return I},this.frameInfo=function(Y){if(Y<0||Y>=w.length)throw new Error("Frame index out of range.");return w[Y]},this.decodeAndBlitFrameBGRA=function(Y,pe){var te=this.frameInfo(Y),Ue=te.width*te.height,Me=new Uint8Array(Ue);rm(t,te.data_offset,Me,Ue);var ze=te.palette_offset,de=te.transparent_index;de===null&&(de=256);var je=te.width,_e=r-je,ae=je,O=4*(te.y*r+te.x),$=4*((te.y+te.height)*r+te.x),X=O,ie=4*_e;te.interlaced===!0&&(ie+=4*r*7);for(var he=8,ye=0,Ie=Me.length;ye<Ie;++ye){var ge=Me[ye];if(ae===0&&(ae=je,(X+=ie)>=$&&(ie=4*_e+4*r*(he-1),X=O+(je+_e)*(he<<1),he>>=1)),ge===de)X+=4;else{var rt=t[ze+3*ge],at=t[ze+3*ge+1],it=t[ze+3*ge+2];pe[X++]=it,pe[X++]=at,pe[X++]=rt,pe[X++]=255}--ae}},this.decodeAndBlitFrameRGBA=function(Y,pe){var te=this.frameInfo(Y),Ue=te.width*te.height,Me=new Uint8Array(Ue);rm(t,te.data_offset,Me,Ue);var ze=te.palette_offset,de=te.transparent_index;de===null&&(de=256);var je=te.width,_e=r-je,ae=je,O=4*(te.y*r+te.x),$=4*((te.y+te.height)*r+te.x),X=O,ie=4*_e;te.interlaced===!0&&(ie+=4*r*7);for(var he=8,ye=0,Ie=Me.length;ye<Ie;++ye){var ge=Me[ye];if(ae===0&&(ae=je,(X+=ie)>=$&&(ie=4*_e+4*r*(he-1),X=O+(je+_e)*(he<<1),he>>=1)),ge===de)X+=4;else{var rt=t[ze+3*ge],at=t[ze+3*ge+1],it=t[ze+3*ge+2];pe[X++]=rt,pe[X++]=at,pe[X++]=it,pe[X++]=255}--ae}}}function rm(t,e,r,i){for(var o=t[e++],s=1<<o,l=s+1,c=l+1,h=o+1,g=(1<<h)-1,w=0,_=0,N=0,x=t[e++],I=new Int32Array(4096),P=null;;){for(;w<16&&x!==0;)_|=t[e++]<<w,w+=8,x===1?x=t[e++]:--x;if(w<h)break;var R=_&g;if(_>>=h,w-=h,R!==s){if(R===l)break;for(var L=R<c?R:P,M=0,H=L;H>s;)H=I[H]>>8,++M;var oe=H;if(N+M+(L!==R?1:0)>i)return void cn.log("Warning, gif stream longer than expected.");r[N++]=oe;var le=N+=M;for(L!==R&&(r[N++]=oe),H=L;M--;)H=I[H],r[--le]=255&H,H>>=8;P!==null&&c<4096&&(I[c++]=P<<8|oe,c>=g+1&&h<12&&(++h,g=g<<1|1)),P=R}else c=l+1,g=(1<<(h=o+1))-1,P=null}return N!==i&&cn.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Gf(t){var e,r,i,o,s,l=Math.floor,c=new Array(64),h=new Array(64),g=new Array(64),w=new Array(64),_=new Array(65535),N=new Array(65535),x=new Array(64),I=new Array(64),P=[],R=0,L=7,M=new Array(64),H=new Array(64),oe=new Array(64),le=new Array(256),be=new Array(2048),ne=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],G=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],fe=[0,1,2,3,4,5,6,7,8,9,10,11],Te=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],V=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Y=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],pe=[0,1,2,3,4,5,6,7,8,9,10,11],te=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Ue=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Me(O,$){for(var X=0,ie=0,he=new Array,ye=1;ye<=16;ye++){for(var Ie=1;Ie<=O[ye];Ie++)he[$[ie]]=[],he[$[ie]][0]=X,he[$[ie]][1]=ye,ie++,X++;X*=2}return he}function ze(O){for(var $=O[0],X=O[1]-1;X>=0;)$&1<<X&&(R|=1<<L),X--,--L<0&&(R==255?(de(255),de(0)):de(R),L=7,R=0)}function de(O){P.push(O)}function je(O){de(O>>8&255),de(255&O)}function _e(O,$,X,ie,he){for(var ye,Ie=he[0],ge=he[240],rt=function(ot,pt){var vt,St,Rt,Yt,Qt,nr,Zt,yr,zt,ar,wt=0;for(zt=0;zt<8;++zt){vt=ot[wt],St=ot[wt+1],Rt=ot[wt+2],Yt=ot[wt+3],Qt=ot[wt+4],nr=ot[wt+5],Zt=ot[wt+6];var Xr=vt+(yr=ot[wt+7]),kr=vt-yr,Zn=St+Zt,Sr=St-Zt,xt=Rt+nr,On=Rt-nr,mr=Yt+Qt,gi=Yt-Qt,dt=Xr+mr,Nn=Xr-mr,Er=Zn+xt,br=Zn-xt;ot[wt]=dt+Er,ot[wt+4]=dt-Er;var Ft=.707106781*(br+Nn);ot[wt+2]=Nn+Ft,ot[wt+6]=Nn-Ft;var pr=.382683433*((dt=gi+On)-(br=Sr+kr)),wn=.5411961*dt+pr,Cr=1.306562965*br+pr,qr=.707106781*(Er=On+Sr),an=kr+qr,Ct=kr-qr;ot[wt+5]=Ct+wn,ot[wt+3]=Ct-wn,ot[wt+1]=an+Cr,ot[wt+7]=an-Cr,wt+=8}for(wt=0,zt=0;zt<8;++zt){vt=ot[wt],St=ot[wt+8],Rt=ot[wt+16],Yt=ot[wt+24],Qt=ot[wt+32],nr=ot[wt+40],Zt=ot[wt+48];var Qr=vt+(yr=ot[wt+56]),er=vt-yr,vr=St+Zt,Mr=St-Zt,Pr=Rt+nr,Ur=Rt-nr,qn=Yt+Qt,Pi=Yt-Qt,Tn=Qr+qn,ei=Qr-qn,tn=vr+Pr,mi=vr-Pr;ot[wt]=Tn+tn,ot[wt+32]=Tn-tn;var Li=.707106781*(mi+ei);ot[wt+16]=ei+Li,ot[wt+48]=ei-Li;var Un=.382683433*((Tn=Pi+Ur)-(mi=Mr+er)),Ha=.5411961*Tn+Un,Ii=1.306562965*mi+Un,hs=.707106781*(tn=Ur+Mr),Ka=er+hs,Gr=er-hs;ot[wt+40]=Gr+Ha,ot[wt+24]=Gr-Ha,ot[wt+8]=Ka+Ii,ot[wt+56]=Ka-Ii,wt++}for(zt=0;zt<64;++zt)ar=ot[zt]*pt[zt],x[zt]=ar>0?ar+.5|0:ar-.5|0;return x}(O,$),at=0;at<64;++at)I[ne[at]]=rt[at];var it=I[0]-X;X=I[0],it==0?ze(ie[0]):(ze(ie[N[ye=32767+it]]),ze(_[ye]));for(var bt=63;bt>0&&I[bt]==0;)bt--;if(bt==0)return ze(Ie),X;for(var qt,Je=1;Je<=bt;){for(var se=Je;I[Je]==0&&Je<=bt;)++Je;var Xt=Je-se;if(Xt>=16){qt=Xt>>4;for(var Tt=1;Tt<=qt;++Tt)ze(ge);Xt&=15}ye=32767+I[Je],ze(he[(Xt<<4)+N[ye]]),ze(_[ye]),Je++}return bt!=63&&ze(Ie),X}function ae(O){O=Math.min(Math.max(O,1),100),s!=O&&(function($){for(var X=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ie=0;ie<64;ie++){var he=l((X[ie]*$+50)/100);he=Math.min(Math.max(he,1),255),c[ne[ie]]=he}for(var ye=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ie=0;Ie<64;Ie++){var ge=l((ye[Ie]*$+50)/100);ge=Math.min(Math.max(ge,1),255),h[ne[Ie]]=ge}for(var rt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],at=0,it=0;it<8;it++)for(var bt=0;bt<8;bt++)g[at]=1/(c[ne[at]]*rt[it]*rt[bt]*8),w[at]=1/(h[ne[at]]*rt[it]*rt[bt]*8),at++}(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),s=O)}this.encode=function(O,$){$&&ae($),P=new Array,R=0,L=7,je(65496),je(65504),je(16),de(74),de(70),de(73),de(70),de(0),de(1),de(1),de(0),je(1),je(1),de(0),de(0),function(){je(65499),je(132),de(0);for(var St=0;St<64;St++)de(c[St]);de(1);for(var Rt=0;Rt<64;Rt++)de(h[Rt])}(),function(St,Rt){je(65472),je(17),de(8),je(Rt),je(St),de(3),de(1),de(17),de(0),de(2),de(17),de(1),de(3),de(17),de(1)}(O.width,O.height),function(){je(65476),je(418),de(0);for(var St=0;St<16;St++)de(G[St+1]);for(var Rt=0;Rt<=11;Rt++)de(fe[Rt]);de(16);for(var Yt=0;Yt<16;Yt++)de(Te[Yt+1]);for(var Qt=0;Qt<=161;Qt++)de(V[Qt]);de(1);for(var nr=0;nr<16;nr++)de(Y[nr+1]);for(var Zt=0;Zt<=11;Zt++)de(pe[Zt]);de(17);for(var yr=0;yr<16;yr++)de(te[yr+1]);for(var zt=0;zt<=161;zt++)de(Ue[zt])}(),je(65498),je(12),de(3),de(1),de(0),de(2),de(17),de(3),de(17),de(0),de(63),de(0);var X=0,ie=0,he=0;R=0,L=7,this.encode.displayName="_encode_";for(var ye,Ie,ge,rt,at,it,bt,qt,Je,se=O.data,Xt=O.width,Tt=O.height,ot=4*Xt,pt=0;pt<Tt;){for(ye=0;ye<ot;){for(at=ot*pt+ye,bt=-1,qt=0,Je=0;Je<64;Je++)it=at+(qt=Je>>3)*ot+(bt=4*(7&Je)),pt+qt>=Tt&&(it-=ot*(pt+1+qt-Tt)),ye+bt>=ot&&(it-=ye+bt-ot+4),Ie=se[it++],ge=se[it++],rt=se[it++],M[Je]=(be[Ie]+be[ge+256>>0]+be[rt+512>>0]>>16)-128,H[Je]=(be[Ie+768>>0]+be[ge+1024>>0]+be[rt+1280>>0]>>16)-128,oe[Je]=(be[Ie+1280>>0]+be[ge+1536>>0]+be[rt+1792>>0]>>16)-128;X=_e(M,g,X,e,i),ie=_e(H,w,ie,r,o),he=_e(oe,w,he,r,o),ye+=32}pt+=8}if(L>=0){var vt=[];vt[1]=L+1,vt[0]=(1<<L+1)-1,ze(vt)}return je(65497),new Uint8Array(P)},t=t||50,function(){for(var O=String.fromCharCode,$=0;$<256;$++)le[$]=O($)}(),e=Me(G,fe),r=Me(Y,pe),i=Me(Te,V),o=Me(te,Ue),function(){for(var O=1,$=2,X=1;X<=15;X++){for(var ie=O;ie<$;ie++)N[32767+ie]=X,_[32767+ie]=[],_[32767+ie][1]=X,_[32767+ie][0]=ie;for(var he=-($-1);he<=-O;he++)N[32767+he]=X,_[32767+he]=[],_[32767+he][1]=X,_[32767+he][0]=$-1+he;O<<=1,$<<=1}}(),function(){for(var O=0;O<256;O++)be[O]=19595*O,be[O+256>>0]=38470*O,be[O+512>>0]=7471*O+32768,be[O+768>>0]=-11059*O,be[O+1024>>0]=-21709*O,be[O+1280>>0]=32768*O+8421375,be[O+1536>>0]=-27439*O,be[O+1792>>0]=-5329*O}(),ae(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function no(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function nm(t){function e(G){if(!G)throw Error("assert :P")}function r(G,fe,Te){for(var V=0;4>V;V++)if(G[fe+V]!=Te.charCodeAt(V))return!0;return!1}function i(G,fe,Te,V,Y){for(var pe=0;pe<Y;pe++)G[fe+pe]=Te[V+pe]}function o(G,fe,Te,V){for(var Y=0;Y<V;Y++)G[fe+Y]=Te}function s(G){return new Int32Array(G)}function l(G,fe){for(var Te=[],V=0;V<G;V++)Te.push(new fe);return Te}function c(G,fe){var Te=[];return function V(Y,pe,te){for(var Ue=te[pe],Me=0;Me<Ue&&(Y.push(te.length>pe+1?[]:new fe),!(te.length<pe+1));Me++)V(Y[Me],pe+1,te)}(Te,0,G),Te}var h=function(){var G=this;function fe(d,m){for(var S=1<<m-1>>>0;d&S;)S>>>=1;return S?(d&S-1)+S:d}function Te(d,m,S,E,D){e(!(E%S));do d[m+(E-=S)]=D;while(0<E)}function V(d,m,S,E,D){if(e(2328>=D),512>=D)var B=s(512);else if((B=s(D))==null)return 0;return function(z,W,K,Q,we,Be){var qe,Oe,nt=W,Ye=1<<K,Se=s(16),Ne=s(16);for(e(we!=0),e(Q!=null),e(z!=null),e(0<K),Oe=0;Oe<we;++Oe){if(15<Q[Oe])return 0;++Se[Q[Oe]]}if(Se[0]==we)return 0;for(Ne[1]=0,qe=1;15>qe;++qe){if(Se[qe]>1<<qe)return 0;Ne[qe+1]=Ne[qe]+Se[qe]}for(Oe=0;Oe<we;++Oe)qe=Q[Oe],0<Q[Oe]&&(Be[Ne[qe]++]=Oe);if(Ne[15]==1)return(Q=new Y).g=0,Q.value=Be[0],Te(z,nt,1,Ye,Q),Ye;var et,Ze=-1,tt=Ye-1,Pt=0,At=1,Jt=1,jt=1<<K;for(Oe=0,qe=1,we=2;qe<=K;++qe,we<<=1){if(At+=Jt<<=1,0>(Jt-=Se[qe]))return 0;for(;0<Se[qe];--Se[qe])(Q=new Y).g=qe,Q.value=Be[Oe++],Te(z,nt+Pt,we,jt,Q),Pt=fe(Pt,qe)}for(qe=K+1,we=2;15>=qe;++qe,we<<=1){if(At+=Jt<<=1,0>(Jt-=Se[qe]))return 0;for(;0<Se[qe];--Se[qe]){if(Q=new Y,(Pt&tt)!=Ze){for(nt+=jt,et=1<<(Ze=qe)-K;15>Ze&&!(0>=(et-=Se[Ze]));)++Ze,et<<=1;Ye+=jt=1<<(et=Ze-K),z[W+(Ze=Pt&tt)].g=et+K,z[W+Ze].value=nt-W-Ze}Q.g=qe-K,Q.value=Be[Oe++],Te(z,nt+(Pt>>K),we,jt,Q),Pt=fe(Pt,qe)}}return At!=2*Ne[15]-1?0:Ye}(d,m,S,E,D,B)}function Y(){this.value=this.g=0}function pe(){this.value=this.g=0}function te(){this.G=l(5,Y),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(gr,pe)}function Ue(d,m,S,E){e(d!=null),e(m!=null),e(2147483648>E),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=m,d.pa=S,d.Jd=m,d.Yc=S+E,d.Zc=4<=E?S+E-4+1:S,ye(d)}function Me(d,m){for(var S=0;0<m--;)S|=ge(d,128)<<m;return S}function ze(d,m){var S=Me(d,m);return Ie(d)?-S:S}function de(d,m,S,E){var D,B=0;for(e(d!=null),e(m!=null),e(4294967288>E),d.Sb=E,d.Ra=0,d.u=0,d.h=0,4<E&&(E=4),D=0;D<E;++D)B+=m[S+D]<<8*D;d.Ra=B,d.bb=E,d.oa=m,d.pa=S}function je(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<_o-8>>>0,++d.bb,d.u-=8;X(d)&&(d.h=1,d.u=0)}function _e(d,m){if(e(0<=m),!d.h&&m<=Vn){var S=$(d)&ts[m];return d.u+=m,je(d),S}return d.h=1,d.u=0}function ae(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function O(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function $(d){return d.Ra>>>(d.u&_o-1)>>>0}function X(d){return e(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>_o}function ie(d,m){d.u=m,d.h=X(d)}function he(d){d.u>=Ss&&(e(d.u>=Ss),je(d))}function ye(d){e(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(e(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function Ie(d){return Me(d,1)}function ge(d,m){var S=d.Ca;0>d.b&&ye(d);var E=d.b,D=S*m>>>8,B=(d.I>>>E>D)+0;for(B?(S-=D,d.I-=D+1<<E>>>0):S=D+1,E=S,D=0;256<=E;)D+=8,E>>=8;return E=7^D+ri[E],d.b-=E,d.Ca=(S<<E)-1,B}function rt(d,m,S){d[m+0]=S>>24&255,d[m+1]=S>>16&255,d[m+2]=S>>8&255,d[m+3]=S>>0&255}function at(d,m){return d[m+0]<<0|d[m+1]<<8}function it(d,m){return at(d,m)|d[m+2]<<16}function bt(d,m){return at(d,m)|at(d,m+2)<<16}function qt(d,m){var S=1<<m;return e(d!=null),e(0<m),d.X=s(S),d.X==null?0:(d.Mb=32-m,d.Xa=m,1)}function Je(d,m){e(d!=null),e(m!=null),e(d.Xa==m.Xa),i(m.X,0,d.X,0,1<<m.Xa)}function se(){this.X=[],this.Xa=this.Mb=0}function Xt(d,m,S,E){e(S!=null),e(E!=null);var D=S[0],B=E[0];return D==0&&(D=(d*B+m/2)/m),B==0&&(B=(m*D+d/2)/d),0>=D||0>=B?0:(S[0]=D,E[0]=B,1)}function Tt(d,m){return d+(1<<m)-1>>>m}function ot(d,m){return((4278255360&d)+(4278255360&m)>>>0&4278255360)+((16711935&d)+(16711935&m)>>>0&16711935)>>>0}function pt(d,m){G[m]=function(S,E,D,B,z,W,K){var Q;for(Q=0;Q<z;++Q){var we=G[d](W[K+Q-1],D,B+Q);W[K+Q]=ot(S[E+Q],we)}}}function vt(){this.ud=this.hd=this.jd=0}function St(d,m){return((4278124286&(d^m))>>>1)+(d&m)>>>0}function Rt(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function Yt(d,m){return Rt(d+(d-m+.5>>1))}function Qt(d,m,S){return Math.abs(m-S)-Math.abs(d-S)}function nr(d,m,S,E,D,B,z){for(E=B[z-1],S=0;S<D;++S)B[z+S]=E=ot(d[m+S],E)}function Zt(d,m,S,E,D){var B;for(B=0;B<S;++B){var z=d[m+B],W=z>>8&255,K=16711935&(K=(K=16711935&z)+((W<<16)+W));E[D+B]=(4278255360&z)+K>>>0}}function yr(d,m){m.jd=d>>0&255,m.hd=d>>8&255,m.ud=d>>16&255}function zt(d,m,S,E,D,B){var z;for(z=0;z<E;++z){var W=m[S+z],K=W>>>8,Q=W,we=255&(we=(we=W>>>16)+((d.jd<<24>>24)*(K<<24>>24)>>>5));Q=255&(Q=(Q=Q+((d.hd<<24>>24)*(K<<24>>24)>>>5))+((d.ud<<24>>24)*(we<<24>>24)>>>5)),D[B+z]=(4278255360&W)+(we<<16)+Q}}function ar(d,m,S,E,D){G[m]=function(B,z,W,K,Q,we,Be,qe,Oe){for(K=Be;K<qe;++K)for(Be=0;Be<Oe;++Be)Q[we++]=D(W[E(B[z++])])},G[d]=function(B,z,W,K,Q,we,Be){var qe=8>>B.b,Oe=B.Ea,nt=B.K[0],Ye=B.w;if(8>qe)for(B=(1<<B.b)-1,Ye=(1<<qe)-1;z<W;++z){var Se,Ne=0;for(Se=0;Se<Oe;++Se)Se&B||(Ne=E(K[Q++])),we[Be++]=D(nt[Ne&Ye]),Ne>>=qe}else G["VP8LMapColor"+S](K,Q,nt,Ye,we,Be,z,W,Oe)}}function wt(d,m,S,E,D){for(S=m+S;m<S;){var B=d[m++];E[D++]=B>>16&255,E[D++]=B>>8&255,E[D++]=B>>0&255}}function Xr(d,m,S,E,D){for(S=m+S;m<S;){var B=d[m++];E[D++]=B>>16&255,E[D++]=B>>8&255,E[D++]=B>>0&255,E[D++]=B>>24&255}}function kr(d,m,S,E,D){for(S=m+S;m<S;){var B=(z=d[m++])>>16&240|z>>12&15,z=z>>0&240|z>>28&15;E[D++]=B,E[D++]=z}}function Zn(d,m,S,E,D){for(S=m+S;m<S;){var B=(z=d[m++])>>16&248|z>>13&7,z=z>>5&224|z>>3&31;E[D++]=B,E[D++]=z}}function Sr(d,m,S,E,D){for(S=m+S;m<S;){var B=d[m++];E[D++]=B>>0&255,E[D++]=B>>8&255,E[D++]=B>>16&255}}function xt(d,m,S,E,D,B){if(B==0)for(S=m+S;m<S;)rt(E,((B=d[m++])[0]>>24|B[1]>>8&65280|B[2]<<8&16711680|B[3]<<24)>>>0),D+=32;else i(E,D,d,m,S)}function On(d,m){G[m][0]=G[d+"0"],G[m][1]=G[d+"1"],G[m][2]=G[d+"2"],G[m][3]=G[d+"3"],G[m][4]=G[d+"4"],G[m][5]=G[d+"5"],G[m][6]=G[d+"6"],G[m][7]=G[d+"7"],G[m][8]=G[d+"8"],G[m][9]=G[d+"9"],G[m][10]=G[d+"10"],G[m][11]=G[d+"11"],G[m][12]=G[d+"12"],G[m][13]=G[d+"13"],G[m][14]=G[d+"0"],G[m][15]=G[d+"0"]}function mr(d){return d==cl||d==qo||d==Ul||d==zl}function gi(){this.eb=[],this.size=this.A=this.fb=0}function dt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Nn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new gi,this.f.kb=new dt,this.sd=null}function Er(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function br(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ft(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function pr(d,m){var S=d.T,E=m.ba.f.RGBA,D=E.eb,B=E.fb+d.ka*E.A,z=Qi[m.ba.S],W=d.y,K=d.O,Q=d.f,we=d.N,Be=d.ea,qe=d.W,Oe=m.cc,nt=m.dc,Ye=m.Mc,Se=m.Nc,Ne=d.ka,et=d.ka+d.T,Ze=d.U,tt=Ze+1>>1;for(Ne==0?z(W,K,null,null,Q,we,Be,qe,Q,we,Be,qe,D,B,null,null,Ze):(z(m.ec,m.fc,W,K,Oe,nt,Ye,Se,Q,we,Be,qe,D,B-E.A,D,B,Ze),++S);Ne+2<et;Ne+=2)Oe=Q,nt=we,Ye=Be,Se=qe,we+=d.Rc,qe+=d.Rc,B+=2*E.A,z(W,(K+=2*d.fa)-d.fa,W,K,Oe,nt,Ye,Se,Q,we,Be,qe,D,B-E.A,D,B,Ze);return K+=d.fa,d.j+et<d.o?(i(m.ec,m.fc,W,K,Ze),i(m.cc,m.dc,Q,we,tt),i(m.Mc,m.Nc,Be,qe,tt),S--):1&et||z(W,K,null,null,Q,we,Be,qe,Q,we,Be,qe,D,B+E.A,null,null,Ze),S}function wn(d,m,S){var E=d.F,D=[d.J];if(E!=null){var B=d.U,z=m.ba.S,W=z==ql||z==Ul;m=m.ba.f.RGBA;var K=[0],Q=d.ka;K[0]=d.T,d.Kb&&(Q==0?--K[0]:(--Q,D[0]-=d.width),d.j+d.ka+d.T==d.o&&(K[0]=d.o-d.j-Q));var we=m.eb;Q=m.fb+Q*m.A,d=It(E,D[0],d.width,B,K,we,Q+(W?0:3),m.A),e(S==K),d&&mr(z)&&Nt(we,Q,W,B,K,m.A)}return 0}function Cr(d){var m=d.ma,S=m.ba.S,E=11>S,D=S==ko||S==Bl||S==ql||S==Zr||S==12||mr(S);if(m.memory=null,m.Ib=null,m.Jb=null,m.Nd=null,!xo(m.Oa,d,D?11:12))return 0;if(D&&mr(S)&&st(),d.da)alert("todo:use_scaling");else{if(E){if(m.Ib=Ft,d.Kb){if(S=d.U+1>>1,m.memory=s(d.U+2*S),m.memory==null)return 0;m.ec=m.memory,m.fc=0,m.cc=m.ec,m.dc=m.fc+d.U,m.Mc=m.cc,m.Nc=m.dc+S,m.Ib=pr,st()}}else alert("todo:EmitYUV");D&&(m.Jb=wn,E&&Fe())}if(E&&!ui){for(d=0;256>d;++d)Zi[d]=89858*(d-128)+ns>>Ws,ea[d]=-22014*(d-128)+ns,pl[d]=-45773*(d-128),Vo[d]=113618*(d-128)+ns>>Ws;for(d=Hr;d<Jr;++d)m=76283*(d-16)+ns>>Ws,mu[d-Hr]=bi(m,255),dd[d-Hr]=bi(m+8>>4,15);ui=1}return 1}function qr(d){var m=d.ma,S=d.U,E=d.T;return e(!(1&d.ka)),0>=S||0>=E?0:(S=m.Ib(d,m),m.Jb!=null&&m.Jb(d,m,S),m.Dc+=S,1)}function an(d){d.ma.memory=null}function Ct(d,m,S,E){return _e(d,8)!=47?0:(m[0]=_e(d,14)+1,S[0]=_e(d,14)+1,E[0]=_e(d,1),_e(d,3)!=0?0:!d.h)}function Qr(d,m){if(4>d)return d+1;var S=d-2>>1;return(2+(1&d)<<S)+_e(m,S)+1}function er(d,m){return 120<m?m-120:1<=(S=((S=Vh[m-1])>>4)*d+(8-(15&S)))?S:1;var S}function vr(d,m,S){var E=$(S),D=d[m+=255&E].g-8;return 0<D&&(ie(S,S.u+8),E=$(S),m+=d[m].value,m+=E&(1<<D)-1),ie(S,S.u+d[m].g),d[m].value}function Mr(d,m,S){return S.g+=d.g,S.value+=d.value<<m>>>0,e(8>=S.g),d.g}function Pr(d,m,S){var E=d.xc;return e((m=E==0?0:d.vc[d.md*(S>>E)+(m>>E)])<d.Wb),d.Ya[m]}function Ur(d,m,S,E){var D=d.ab,B=d.c*m,z=d.C;m=z+m;var W=S,K=E;for(E=d.Ta,S=d.Ua;0<D--;){var Q=d.gc[D],we=z,Be=m,qe=W,Oe=K,nt=(K=E,W=S,Q.Ea);switch(e(we<Be),e(Be<=Q.nc),Q.hc){case 2:rs(qe,Oe,(Be-we)*nt,K,W);break;case 0:var Ye=we,Se=Be,Ne=K,et=W,Ze=(jt=Q).Ea;Ye==0&&(Ri(qe,Oe,null,null,1,Ne,et),nr(qe,Oe+1,0,0,Ze-1,Ne,et+1),Oe+=Ze,et+=Ze,++Ye);for(var tt=1<<jt.b,Pt=tt-1,At=Tt(Ze,jt.b),Jt=jt.K,jt=jt.w+(Ye>>jt.b)*At;Ye<Se;){var Dr=Jt,Fr=jt,Ir=1;for(ya(qe,Oe,Ne,et-Ze,1,Ne,et);Ir<Ze;){var xr=(Ir&~Pt)+tt;xr>Ze&&(xr=Ze),(0,A[Dr[Fr++]>>8&15])(qe,Oe+ +Ir,Ne,et+Ir-Ze,xr-Ir,Ne,et+Ir),Ir=xr}Oe+=Ze,et+=Ze,++Ye&Pt||(jt+=At)}Be!=Q.nc&&i(K,W-nt,K,W+(Be-we-1)*nt,nt);break;case 1:for(nt=qe,Se=Oe,Ze=(qe=Q.Ea)-(et=qe&~(Ne=(Oe=1<<Q.b)-1)),Ye=Tt(qe,Q.b),tt=Q.K,Q=Q.w+(we>>Q.b)*Ye;we<Be;){for(Pt=tt,At=Q,Jt=new vt,jt=Se+et,Dr=Se+qe;Se<jt;)yr(Pt[At++],Jt),C(Jt,nt,Se,Oe,K,W),Se+=Oe,W+=Oe;Se<Dr&&(yr(Pt[At++],Jt),C(Jt,nt,Se,Ze,K,W),Se+=Ze,W+=Ze),++we&Ne||(Q+=Ye)}break;case 3:if(qe==K&&Oe==W&&0<Q.b){for(Se=K,qe=nt=W+(Be-we)*nt-(et=(Be-we)*Tt(Q.Ea,Q.b)),Oe=K,Ne=W,Ye=[],et=(Ze=et)-1;0<=et;--et)Ye[et]=Oe[Ne+et];for(et=Ze-1;0<=et;--et)Se[qe+et]=Ye[et];gn(Q,we,Be,K,nt,K,W)}else gn(Q,we,Be,qe,Oe,K,W)}W=E,K=S}K!=S&&i(E,S,W,K,B)}function qn(d,m){var S=d.V,E=d.Ba+d.c*d.C,D=m-d.C;if(e(m<=d.l.o),e(16>=D),0<D){var B=d.l,z=d.Ta,W=d.Ua,K=B.width;if(Ur(d,D,S,E),D=W=[W],e((S=d.C)<(E=m)),e(B.v<B.va),E>B.o&&(E=B.o),S<B.j){var Q=B.j-S;S=B.j,D[0]+=Q*K}if(S>=E?S=0:(D[0]+=4*B.v,B.ka=S-B.j,B.U=B.va-B.v,B.T=E-S,S=1),S){if(W=W[0],11>(S=d.ca).S){var we=S.f.RGBA,Be=(E=S.S,D=B.U,B=B.T,Q=we.eb,we.A),qe=B;for(we=we.fb+d.Ma*we.A;0<qe--;){var Oe=z,nt=W,Ye=D,Se=Q,Ne=we;switch(E){case hu:T(Oe,nt,Ye,Se,Ne);break;case ko:U(Oe,nt,Ye,Se,Ne);break;case cl:U(Oe,nt,Ye,Se,Ne),Nt(Se,Ne,0,Ye,1,0);break;case sd:xe(Oe,nt,Ye,Se,Ne);break;case Bl:xt(Oe,nt,Ye,Se,Ne,1);break;case qo:xt(Oe,nt,Ye,Se,Ne,1),Nt(Se,Ne,0,Ye,1,0);break;case ql:xt(Oe,nt,Ye,Se,Ne,0);break;case Ul:xt(Oe,nt,Ye,Se,Ne,0),Nt(Se,Ne,1,Ye,1,0);break;case Zr:Z(Oe,nt,Ye,Se,Ne);break;case zl:Z(Oe,nt,Ye,Se,Ne),Lt(Se,Ne,Ye,1,0);break;case fu:ue(Oe,nt,Ye,Se,Ne);break;default:e(0)}W+=K,we+=Be}d.Ma+=B}else alert("todo:EmitRescaledRowsYUVA");e(d.Ma<=S.height)}}d.C=m,e(d.C<=d.i)}function Pi(d){var m;if(0<d.ua)return 0;for(m=0;m<d.Wb;++m){var S=d.Ya[m].G,E=d.Ya[m].H;if(0<S[1][E[1]+0].g||0<S[2][E[2]+0].g||0<S[3][E[3]+0].g)return 0}return 1}function Tn(d,m,S,E,D,B){if(d.Z!=0){var z=d.qd,W=d.rd;for(e(_i[d.Z]!=null);m<S;++m)_i[d.Z](z,W,E,D,E,D,B),z=E,W=D,D+=B;d.qd=z,d.rd=W}}function ei(d,m){var S=d.l.ma,E=S.Z==0||S.Z==1?d.l.j:d.C;if(E=d.C<E?E:d.C,e(m<=d.l.o),m>E){var D=d.l.width,B=S.ca,z=S.tb+D*E,W=d.V,K=d.Ba+d.c*E,Q=d.gc;e(d.ab==1),e(Q[0].hc==3),f(Q[0],E,m,W,K,B,z),Tn(S,E,m,B,z,D)}d.C=d.Ma=m}function tn(d,m,S,E,D,B,z){var W=d.$/E,K=d.$%E,Q=d.m,we=d.s,Be=S+d.$,qe=Be;D=S+E*D;var Oe=S+E*B,nt=280+we.ua,Ye=d.Pb?W:16777216,Se=0<we.ua?we.Wa:null,Ne=we.wc,et=Be<Oe?Pr(we,K,W):null;e(d.C<B),e(Oe<=D);var Ze=!1;e:for(;;){for(;Ze||Be<Oe;){var tt=0;if(W>=Ye){var Pt=Be-S;e((Ye=d).Pb),Ye.wd=Ye.m,Ye.xd=Pt,0<Ye.s.ua&&Je(Ye.s.Wa,Ye.s.vb),Ye=W+gu}if(K&Ne||(et=Pr(we,K,W)),e(et!=null),et.Qb&&(m[Be]=et.qb,Ze=!0),!Ze)if(he(Q),et.jc){tt=Q,Pt=m;var At=Be,Jt=et.pd[$(tt)&gr-1];e(et.jc),256>Jt.g?(ie(tt,tt.u+Jt.g),Pt[At]=Jt.value,tt=0):(ie(tt,tt.u+Jt.g-256),e(256<=Jt.value),tt=Jt.value),tt==0&&(Ze=!0)}else tt=vr(et.G[0],et.H[0],Q);if(Q.h)break;if(Ze||256>tt){if(!Ze)if(et.nd)m[Be]=(et.qb|tt<<8)>>>0;else{if(he(Q),Ze=vr(et.G[1],et.H[1],Q),he(Q),Pt=vr(et.G[2],et.H[2],Q),At=vr(et.G[3],et.H[3],Q),Q.h)break;m[Be]=(At<<24|Ze<<16|tt<<8|Pt)>>>0}if(Ze=!1,++Be,++K>=E&&(K=0,++W,z!=null&&W<=B&&!(W%16)&&z(d,W),Se!=null))for(;qe<Be;)tt=m[qe++],Se.X[(506832829*tt&4294967295)>>>Se.Mb]=tt}else if(280>tt){if(tt=Qr(tt-256,Q),Pt=vr(et.G[4],et.H[4],Q),he(Q),Pt=er(E,Pt=Qr(Pt,Q)),Q.h)break;if(Be-S<Pt||D-Be<tt)break e;for(At=0;At<tt;++At)m[Be+At]=m[Be+At-Pt];for(Be+=tt,K+=tt;K>=E;)K-=E,++W,z!=null&&W<=B&&!(W%16)&&z(d,W);if(e(Be<=D),K&Ne&&(et=Pr(we,K,W)),Se!=null)for(;qe<Be;)tt=m[qe++],Se.X[(506832829*tt&4294967295)>>>Se.Mb]=tt}else{if(!(tt<nt))break e;for(Ze=tt-280,e(Se!=null);qe<Be;)tt=m[qe++],Se.X[(506832829*tt&4294967295)>>>Se.Mb]=tt;tt=Be,e(!(Ze>>>(Pt=Se).Xa)),m[tt]=Pt.X[Ze],Ze=!0}Ze||e(Q.h==X(Q))}if(d.Pb&&Q.h&&Be<D)e(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&Je(d.s.vb,d.s.Wa);else{if(Q.h)break e;z?.(d,W>B?B:W),d.a=0,d.$=Be-S}return 1}return d.a=3,0}function mi(d){e(d!=null),d.vc=null,d.yc=null,d.Ya=null;var m=d.Wa;m!=null&&(m.X=null),d.vb=null,e(d!=null)}function Li(){var d=new ul;return d==null?null:(d.a=0,d.xb=hl,On("Predictor","VP8LPredictors"),On("Predictor","VP8LPredictors_C"),On("PredictorAdd","VP8LPredictorsAdd"),On("PredictorAdd","VP8LPredictorsAdd_C"),rs=Zt,C=zt,T=wt,U=Xr,Z=kr,ue=Zn,xe=Sr,G.VP8LMapColor32b=Vs,G.VP8LMapColor8b=v,d)}function Un(d,m,S,E,D){var B=1,z=[d],W=[m],K=E.m,Q=E.s,we=null,Be=0;e:for(;;){if(S)for(;B&&_e(K,1);){var qe=z,Oe=W,nt=E,Ye=1,Se=nt.m,Ne=nt.gc[nt.ab],et=_e(Se,2);if(nt.Oc&1<<et)B=0;else{switch(nt.Oc|=1<<et,Ne.hc=et,Ne.Ea=qe[0],Ne.nc=Oe[0],Ne.K=[null],++nt.ab,e(4>=nt.ab),et){case 0:case 1:Ne.b=_e(Se,3)+2,Ye=Un(Tt(Ne.Ea,Ne.b),Tt(Ne.nc,Ne.b),0,nt,Ne.K),Ne.K=Ne.K[0];break;case 3:var Ze,tt=_e(Se,8)+1,Pt=16<tt?0:4<tt?1:2<tt?2:3;if(qe[0]=Tt(Ne.Ea,Pt),Ne.b=Pt,Ze=Ye=Un(tt,1,0,nt,Ne.K)){var At,Jt=tt,jt=Ne,Dr=1<<(8>>jt.b),Fr=s(Dr);if(Fr==null)Ze=0;else{var Ir=jt.K[0],xr=jt.w;for(Fr[0]=jt.K[0][0],At=1;At<1*Jt;++At)Fr[At]=ot(Ir[xr+At],Fr[At-1]);for(;At<4*Dr;++At)Fr[At]=0;jt.K[0]=null,jt.K[0]=Fr,Ze=1}}Ye=Ze;break;case 2:break;default:e(0)}B=Ye}}if(z=z[0],W=W[0],B&&_e(K,1)&&!(B=1<=(Be=_e(K,4))&&11>=Be)){E.a=3;break e}var Kr;if(Kr=B)t:{var Yr,dr,xn,Fi=E,Pn=z,Hn=W,$r=Be,ki=S,Si=Fi.m,_n=Fi.s,Kn=[null],ci=1,ta=0,Fa=ld[$r];r:for(;;){if(ki&&_e(Si,1)){var kn=_e(Si,3)+2,Rn=Tt(Pn,kn),wa=Tt(Hn,kn),Ao=Rn*wa;if(!Un(Rn,wa,0,Fi,Kn))break r;for(Kn=Kn[0],_n.xc=kn,Yr=0;Yr<Ao;++Yr){var Ks=Kn[Yr]>>8&65535;Kn[Yr]=Ks,Ks>=ci&&(ci=Ks+1)}}if(Si.h)break r;for(dr=0;5>dr;++dr){var Vr=Uo[dr];!dr&&0<$r&&(Vr+=1<<$r),ta<Vr&&(ta=Vr)}var js=l(ci*Fa,Y),vu=ci,dc=l(vu,te);if(dc==null)var Ma=null;else e(65536>=vu),Ma=dc;var Ba=s(ta);if(Ma==null||Ba==null||js==null){Fi.a=1;break r}var Ho=js;for(Yr=xn=0;Yr<ci;++Yr){var qa=Ma[Yr],Gs=qa.G,Ko=qa.H,gl=0,ba=1,ml=0;for(dr=0;5>dr;++dr){Vr=Uo[dr],Gs[dr]=Ho,Ko[dr]=xn,!dr&&0<$r&&(Vr+=1<<$r);i:{var jo,Js=Vr,vl=Fi,Es=Ba,fd=Ho,hc=xn,un=0,is=vl.m,fc=_e(is,1);if(o(Es,0,0,Js),fc){var pc=_e(is,1)+1,yu=_e(is,1),wu=_e(is,yu==0?1:8);Es[wu]=1,pc==2&&(Es[wu=_e(is,8)]=1);var Cs=1}else{var vn=s(19),Dn=_e(is,4)+4;if(19<Dn){vl.a=3;var Ln=0;break i}for(jo=0;jo<Dn;++jo)vn[$h[jo]]=_e(is,3);var yl=void 0,Ys=void 0,wl=vl,Jh=vn,Gn=Js,bu=Es,Kl=0,Ps=wl.m,as=8,xa=l(128,Y);n:for(;V(xa,0,7,Jh,19);){if(_e(Ps,1)){var Gl=2+2*_e(Ps,3);if((yl=2+_e(Ps,Gl))>Gn)break n}else yl=Gn;for(Ys=0;Ys<Gn&&yl--;){he(Ps);var xu=xa[0+(127&$(Ps))];ie(Ps,Ps.u+xu.g);var Eo=xu.value;if(16>Eo)bu[Ys++]=Eo,Eo!=0&&(as=Eo);else{var pd=Eo==16,gc=Eo-16,gd=pu[gc],mc=_e(Ps,$l[gc])+gd;if(Ys+mc>Gn)break n;for(var md=pd?as:0;0<mc--;)bu[Ys++]=md}}Kl=1;break n}Kl||(wl.a=3),Cs=Kl}(Cs=Cs&&!is.h)&&(un=V(fd,hc,8,Es,Js)),Cs&&un!=0?Ln=un:(vl.a=3,Ln=0)}if(Ln==0)break r;if(ba&&od[dr]==1&&(ba=Ho[xn].g==0),gl+=Ho[xn].g,xn+=Ln,3>=dr){var bl,_u=Ba[0];for(bl=1;bl<Vr;++bl)Ba[bl]>_u&&(_u=Ba[bl]);ml+=_u}}if(qa.nd=ba,qa.Qb=0,ba&&(qa.qb=(Gs[3][Ko[3]+0].value<<24|Gs[1][Ko[1]+0].value<<16|Gs[2][Ko[2]+0].value)>>>0,gl==0&&256>Gs[0][Ko[0]+0].value&&(qa.Qb=1,qa.qb+=Gs[0][Ko[0]+0].value<<8)),qa.jc=!qa.Qb&&6>ml,qa.jc){var Jl,_a=qa;for(Jl=0;Jl<gr;++Jl){var Xs=Jl,ss=_a.pd[Xs],Go=_a.G[0][_a.H[0]+Xs];256<=Go.value?(ss.g=Go.g+256,ss.value=Go.value):(ss.g=0,ss.value=0,Xs>>=Mr(Go,8,ss),Xs>>=Mr(_a.G[1][_a.H[1]+Xs],16,ss),Xs>>=Mr(_a.G[2][_a.H[2]+Xs],0,ss),Mr(_a.G[3][_a.H[3]+Xs],24,ss))}}}_n.vc=Kn,_n.Wb=ci,_n.Ya=Ma,_n.yc=js,Kr=1;break t}Kr=0}if(!(B=Kr)){E.a=3;break e}if(0<Be){if(Q.ua=1<<Be,!qt(Q.Wa,Be)){E.a=1,B=0;break e}}else Q.ua=0;var ku=E,Su=z,vd=W,Nu=ku.s,Au=Nu.xc;if(ku.c=Su,ku.i=vd,Nu.md=Tt(Su,Au),Nu.wc=Au==0?-1:(1<<Au)-1,S){E.xb=As;break e}if((we=s(z*W))==null){E.a=1,B=0;break e}B=(B=tn(E,we,0,z,W,W,null))&&!K.h;break e}return B?(D!=null?D[0]=we:(e(we==null),e(S)),E.$=0,S||mi(Q)):mi(Q),B}function Ha(d,m){var S=d.c*d.i,E=S+m+16*m;return e(d.c<=m),d.V=s(E),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+S+m,1)}function Ii(d,m){var S=d.C,E=m-S,D=d.V,B=d.Ba+d.c*S;for(e(m<=d.l.o);0<E;){var z=16<E?16:E,W=d.l.ma,K=d.l.width,Q=K*z,we=W.ca,Be=W.tb+K*S,qe=d.Ta,Oe=d.Ua;Ur(d,z,D,B),Ut(qe,Oe,we,Be,Q),Tn(W,S,S+z,we,Be,K),E-=z,D+=z*d.c,S+=z}e(S==m),d.C=d.Ma=m}function hs(){this.ub=this.yd=this.td=this.Rb=0}function Ka(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Gr(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function ja(){this.Yb=function(){var d=[];return function m(S,E,D){for(var B=D[E],z=0;z<B&&(S.push(D.length>E+1?[]:0),!(D.length<E+1));z++)m(S[z],E+1,D)}(d,0,[3,11]),d}()}function Or(){this.jb=s(3),this.Wc=c([4,8],ja),this.Xc=c([4,17],ja)}function ol(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Oi(){this.ld=this.La=this.dd=this.tc=0}function fs(){this.Na=this.la=0}function ps(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ts(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ea(){this.uc=this.M=this.Nb=0,this.wa=Array(new Oi),this.Y=0,this.ya=Array(new Ts),this.aa=0,this.l=new Rs}function gs(){this.y=s(16),this.f=s(8),this.ea=s(8)}function si(){this.cb=this.a=0,this.sc="",this.m=new ae,this.Od=new hs,this.Kc=new Ka,this.ed=new ol,this.Qa=new Gr,this.Ic=this.$c=this.Aa=0,this.D=new Ea,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,ae),this.ia=0,this.pb=l(4,ps),this.Pa=new Or,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new gs),this.Hd=0,this.rb=Array(new fs),this.sb=0,this.wa=Array(new Oi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ts),this.L=this.aa=0,this.gd=c([4,2],Oi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Rs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ir(){var d=new si;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,zo||(zo=Tr)),d}function hn(d,m,S){return d.a==0&&(d.a=m,d.sc=S,d.cb=0),0}function Ro(d,m,S){return 3<=S&&d[m+0]==157&&d[m+1]==1&&d[m+2]==42}function Do(d,m){if(d==null)return 0;if(d.a=0,d.sc="OK",m==null)return hn(d,2,"null VP8Io passed to VP8GetHeaders()");var S=m.data,E=m.w,D=m.ha;if(4>D)return hn(d,7,"Truncated header.");var B=S[E+0]|S[E+1]<<8|S[E+2]<<16,z=d.Od;if(z.Rb=!(1&B),z.td=B>>1&7,z.yd=B>>4&1,z.ub=B>>5,3<z.td)return hn(d,3,"Incorrect keyframe parameters.");if(!z.yd)return hn(d,4,"Frame not displayable.");E+=3,D-=3;var W=d.Kc;if(z.Rb){if(7>D)return hn(d,7,"cannot parse picture header");if(!Ro(S,E,D))return hn(d,3,"Bad code word");W.c=16383&(S[E+4]<<8|S[E+3]),W.Td=S[E+4]>>6,W.i=16383&(S[E+6]<<8|S[E+5]),W.Ud=S[E+6]>>6,E+=7,D-=7,d.za=W.c+15>>4,d.Ub=W.i+15>>4,m.width=W.c,m.height=W.i,m.Da=0,m.j=0,m.v=0,m.va=m.width,m.o=m.height,m.da=0,m.ib=m.width,m.hb=m.height,m.U=m.width,m.T=m.height,o((B=d.Pa).jb,0,255,B.jb.length),e((B=d.Qa)!=null),B.Cb=0,B.Bb=0,B.Fb=1,o(B.Zb,0,0,B.Zb.length),o(B.Lb,0,0,B.Lb)}if(z.ub>D)return hn(d,7,"bad partition length");Ue(B=d.m,S,E,z.ub),E+=z.ub,D-=z.ub,z.Rb&&(W.Ld=Ie(B),W.Kd=Ie(B)),W=d.Qa;var K,Q=d.Pa;if(e(B!=null),e(W!=null),W.Cb=Ie(B),W.Cb){if(W.Bb=Ie(B),Ie(B)){for(W.Fb=Ie(B),K=0;4>K;++K)W.Zb[K]=Ie(B)?ze(B,7):0;for(K=0;4>K;++K)W.Lb[K]=Ie(B)?ze(B,6):0}if(W.Bb)for(K=0;3>K;++K)Q.jb[K]=Ie(B)?Me(B,8):255}else W.Bb=0;if(B.Ka)return hn(d,3,"cannot parse segment header");if((W=d.ed).zd=Ie(B),W.Tb=Me(B,6),W.wb=Me(B,3),W.Pc=Ie(B),W.Pc&&Ie(B)){for(Q=0;4>Q;++Q)Ie(B)&&(W.vd[Q]=ze(B,6));for(Q=0;4>Q;++Q)Ie(B)&&(W.od[Q]=ze(B,6))}if(d.L=W.Tb==0?0:W.zd?1:2,B.Ka)return hn(d,3,"cannot parse filter header");var we=D;if(D=K=E,E=K+we,W=we,d.Xb=(1<<Me(d.m,2))-1,we<3*(Q=d.Xb))S=7;else{for(K+=3*Q,W-=3*Q,we=0;we<Q;++we){var Be=S[D+0]|S[D+1]<<8|S[D+2]<<16;Be>W&&(Be=W),Ue(d.Jc[+we],S,K,Be),K+=Be,W-=Be,D+=3}Ue(d.Jc[+Q],S,K,W),S=K<E?0:5}if(S!=0)return hn(d,S,"cannot parse partitions");for(S=Me(K=d.m,7),D=Ie(K)?ze(K,4):0,E=Ie(K)?ze(K,4):0,W=Ie(K)?ze(K,4):0,Q=Ie(K)?ze(K,4):0,K=Ie(K)?ze(K,4):0,we=d.Qa,Be=0;4>Be;++Be){if(we.Cb){var qe=we.Zb[Be];we.Fb||(qe+=S)}else{if(0<Be){d.pb[Be]=d.pb[0];continue}qe=S}var Oe=d.pb[Be];Oe.Sc[0]=dl[bi(qe+D,127)],Oe.Sc[1]=Vl[bi(qe+0,127)],Oe.Eb[0]=2*dl[bi(qe+E,127)],Oe.Eb[1]=101581*Vl[bi(qe+W,127)]>>16,8>Oe.Eb[1]&&(Oe.Eb[1]=8),Oe.Qc[0]=dl[bi(qe+Q,117)],Oe.Qc[1]=Vl[bi(qe+K,127)],Oe.lc=qe+K}if(!z.Rb)return hn(d,4,"Not a key frame.");for(Ie(B),z=d.Pa,S=0;4>S;++S){for(D=0;8>D;++D)for(E=0;3>E;++E)for(W=0;11>W;++W)Q=ge(B,Hh[S][D][E][W])?Me(B,8):cd[S][D][E][W],z.Wc[S][D].Yb[E][W]=Q;for(D=0;17>D;++D)z.Xc[S][D]=z.Wc[S][lc[D]]}return d.kc=Ie(B),d.kc&&(d.Bd=Me(B,8)),d.cb=1}function Tr(d,m,S,E,D,B,z){var W=m[D].Yb[S];for(S=0;16>D;++D){if(!ge(d,W[S+0]))return D;for(;!ge(d,W[S+1]);)if(W=m[++D].Yb[0],S=0,D==16)return 16;var K=m[D+1].Yb;if(ge(d,W[S+2])){var Q=d,we=0;if(ge(Q,(qe=W)[(Be=S)+3]))if(ge(Q,qe[Be+6])){for(W=0,Be=2*(we=ge(Q,qe[Be+8]))+(qe=ge(Q,qe[Be+9+we])),we=0,qe=sc[Be];qe[W];++W)we+=we+ge(Q,qe[W]);we+=3+(8<<Be)}else ge(Q,qe[Be+7])?(we=7+2*ge(Q,165),we+=ge(Q,145)):we=5+ge(Q,159);else we=ge(Q,qe[Be+4])?3+ge(Q,qe[Be+5]):2;W=K[2]}else we=1,W=K[1];K=z+oc[D],0>(Q=d).b&&ye(Q);var Be,qe=Q.b,Oe=(Be=Q.Ca>>1)-(Q.I>>qe)>>31;--Q.b,Q.Ca+=Oe,Q.Ca|=1,Q.I-=(Be+1&Oe)<<qe,B[K]=((we^Oe)-Oe)*E[(0<D)+0]}return 16}function zi(d){var m=d.rb[d.sb-1];m.la=0,m.Na=0,o(d.zc,0,0,d.zc.length),d.ja=0}function ua(d,m){if(d==null)return 0;if(m==null)return hn(d,2,"NULL VP8Io parameter in VP8Decode().");if(!d.cb&&!Do(d,m))return 0;if(e(d.cb),m.ac==null||m.ac(m)){m.ob&&(d.L=0);var S=Wo[d.L];if(d.L==2?(d.yb=0,d.zb=0):(d.yb=m.v-S>>4,d.zb=m.j-S>>4,0>d.yb&&(d.yb=0),0>d.zb&&(d.zb=0)),d.Va=m.o+15+S>>4,d.Hb=m.va+15+S>>4,d.Hb>d.za&&(d.Hb=d.za),d.Va>d.Ub&&(d.Va=d.Ub),0<d.L){var E=d.ed;for(S=0;4>S;++S){var D;if(d.Qa.Cb){var B=d.Qa.Lb[S];d.Qa.Fb||(B+=E.Tb)}else B=E.Tb;for(D=0;1>=D;++D){var z=d.gd[S][D],W=B;if(E.Pc&&(W+=E.vd[0],D&&(W+=E.od[0])),0<(W=0>W?0:63<W?63:W)){var K=W;0<E.wb&&(K=4<E.wb?K>>2:K>>1)>9-E.wb&&(K=9-E.wb),1>K&&(K=1),z.dd=K,z.tc=2*W+K,z.ld=40<=W?2:15<=W?1:0}else z.tc=0;z.La=D}}}S=0}else hn(d,6,"Frame setup failed"),S=d.a;if(S=S==0){if(S){d.$c=0,0<d.Aa||(d.Ic=Hs);e:{S=d.Ic,E=4*(K=d.za);var Q=32*K,we=K+1,Be=0<d.L?K*(0<d.Aa?2:1):0,qe=(d.Aa==2?2:1)*K;if((z=E+832+(D=3*(16*S+Wo[d.L])/2*Q)+(B=d.Fa!=null&&0<d.Fa.length?d.Kc.c*d.Kc.i:0))!=z)S=0;else{if(z>d.Vb){if(d.Vb=0,d.Ec=s(z),d.Fc=0,d.Ec==null){S=hn(d,1,"no memory during frame initialization.");break e}d.Vb=z}z=d.Ec,W=d.Fc,d.Ac=z,d.Bc=W,W+=E,d.Gd=l(Q,gs),d.Hd=0,d.rb=l(we+1,fs),d.sb=1,d.wa=Be?l(Be,Oi):null,d.Y=0,d.D.Nb=0,d.D.wa=d.wa,d.D.Y=d.Y,0<d.Aa&&(d.D.Y+=K),e(!0),d.oc=z,d.pc=W,W+=832,d.ya=l(qe,Ts),d.aa=0,d.D.ya=d.ya,d.D.aa=d.aa,d.Aa==2&&(d.D.aa+=K),d.R=16*K,d.B=8*K,K=(Q=Wo[d.L])*d.R,Q=Q/2*d.B,d.sa=z,d.ta=W+K,d.qa=d.sa,d.ra=d.ta+16*S*d.R+Q,d.Ha=d.qa,d.Ia=d.ra+8*S*d.B+Q,d.$c=0,W+=D,d.mb=B?z:null,d.nb=B?W:null,e(W+B<=d.Fc+d.Vb),zi(d),o(d.Ac,d.Bc,0,E),S=1}}if(S){if(m.ka=0,m.y=d.sa,m.O=d.ta,m.f=d.qa,m.N=d.ra,m.ea=d.Ha,m.Vd=d.Ia,m.fa=d.R,m.Rc=d.B,m.F=null,m.J=0,!Ns){for(S=-255;255>=S;++S)Lr[255+S]=0>S?-S:S;for(S=-1020;1020>=S;++S)Gt[1020+S]=-128>S?-128:127<S?127:S;for(S=-112;112>=S;++S)bn[112+S]=-16>S?-16:15<S?15:S;for(S=-255;510>=S;++S)mn[255+S]=0>S?0:255<S?255:S;Ns=1}Ae=Rr,Le=vs,Re=Ga,ve=Ds,Ee=Fs,re=po,De=Ja,Ce=pn,Ve=Ia,He=Us,Ke=Ya,Xe=xs,lt=Xa,yt=_s,ut=ga,gt=Ki,kt=wi,ht=vo,Da[0]=Vi,Da[1]=go,Da[2]=ha,Da[3]=yi,Da[4]=Wi,Da[5]=oi,Da[6]=ys,Da[7]=ws,Da[8]=mo,Da[9]=Ms,Di[0]=vi,Di[1]=ll,Di[2]=fn,Di[3]=$i,Di[4]=rn,Di[5]=da,Di[6]=zr,Xi[0]=Ti,Xi[1]=Fo,Xi[2]=Bs,Xi[3]=fa,Xi[4]=qs,Xi[5]=Pa,Xi[6]=Mo,S=1}else S=0}S&&(S=function(Oe,nt){for(Oe.M=0;Oe.M<Oe.Va;++Oe.M){var Ye,Se=Oe.Jc[Oe.M&Oe.Xb],Ne=Oe.m,et=Oe;for(Ye=0;Ye<et.za;++Ye){var Ze=Ne,tt=et,Pt=tt.Ac,At=tt.Bc+4*Ye,Jt=tt.zc,jt=tt.ya[tt.aa+Ye];if(tt.Qa.Bb?jt.$b=ge(Ze,tt.Pa.jb[0])?2+ge(Ze,tt.Pa.jb[2]):ge(Ze,tt.Pa.jb[1]):jt.$b=0,tt.kc&&(jt.Ad=ge(Ze,tt.Bd)),jt.Za=!ge(Ze,145)+0,jt.Za){var Dr=jt.Ob,Fr=0;for(tt=0;4>tt;++tt){var Ir,xr=Jt[0+tt];for(Ir=0;4>Ir;++Ir){xr=Wh[Pt[At+Ir]][xr];for(var Kr=ud[ge(Ze,xr[0])];0<Kr;)Kr=ud[2*Kr+ge(Ze,xr[Kr])];xr=-Kr,Pt[At+Ir]=xr}i(Dr,Fr,Pt,At,4),Fr+=4,Jt[0+tt]=xr}}else xr=ge(Ze,156)?ge(Ze,128)?1:3:ge(Ze,163)?2:0,jt.Ob[0]=xr,o(Pt,At,xr,4),o(Jt,0,xr,4);jt.Dd=ge(Ze,142)?ge(Ze,114)?ge(Ze,183)?1:3:2:0}if(et.m.Ka)return hn(Oe,7,"Premature end-of-partition0 encountered.");for(;Oe.ja<Oe.za;++Oe.ja){if(et=Se,Ze=(Ne=Oe).rb[Ne.sb-1],Pt=Ne.rb[Ne.sb+Ne.ja],Ye=Ne.ya[Ne.aa+Ne.ja],At=Ne.kc?Ye.Ad:0)Ze.la=Pt.la=0,Ye.Za||(Ze.Na=Pt.Na=0),Ye.Hc=0,Ye.Gc=0,Ye.ia=0;else{var Yr,dr;if(Ze=Pt,Pt=et,At=Ne.Pa.Xc,Jt=Ne.ya[Ne.aa+Ne.ja],jt=Ne.pb[Jt.$b],tt=Jt.ad,Dr=0,Fr=Ne.rb[Ne.sb-1],xr=Ir=0,o(tt,Dr,0,384),Jt.Za)var xn=0,Fi=At[3];else{Kr=s(16);var Pn=Ze.Na+Fr.Na;if(Pn=zo(Pt,At[1],Pn,jt.Eb,0,Kr,0),Ze.Na=Fr.Na=(0<Pn)+0,1<Pn)Ae(Kr,0,tt,Dr);else{var Hn=Kr[0]+3>>3;for(Kr=0;256>Kr;Kr+=16)tt[Dr+Kr]=Hn}xn=1,Fi=At[0]}var $r=15&Ze.la,ki=15&Fr.la;for(Kr=0;4>Kr;++Kr){var Si=1&ki;for(Hn=dr=0;4>Hn;++Hn)$r=$r>>1|(Si=(Pn=zo(Pt,Fi,Pn=Si+(1&$r),jt.Sc,xn,tt,Dr))>xn)<<7,dr=dr<<2|(3<Pn?3:1<Pn?2:tt[Dr+0]!=0),Dr+=16;$r>>=4,ki=ki>>1|Si<<7,Ir=(Ir<<8|dr)>>>0}for(Fi=$r,xn=ki>>4,Yr=0;4>Yr;Yr+=2){for(dr=0,$r=Ze.la>>4+Yr,ki=Fr.la>>4+Yr,Kr=0;2>Kr;++Kr){for(Si=1&ki,Hn=0;2>Hn;++Hn)Pn=Si+(1&$r),$r=$r>>1|(Si=0<(Pn=zo(Pt,At[2],Pn,jt.Qc,0,tt,Dr)))<<3,dr=dr<<2|(3<Pn?3:1<Pn?2:tt[Dr+0]!=0),Dr+=16;$r>>=2,ki=ki>>1|Si<<5}xr|=dr<<4*Yr,Fi|=$r<<4<<Yr,xn|=(240&ki)<<Yr}Ze.la=Fi,Fr.la=xn,Jt.Hc=Ir,Jt.Gc=xr,Jt.ia=43690&xr?0:jt.ia,At=!(Ir|xr)}if(0<Ne.L&&(Ne.wa[Ne.Y+Ne.ja]=Ne.gd[Ye.$b][Ye.Za],Ne.wa[Ne.Y+Ne.ja].La|=!At),et.Ka)return hn(Oe,7,"Premature end-of-file encountered.")}if(zi(Oe),Ne=nt,et=1,Ye=(Se=Oe).D,Ze=0<Se.L&&Se.M>=Se.zb&&Se.M<=Se.Va,Se.Aa==0)e:{if(Ye.M=Se.M,Ye.uc=Ze,bo(Se,Ye),et=1,Ye=(dr=Se.D).Nb,Ze=(xr=Wo[Se.L])*Se.R,Pt=xr/2*Se.B,Kr=16*Ye*Se.R,Hn=8*Ye*Se.B,At=Se.sa,Jt=Se.ta-Ze+Kr,jt=Se.qa,tt=Se.ra-Pt+Hn,Dr=Se.Ha,Fr=Se.Ia-Pt+Hn,ki=($r=dr.M)==0,Ir=$r>=Se.Va-1,Se.Aa==2&&bo(Se,dr),dr.uc)for(Si=(Pn=Se).D.M,e(Pn.D.uc),dr=Pn.yb;dr<Pn.Hb;++dr){xn=dr,Fi=Si;var _n=(Kn=(Vr=Pn).D).Nb;Yr=Vr.R;var Kn=Kn.wa[Kn.Y+xn],ci=Vr.sa,ta=Vr.ta+16*_n*Yr+16*xn,Fa=Kn.dd,kn=Kn.tc;if(kn!=0)if(e(3<=kn),Vr.L==1)0<xn&&gt(ci,ta,Yr,kn+4),Kn.La&&ht(ci,ta,Yr,kn),0<Fi&&ut(ci,ta,Yr,kn+4),Kn.La&&kt(ci,ta,Yr,kn);else{var Rn=Vr.B,wa=Vr.qa,Ao=Vr.ra+8*_n*Rn+8*xn,Ks=Vr.Ha,Vr=Vr.Ia+8*_n*Rn+8*xn;_n=Kn.ld,0<xn&&(Ce(ci,ta,Yr,kn+4,Fa,_n),He(wa,Ao,Ks,Vr,Rn,kn+4,Fa,_n)),Kn.La&&(Xe(ci,ta,Yr,kn,Fa,_n),yt(wa,Ao,Ks,Vr,Rn,kn,Fa,_n)),0<Fi&&(De(ci,ta,Yr,kn+4,Fa,_n),Ve(wa,Ao,Ks,Vr,Rn,kn+4,Fa,_n)),Kn.La&&(Ke(ci,ta,Yr,kn,Fa,_n),lt(wa,Ao,Ks,Vr,Rn,kn,Fa,_n))}}if(Se.ia&&alert("todo:DitherRow"),Ne.put!=null){if(dr=16*$r,$r=16*($r+1),ki?(Ne.y=Se.sa,Ne.O=Se.ta+Kr,Ne.f=Se.qa,Ne.N=Se.ra+Hn,Ne.ea=Se.Ha,Ne.W=Se.Ia+Hn):(dr-=xr,Ne.y=At,Ne.O=Jt,Ne.f=jt,Ne.N=tt,Ne.ea=Dr,Ne.W=Fr),Ir||($r-=xr),$r>Ne.o&&($r=Ne.o),Ne.F=null,Ne.J=null,Se.Fa!=null&&0<Se.Fa.length&&dr<$r&&(Ne.J=zs(Se,Ne,dr,$r-dr),Ne.F=Se.mb,Ne.F==null&&Ne.F.length==0)){et=hn(Se,3,"Could not decode alpha data.");break e}dr<Ne.j&&(xr=Ne.j-dr,dr=Ne.j,e(!(1&xr)),Ne.O+=Se.R*xr,Ne.N+=Se.B*(xr>>1),Ne.W+=Se.B*(xr>>1),Ne.F!=null&&(Ne.J+=Ne.width*xr)),dr<$r&&(Ne.O+=Ne.v,Ne.N+=Ne.v>>1,Ne.W+=Ne.v>>1,Ne.F!=null&&(Ne.J+=Ne.v),Ne.ka=dr-Ne.j,Ne.U=Ne.va-Ne.v,Ne.T=$r-dr,et=Ne.put(Ne))}Ye+1!=Se.Ic||Ir||(i(Se.sa,Se.ta-Ze,At,Jt+16*Se.R,Ze),i(Se.qa,Se.ra-Pt,jt,tt+8*Se.B,Pt),i(Se.Ha,Se.Ia-Pt,Dr,Fr+8*Se.B,Pt))}if(!et)return hn(Oe,6,"Output aborted.")}return 1}(d,m)),m.bc!=null&&m.bc(m),S&=1}return S?(d.cb=0,S):0}function En(d,m,S,E,D){D=d[m+S+32*E]+(D>>3),d[m+S+32*E]=-256&D?0>D?0:255:D}function ms(d,m,S,E,D,B){En(d,m,0,S,E+D),En(d,m,1,S,E+B),En(d,m,2,S,E-B),En(d,m,3,S,E-D)}function ti(d){return(20091*d>>16)+d}function Ca(d,m,S,E){var D,B=0,z=s(16);for(D=0;4>D;++D){var W=d[m+0]+d[m+8],K=d[m+0]-d[m+8],Q=(35468*d[m+4]>>16)-ti(d[m+12]),we=ti(d[m+4])+(35468*d[m+12]>>16);z[B+0]=W+we,z[B+1]=K+Q,z[B+2]=K-Q,z[B+3]=W-we,B+=4,m++}for(D=B=0;4>D;++D)W=(d=z[B+0]+4)+z[B+8],K=d-z[B+8],Q=(35468*z[B+4]>>16)-ti(z[B+12]),En(S,E,0,0,W+(we=ti(z[B+4])+(35468*z[B+12]>>16))),En(S,E,1,0,K+Q),En(S,E,2,0,K-Q),En(S,E,3,0,W-we),B++,E+=32}function po(d,m,S,E){var D=d[m+0]+4,B=35468*d[m+4]>>16,z=ti(d[m+4]),W=35468*d[m+1]>>16;ms(S,E,0,D+z,d=ti(d[m+1]),W),ms(S,E,1,D+B,d,W),ms(S,E,2,D-B,d,W),ms(S,E,3,D-z,d,W)}function vs(d,m,S,E,D){Ca(d,m,S,E),D&&Ca(d,m+16,S,E+4)}function Ga(d,m,S,E){Le(d,m+0,S,E,1),Le(d,m+32,S,E+128,1)}function Ds(d,m,S,E){var D;for(d=d[m+0]+4,D=0;4>D;++D)for(m=0;4>m;++m)En(S,E,m,D,d)}function Fs(d,m,S,E){d[m+0]&&ve(d,m+0,S,E),d[m+16]&&ve(d,m+16,S,E+4),d[m+32]&&ve(d,m+32,S,E+128),d[m+48]&&ve(d,m+48,S,E+128+4)}function Rr(d,m,S,E){var D,B=s(16);for(D=0;4>D;++D){var z=d[m+0+D]+d[m+12+D],W=d[m+4+D]+d[m+8+D],K=d[m+4+D]-d[m+8+D],Q=d[m+0+D]-d[m+12+D];B[0+D]=z+W,B[8+D]=z-W,B[4+D]=Q+K,B[12+D]=Q-K}for(D=0;4>D;++D)z=(d=B[0+4*D]+3)+B[3+4*D],W=B[1+4*D]+B[2+4*D],K=B[1+4*D]-B[2+4*D],Q=d-B[3+4*D],S[E+0]=z+W>>3,S[E+16]=Q+K>>3,S[E+32]=z-W>>3,S[E+48]=Q-K>>3,E+=64}function Nr(d,m,S){var E,D=m-32,B=Wn,z=255-d[D-1];for(E=0;E<S;++E){var W,K=B,Q=z+d[m-1];for(W=0;W<S;++W)d[m+W]=K[Q+d[D+W]];m+=32}}function go(d,m){Nr(d,m,4)}function Fo(d,m){Nr(d,m,8)}function ll(d,m){Nr(d,m,16)}function fn(d,m){var S;for(S=0;16>S;++S)i(d,m+32*S,d,m-32,16)}function $i(d,m){var S;for(S=16;0<S;--S)o(d,m,d[m-1],16),m+=32}function ca(d,m,S){var E;for(E=0;16>E;++E)o(m,S+32*E,d,16)}function vi(d,m){var S,E=16;for(S=0;16>S;++S)E+=d[m-1+32*S]+d[m+S-32];ca(E>>5,d,m)}function rn(d,m){var S,E=8;for(S=0;16>S;++S)E+=d[m-1+32*S];ca(E>>4,d,m)}function da(d,m){var S,E=8;for(S=0;16>S;++S)E+=d[m+S-32];ca(E>>4,d,m)}function zr(d,m){ca(128,d,m)}function $t(d,m,S){return d+2*m+S+2>>2}function ha(d,m){var S,E=m-32;for(E=new Uint8Array([$t(d[E-1],d[E+0],d[E+1]),$t(d[E+0],d[E+1],d[E+2]),$t(d[E+1],d[E+2],d[E+3]),$t(d[E+2],d[E+3],d[E+4])]),S=0;4>S;++S)i(d,m+32*S,E,0,E.length)}function yi(d,m){var S=d[m-1],E=d[m-1+32],D=d[m-1+64],B=d[m-1+96];rt(d,m+0,16843009*$t(d[m-1-32],S,E)),rt(d,m+32,16843009*$t(S,E,D)),rt(d,m+64,16843009*$t(E,D,B)),rt(d,m+96,16843009*$t(D,B,B))}function Vi(d,m){var S,E=4;for(S=0;4>S;++S)E+=d[m+S-32]+d[m-1+32*S];for(E>>=3,S=0;4>S;++S)o(d,m+32*S,E,4)}function Wi(d,m){var S=d[m-1+0],E=d[m-1+32],D=d[m-1+64],B=d[m-1-32],z=d[m+0-32],W=d[m+1-32],K=d[m+2-32],Q=d[m+3-32];d[m+0+96]=$t(E,D,d[m-1+96]),d[m+1+96]=d[m+0+64]=$t(S,E,D),d[m+2+96]=d[m+1+64]=d[m+0+32]=$t(B,S,E),d[m+3+96]=d[m+2+64]=d[m+1+32]=d[m+0+0]=$t(z,B,S),d[m+3+64]=d[m+2+32]=d[m+1+0]=$t(W,z,B),d[m+3+32]=d[m+2+0]=$t(K,W,z),d[m+3+0]=$t(Q,K,W)}function ys(d,m){var S=d[m+1-32],E=d[m+2-32],D=d[m+3-32],B=d[m+4-32],z=d[m+5-32],W=d[m+6-32],K=d[m+7-32];d[m+0+0]=$t(d[m+0-32],S,E),d[m+1+0]=d[m+0+32]=$t(S,E,D),d[m+2+0]=d[m+1+32]=d[m+0+64]=$t(E,D,B),d[m+3+0]=d[m+2+32]=d[m+1+64]=d[m+0+96]=$t(D,B,z),d[m+3+32]=d[m+2+64]=d[m+1+96]=$t(B,z,W),d[m+3+64]=d[m+2+96]=$t(z,W,K),d[m+3+96]=$t(W,K,K)}function oi(d,m){var S=d[m-1+0],E=d[m-1+32],D=d[m-1+64],B=d[m-1-32],z=d[m+0-32],W=d[m+1-32],K=d[m+2-32],Q=d[m+3-32];d[m+0+0]=d[m+1+64]=B+z+1>>1,d[m+1+0]=d[m+2+64]=z+W+1>>1,d[m+2+0]=d[m+3+64]=W+K+1>>1,d[m+3+0]=K+Q+1>>1,d[m+0+96]=$t(D,E,S),d[m+0+64]=$t(E,S,B),d[m+0+32]=d[m+1+96]=$t(S,B,z),d[m+1+32]=d[m+2+96]=$t(B,z,W),d[m+2+32]=d[m+3+96]=$t(z,W,K),d[m+3+32]=$t(W,K,Q)}function ws(d,m){var S=d[m+0-32],E=d[m+1-32],D=d[m+2-32],B=d[m+3-32],z=d[m+4-32],W=d[m+5-32],K=d[m+6-32],Q=d[m+7-32];d[m+0+0]=S+E+1>>1,d[m+1+0]=d[m+0+64]=E+D+1>>1,d[m+2+0]=d[m+1+64]=D+B+1>>1,d[m+3+0]=d[m+2+64]=B+z+1>>1,d[m+0+32]=$t(S,E,D),d[m+1+32]=d[m+0+96]=$t(E,D,B),d[m+2+32]=d[m+1+96]=$t(D,B,z),d[m+3+32]=d[m+2+96]=$t(B,z,W),d[m+3+64]=$t(z,W,K),d[m+3+96]=$t(W,K,Q)}function Ms(d,m){var S=d[m-1+0],E=d[m-1+32],D=d[m-1+64],B=d[m-1+96];d[m+0+0]=S+E+1>>1,d[m+2+0]=d[m+0+32]=E+D+1>>1,d[m+2+32]=d[m+0+64]=D+B+1>>1,d[m+1+0]=$t(S,E,D),d[m+3+0]=d[m+1+32]=$t(E,D,B),d[m+3+32]=d[m+1+64]=$t(D,B,B),d[m+3+64]=d[m+2+64]=d[m+0+96]=d[m+1+96]=d[m+2+96]=d[m+3+96]=B}function mo(d,m){var S=d[m-1+0],E=d[m-1+32],D=d[m-1+64],B=d[m-1+96],z=d[m-1-32],W=d[m+0-32],K=d[m+1-32],Q=d[m+2-32];d[m+0+0]=d[m+2+32]=S+z+1>>1,d[m+0+32]=d[m+2+64]=E+S+1>>1,d[m+0+64]=d[m+2+96]=D+E+1>>1,d[m+0+96]=B+D+1>>1,d[m+3+0]=$t(W,K,Q),d[m+2+0]=$t(z,W,K),d[m+1+0]=d[m+3+32]=$t(S,z,W),d[m+1+32]=d[m+3+64]=$t(E,S,z),d[m+1+64]=d[m+3+96]=$t(D,E,S),d[m+1+96]=$t(B,D,E)}function Bs(d,m){var S;for(S=0;8>S;++S)i(d,m+32*S,d,m-32,8)}function fa(d,m){var S;for(S=0;8>S;++S)o(d,m,d[m-1],8),m+=32}function Hi(d,m,S){var E;for(E=0;8>E;++E)o(m,S+32*E,d,8)}function Ti(d,m){var S,E=8;for(S=0;8>S;++S)E+=d[m+S-32]+d[m-1+32*S];Hi(E>>4,d,m)}function Pa(d,m){var S,E=4;for(S=0;8>S;++S)E+=d[m+S-32];Hi(E>>3,d,m)}function qs(d,m){var S,E=4;for(S=0;8>S;++S)E+=d[m-1+32*S];Hi(E>>3,d,m)}function Mo(d,m){Hi(128,d,m)}function pa(d,m,S){var E=d[m-S],D=d[m+0],B=3*(D-E)+nn[1020+d[m-2*S]-d[m+S]],z=Yi[112+(B+4>>3)];d[m-S]=Wn[255+E+Yi[112+(B+3>>3)]],d[m+0]=Wn[255+D-z]}function La(d,m,S,E){var D=d[m+0],B=d[m+S];return Ra[255+d[m-2*S]-d[m-S]]>E||Ra[255+B-D]>E}function bs(d,m,S,E){return 4*Ra[255+d[m-S]-d[m+0]]+Ra[255+d[m-2*S]-d[m+S]]<=E}function Bo(d,m,S,E,D){var B=d[m-3*S],z=d[m-2*S],W=d[m-S],K=d[m+0],Q=d[m+S],we=d[m+2*S],Be=d[m+3*S];return 4*Ra[255+W-K]+Ra[255+z-Q]>E?0:Ra[255+d[m-4*S]-B]<=D&&Ra[255+B-z]<=D&&Ra[255+z-W]<=D&&Ra[255+Be-we]<=D&&Ra[255+we-Q]<=D&&Ra[255+Q-K]<=D}function ga(d,m,S,E){var D=2*E+1;for(E=0;16>E;++E)bs(d,m+E,S,D)&&pa(d,m+E,S)}function Ki(d,m,S,E){var D=2*E+1;for(E=0;16>E;++E)bs(d,m+E*S,1,D)&&pa(d,m+E*S,1)}function wi(d,m,S,E){var D;for(D=3;0<D;--D)ga(d,m+=4*S,S,E)}function vo(d,m,S,E){var D;for(D=3;0<D;--D)Ki(d,m+=4,S,E)}function Gi(d,m,S,E,D,B,z,W){for(B=2*B+1;0<D--;){if(Bo(d,m,S,B,z))if(La(d,m,S,W))pa(d,m,S);else{var K=d,Q=m,we=S,Be=K[Q-2*we],qe=K[Q-we],Oe=K[Q+0],nt=K[Q+we],Ye=K[Q+2*we],Se=27*(et=nn[1020+3*(Oe-qe)+nn[1020+Be-nt]])+63>>7,Ne=18*et+63>>7,et=9*et+63>>7;K[Q-3*we]=Wn[255+K[Q-3*we]+et],K[Q-2*we]=Wn[255+Be+Ne],K[Q-we]=Wn[255+qe+Se],K[Q+0]=Wn[255+Oe-Se],K[Q+we]=Wn[255+nt-Ne],K[Q+2*we]=Wn[255+Ye-et]}m+=E}}function zn(d,m,S,E,D,B,z,W){for(B=2*B+1;0<D--;){if(Bo(d,m,S,B,z))if(La(d,m,S,W))pa(d,m,S);else{var K=d,Q=m,we=S,Be=K[Q-we],qe=K[Q+0],Oe=K[Q+we],nt=Yi[112+((Ye=3*(qe-Be))+4>>3)],Ye=Yi[112+(Ye+3>>3)],Se=nt+1>>1;K[Q-2*we]=Wn[255+K[Q-2*we]+Se],K[Q-we]=Wn[255+Be+Ye],K[Q+0]=Wn[255+qe-nt],K[Q+we]=Wn[255+Oe-Se]}m+=E}}function Ja(d,m,S,E,D,B){Gi(d,m,S,1,16,E,D,B)}function pn(d,m,S,E,D,B){Gi(d,m,1,S,16,E,D,B)}function Ya(d,m,S,E,D,B){var z;for(z=3;0<z;--z)zn(d,m+=4*S,S,1,16,E,D,B)}function xs(d,m,S,E,D,B){var z;for(z=3;0<z;--z)zn(d,m+=4,1,S,16,E,D,B)}function Ia(d,m,S,E,D,B,z,W){Gi(d,m,D,1,8,B,z,W),Gi(S,E,D,1,8,B,z,W)}function Us(d,m,S,E,D,B,z,W){Gi(d,m,1,D,8,B,z,W),Gi(S,E,1,D,8,B,z,W)}function Xa(d,m,S,E,D,B,z,W){zn(d,m+4*D,D,1,8,B,z,W),zn(S,E+4*D,D,1,8,B,z,W)}function _s(d,m,S,E,D,B,z,W){zn(d,m+4,1,D,8,B,z,W),zn(S,E+4,1,D,8,B,z,W)}function Ji(){this.ba=new Nn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new br,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function sn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Oa(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ks(){this.ua=0,this.Wa=new se,this.vb=new se,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new te,this.yc=new Y}function ul(){this.xb=this.a=0,this.l=new Rs,this.ca=new Nn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new O,this.Pb=0,this.wd=new O,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ks,this.ab=0,this.gc=l(4,Oa),this.Oc=0}function Qa(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Rs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ta(d,m,S,E,D,B,z){for(d=d==null?0:d[m+0],m=0;m<z;++m)D[B+m]=d+S[E+m]&255,d=D[B+m]}function yo(d,m,S,E,D,B,z){var W;if(d==null)Ta(null,null,S,E,D,B,z);else for(W=0;W<z;++W)D[B+W]=d[m+W]+S[E+W]&255}function ma(d,m,S,E,D,B,z){if(d==null)Ta(null,null,S,E,D,B,z);else{var W,K=d[m+0],Q=K,we=K;for(W=0;W<z;++W)Q=we+(K=d[m+W])-Q,we=S[E+W]+(-256&Q?0>Q?0:255:Q)&255,Q=K,D[B+W]=we}}function zs(d,m,S,E){var D=m.width,B=m.o;if(e(d!=null&&m!=null),0>S||0>=E||S+E>B)return null;if(!d.Cc){if(d.ga==null){var z;if(d.ga=new Qa,(z=d.ga==null)||(z=m.width*m.o,e(d.Gb.length==0),d.Gb=s(z),d.Uc=0,d.Gb==null?z=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,z=1),z=!z),!z){z=d.ga;var W=d.Fa,K=d.P,Q=d.qc,we=d.mb,Be=d.nb,qe=K+1,Oe=Q-1,nt=z.l;if(e(W!=null&&we!=null&&m!=null),_i[0]=null,_i[1]=Ta,_i[2]=yo,_i[3]=ma,z.ca=we,z.tb=Be,z.c=m.width,z.i=m.height,e(0<z.c&&0<z.i),1>=Q)m=0;else if(z.$a=W[K+0]>>0&3,z.Z=W[K+0]>>2&3,z.Lc=W[K+0]>>4&3,K=W[K+0]>>6&3,0>z.$a||1<z.$a||4<=z.Z||1<z.Lc||K)m=0;else if(nt.put=qr,nt.ac=Cr,nt.bc=an,nt.ma=z,nt.width=m.width,nt.height=m.height,nt.Da=m.Da,nt.v=m.v,nt.va=m.va,nt.j=m.j,nt.o=m.o,z.$a)e:{e(z.$a==1),m=Li();t:for(;;){if(m==null){m=0;break e}if(e(z!=null),z.mc=m,m.c=z.c,m.i=z.i,m.l=z.l,m.l.ma=z,m.l.width=z.c,m.l.height=z.i,m.a=0,de(m.m,W,qe,Oe),!Un(z.c,z.i,1,m,null)||(m.ab==1&&m.gc[0].hc==3&&Pi(m.s)?(z.ic=1,W=m.c*m.i,m.Ta=null,m.Ua=0,m.V=s(W),m.Ba=0,m.V==null?(m.a=1,m=0):m=1):(z.ic=0,m=Ha(m,z.c)),!m))break t;m=1;break e}z.mc=null,m=0}else m=Oe>=z.c*z.i;z=!m}if(z)return null;d.ga.Lc!=1?d.Ga=0:E=B-S}e(d.ga!=null),e(S+E<=B);e:{if(m=(W=d.ga).c,B=W.l.o,W.$a==0){if(qe=d.rc,Oe=d.Vc,nt=d.Fa,K=d.P+1+S*m,Q=d.mb,we=d.nb+S*m,e(K<=d.P+d.qc),W.Z!=0)for(e(_i[W.Z]!=null),z=0;z<E;++z)_i[W.Z](qe,Oe,nt,K,Q,we,m),qe=Q,Oe=we,we+=m,K+=m;else for(z=0;z<E;++z)i(Q,we,nt,K,m),qe=Q,Oe=we,we+=m,K+=m;d.rc=qe,d.Vc=Oe}else{if(e(W.mc!=null),m=S+E,e((z=W.mc)!=null),e(m<=z.i),z.C>=m)m=1;else if(W.ic||Fe(),W.ic){W=z.V,qe=z.Ba,Oe=z.c;var Ye=z.i,Se=(nt=1,K=z.$/Oe,Q=z.$%Oe,we=z.m,Be=z.s,z.$),Ne=Oe*Ye,et=Oe*m,Ze=Be.wc,tt=Se<et?Pr(Be,Q,K):null;e(Se<=Ne),e(m<=Ye),e(Pi(Be));t:for(;;){for(;!we.h&&Se<et;){if(Q&Ze||(tt=Pr(Be,Q,K)),e(tt!=null),he(we),256>(Ye=vr(tt.G[0],tt.H[0],we)))W[qe+Se]=Ye,++Se,++Q>=Oe&&(Q=0,++K<=m&&!(K%16)&&ei(z,K));else{if(!(280>Ye)){nt=0;break t}Ye=Qr(Ye-256,we);var Pt,At=vr(tt.G[4],tt.H[4],we);if(he(we),!(Se>=(At=er(Oe,At=Qr(At,we)))&&Ne-Se>=Ye)){nt=0;break t}for(Pt=0;Pt<Ye;++Pt)W[qe+Se+Pt]=W[qe+Se+Pt-At];for(Se+=Ye,Q+=Ye;Q>=Oe;)Q-=Oe,++K<=m&&!(K%16)&&ei(z,K);Se<et&&Q&Ze&&(tt=Pr(Be,Q,K))}e(we.h==X(we))}ei(z,K>m?m:K);break t}!nt||we.h&&Se<Ne?(nt=0,z.a=we.h?5:3):z.$=Se,m=nt}else m=tn(z,z.V,z.Ba,z.c,z.i,m,Ii);if(!m){E=0;break e}}S+E>=B&&(d.Cc=1),E=1}if(!E)return null;if(d.Cc&&((E=d.ga)!=null&&(E.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+S*D}function b(d,m,S,E,D,B){for(;0<D--;){var z,W=d,K=m+(S?1:0),Q=d,we=m+(S?0:3);for(z=0;z<E;++z){var Be=Q[we+4*z];Be!=255&&(Be*=32897,W[K+4*z+0]=W[K+4*z+0]*Be>>23,W[K+4*z+1]=W[K+4*z+1]*Be>>23,W[K+4*z+2]=W[K+4*z+2]*Be>>23)}m+=B}}function F(d,m,S,E,D){for(;0<E--;){var B;for(B=0;B<S;++B){var z=d[m+2*B+0],W=15&(Q=d[m+2*B+1]),K=4369*W,Q=(240&Q|Q>>4)*K>>16;d[m+2*B+0]=(240&z|z>>4)*K>>16&240|(15&z|z<<4)*K>>16>>4&15,d[m+2*B+1]=240&Q|W}m+=D}}function ee(d,m,S,E,D,B,z,W){var K,Q,we=255;for(Q=0;Q<D;++Q){for(K=0;K<E;++K){var Be=d[m+K];B[z+4*K]=Be,we&=Be}m+=S,z+=W}return we!=255}function me(d,m,S,E,D){var B;for(B=0;B<D;++B)S[E+B]=d[m+B]>>8}function Fe(){Nt=b,Lt=F,It=ee,Ut=me}function Qe(d,m,S){G[d]=function(E,D,B,z,W,K,Q,we,Be,qe,Oe,nt,Ye,Se,Ne,et,Ze){var tt,Pt=Ze-1>>1,At=W[K+0]|Q[we+0]<<16,Jt=Be[qe+0]|Oe[nt+0]<<16;e(E!=null);var jt=3*At+Jt+131074>>2;for(m(E[D+0],255&jt,jt>>16,Ye,Se),B!=null&&(jt=3*Jt+At+131074>>2,m(B[z+0],255&jt,jt>>16,Ne,et)),tt=1;tt<=Pt;++tt){var Dr=W[K+tt]|Q[we+tt]<<16,Fr=Be[qe+tt]|Oe[nt+tt]<<16,Ir=At+Dr+Jt+Fr+524296,xr=Ir+2*(Dr+Jt)>>3;jt=xr+At>>1,At=(Ir=Ir+2*(At+Fr)>>3)+Dr>>1,m(E[D+2*tt-1],255&jt,jt>>16,Ye,Se+(2*tt-1)*S),m(E[D+2*tt-0],255&At,At>>16,Ye,Se+(2*tt-0)*S),B!=null&&(jt=Ir+Jt>>1,At=xr+Fr>>1,m(B[z+2*tt-1],255&jt,jt>>16,Ne,et+(2*tt-1)*S),m(B[z+2*tt+0],255&At,At>>16,Ne,et+(2*tt+0)*S)),At=Dr,Jt=Fr}1&Ze||(jt=3*At+Jt+131074>>2,m(E[D+Ze-1],255&jt,jt>>16,Ye,Se+(Ze-1)*S),B!=null&&(jt=3*Jt+At+131074>>2,m(B[z+Ze-1],255&jt,jt>>16,Ne,et+(Ze-1)*S)))}}function st(){Qi[hu]=Kh,Qi[ko]=So,Qi[sd]=Gh,Qi[Bl]=fl,Qi[ql]=$o,Qi[Zr]=Wl,Qi[fu]=uc,Qi[cl]=So,Qi[qo]=fl,Qi[Ul]=$o,Qi[zl]=Wl}function Et(d){return d&-16384?0>d?0:255:d>>No}function Vt(d,m){return Et((19077*d>>8)+(26149*m>>8)-14234)}function hr(d,m,S){return Et((19077*d>>8)-(6419*m>>8)-(13320*S>>8)+8708)}function sr(d,m){return Et((19077*d>>8)+(33050*m>>8)-17685)}function Ar(d,m,S,E,D){E[D+0]=Vt(d,S),E[D+1]=hr(d,m,S),E[D+2]=sr(d,m)}function on(d,m,S,E,D){E[D+0]=sr(d,m),E[D+1]=hr(d,m,S),E[D+2]=Vt(d,S)}function ln(d,m,S,E,D){var B=hr(d,m,S);m=B<<3&224|sr(d,m)>>3,E[D+0]=248&Vt(d,S)|B>>5,E[D+1]=m}function An(d,m,S,E,D){var B=240&sr(d,m)|15;E[D+0]=240&Vt(d,S)|hr(d,m,S)>>4,E[D+1]=B}function $n(d,m,S,E,D){E[D+0]=255,Ar(d,m,S,E,D+1)}function Cn(d,m,S,E,D){on(d,m,S,E,D),E[D+3]=255}function va(d,m,S,E,D){Ar(d,m,S,E,D),E[D+3]=255}function bi(d,m){return 0>d?0:d>m?m:d}function xi(d,m,S){G[d]=function(E,D,B,z,W,K,Q,we,Be){for(var qe=we+(-2&Be)*S;we!=qe;)m(E[D+0],B[z+0],W[K+0],Q,we),m(E[D+1],B[z+0],W[K+0],Q,we+S),D+=2,++z,++K,we+=2*S;1&Be&&m(E[D+0],B[z+0],W[K+0],Q,we)}}function Za(d,m,S){return S==0?d==0?m==0?6:5:m==0?4:0:S}function wo(d,m,S,E,D){switch(d>>>30){case 3:Le(m,S,E,D,0);break;case 2:re(m,S,E,D);break;case 1:ve(m,S,E,D)}}function bo(d,m){var S,E,D=m.M,B=m.Nb,z=d.oc,W=d.pc+40,K=d.oc,Q=d.pc+584,we=d.oc,Be=d.pc+600;for(S=0;16>S;++S)z[W+32*S-1]=129;for(S=0;8>S;++S)K[Q+32*S-1]=129,we[Be+32*S-1]=129;for(0<D?z[W-1-32]=K[Q-1-32]=we[Be-1-32]=129:(o(z,W-32-1,127,21),o(K,Q-32-1,127,9),o(we,Be-32-1,127,9)),E=0;E<d.za;++E){var qe=m.ya[m.aa+E];if(0<E){for(S=-1;16>S;++S)i(z,W+32*S-4,z,W+32*S+12,4);for(S=-1;8>S;++S)i(K,Q+32*S-4,K,Q+32*S+4,4),i(we,Be+32*S-4,we,Be+32*S+4,4)}var Oe=d.Gd,nt=d.Hd+E,Ye=qe.ad,Se=qe.Hc;if(0<D&&(i(z,W-32,Oe[nt].y,0,16),i(K,Q-32,Oe[nt].f,0,8),i(we,Be-32,Oe[nt].ea,0,8)),qe.Za){var Ne=z,et=W-32+16;for(0<D&&(E>=d.za-1?o(Ne,et,Oe[nt].y[15],4):i(Ne,et,Oe[nt+1].y,0,4)),S=0;4>S;S++)Ne[et+128+S]=Ne[et+256+S]=Ne[et+384+S]=Ne[et+0+S];for(S=0;16>S;++S,Se<<=2)Ne=z,et=W+cc[S],Da[qe.Ob[S]](Ne,et),wo(Se,Ye,16*+S,Ne,et)}else if(Ne=Za(E,D,qe.Ob[0]),Di[Ne](z,W),Se!=0)for(S=0;16>S;++S,Se<<=2)wo(Se,Ye,16*+S,z,W+cc[S]);for(S=qe.Gc,Ne=Za(E,D,qe.Dd),Xi[Ne](K,Q),Xi[Ne](we,Be),Se=Ye,Ne=K,et=Q,255&(qe=S>>0)&&(170&qe?Re(Se,256,Ne,et):Ee(Se,256,Ne,et)),qe=we,Se=Be,255&(S>>=8)&&(170&S?Re(Ye,320,qe,Se):Ee(Ye,320,qe,Se)),D<d.Ub-1&&(i(Oe[nt].y,0,z,W+480,16),i(Oe[nt].f,0,K,Q+224,8),i(Oe[nt].ea,0,we,Be+224,8)),S=8*B*d.B,Oe=d.sa,nt=d.ta+16*E+16*B*d.R,Ye=d.qa,qe=d.ra+8*E+S,Se=d.Ha,Ne=d.Ia+8*E+S,S=0;16>S;++S)i(Oe,nt+S*d.R,z,W+32*S,16);for(S=0;8>S;++S)i(Ye,qe+S*d.B,K,Q+32*S,8),i(Se,Ne+S*d.B,we,Be+32*S,8)}}function $s(d,m,S,E,D,B,z,W,K){var Q=[0],we=[0],Be=0,qe=K!=null?K.kd:0,Oe=K??new sn;if(d==null||12>S)return 7;Oe.data=d,Oe.w=m,Oe.ha=S,m=[m],S=[S],Oe.gb=[Oe.gb];e:{var nt=m,Ye=S,Se=Oe.gb;if(e(d!=null),e(Ye!=null),e(Se!=null),Se[0]=0,12<=Ye[0]&&!r(d,nt[0],"RIFF")){if(r(d,nt[0]+8,"WEBP")){Se=3;break e}var Ne=bt(d,nt[0]+4);if(12>Ne||4294967286<Ne){Se=3;break e}if(qe&&Ne>Ye[0]-8){Se=7;break e}Se[0]=Ne,nt[0]+=12,Ye[0]-=12}Se=0}if(Se!=0)return Se;for(Ne=0<Oe.gb[0],S=S[0];;){e:{var et=d;Ye=m,Se=S;var Ze=Q,tt=we,Pt=nt=[0];if((jt=Be=[Be])[0]=0,8>Se[0])Se=7;else{if(!r(et,Ye[0],"VP8X")){if(bt(et,Ye[0]+4)!=10){Se=3;break e}if(18>Se[0]){Se=7;break e}var At=bt(et,Ye[0]+8),Jt=1+it(et,Ye[0]+12);if(2147483648<=Jt*(et=1+it(et,Ye[0]+15))){Se=3;break e}Pt!=null&&(Pt[0]=At),Ze!=null&&(Ze[0]=Jt),tt!=null&&(tt[0]=et),Ye[0]+=18,Se[0]-=18,jt[0]=1}Se=0}}if(Be=Be[0],nt=nt[0],Se!=0)return Se;if(Ye=!!(2&nt),!Ne&&Be)return 3;if(B!=null&&(B[0]=!!(16&nt)),z!=null&&(z[0]=Ye),W!=null&&(W[0]=0),z=Q[0],nt=we[0],Be&&Ye&&K==null){Se=0;break}if(4>S){Se=7;break}if(Ne&&Be||!Ne&&!Be&&!r(d,m[0],"ALPH")){S=[S],Oe.na=[Oe.na],Oe.P=[Oe.P],Oe.Sa=[Oe.Sa];e:{At=d,Se=m,Ne=S;var jt=Oe.gb;Ze=Oe.na,tt=Oe.P,Pt=Oe.Sa,Jt=22,e(At!=null),e(Ne!=null),et=Se[0];var Dr=Ne[0];for(e(Ze!=null),e(Pt!=null),Ze[0]=null,tt[0]=null,Pt[0]=0;;){if(Se[0]=et,Ne[0]=Dr,8>Dr){Se=7;break e}var Fr=bt(At,et+4);if(4294967286<Fr){Se=3;break e}var Ir=8+Fr+1&-2;if(Jt+=Ir,0<jt&&Jt>jt){Se=3;break e}if(!r(At,et,"VP8 ")||!r(At,et,"VP8L")){Se=0;break e}if(Dr[0]<Ir){Se=7;break e}r(At,et,"ALPH")||(Ze[0]=At,tt[0]=et+8,Pt[0]=Fr),et+=Ir,Dr-=Ir}}if(S=S[0],Oe.na=Oe.na[0],Oe.P=Oe.P[0],Oe.Sa=Oe.Sa[0],Se!=0)break}S=[S],Oe.Ja=[Oe.Ja],Oe.xa=[Oe.xa];e:if(jt=d,Se=m,Ne=S,Ze=Oe.gb[0],tt=Oe.Ja,Pt=Oe.xa,At=Se[0],et=!r(jt,At,"VP8 "),Jt=!r(jt,At,"VP8L"),e(jt!=null),e(Ne!=null),e(tt!=null),e(Pt!=null),8>Ne[0])Se=7;else{if(et||Jt){if(jt=bt(jt,At+4),12<=Ze&&jt>Ze-12){Se=3;break e}if(qe&&jt>Ne[0]-8){Se=7;break e}tt[0]=jt,Se[0]+=8,Ne[0]-=8,Pt[0]=Jt}else Pt[0]=5<=Ne[0]&&jt[At+0]==47&&!(jt[At+4]>>5),tt[0]=Ne[0];Se=0}if(S=S[0],Oe.Ja=Oe.Ja[0],Oe.xa=Oe.xa[0],m=m[0],Se!=0)break;if(4294967286<Oe.Ja)return 3;if(W==null||Ye||(W[0]=Oe.xa?2:1),z=[z],nt=[nt],Oe.xa){if(5>S){Se=7;break}W=z,qe=nt,Ye=B,d==null||5>S?d=0:5<=S&&d[m+0]==47&&!(d[m+4]>>5)?(Ne=[0],jt=[0],Ze=[0],de(tt=new O,d,m,S),Ct(tt,Ne,jt,Ze)?(W!=null&&(W[0]=Ne[0]),qe!=null&&(qe[0]=jt[0]),Ye!=null&&(Ye[0]=Ze[0]),d=1):d=0):d=0}else{if(10>S){Se=7;break}W=nt,d==null||10>S||!Ro(d,m+3,S-3)?d=0:(qe=d[m+0]|d[m+1]<<8|d[m+2]<<16,Ye=16383&(d[m+7]<<8|d[m+6]),d=16383&(d[m+9]<<8|d[m+8]),1&qe||3<(qe>>1&7)||!(qe>>4&1)||qe>>5>=Oe.Ja||!Ye||!d?d=0:(z&&(z[0]=Ye),W&&(W[0]=d),d=1))}if(!d||(z=z[0],nt=nt[0],Be&&(Q[0]!=z||we[0]!=nt)))return 3;K!=null&&(K[0]=Oe,K.offset=m-K.w,e(4294967286>m-K.w),e(K.offset==K.ha-S));break}return Se==0||Se==7&&Be&&K==null?(B!=null&&(B[0]|=Oe.na!=null&&0<Oe.na.length),E!=null&&(E[0]=z),D!=null&&(D[0]=nt),0):Se}function xo(d,m,S){var E=m.width,D=m.height,B=0,z=0,W=E,K=D;if(m.Da=d!=null&&0<d.Da,m.Da&&(W=d.cd,K=d.bd,B=d.v,z=d.j,11>S||(B&=-2,z&=-2),0>B||0>z||0>=W||0>=K||B+W>E||z+K>D))return 0;if(m.v=B,m.j=z,m.va=B+W,m.o=z+K,m.U=W,m.T=K,m.da=d!=null&&0<d.da,m.da){if(!Xt(W,K,S=[d.ib],B=[d.hb]))return 0;m.ib=S[0],m.hb=B[0]}return m.ob=d!=null&&d.ob,m.Kb=d==null||!d.Sd,m.da&&(m.ob=m.ib<3*E/4&&m.hb<3*D/4,m.Kb=0),1}function es(d){if(d==null)return 2;if(11>d.S){var m=d.f.RGBA;m.fb+=(d.height-1)*m.A,m.A=-m.A}else m=d.f.kb,d=d.height,m.O+=(d-1)*m.fa,m.fa=-m.fa,m.N+=(d-1>>1)*m.Ab,m.Ab=-m.Ab,m.W+=(d-1>>1)*m.Db,m.Db=-m.Db,m.F!=null&&(m.J+=(d-1)*m.lb,m.lb=-m.lb);return 0}function li(d,m,S,E){if(E==null||0>=d||0>=m)return 2;if(S!=null){if(S.Da){var D=S.cd,B=S.bd,z=-2&S.v,W=-2&S.j;if(0>z||0>W||0>=D||0>=B||z+D>d||W+B>m)return 2;d=D,m=B}if(S.da){if(!Xt(d,m,D=[S.ib],B=[S.hb]))return 2;d=D[0],m=B[0]}}E.width=d,E.height=m;e:{var K=E.width,Q=E.height;if(d=E.S,0>=K||0>=Q||!(d>=hu&&13>d))d=2;else{if(0>=E.Rd&&E.sd==null){z=B=D=m=0;var we=(W=K*Hl[d])*Q;if(11>d||(B=(Q+1)/2*(m=(K+1)/2),d==12&&(z=(D=K)*Q)),(Q=s(we+2*B+z))==null){d=1;break e}E.sd=Q,11>d?((K=E.f.RGBA).eb=Q,K.fb=0,K.A=W,K.size=we):((K=E.f.kb).y=Q,K.O=0,K.fa=W,K.Fd=we,K.f=Q,K.N=0+we,K.Ab=m,K.Cd=B,K.ea=Q,K.W=0+we+B,K.Db=m,K.Ed=B,d==12&&(K.F=Q,K.J=0+we+2*B),K.Tc=z,K.lb=D)}if(m=1,D=E.S,B=E.width,z=E.height,D>=hu&&13>D)if(11>D)d=E.f.RGBA,m&=(W=Math.abs(d.A))*(z-1)+B<=d.size,m&=W>=B*Hl[D],m&=d.eb!=null;else{d=E.f.kb,W=(B+1)/2,we=(z+1)/2,K=Math.abs(d.fa),Q=Math.abs(d.Ab);var Be=Math.abs(d.Db),qe=Math.abs(d.lb),Oe=qe*(z-1)+B;m&=K*(z-1)+B<=d.Fd,m&=Q*(we-1)+W<=d.Cd,m=(m&=Be*(we-1)+W<=d.Ed)&K>=B&Q>=W&Be>=W,m&=d.y!=null,m&=d.f!=null,m&=d.ea!=null,D==12&&(m&=qe>=B,m&=Oe<=d.Tc,m&=d.F!=null)}else m=0;d=m?0:2}}return d!=0||S!=null&&S.fd&&(d=es(E)),d}var gr=64,ts=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Vn=24,_o=32,Ss=8,ri=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];pt("Predictor0","PredictorAdd0"),G.Predictor0=function(){return 4278190080},G.Predictor1=function(d){return d},G.Predictor2=function(d,m,S){return m[S+0]},G.Predictor3=function(d,m,S){return m[S+1]},G.Predictor4=function(d,m,S){return m[S-1]},G.Predictor5=function(d,m,S){return St(St(d,m[S+1]),m[S+0])},G.Predictor6=function(d,m,S){return St(d,m[S-1])},G.Predictor7=function(d,m,S){return St(d,m[S+0])},G.Predictor8=function(d,m,S){return St(m[S-1],m[S+0])},G.Predictor9=function(d,m,S){return St(m[S+0],m[S+1])},G.Predictor10=function(d,m,S){return St(St(d,m[S-1]),St(m[S+0],m[S+1]))},G.Predictor11=function(d,m,S){var E=m[S+0];return 0>=Qt(E>>24&255,d>>24&255,(m=m[S-1])>>24&255)+Qt(E>>16&255,d>>16&255,m>>16&255)+Qt(E>>8&255,d>>8&255,m>>8&255)+Qt(255&E,255&d,255&m)?E:d},G.Predictor12=function(d,m,S){var E=m[S+0];return(Rt((d>>24&255)+(E>>24&255)-((m=m[S-1])>>24&255))<<24|Rt((d>>16&255)+(E>>16&255)-(m>>16&255))<<16|Rt((d>>8&255)+(E>>8&255)-(m>>8&255))<<8|Rt((255&d)+(255&E)-(255&m)))>>>0},G.Predictor13=function(d,m,S){var E=m[S-1];return(Yt((d=St(d,m[S+0]))>>24&255,E>>24&255)<<24|Yt(d>>16&255,E>>16&255)<<16|Yt(d>>8&255,E>>8&255)<<8|Yt(d>>0&255,E>>0&255))>>>0};var Ri=G.PredictorAdd0;G.PredictorAdd1=nr,pt("Predictor2","PredictorAdd2"),pt("Predictor3","PredictorAdd3"),pt("Predictor4","PredictorAdd4"),pt("Predictor5","PredictorAdd5"),pt("Predictor6","PredictorAdd6"),pt("Predictor7","PredictorAdd7"),pt("Predictor8","PredictorAdd8"),pt("Predictor9","PredictorAdd9"),pt("Predictor10","PredictorAdd10"),pt("Predictor11","PredictorAdd11"),pt("Predictor12","PredictorAdd12"),pt("Predictor13","PredictorAdd13");var ya=G.PredictorAdd2;ar("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),ar("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var rs,gn=G.ColorIndexInverseTransform,Vs=G.MapARGB,f=G.VP8LColorIndexInverseTransformAlpha,v=G.MapAlpha,A=G.VP8LPredictorsAdd=[];A.length=16,(G.VP8LPredictors=[]).length=16,(G.VP8LPredictorsAdd_C=[]).length=16,(G.VP8LPredictors_C=[]).length=16;var C,T,U,Z,ue,xe,Ae,Le,re,Re,ve,Ee,De,Ce,Ve,He,Ke,Xe,lt,yt,ut,gt,kt,ht,Nt,Lt,It,Ut,Lr=s(511),Gt=s(2041),bn=s(225),mn=s(767),Ns=0,nn=Gt,Yi=bn,Wn=mn,Ra=Lr,hu=0,ko=1,sd=2,Bl=3,ql=4,Zr=5,fu=6,cl=7,qo=8,Ul=9,zl=10,$l=[2,3,7],pu=[3,3,11],Uo=[280,256,256,256,40],od=[0,1,1,1,0],$h=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Vh=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ld=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],gu=8,dl=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Vl=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],zo=null,sc=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],oc=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ud=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],cd=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Wh=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Hh=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],lc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Di=[],Da=[],Xi=[],As=1,hl=2,_i=[],Qi=[];Qe("UpsampleRgbLinePair",Ar,3),Qe("UpsampleBgrLinePair",on,3),Qe("UpsampleRgbaLinePair",va,4),Qe("UpsampleBgraLinePair",Cn,4),Qe("UpsampleArgbLinePair",$n,4),Qe("UpsampleRgba4444LinePair",An,2),Qe("UpsampleRgb565LinePair",ln,2);var Kh=G.UpsampleRgbLinePair,Gh=G.UpsampleBgrLinePair,So=G.UpsampleRgbaLinePair,fl=G.UpsampleBgraLinePair,$o=G.UpsampleArgbLinePair,Wl=G.UpsampleRgba4444LinePair,uc=G.UpsampleRgb565LinePair,Ws=16,ns=1<<Ws-1,Hr=-227,Jr=482,No=6,ui=0,Zi=s(256),Vo=s(256),pl=s(256),ea=s(256),mu=s(Jr-Hr),dd=s(Jr-Hr);xi("YuvToRgbRow",Ar,3),xi("YuvToBgrRow",on,3),xi("YuvToRgbaRow",va,4),xi("YuvToBgraRow",Cn,4),xi("YuvToArgbRow",$n,4),xi("YuvToRgba4444Row",An,2),xi("YuvToRgb565Row",ln,2);var cc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Wo=[0,2,8],hd=[8,7,6,4,4,2,2,2,1,1,1,1],Hs=1;this.WebPDecodeRGBA=function(d,m,S,E,D){var B=ko,z=new Ji,W=new Nn;z.ba=W,W.S=B,W.width=[W.width],W.height=[W.height];var K=W.width,Q=W.height,we=new Er;if(we==null||d==null)var Be=2;else e(we!=null),Be=$s(d,m,S,we.width,we.height,we.Pd,we.Qd,we.format,null);if(Be!=0?K=0:(K!=null&&(K[0]=we.width[0]),Q!=null&&(Q[0]=we.height[0]),K=1),K){W.width=W.width[0],W.height=W.height[0],E!=null&&(E[0]=W.width),D!=null&&(D[0]=W.height);e:{if(E=new Rs,(D=new sn).data=d,D.w=m,D.ha=S,D.kd=1,m=[0],e(D!=null),((d=$s(D.data,D.w,D.ha,null,null,null,m,null,D))==0||d==7)&&m[0]&&(d=4),(m=d)==0){if(e(z!=null),E.data=D.data,E.w=D.w+D.offset,E.ha=D.ha-D.offset,E.put=qr,E.ac=Cr,E.bc=an,E.ma=z,D.xa){if((d=Li())==null){z=1;break e}if(function(qe,Oe){var nt=[0],Ye=[0],Se=[0];t:for(;;){if(qe==null)return 0;if(Oe==null)return qe.a=2,0;if(qe.l=Oe,qe.a=0,de(qe.m,Oe.data,Oe.w,Oe.ha),!Ct(qe.m,nt,Ye,Se)){qe.a=3;break t}if(qe.xb=hl,Oe.width=nt[0],Oe.height=Ye[0],!Un(nt[0],Ye[0],1,qe,null))break t;return 1}return e(qe.a!=0),0}(d,E)){if(E=(m=li(E.width,E.height,z.Oa,z.ba))==0){t:{E=d;r:for(;;){if(E==null){E=0;break t}if(e(E.s.yc!=null),e(E.s.Ya!=null),e(0<E.s.Wb),e((S=E.l)!=null),e((D=S.ma)!=null),E.xb!=0){if(E.ca=D.ba,E.tb=D.tb,e(E.ca!=null),!xo(D.Oa,S,Bl)){E.a=2;break r}if(!Ha(E,S.width)||S.da)break r;if((S.da||mr(E.ca.S))&&Fe(),11>E.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),E.ca.f.kb.F!=null&&Fe()),E.Pb&&0<E.s.ua&&E.s.vb.X==null&&!qt(E.s.vb,E.s.Wa.Xa)){E.a=1;break r}E.xb=0}if(!tn(E,E.V,E.Ba,E.c,E.i,S.o,qn))break r;D.Dc=E.Ma,E=1;break t}e(E.a!=0),E=0}E=!E}E&&(m=d.a)}else m=d.a}else{if((d=new ir)==null){z=1;break e}if(d.Fa=D.na,d.P=D.P,d.qc=D.Sa,Do(d,E)){if((m=li(E.width,E.height,z.Oa,z.ba))==0){if(d.Aa=0,S=z.Oa,e((D=d)!=null),S!=null){if(0<(K=0>(K=S.Md)?0:100<K?255:255*K/100)){for(Q=we=0;4>Q;++Q)12>(Be=D.pb[Q]).lc&&(Be.ia=K*hd[0>Be.lc?0:Be.lc]>>3),we|=Be.ia;we&&(alert("todo:VP8InitRandom"),D.ia=1)}D.Ga=S.Id,100<D.Ga?D.Ga=100:0>D.Ga&&(D.Ga=0)}ua(d,E)||(m=d.a)}}else m=d.a}m==0&&z.Oa!=null&&z.Oa.fd&&(m=es(z.ba))}z=m}B=z!=0?null:11>B?W.f.RGBA.eb:W.f.kb.y}else B=null;return B};var Hl=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function g(G,fe){for(var Te="",V=0;V<4;V++)Te+=String.fromCharCode(G[fe++]);return Te}function w(G,fe){return(G[fe+0]<<0|G[fe+1]<<8|G[fe+2]<<16)>>>0}function _(G,fe){return(G[fe+0]<<0|G[fe+1]<<8|G[fe+2]<<16|G[fe+3]<<24)>>>0}new h;var N=[0],x=[0],I=[],P=new h,R=t,L=function(G,fe){var Te={},V=0,Y=!1,pe=0,te=0;if(Te.frames=[],!function($,X,ie,he){for(var ye=0;ye<he;ye++)if($[X+ye]!=ie.charCodeAt(ye))return!0;return!1}(G,fe,"RIFF",4)){for(_(G,fe+=4),fe+=8;fe<G.length;){var Ue=g(G,fe),Me=_(G,fe+=4);fe+=4;var ze=Me+(1&Me);switch(Ue){case"VP8 ":case"VP8L":Te.frames[V]===void 0&&(Te.frames[V]={}),(_e=Te.frames[V]).src_off=Y?te:fe-8,_e.src_size=pe+Me+8,V++,Y&&(Y=!1,pe=0,te=0);break;case"VP8X":(_e=Te.header={}).feature_flags=G[fe];var de=fe+4;_e.canvas_width=1+w(G,de),de+=3,_e.canvas_height=1+w(G,de),de+=3;break;case"ALPH":Y=!0,pe=ze+8,te=fe-8;break;case"ANIM":(_e=Te.header).bgcolor=_(G,fe),de=fe+4,_e.loop_count=(ae=G)[(O=de)+0]<<0|ae[O+1]<<8,de+=2;break;case"ANMF":var je,_e;(_e=Te.frames[V]={}).offset_x=2*w(G,fe),fe+=3,_e.offset_y=2*w(G,fe),fe+=3,_e.width=1+w(G,fe),fe+=3,_e.height=1+w(G,fe),fe+=3,_e.duration=w(G,fe),fe+=3,je=G[fe++],_e.dispose=1&je,_e.blend=je>>1&1}Ue!="ANMF"&&(fe+=ze)}var ae,O;return Te}}(R,0);L.response=R,L.rgbaoutput=!0,L.dataurl=!1;var M=L.header?L.header:null,H=L.frames?L.frames:null;if(M){M.loop_counter=M.loop_count,N=[M.canvas_height],x=[M.canvas_width];for(var oe=0;oe<H.length&&H[oe].blend!=0;oe++);}var le=H[0],be=P.WebPDecodeRGBA(R,le.src_off,le.src_size,x,N);le.rgba=be,le.imgwidth=x[0],le.imgheight=N[0];for(var ne=0;ne<x[0]*N[0]*4;ne++)I[ne]=be[ne];return this.width=x,this.height=N,this.data=I,this}(function(t){var e=function(){return typeof yp=="function"},r=function(N,x,I,P){var R=4,L=l;switch(P){case t.image_compression.FAST:R=1,L=s;break;case t.image_compression.MEDIUM:R=6,L=c;break;case t.image_compression.SLOW:R=9,L=h}N=i(N,x,I,L);var M=yp(N,{level:R});return t.__addimage__.arrayBufferToBinaryString(M)},i=function(N,x,I,P){for(var R,L,M,H=N.length/x,oe=new Uint8Array(N.length+H),le=w(),be=0;be<H;be+=1){if(M=be*x,R=N.subarray(M,M+x),P)oe.set(P(R,I,L),M+be);else{for(var ne,G=le.length,fe=[];ne<G;ne+=1)fe[ne]=le[ne](R,I,L);var Te=_(fe.concat());oe.set(fe[Te],M+be)}L=R}return oe},o=function(N){var x=Array.apply([],N);return x.unshift(0),x},s=function(N,x){var I,P=[],R=N.length;P[0]=1;for(var L=0;L<R;L+=1)I=N[L-x]||0,P[L+1]=N[L]-I+256&255;return P},l=function(N,x,I){var P,R=[],L=N.length;R[0]=2;for(var M=0;M<L;M+=1)P=I&&I[M]||0,R[M+1]=N[M]-P+256&255;return R},c=function(N,x,I){var P,R,L=[],M=N.length;L[0]=3;for(var H=0;H<M;H+=1)P=N[H-x]||0,R=I&&I[H]||0,L[H+1]=N[H]+256-(P+R>>>1)&255;return L},h=function(N,x,I){var P,R,L,M,H=[],oe=N.length;H[0]=4;for(var le=0;le<oe;le+=1)P=N[le-x]||0,R=I&&I[le]||0,L=I&&I[le-x]||0,M=g(P,R,L),H[le+1]=N[le]-M+256&255;return H},g=function(N,x,I){if(N===x&&x===I)return N;var P=Math.abs(x-I),R=Math.abs(N-I),L=Math.abs(N+x-I-I);return P<=R&&P<=L?N:R<=L?x:I},w=function(){return[o,s,l,c,h]},_=function(N){var x=N.map(function(I){return I.reduce(function(P,R){return P+Math.abs(R)},0)});return x.indexOf(Math.min.apply(null,x))};t.processPNG=function(N,x,I,P){var R,L,M,H,oe,le,be,ne,G,fe,Te,V,Y,pe,te,Ue=this.decode.FLATE_DECODE,Me="";if(this.__addimage__.isArrayBuffer(N)&&(N=new Uint8Array(N)),this.__addimage__.isArrayBufferView(N)){if(N=(M=new Ow(N)).imgData,L=M.bits,R=M.colorSpace,oe=M.colors,[4,6].indexOf(M.colorType)!==-1){if(M.bits===8){G=(ne=M.pixelBitlength==32?new Uint32Array(M.decodePixels().buffer):M.pixelBitlength==16?new Uint16Array(M.decodePixels().buffer):new Uint8Array(M.decodePixels().buffer)).length,Te=new Uint8Array(G*M.colors),fe=new Uint8Array(G);var ze,de=M.pixelBitlength-M.bits;for(pe=0,te=0;pe<G;pe++){for(Y=ne[pe],ze=0;ze<de;)Te[te++]=Y>>>ze&255,ze+=M.bits;fe[pe]=Y>>>ze&255}}if(M.bits===16){G=(ne=new Uint32Array(M.decodePixels().buffer)).length,Te=new Uint8Array(G*(32/M.pixelBitlength)*M.colors),fe=new Uint8Array(G*(32/M.pixelBitlength)),V=M.colors>1,pe=0,te=0;for(var je=0;pe<G;)Y=ne[pe++],Te[te++]=Y>>>0&255,V&&(Te[te++]=Y>>>16&255,Y=ne[pe++],Te[te++]=Y>>>0&255),fe[je++]=Y>>>16&255;L=8}P!==t.image_compression.NONE&&e()?(N=r(Te,M.width*M.colors,M.colors,P),be=r(fe,M.width,1,P)):(N=Te,be=fe,Ue=void 0)}if(M.colorType===3&&(R=this.color_spaces.INDEXED,le=M.palette,M.transparency.indexed)){var _e=M.transparency.indexed,ae=0;for(pe=0,G=_e.length;pe<G;++pe)ae+=_e[pe];if((ae/=255)===G-1&&_e.indexOf(0)!==-1)H=[_e.indexOf(0)];else if(ae!==G){for(ne=M.decodePixels(),fe=new Uint8Array(ne.length),pe=0,G=ne.length;pe<G;pe++)fe[pe]=_e[ne[pe]];be=r(fe,M.width,1)}}var O=function($){var X;switch($){case t.image_compression.FAST:X=11;break;case t.image_compression.MEDIUM:X=13;break;case t.image_compression.SLOW:X=14;break;default:X=12}return X}(P);return Ue===this.decode.FLATE_DECODE&&(Me="/Predictor "+O+" "),Me+="/Colors "+oe+" /BitsPerComponent "+L+" /Columns "+M.width,(this.__addimage__.isArrayBuffer(N)||this.__addimage__.isArrayBufferView(N))&&(N=this.__addimage__.arrayBufferToBinaryString(N)),(be&&this.__addimage__.isArrayBuffer(be)||this.__addimage__.isArrayBufferView(be))&&(be=this.__addimage__.arrayBufferToBinaryString(be)),{alias:I,data:N,index:x,filter:Ue,decodeParameters:Me,transparency:H,palette:le,sMask:be,predictor:O,width:M.width,height:M.height,bitsPerComponent:L,colorSpace:R}}}})(lr.API),function(t){t.processGIF89A=function(e,r,i,o){var s=new Tw(e),l=s.width,c=s.height,h=[];s.decodeAndBlitFrameRGBA(0,h);var g={data:h,width:l,height:c},w=new Gf(100).encode(g,100);return t.processJPEG.call(this,w,r,i,o)},t.processGIF87A=t.processGIF89A}(lr.API),no.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:o,green:i,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},no.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){cn.log("bit decode error:"+r)}},no.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,o=0;o<e;o++)for(var s=this.datav.getUint8(this.pos++,!0),l=i*this.width*4+8*o*4,c=0;c<8&&8*o+c<this.width;c++){var h=this.palette[s>>7-c&1];this.data[l+4*c]=h.blue,this.data[l+4*c+1]=h.green,this.data[l+4*c+2]=h.red,this.data[l+4*c+3]=255}r!==0&&(this.pos+=4-r)}},no.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<t;o++){var s=this.datav.getUint8(this.pos++,!0),l=i*this.width*4+2*o*4,c=s>>4,h=15&s,g=this.palette[c];if(this.data[l]=g.blue,this.data[l+1]=g.green,this.data[l+2]=g.red,this.data[l+3]=255,2*o+1>=this.width)break;g=this.palette[h],this.data[l+4]=g.blue,this.data[l+4+1]=g.green,this.data[l+4+2]=g.red,this.data[l+4+3]=255}e!==0&&(this.pos+=4-e)}},no.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*i;if(o<this.palette.length){var l=this.palette[o];this.data[s]=l.red,this.data[s+1]=l.green,this.data[s+2]=l.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},no.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(s&e)/e*255|0,c=(s>>5&e)/e*255|0,h=(s>>10&e)/e*255|0,g=s>>15?255:0,w=i*this.width*4+4*o;this.data[w]=h,this.data[w+1]=c,this.data[w+2]=l,this.data[w+3]=g}this.pos+=t}},no.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var o=this.bottom_up?i:this.height-1-i,s=0;s<this.width;s++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(l&e)/e*255|0,h=(l>>5&r)/r*255|0,g=(l>>11)/e*255|0,w=o*this.width*4+4*s;this.data[w]=g,this.data[w+1]=h,this.data[w+2]=c,this.data[w+3]=255}this.pos+=t}},no.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*r;this.data[l]=s,this.data[l+1]=o,this.data[l+2]=i,this.data[l+3]=255}this.pos+=this.width%4}},no.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*r;this.data[c]=s,this.data[c+1]=o,this.data[c+2]=i,this.data[c+3]=l}},no.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,i,o){var s=new no(e,!1),l=s.width,c=s.height,h={data:s.getData(),width:l,height:c},g=new Gf(100).encode(h,100);return t.processJPEG.call(this,g,r,i,o)}}(lr.API),nm.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,i,o){var s=new nm(e),l=s.width,c=s.height,h={data:s.getData(),width:l,height:c},g=new Gf(100).encode(h,100);return t.processJPEG.call(this,g,r,i,o)}}(lr.API),lr.API.processRGBA=function(t,e,r){for(var i=t.data,o=i.length,s=new Uint8Array(o/4*3),l=new Uint8Array(o/4),c=0,h=0,g=0;g<o;g+=4){var w=i[g],_=i[g+1],N=i[g+2],x=i[g+3];s[c++]=w,s[c++]=_,s[c++]=N,l[h++]=x}var I=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:I,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},lr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ou=lr.API,Wd=Ou.getCharWidthsArray=function(t,e){var r,i,o=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),l=e.charSpace||this.internal.getCharSpace(),c=e.widths?e.widths:o.metadata.Unicode.widths,h=c.fof?c.fof:1,g=e.kerning?e.kerning:o.metadata.Unicode.kerning,w=g.fof?g.fof:1,_=e.doKerning!==!1,N=0,x=t.length,I=0,P=c[0]||h,R=[];for(r=0;r<x;r++)i=t.charCodeAt(r),typeof o.metadata.widthOfString=="function"?R.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(i))+l*(1e3/s)||0)/1e3):(N=_&&en(g[i])==="object"&&!isNaN(parseInt(g[i][I],10))?g[i][I]/w:0,R.push((c[i]||P)/h+N)),I=i;return R},Zg=Ou.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),i=e.font||this.internal.getFont(),o=e.charSpace||this.internal.getCharSpace();return Ou.processArabic&&(t=Ou.processArabic(t)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(t,r,o)/r:Wd.apply(this,arguments).reduce(function(s,l){return s+l},0)},em=function(t,e,r,i){for(var o=[],s=0,l=t.length,c=0;s!==l&&c+e[s]<r;)c+=e[s],s++;o.push(t.slice(0,s));var h=s;for(c=0;s!==l;)c+e[s]>i&&(o.push(t.slice(h,s)),c=0,h=s),c+=e[s],s++;return h!==s&&o.push(t.slice(h,s)),o},tm=function(t,e,r){r||(r={});var i,o,s,l,c,h,g,w=[],_=[w],N=r.textIndent||0,x=0,I=0,P=t.split(" "),R=Wd.apply(this,[" ",r])[0];if(h=r.lineIndent===-1?P[0].length+2:r.lineIndent||0){var L=Array(h).join(" "),M=[];P.map(function(oe){(oe=oe.split(/\s*\n/)).length>1?M=M.concat(oe.map(function(le,be){return(be&&le.length?`
`:"")+le})):M.push(oe[0])}),P=M,h=Zg.apply(this,[L,r])}for(s=0,l=P.length;s<l;s++){var H=0;if(i=P[s],h&&i[0]==`
`&&(i=i.substr(1),H=1),N+x+(I=(o=Wd.apply(this,[i,r])).reduce(function(oe,le){return oe+le},0))>e||H){if(I>e){for(c=em.apply(this,[i,o,e-(N+x),e]),w.push(c.shift()),w=[c.pop()];c.length;)_.push([c.shift()]);I=o.slice(i.length-(w[0]?w[0].length:0)).reduce(function(oe,le){return oe+le},0)}else w=[i];_.push(w),N=I+h,x=R}else w.push(i),N+=x+I,x=R}return g=h?function(oe,le){return(le?L:"")+oe.join(" ")}:function(oe){return oe.join(" ")},_.map(g)},Ou.splitTextToSize=function(t,e,r){var i,o=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(w){if(w.widths&&w.kerning)return{widths:w.widths,kerning:w.kerning};var _=this.internal.getFont(w.fontName,w.fontStyle);return _.metadata.Unicode?{widths:_.metadata.Unicode.widths||{0:1},kerning:_.metadata.Unicode.kerning||{}}:{font:_.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);i=Array.isArray(t)?t:String(t).split(/\r?\n/);var l=1*this.internal.scaleFactor*e/o;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/o:0,s.lineIndent=r.lineIndent;var c,h,g=[];for(c=0,h=i.length;c<h;c++)g=g.concat(tm.apply(this,[i[c],l,s]));return g},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},i={},o=0;o<e.length;o++)r[e[o]]="0123456789abcdef"[o],i["0123456789abcdef"[o]]=e[o];var s=function(_){return"0x"+parseInt(_,10).toString(16)},l=t.__fontmetrics__.compress=function(_){var N,x,I,P,R=["{"];for(var L in _){if(N=_[L],isNaN(parseInt(L,10))?x="'"+L+"'":(L=parseInt(L,10),x=(x=s(L).slice(2)).slice(0,-1)+i[x.slice(-1)]),typeof N=="number")N<0?(I=s(N).slice(3),P="-"):(I=s(N).slice(2),P=""),I=P+I.slice(0,-1)+i[I.slice(-1)];else{if(en(N)!=="object")throw new Error("Don't know what to do with value type "+en(N)+".");I=l(N)}R.push(x+I)}return R.push("}"),R.join("")},c=t.__fontmetrics__.uncompress=function(_){if(typeof _!="string")throw new Error("Invalid argument passed to uncompress.");for(var N,x,I,P,R={},L=1,M=R,H=[],oe="",le="",be=_.length-1,ne=1;ne<be;ne+=1)(P=_[ne])=="'"?N?(I=N.join(""),N=void 0):N=[]:N?N.push(P):P=="{"?(H.push([M,I]),M={},I=void 0):P=="}"?((x=H.pop())[0][x[1]]=M,I=void 0,M=x[0]):P=="-"?L=-1:I===void 0?r.hasOwnProperty(P)?(oe+=r[P],I=parseInt(oe,16)*L,L=1,oe=""):oe+=P:r.hasOwnProperty(P)?(le+=r[P],M[I]=parseInt(le,16)*L,L=1,I=void 0,le=""):le+=P;return R},h={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},g={Unicode:{Courier:h,"Courier-Bold":h,"Courier-BoldOblique":h,"Courier-Oblique":h,Helvetica:h,"Helvetica-Bold":h,"Helvetica-BoldOblique":h,"Helvetica-Oblique":h,"Times-Roman":h,"Times-Bold":h,"Times-BoldItalic":h,"Times-Italic":h}},w={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(_){var N=_.font,x=w.Unicode[N.postScriptName];x&&(N.metadata.Unicode={},N.metadata.Unicode.widths=x.widths,N.metadata.Unicode.kerning=x.kerning);var I=g.Unicode[N.postScriptName];I&&(N.metadata.Unicode.encoding=I,N.encoding=I.codePages[0])}])}(lr.API),function(t){var e=function(r){for(var i=r.length,o=new Uint8Array(i),s=0;s<i;s++)o[s]=r.charCodeAt(s);return o};t.API.events.push(["addFont",function(r){var i=void 0,o=r.font,s=r.instance;if(!o.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(i=s.existsFileInVFS(o.postScriptName)===!1?s.loadFile(o.postScriptName):s.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(l,c){c=/^\x00\x01\x00\x00/.test(c)?e(c):e(Lc(c)),l.metadata=t.API.TTFFont.open(c),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(o,i)}}])}(lr),function(t){function e(){return(cr.canvg?Promise.resolve(cr.canvg):Bc(()=>import("./index.es-5A2Be__B.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}lr.API.addSvgAsImage=function(r,i,o,s,l,c,h,g){if(isNaN(i)||isNaN(o))throw cn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(l))throw cn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var w=document.createElement("canvas");w.width=s,w.height=l;var _=w.getContext("2d");_.fillStyle="#fff",_.fillRect(0,0,w.width,w.height);var N={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},x=this;return e().then(function(I){return I.fromString(_,r,N)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(I){return I.render(N)}).then(function(){x.addImage(w.toDataURL("image/jpeg",1),i,o,s,l,h,g)})}}(),lr.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var o=0;o<this.internal.pages[i].length;o++)this.internal.pages[i][o]=this.internal.pages[i][o].replace(e,r);return this},lr.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var i,o,s,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(l),h=[],g=0,w=0,_=0;function N(I,P){var R,L=!1;for(R=0;R<I.length;R+=1)I[R]===P&&(L=!0);return L}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var x=c.length;for(_=0;_<x;_+=1)r[c[_]].value=r[c[_]].defaultValue,r[c[_]].explicitSet=!1}if(en(t)==="object"){for(o in t)if(s=t[o],N(c,o)&&s!==void 0){if(r[o].type==="boolean"&&typeof s=="boolean")r[o].value=s;else if(r[o].type==="name"&&N(r[o].valueSet,s))r[o].value=s;else if(r[o].type==="integer"&&Number.isInteger(s))r[o].value=s;else if(r[o].type==="array"){for(g=0;g<s.length;g+=1)if(i=!0,s[g].length===1&&typeof s[g][0]=="number")h.push(String(s[g]-1));else if(s[g].length>1){for(w=0;w<s[g].length;w+=1)typeof s[g][w]!="number"&&(i=!1);i===!0&&h.push([s[g][0]-1,s[g][1]-1].join(" "))}r[o].value="["+h.join(" ")+"]"}else r[o].value=r[o].defaultValue;r[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var I,P=[];for(I in r)r[I].explicitSet===!0&&(r[I].type==="name"?P.push("/"+I+" /"+r[I].value):P.push("/"+I+" "+r[I].value));P.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+P.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(i)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),g=s.length+l.length+c.length+o.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+g+" >>"),this.internal.write("stream"),this.internal.write(o+s+l+c+h),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(i,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(lr.API),function(t){var e=t.API,r=e.pdfEscape16=function(s,l){for(var c,h=l.metadata.Unicode.widths,g=["","0","00","000","0000"],w=[""],_=0,N=s.length;_<N;++_){if(c=l.metadata.characterToGlyph(s.charCodeAt(_)),l.metadata.glyIdsUsed.push(c),l.metadata.toUnicode[c]=s.charCodeAt(_),h.indexOf(c)==-1&&(h.push(c),h.push([parseInt(l.metadata.widthOfGlyph(c),10)])),c=="0")return w.join("");c=c.toString(16),w.push(g[4-c.length],c)}return w.join("")},i=function(s){var l,c,h,g,w,_,N;for(w=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],_=0,N=(c=Object.keys(s).sort(function(x,I){return x-I})).length;_<N;_++)l=c[_],h.length>=100&&(w+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),s[l]!==void 0&&s[l]!==null&&typeof s[l].toString=="function"&&(g=("0000"+s[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),h.push("<"+l+"><"+g+">"));return h.length&&(w+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),w+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(l){var c=l.font,h=l.out,g=l.newObject,w=l.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="Identity-H"){for(var _=c.metadata.Unicode.widths,N=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),x="",I=0;I<N.length;I++)x+=String.fromCharCode(N[I]);var P=g();w({data:x,addLength1:!0,objectId:P}),h("endobj");var R=g();w({data:i(c.metadata.toUnicode),addLength1:!0,objectId:R}),h("endobj");var L=g();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+Uu(c.fontName)),h("/FontFile2 "+P+" 0 R"),h("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),h("/Flags "+c.metadata.flags),h("/StemV "+c.metadata.stemV),h("/ItalicAngle "+c.metadata.italicAngle),h("/Ascent "+c.metadata.ascender),h("/Descent "+c.metadata.decender),h("/CapHeight "+c.metadata.capHeight),h(">>"),h("endobj");var M=g();h("<<"),h("/Type /Font"),h("/BaseFont /"+Uu(c.fontName)),h("/FontDescriptor "+L+" 0 R"),h("/W "+t.API.PDFObject.convert(_)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+c.encoding+")"),h(">>"),h(">>"),h("endobj"),c.objectNumber=g(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+R+" 0 R"),h("/BaseFont /"+Uu(c.fontName)),h("/Encoding /"+c.encoding),h("/DescendantFonts ["+M+" 0 R]"),h(">>"),h("endobj"),c.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(l){var c=l.font,h=l.out,g=l.newObject,w=l.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var _=c.metadata.rawData,N="",x=0;x<_.length;x++)N+=String.fromCharCode(_[x]);var I=g();w({data:N,addLength1:!0,objectId:I}),h("endobj");var P=g();w({data:i(c.metadata.toUnicode),addLength1:!0,objectId:P}),h("endobj");var R=g();h("<<"),h("/Descent "+c.metadata.decender),h("/CapHeight "+c.metadata.capHeight),h("/StemV "+c.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+I+" 0 R"),h("/Flags 96"),h("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),h("/FontName /"+Uu(c.fontName)),h("/ItalicAngle "+c.metadata.italicAngle),h("/Ascent "+c.metadata.ascender),h(">>"),h("endobj"),c.objectNumber=g();for(var L=0;L<c.metadata.hmtx.widths.length;L++)c.metadata.hmtx.widths[L]=parseInt(c.metadata.hmtx.widths[L]*(1e3/c.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+P+" 0 R/BaseFont/"+Uu(c.fontName)+"/FontDescriptor "+R+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),h("endobj"),c.isAlreadyPutted=!0}})(s)}]);var o=function(s){var l,c=s.text||"",h=s.x,g=s.y,w=s.options||{},_=s.mutex||{},N=_.pdfEscape,x=_.activeFontKey,I=_.fonts,P=x,R="",L=0,M="",H=I[P].encoding;if(I[P].encoding!=="Identity-H")return{text:c,x:h,y:g,options:w,mutex:_};for(M=c,P=x,Array.isArray(c)&&(M=c[0]),L=0;L<M.length;L+=1)I[P].metadata.hasOwnProperty("cmap")&&(l=I[P].metadata.cmap.unicode.codeMap[M[L].charCodeAt(0)]),l||M[L].charCodeAt(0)<256&&I[P].metadata.hasOwnProperty("Unicode")?R+=M[L]:R+="";var oe="";return parseInt(P.slice(1))<14||H==="WinAnsiEncoding"?oe=N(R,P).split("").map(function(le){return le.charCodeAt(0).toString(16)}).join(""):H==="Identity-H"&&(oe=r(R,I[P])),_.isHex=!0,{text:oe,x:h,y:g,options:w,mutex:_}};e.events.push(["postProcessText",function(s){var l=s.text||"",c=[],h={text:l,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(l)){var g=0;for(g=0;g<l.length;g+=1)Array.isArray(l[g])&&l[g].length===3?c.push([o(Object.assign({},h,{text:l[g][0]})).text,l[g][1],l[g][2]]):c.push(o(Object.assign({},h,{text:l[g]})).text);s.text=c}else s.text=o(Object.assign({},h,{text:l})).text}])}(lr),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,i){return e.call(this),this.internal.vFS[r]=i,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(lr.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(i){var o,s,l,c,h,g,w,_=e,N=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],I={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},P={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},R=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],L=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),M=!1,H=0;this.__bidiEngine__={};var oe=function(V){var Y=V.charCodeAt(),pe=Y>>8,te=P[pe];return te!==void 0?_[256*te+(255&Y)]:pe===252||pe===253?"AL":L.test(pe)?"L":pe===8?"R":"N"},le=function(V){for(var Y,pe=0;pe<V.length;pe++){if((Y=oe(V.charAt(pe)))==="L")return!1;if(Y==="R")return!0}return!1},be=function(V,Y,pe,te){var Ue,Me,ze,de,je=Y[te];switch(je){case"L":case"R":M=!1;break;case"N":case"AN":break;case"EN":M&&(je="AN");break;case"AL":M=!0,je="R";break;case"WS":je="N";break;case"CS":te<1||te+1>=Y.length||(Ue=pe[te-1])!=="EN"&&Ue!=="AN"||(Me=Y[te+1])!=="EN"&&Me!=="AN"?je="N":M&&(Me="AN"),je=Me===Ue?Me:"N";break;case"ES":je=(Ue=te>0?pe[te-1]:"B")==="EN"&&te+1<Y.length&&Y[te+1]==="EN"?"EN":"N";break;case"ET":if(te>0&&pe[te-1]==="EN"){je="EN";break}if(M){je="N";break}for(ze=te+1,de=Y.length;ze<de&&Y[ze]==="ET";)ze++;je=ze<de&&Y[ze]==="EN"?"EN":"N";break;case"NSM":if(l&&!c){for(de=Y.length,ze=te+1;ze<de&&Y[ze]==="NSM";)ze++;if(ze<de){var _e=V[te],ae=_e>=1425&&_e<=2303||_e===64286;if(Ue=Y[ze],ae&&(Ue==="R"||Ue==="AL")){je="R";break}}}je=te<1||(Ue=Y[te-1])==="B"?"N":pe[te-1];break;case"B":M=!1,o=!0,je=H;break;case"S":s=!0,je="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":M=!1;break;case"BN":je="N"}return je},ne=function(V,Y,pe){var te=V.split("");return pe&&G(te,pe,{hiLevel:H}),te.reverse(),Y&&Y.reverse(),te.join("")},G=function(V,Y,pe){var te,Ue,Me,ze,de,je=-1,_e=V.length,ae=0,O=[],$=H?x:N,X=[];for(M=!1,o=!1,s=!1,Ue=0;Ue<_e;Ue++)X[Ue]=oe(V[Ue]);for(Me=0;Me<_e;Me++){if(de=ae,O[Me]=be(V,X,O,Me),te=240&(ae=$[de][I[O[Me]]]),ae&=15,Y[Me]=ze=$[ae][5],te>0)if(te===16){for(Ue=je;Ue<Me;Ue++)Y[Ue]=1;je=-1}else je=-1;if($[ae][6])je===-1&&(je=Me);else if(je>-1){for(Ue=je;Ue<Me;Ue++)Y[Ue]=ze;je=-1}X[Me]==="B"&&(Y[Me]=0),pe.hiLevel|=ze}s&&function(ie,he,ye){for(var Ie=0;Ie<ye;Ie++)if(ie[Ie]==="S"){he[Ie]=H;for(var ge=Ie-1;ge>=0&&ie[ge]==="WS";ge--)he[ge]=H}}(X,Y,_e)},fe=function(V,Y,pe,te,Ue){if(!(Ue.hiLevel<V)){if(V===1&&H===1&&!o)return Y.reverse(),void(pe&&pe.reverse());for(var Me,ze,de,je,_e=Y.length,ae=0;ae<_e;){if(te[ae]>=V){for(de=ae+1;de<_e&&te[de]>=V;)de++;for(je=ae,ze=de-1;je<ze;je++,ze--)Me=Y[je],Y[je]=Y[ze],Y[ze]=Me,pe&&(Me=pe[je],pe[je]=pe[ze],pe[ze]=Me);ae=de}ae++}}},Te=function(V,Y,pe){var te=V.split(""),Ue={hiLevel:H};return pe||(pe=[]),G(te,pe,Ue),function(Me,ze,de){if(de.hiLevel!==0&&w)for(var je,_e=0;_e<Me.length;_e++)ze[_e]===1&&(je=R.indexOf(Me[_e]))>=0&&(Me[_e]=R[je+1])}(te,pe,Ue),fe(2,te,Y,pe,Ue),fe(1,te,Y,pe,Ue),te.join("")};return this.__bidiEngine__.doBidiReorder=function(V,Y,pe){if(function(Ue,Me){if(Me)for(var ze=0;ze<Ue.length;ze++)Me[ze]=ze;c===void 0&&(c=le(Ue)),g===void 0&&(g=le(Ue))}(V,Y),l||!h||g)if(l&&h&&c^g)H=c?1:0,V=ne(V,Y,pe);else if(!l&&h&&g)H=c?1:0,V=Te(V,Y,pe),V=ne(V,Y);else if(!l||c||h||g){if(l&&!h&&c^g)V=ne(V,Y),c?(H=0,V=Te(V,Y,pe)):(H=1,V=Te(V,Y,pe),V=ne(V,Y));else if(l&&c&&!h&&g)H=1,V=Te(V,Y,pe),V=ne(V,Y);else if(!l&&!h&&c^g){var te=w;c?(H=1,V=Te(V,Y,pe),H=0,w=!1,V=Te(V,Y,pe),w=te):(H=0,V=Te(V,Y,pe),V=ne(V,Y),H=1,w=!1,V=Te(V,Y,pe),w=te,V=ne(V,Y))}}else H=0,V=Te(V,Y,pe);else H=c?1:0,V=Te(V,Y,pe);return V},this.__bidiEngine__.setOptions=function(V){V&&(l=V.isInputVisual,h=V.isOutputVisual,c=V.isInputRtl,g=V.isOutputRtl,w=V.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(i){var o=i.text;i.x,i.y;var s=i.options||{};i.mutex,s.lang;var l=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(o)==="[object Array]"){var c=0;for(l=[],c=0;c<o.length;c+=1)Object.prototype.toString.call(o[c])==="[object Array]"?l.push([r.doBidiReorder(o[c][0]),o[c][1],o[c][2]]):l.push([r.doBidiReorder(o[c])]);i.text=l}else i.text=r.doBidiReorder(o);r.setOptions({isInputVisual:!0})}])}(lr),lr.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new Fl(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Jw(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Rw(this.contents),this.head=new Fw(this),this.name=new zw(this),this.cmap=new Bv(this),this.toUnicode={},this.hhea=new Mw(this),this.maxp=new $w(this),this.hmtx=new Vw(this),this.post=new qw(this),this.os2=new Bw(this),this.loca=new Gw(this),this.glyf=new Ww(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,i,o,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,c,h,g;for(g=[],l=0,c=(h=this.bbox).length;l<c;l++)e=h[l],g.push(Math.round(e*this.scaleFactor));return g}).call(this),this.stemV=0,this.post.exists?(i=255&(o=this.post.italic_angle),(32768&(r=o>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,i){var o,s,l,c;for(l=0,s=0,c=(e=""+e).length;0<=c?s<c:s>c;s=0<=c?++s:--s)o=e.charCodeAt(s),l+=this.widthOfGlyph(this.characterToGlyph(o))+i*(1e3/r)||0;return l*(r/1e3)},t.prototype.lineHeight=function(e,r){var i;return r==null&&(r=!1),i=r?this.lineGap:0,(this.ascender+i-this.decender)/1e3*e},t}();var fo,Fl=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,i;for(i=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)i[r]=String.fromCharCode(this.readByte());return i.join("")},t.prototype.writeString=function(e){var r,i,o;for(o=[],r=0,i=e.length;0<=i?r<i:r>i;r=0<=i?++r:--r)o.push(this.writeByte(e.charCodeAt(r)));return o},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,i,o,s,l,c,h;return e=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),s=this.readByte(),l=this.readByte(),c=this.readByte(),h=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^i)+4294967296*(255^o)+16777216*(255^s)+65536*(255^l)+256*(255^c)+(255^h)+1):72057594037927940*e+281474976710656*r+1099511627776*i+4294967296*o+16777216*s+65536*l+256*c+h},t.prototype.writeLongLong=function(e){var r,i;return r=Math.floor(e/4294967296),i=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,i;for(r=[],i=0;0<=e?i<e:i>e;i=0<=e?++i:--i)r.push(this.readByte());return r},t.prototype.write=function(e){var r,i,o,s;for(s=[],i=0,o=e.length;i<o;i++)r=e[i],s.push(this.writeByte(r));return s},t}(),Rw=function(){var t;function e(r){var i,o,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},o=0,s=this.tableCount;0<=s?o<s:o>s;o=0<=s?++o:--o)i={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[i.tag]=i}return e.prototype.encode=function(r){var i,o,s,l,c,h,g,w,_,N,x,I,P;for(P in x=Object.keys(r).length,h=Math.log(2),_=16*Math.floor(Math.log(x)/h),l=Math.floor(_/h),w=16*x-_,(o=new Fl).writeInt(this.scalarType),o.writeShort(x),o.writeShort(_),o.writeShort(l),o.writeShort(w),s=16*x,g=o.pos+s,c=null,I=[],r)for(N=r[P],o.writeString(P),o.writeInt(t(N)),o.writeInt(g),o.writeInt(N.length),I=I.concat(N),P==="head"&&(c=g),g+=N.length;g%4;)I.push(0),g++;return o.write(I),i=2981146554-t(o.data),o.pos=c+8,o.writeUInt32(i),o.data},t=function(r){var i,o,s,l;for(r=qv.call(r);r.length%4;)r.push(0);for(s=new Fl(r),o=0,i=0,l=r.length;i<l;i=i+=4)o+=s.readUInt32();return 4294967295&o},e}(),Dw={}.hasOwnProperty,To=function(t,e){for(var r in e)Dw.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};fo=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var Fw=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return To(e,fo),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var i;return(i=new Fl).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(r),i.writeShort(this.glyphDataFormat),i.data},e}(),im=function(){function t(e,r){var i,o,s,l,c,h,g,w,_,N,x,I,P,R,L,M,H;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),_=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=e.readByte();break;case 4:for(x=e.readUInt16(),N=x/2,e.pos+=6,s=function(){var oe,le;for(le=[],h=oe=0;0<=N?oe<N:oe>N;h=0<=N?++oe:--oe)le.push(e.readUInt16());return le}(),e.pos+=2,P=function(){var oe,le;for(le=[],h=oe=0;0<=N?oe<N:oe>N;h=0<=N?++oe:--oe)le.push(e.readUInt16());return le}(),g=function(){var oe,le;for(le=[],h=oe=0;0<=N?oe<N:oe>N;h=0<=N?++oe:--oe)le.push(e.readUInt16());return le}(),w=function(){var oe,le;for(le=[],h=oe=0;0<=N?oe<N:oe>N;h=0<=N?++oe:--oe)le.push(e.readUInt16());return le}(),o=(this.length-e.pos+this.offset)/2,c=function(){var oe,le;for(le=[],h=oe=0;0<=o?oe<o:oe>o;h=0<=o?++oe:--oe)le.push(e.readUInt16());return le}(),h=L=0,H=s.length;L<H;h=++L)for(R=s[h],i=M=I=P[h];I<=R?M<=R:M>=R;i=I<=R?++M:--M)w[h]===0?l=i+g[h]:(l=c[w[h]/2+(i-I)-(N-h)]||0)!==0&&(l+=g[h]),this.codeMap[i]=65535&l}e.pos=_}return t.encode=function(e,r){var i,o,s,l,c,h,g,w,_,N,x,I,P,R,L,M,H,oe,le,be,ne,G,fe,Te,V,Y,pe,te,Ue,Me,ze,de,je,_e,ae,O,$,X,ie,he,ye,Ie,ge,rt,at,it;switch(te=new Fl,l=Object.keys(e).sort(function(bt,qt){return bt-qt}),r){case"macroman":for(P=0,R=function(){var bt=[];for(I=0;I<256;++I)bt.push(0);return bt}(),M={0:0},s={},Ue=0,je=l.length;Ue<je;Ue++)M[ge=e[o=l[Ue]]]==null&&(M[ge]=++P),s[o]={old:e[o],new:M[e[o]]},R[o]=M[e[o]];return te.writeUInt16(1),te.writeUInt16(0),te.writeUInt32(12),te.writeUInt16(0),te.writeUInt16(262),te.writeUInt16(0),te.write(R),{charMap:s,subtable:te.data,maxGlyphID:P+1};case"unicode":for(Y=[],_=[],H=0,M={},i={},L=g=null,Me=0,_e=l.length;Me<_e;Me++)M[le=e[o=l[Me]]]==null&&(M[le]=++H),i[o]={old:le,new:M[le]},c=M[le]-o,L!=null&&c===g||(L&&_.push(L),Y.push(o),g=c),L=o;for(L&&_.push(L),_.push(65535),Y.push(65535),Te=2*(fe=Y.length),G=2*Math.pow(Math.log(fe)/Math.LN2,2),N=Math.log(G/2)/Math.LN2,ne=2*fe-G,h=[],be=[],x=[],I=ze=0,ae=Y.length;ze<ae;I=++ze){if(V=Y[I],w=_[I],V===65535){h.push(0),be.push(0);break}if(V-(pe=i[V].new)>=32768)for(h.push(0),be.push(2*(x.length+fe-I)),o=de=V;V<=w?de<=w:de>=w;o=V<=w?++de:--de)x.push(i[o].new);else h.push(pe-V),be.push(0)}for(te.writeUInt16(3),te.writeUInt16(1),te.writeUInt32(12),te.writeUInt16(4),te.writeUInt16(16+8*fe+2*x.length),te.writeUInt16(0),te.writeUInt16(Te),te.writeUInt16(G),te.writeUInt16(N),te.writeUInt16(ne),ye=0,O=_.length;ye<O;ye++)o=_[ye],te.writeUInt16(o);for(te.writeUInt16(0),Ie=0,$=Y.length;Ie<$;Ie++)o=Y[Ie],te.writeUInt16(o);for(rt=0,X=h.length;rt<X;rt++)c=h[rt],te.writeUInt16(c);for(at=0,ie=be.length;at<ie;at++)oe=be[at],te.writeUInt16(oe);for(it=0,he=x.length;it<he;it++)P=x[it],te.writeUInt16(P);return{charMap:i,subtable:te.data,maxGlyphID:H+1}}},t}(),Bv=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return To(e,fo),e.prototype.tag="cmap",e.prototype.parse=function(r){var i,o,s;for(r.pos=this.offset,this.version=r.readUInt16(),s=r.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)i=new im(r,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},e.encode=function(r,i){var o,s;return i==null&&(i="macroman"),o=im.encode(r,i),(s=new Fl).writeUInt16(0),s.writeUInt16(1),o.table=s.data.concat(o.subtable),o},e}(),Mw=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return To(e,fo),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e}(),Bw=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return To(e,fo),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var i,o;for(o=[],i=0;i<10;++i)o.push(r.readByte());return o}(),this.charRange=function(){var i,o;for(o=[],i=0;i<4;++i)o.push(r.readInt());return o}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var i,o;for(o=[],i=0;i<2;i=++i)o.push(r.readInt());return o}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e}(),qw=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return To(e,fo),e.prototype.tag="post",e.prototype.parse=function(r){var i,o,s;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var l;for(o=r.readUInt16(),this.glyphNameIndex=[],l=0;0<=o?l<o:l>o;l=0<=o?++l:--l)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],s=[];r.pos<this.offset+this.length;)i=r.readByte(),s.push(this.names.push(r.readString(i)));return s;case 151552:return o=r.readUInt16(),this.offsets=r.read(o);case 196608:break;case 262144:return this.map=(function(){var c,h,g;for(g=[],l=c=0,h=this.file.maxp.numGlyphs;0<=h?c<h:c>h;l=0<=h?++c:--c)g.push(r.readUInt32());return g}).call(this)}},e}(),Uw=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},zw=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return To(e,fo),e.prototype.tag="name",e.prototype.parse=function(r){var i,o,s,l,c,h,g,w,_,N,x;for(r.pos=this.offset,r.readShort(),i=r.readShort(),h=r.readShort(),o=[],l=0;0<=i?l<i:l>i;l=0<=i?++l:--l)o.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+h+r.readShort()});for(g={},l=_=0,N=o.length;_<N;l=++_)s=o[l],r.pos=s.offset,w=r.readString(s.length),c=new Uw(w,s),g[x=s.nameID]==null&&(g[x]=[]),g[s.nameID].push(c);this.strings=g,this.copyright=g[0],this.fontFamily=g[1],this.fontSubfamily=g[2],this.uniqueSubfamily=g[3],this.fontName=g[4],this.version=g[5];try{this.postscriptName=g[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=g[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=g[7],this.manufacturer=g[8],this.designer=g[9],this.description=g[10],this.vendorUrl=g[11],this.designerUrl=g[12],this.license=g[13],this.licenseUrl=g[14],this.preferredFamily=g[15],this.preferredSubfamily=g[17],this.compatibleFull=g[18],this.sampleText=g[19]},e}(),$w=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return To(e,fo),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e}(),Vw=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return To(e,fo),e.prototype.tag="hmtx",e.prototype.parse=function(r){var i,o,s,l,c,h,g;for(r.pos=this.offset,this.metrics=[],i=0,h=this.file.hhea.numberOfMetrics;0<=h?i<h:i>h;i=0<=h?++i:--i)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var w,_;for(_=[],i=w=0;0<=s?w<s:w>s;i=0<=s?++w:--w)_.push(r.readInt16());return _}(),this.widths=(function(){var w,_,N,x;for(x=[],w=0,_=(N=this.metrics).length;w<_;w++)l=N[w],x.push(l.advance);return x}).call(this),o=this.widths[this.widths.length-1],g=[],i=c=0;0<=s?c<s:c>s;i=0<=s?++c:--c)g.push(this.widths.push(o));return g},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e}(),qv=[].slice,Ww=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return To(e,fo),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var i,o,s,l,c,h,g,w,_,N;return r in this.cache?this.cache[r]:(l=this.file.loca,i=this.file.contents,o=l.indexOf(r),(s=l.lengthOf(r))===0?this.cache[r]=null:(i.pos=this.offset+o,c=(h=new Fl(i.read(s))).readShort(),w=h.readShort(),N=h.readShort(),g=h.readShort(),_=h.readShort(),this.cache[r]=c===-1?new Kw(h,w,N,g,_):new Hw(h,c,w,N,g,_),this.cache[r]))},e.prototype.encode=function(r,i,o){var s,l,c,h,g;for(c=[],l=[],h=0,g=i.length;h<g;h++)s=r[i[h]],l.push(c.length),s&&(c=c.concat(s.encode(o)));return l.push(c.length),{table:c,offsets:l}},e}(),Hw=function(){function t(e,r,i,o,s,l){this.raw=e,this.numberOfContours=r,this.xMin=i,this.yMin=o,this.xMax=s,this.yMax=l,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Kw=function(){function t(e,r,i,o,s){var l,c;for(this.raw=e,this.xMin=r,this.yMin=i,this.xMax=o,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;c=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&c;)l.pos+=1&c?4:2,128&c?l.pos+=8:64&c?l.pos+=4:8&c&&(l.pos+=2)}return t.prototype.encode=function(){var e,r,i;for(r=new Fl(qv.call(this.raw.data)),e=0,i=this.glyphIDs.length;e<i;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),Gw=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return To(e,fo),e.prototype.tag="loca",e.prototype.parse=function(r){var i,o;return r.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var s,l;for(l=[],o=0,s=this.length;o<s;o+=2)l.push(2*r.readUInt16());return l}).call(this):(function(){var s,l;for(l=[],o=0,s=this.length;o<s;o+=4)l.push(r.readUInt32());return l}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,i){for(var o=new Uint32Array(this.offsets.length),s=0,l=0,c=0;c<o.length;++c)if(o[c]=s,l<i.length&&i[l]==c){++l,o[c]=s;var h=this.offsets[c],g=this.offsets[c+1]-h;g>0&&(s+=g)}for(var w=new Array(4*o.length),_=0;_<o.length;++_)w[4*_+3]=255&o[_],w[4*_+2]=(65280&o[_])>>8,w[4*_+1]=(16711680&o[_])>>16,w[4*_]=(4278190080&o[_])>>24;return w},e}(),Jw=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,i,o,s;for(r in o=this.font.cmap.tables[0].codeMap,e={},s=this.subset)i=s[r],e[r]=o[i];return e},t.prototype.glyphsFor=function(e){var r,i,o,s,l,c,h;for(o={},l=0,c=e.length;l<c;l++)o[s=e[l]]=this.font.glyf.glyphFor(s);for(s in r=[],o)(i=o[s])!=null&&i.compound&&r.push.apply(r,i.glyphIDs);if(r.length>0)for(s in h=this.glyphsFor(r))i=h[s],o[s]=i;return o},t.prototype.encode=function(e,r){var i,o,s,l,c,h,g,w,_,N,x,I,P,R,L;for(o in i=Bv.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(e),x={0:0},L=i.charMap)x[(h=L[o]).old]=h.new;for(I in N=i.maxGlyphID,l)I in x||(x[I]=N++);return w=function(M){var H,oe;for(H in oe={},M)oe[M[H]]=H;return oe}(x),_=Object.keys(w).sort(function(M,H){return M-H}),P=function(){var M,H,oe;for(oe=[],M=0,H=_.length;M<H;M++)c=_[M],oe.push(w[c]);return oe}(),s=this.font.glyf.encode(l,P,x),g=this.font.loca.encode(s.offsets,P),R={cmap:this.font.cmap.raw(),glyf:s.table,loca:g,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(R["OS/2"]=this.font.os2.raw()),this.font.directory.encode(R)},t}();lr.API.PDFObject=function(){var t;function e(){}return t=function(r,i){return(Array(i+1).join("0")+r).slice(-i)},e.convert=function(r){var i,o,s,l;if(Array.isArray(r))return"["+function(){var c,h,g;for(g=[],c=0,h=r.length;c<h;c++)i=r[c],g.push(e.convert(i));return g}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(o in s=["<<"],r)l=r[o],s.push("/"+o+" "+e.convert(l));return s.push(">>"),s.join(`
`)}return""+r},e}();const Uv=t=>{const e=new lr,r=[3,152,158],i=[31,41,55],o=[156,163,175];e.setFillColor(...r),e.rect(0,0,210,40,"F"),e.setTextColor(255,255,255),e.setFontSize(24),e.setFont("helvetica","bold"),e.text("Agence de Voyage",20,25),e.setTextColor(...i),e.setFontSize(28),e.setFont("helvetica","bold"),e.text("INVOICE",20,60),e.setFontSize(12),e.setFont("helvetica","normal"),e.text(`Invoice Number: ${t.invoiceNumber}`,20,75),e.text(`Date: ${Rl(t.createdAt||new Date().toISOString())}`,20,85),e.text(`Due Date: ${Rl(t.dueDate||new Date().toISOString())}`,20,95),e.setFontSize(10),e.setTextColor(o[0],o[1],o[2]),e.text("123 Travel Street",140,60),e.text("New York, NY 10001",140,70),e.text("Phone: (555) 123-4567",140,80),e.text("Email: info@agencedevoyage.com",140,90);const s={draft:[156,163,175],sent:[3,152,158],paid:[34,197,94],overdue:[239,68,68]};if(e.setFillColor(...s[t.status]||s.draft),e.roundedRect(140,95,30,8,2,2,"F"),e.setTextColor(255,255,255),e.setFontSize(8),e.setFont("helvetica","bold"),e.text(t.status.toUpperCase(),142,100),e.setTextColor(...i),e.setFontSize(14),e.setFont("helvetica","bold"),e.text("Bill To:",20,120),e.setFontSize(12),e.setFont("helvetica","bold"),e.text(t.client?.name||"Unknown Client",20,135),e.setFont("helvetica","normal"),e.text(t.client?.email||"",20,145),t.client?.phone&&e.text(t.client.phone,20,155),t.client?.address){const _=e.splitTextToSize(t.client.address,80);e.text(_,20,165)}e.setFontSize(14),e.setFont("helvetica","bold"),e.text("Agent:",110,120),e.setFontSize(12),e.text(t.agentName,110,135),e.setFont("helvetica","normal"),e.text("Travel Agent",110,145);let l=190;e.setFillColor(249,250,251),e.rect(20,l-10,170,15,"F"),e.setTextColor(...i),e.setFontSize(10),e.setFont("helvetica","bold"),e.text("Description",25,l-2),e.text("Qty",120,l-2),e.text("Unit Price",140,l-2),e.text("Total",170,l-2),e.setFont("helvetica","normal"),l+=10,(t.items||[]).forEach((_,N)=>{l>250&&(e.addPage(),l=30),N%2===0&&(e.setFillColor(249,250,251),e.rect(20,l-8,170,12,"F")),e.setTextColor(...i);const x=e.splitTextToSize(_.description,90);e.text(x,25,l),e.text(_.quantity.toString(),125,l),e.text(pi(_.unitPrice||0),145,l),e.text(pi(_.total),175,l),l+=Math.max(12,x.length*5)}),l+=20,l>230&&(e.addPage(),l=30);const c=130;if(e.setFillColor(249,250,251),e.rect(c-10,l-10,70,50,"F"),e.setTextColor(...i),e.setFontSize(12),e.setFont("helvetica","normal"),e.text("Subtotal:",c,l),e.text(pi(t.subtotal||0),c+40,l),e.text("Tax:",c,l+12),e.text(pi(t.tax||0),c+40,l+12),e.setFont("helvetica","bold"),e.setFontSize(14),e.text("Total:",c,l+28),e.setTextColor(...r),e.text(pi(t.total||0),c+40,l+28),l+=60,l>240&&(e.addPage(),l=30),e.setFillColor(249,250,251),e.rect(20,l-10,170,45,"F"),e.setTextColor(...i),e.setFontSize(14),e.setFont("helvetica","bold"),e.text("Umrah Details",25,l),e.setFontSize(10),e.setFont("helvetica","normal"),t.passportNumber&&e.text(`Passport: ${t.passportNumber}`,25,l+10),t.flightNumber&&e.text(`Flight: ${t.flightNumber}`,25,l+20),t.departureDate&&e.text(`Departure: ${Rl(t.departureDate)}`,25,l+30),t.roomType&&e.text(`Room Type: ${t.roomType}`,110,l+10),t.visaStatus&&e.text(`Visa Status: ${t.visaStatus}`,110,l+20),t.gender&&e.text(`Gender: ${t.gender}`,110,l+30),l+=45,t.notes){l>240&&(e.addPage(),l=30),e.setTextColor(...i),e.setFontSize(12),e.setFont("helvetica","bold"),e.text("Notes:",20,l),e.setFont("helvetica","normal"),e.setFontSize(10);const _=e.splitTextToSize(t.notes,170);e.text(_,20,l+10)}const h=e.internal.pageSize.height;e.setTextColor(...o),e.setFontSize(10),e.setFont("helvetica","normal"),e.text("Thank you for choosing Agence de Voyage!",20,h-30),e.text("For questions about this invoice, please contact us at billing@agencedevoyage.com",20,h-20);const g=t.client?.name||"Client",w=`Invoice_${t.invoiceNumber}_${g.replace(/\s+/g,"_")}.pdf`;e.save(w)},gh=({invoices:t,onView:e,onEdit:r,onDelete:i,title:o="Recent Invoices"})=>{const s=w=>{console.log("View button clicked for invoice:",w.id),e(w)},l=w=>{console.log("Edit button clicked for invoice:",w.id),r(w)},c=w=>{console.log("Delete button clicked for invoice:",w.id),w.id&&i(w.id)},h=w=>{console.log("Download button clicked for invoice:",w.id);try{Uv(w)}catch(_){console.error("Error generating PDF:",_),alert("Failed to generate PDF. Please try again.")}},g=w=>{switch(w){case"draft":return y.jsx(up,{className:"h-4 w-4"});case"sent":return y.jsx(Yp,{className:"h-4 w-4"});case"paid":return y.jsx(uh,{className:"h-4 w-4"});case"overdue":return y.jsx(Zc,{className:"h-4 w-4"});default:return y.jsx(lv,{className:"h-4 w-4"})}};return t.length===0?y.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 text-center",children:[y.jsx("div",{className:"text-gray-400 mb-4",children:y.jsx("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),y.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No invoices found"}),y.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Create your first invoice to get started."})]}):y.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden",children:[y.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:o}),y.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.length," invoice",t.length!==1?"s":""]})]}),y.jsx("div",{className:"overflow-x-auto",children:y.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[y.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:y.jsxs("tr",{children:[y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Invoice"}),y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Client"}),y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Agent"}),y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amount"}),y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),y.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),y.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:t.map(w=>y.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150",children:[y.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:y.jsxs("div",{children:[y.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:w.invoiceNumber||`INV-${String(w.id||"").substring(0,8)}`}),y.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Due: ",w.dueDate?Rl(w.dueDate):Rl(w.createdAt)]})]})}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:y.jsxs("div",{className:"flex items-center space-x-3",children:[y.jsx("div",{className:"p-2 rounded-full",style:{backgroundColor:"#f0fdfc"},children:y.jsx(cu,{className:"h-4 w-4",style:{color:"#03989e"}})}),y.jsxs("div",{children:[y.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:w.client?.name||w.clientName}),y.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:w.client?.email||w.clientEmail})]})]})}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:y.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:w.agentName||"Unknown Agent"})}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:y.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:pi(w.total)})}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:y.jsx("div",{className:"flex items-center space-x-2",children:y.jsxs("span",{className:`inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full ${mv(w.status)}`,children:[g(w.status),y.jsx("span",{className:"ml-1",children:w.status.charAt(0).toUpperCase()+w.status.slice(1)})]})})}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:Rl(w.createdAt)}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:y.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[y.jsx("button",{onClick:_=>{_.preventDefault(),_.stopPropagation(),s(w)},className:"p-2 rounded-lg transition-all duration-150 hover:shadow-md",style:{color:"#03989e",backgroundColor:"transparent"},onMouseEnter:_=>{_.currentTarget.style.backgroundColor="#f0fdfc"},onMouseLeave:_=>{_.currentTarget.style.backgroundColor="transparent"},title:"View & Manage Invoice",children:y.jsx(uv,{className:"h-4 w-4"})}),y.jsx("button",{onClick:_=>{_.preventDefault(),_.stopPropagation(),l(w)},className:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-150",title:"Edit Invoice",children:y.jsx(up,{className:"h-4 w-4"})}),y.jsx("button",{onClick:_=>{_.preventDefault(),_.stopPropagation(),h(w)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 p-2 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 transition-all duration-150",title:"Download PDF",children:y.jsx(Eh,{className:"h-4 w-4"})}),y.jsx("button",{onClick:_=>{_.preventDefault(),_.stopPropagation(),c(w)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-all duration-150",title:"Delete Invoice",children:y.jsx(hh,{className:"h-4 w-4"})})]})})]},w.id))})]})})]})},zv=({invoice:t,onClose:e,onEdit:r,onStatusUpdate:i})=>{const[o,s]=J.useState(!1),[l,c]=J.useState(!1),h=async _=>{if(i){s(!0);try{await i(t.id,_)}catch(N){console.error("Error updating status:",N),alert("Failed to update invoice status. Please try again.")}finally{s(!1)}}},g=async()=>{c(!0);try{Uv(t)}catch(_){console.error("Error generating PDF:",_),alert("Failed to generate PDF. Please try again.")}finally{c(!1)}},w=()=>{const _=[];switch(t.status){case"draft":_.push(y.jsxs("button",{onClick:()=>h("sent"),disabled:o,className:"text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors duration-200",style:{backgroundColor:o?"#6b7280":"#03989e",opacity:o?.6:1},onMouseEnter:N=>{o||(N.currentTarget.style.backgroundColor="#027a7f")},onMouseLeave:N=>{o||(N.currentTarget.style.backgroundColor="#03989e")},children:[y.jsx(Yp,{className:"h-4 w-4"}),y.jsx("span",{children:"Send to Client"})]},"send"));break;case"sent":_.push(y.jsxs("button",{onClick:()=>h("paid"),disabled:o,className:"bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors duration-200",children:[y.jsx(uh,{className:"h-4 w-4"}),y.jsx("span",{children:"Mark as Paid"})]},"mark-paid")),_.push(y.jsxs("button",{onClick:()=>h("overdue"),disabled:o,className:"bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors duration-200",children:[y.jsx(Zc,{className:"h-4 w-4"}),y.jsx("span",{children:"Mark Overdue"})]},"mark-overdue"));break;case"overdue":_.push(y.jsxs("button",{onClick:()=>h("paid"),disabled:o,className:"bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors duration-200",children:[y.jsx(uh,{className:"h-4 w-4"}),y.jsx("span",{children:"Mark as Paid"})]},"mark-paid"));break}return _};return y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:y.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[y.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Invoice Details"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:t.invoiceNumber})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[i&&w(),y.jsxs("button",{onClick:r,className:"text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors duration-200",style:{backgroundColor:"#03989e"},onMouseEnter:_=>{_.currentTarget.style.backgroundColor="#027a7f"},onMouseLeave:_=>{_.currentTarget.style.backgroundColor="#03989e"},children:[y.jsx(up,{className:"h-4 w-4"}),y.jsx("span",{children:"Edit"})]}),y.jsxs("button",{onClick:g,disabled:l,className:"bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors duration-200",children:[y.jsx(Eh,{className:"h-4 w-4"}),y.jsx("span",{children:l?"Generating...":"Download PDF"})]}),y.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-2 rounded-lg transition-colors duration-200",children:y.jsx(Xp,{className:"h-6 w-6"})})]})]}),y.jsxs("div",{className:"p-8",children:[y.jsxs("div",{className:"flex justify-between items-start mb-8",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"INVOICE"}),y.jsxs("div",{className:"space-y-1",children:[y.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Invoice Number: ",y.jsx("span",{className:"font-medium",children:t.invoiceNumber})]}),y.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Date: ",y.jsx("span",{className:"font-medium",children:Rl(t.createdAt)})]}),y.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Due Date: ",y.jsx("span",{className:"font-medium",children:Rl(t.dueDate)})]})]})]}),y.jsxs("div",{className:"text-right",children:[y.jsx("div",{className:"text-white px-4 py-2 rounded-lg inline-block mb-4",style:{backgroundColor:"#03989e"},children:y.jsx("h2",{className:"text-lg font-bold",children:"Agence de Voyage"})}),y.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[y.jsx("p",{children:"123 Travel Street"}),y.jsx("p",{children:"New York, NY 10001"}),y.jsx("p",{children:"Phone: (555) 123-4567"}),y.jsx("p",{children:"Email: info@agencedevoyage.com"})]})]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[y.jsxs("div",{children:[y.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3 flex items-center space-x-2",children:[y.jsx(cu,{className:"h-5 w-5",style:{color:"#03989e"}}),y.jsx("span",{children:"Bill To:"})]}),y.jsxs("div",{className:"border p-4 rounded-lg",style:{backgroundColor:"#f0fdfc",borderColor:"#99f6e4"},children:[y.jsx("p",{className:"font-bold text-gray-900 dark:text-white text-lg",children:t.client?.name||t.clientName||"Unknown Client"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:t.client?.email||t.clientEmail||""}),t.client?.phone&&y.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:t.client.phone}),(t.client?.address||t.notes)&&y.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:t.client?.address||""})]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Agent & Status:"}),y.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[y.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:t.agentName}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Travel Agent"}),y.jsx("div",{className:"mt-3",children:y.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${mv(t.status)}`,children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})}),i&&y.jsxs("div",{className:"mt-4 p-3 border rounded-lg",style:{backgroundColor:"#f0fdfc",borderColor:"#99f6e4"},children:[y.jsx("h4",{className:"text-sm font-medium mb-2",style:{color:"#164e63"},children:"Status Management:"}),y.jsxs("div",{className:"text-xs space-y-1",style:{color:"#155e75"},children:[t.status==="draft"&&y.jsx("p",{children:' Click "Send to Client" when ready to send this invoice'}),t.status==="sent"&&y.jsxs(y.Fragment,{children:[y.jsx("p",{children:' Click "Mark as Paid" when client pays'}),y.jsx("p",{children:' Click "Mark Overdue" if payment is late'})]}),t.status==="overdue"&&y.jsx("p",{children:' Click "Mark as Paid" when client finally pays'}),t.status==="paid"&&y.jsx("p",{children:" Invoice is fully paid - no action needed"})]})]})]})]})]}),y.jsx("div",{className:"mb-8 p-4 border rounded-lg",style:{backgroundColor:"#f0fdfc",borderColor:"#99f6e4"},children:y.jsxs("div",{className:"flex items-center space-x-3",children:[y.jsx("div",{className:"p-2 rounded-full",style:{backgroundColor:"#ccfbf1"},children:y.jsx(cu,{className:"h-5 w-5",style:{color:"#03989e"}})}),y.jsxs("div",{children:[y.jsxs("p",{className:"text-sm font-medium",style:{color:"#164e63"},children:["Invoice created for client: ",y.jsx("span",{className:"font-bold text-lg",children:t.client?.name||t.clientName||"Unknown"})]}),y.jsxs("p",{className:"text-xs",style:{color:"#155e75"},children:["Agent ",t.agentName||"Unknown Agent"," created this invoice for the above client"]})]})]})}),y.jsxs("div",{className:"mb-8",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Services & Items"}),y.jsx("div",{className:"overflow-x-auto",children:y.jsxs("table",{className:"w-full border border-gray-200 dark:border-gray-700 rounded-lg",children:[y.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:y.jsxs("tr",{children:[y.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description"}),y.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-gray-700 dark:text-gray-300",children:"Qty"}),y.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700 dark:text-gray-300",children:"Unit Price"}),y.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700 dark:text-gray-300",children:"Total"})]})}),y.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:t.items.map(_=>y.jsxs("tr",{children:[y.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white",children:_.description}),y.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white text-center",children:_.quantity}),y.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-white text-right",children:pi(_.unitPrice)}),y.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900 dark:text-white text-right",children:pi(_.total)})]},_.id))})]})})]}),y.jsx("div",{className:"flex justify-end mb-8",children:y.jsx("div",{className:"w-full max-w-sm",children:y.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-6 rounded-lg",children:y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Subtotal:"}),y.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:pi(t.subtotal)})]}),y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Tax:"}),y.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:pi(t.tax)})]}),y.jsx("div",{className:"border-t dark:border-gray-600 pt-3",children:y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Total:"}),y.jsx("span",{className:"text-lg font-bold",style:{color:"#03989e"},children:pi(t.total)})]})})]})})})}),t.notes&&y.jsxs("div",{className:"mb-8",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Notes"}),y.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:y.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:t.notes})})]}),y.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-gray-400 border-t dark:border-gray-700 pt-6",children:[y.jsx("p",{children:"Thank you for choosing Agence de Voyage!"}),y.jsx("p",{children:"For questions about this invoice, please contact us at billing@agencedevoyage.com"})]})]})]})})},$v=({stats:t,onViewAllInvoices:e})=>{const r=[{title:"Total Revenue",value:pi(t.totalRevenue),icon:K2,color:"#10b981",bgColor:"#f0fdf4",textColor:"#059669",clickable:!1},{title:"Total Invoices",value:t.totalInvoices.toString(),icon:Mc,color:"#03989e",bgColor:"#f0fdfc",textColor:"#03989e",clickable:!0,onClick:e},{title:"Pending",value:t.pendingInvoices.toString(),icon:lv,color:"#f59e0b",bgColor:"#fffbeb",textColor:"#d97706",clickable:!1},{title:"Paid",value:t.paidInvoices.toString(),icon:uh,color:"#10b981",bgColor:"#f0fdf4",textColor:"#059669",clickable:!1}];return y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:r.map((i,o)=>{const s=i.clickable?"button":"div";return y.jsx(s,{onClick:i.clickable?i.onClick:void 0,className:`bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 transition-all duration-300 ${i.clickable?"hover:shadow-xl hover:scale-105 cursor-pointer transform hover:bg-blue-50 dark:hover:bg-blue-900/20":"hover:shadow-xl"}`,children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:i.title}),y.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.value}),i.clickable&&y.jsx("p",{className:"text-xs mt-1 font-medium",style:{color:i.textColor},children:"Click to view all"})]}),y.jsx("div",{className:"p-3 rounded-lg",style:{backgroundColor:i.bgColor},children:y.jsx(i.icon,{className:"h-6 w-6",style:{color:i.textColor}})})]})},o)})})},Yw=({invoices:t,onView:e,onEdit:r,onDelete:i,onBack:o})=>{const[s,l]=J.useState(""),[c,h]=J.useState("all"),[g,w]=J.useState("all"),[_,N]=J.useState("date"),[x,I]=J.useState("desc"),P=In.useMemo(()=>{let M=t.filter(H=>{const oe=(H.client?.name||"").toLowerCase().includes(s.toLowerCase())||(H.invoiceNumber||"").toLowerCase().includes(s.toLowerCase())||(H.client?.email||"").toLowerCase().includes(s.toLowerCase()),le=c==="all"||H.status===c,be=g==="all"||H.visaStatus===g;return oe&&le&&be});return M.sort((H,oe)=>{let le=0;switch(_){case"date":le=new Date(H.createdAt).getTime()-new Date(oe.createdAt).getTime();break;case"amount":le=H.total-oe.total;break;case"client":le=(H.client?.name||"").localeCompare(oe.client?.name||"");break}return x==="asc"?le:-le}),M},[t,s,c,g,_,x]),R=In.useMemo(()=>{const M=P.reduce((le,be)=>le+be.total,0),H=P.filter(le=>le.status==="paid").reduce((le,be)=>le+be.total,0),oe=P.filter(le=>le.status==="sent").reduce((le,be)=>le+be.total,0);return{totalInvoices:P.length,totalAmount:M,paidAmount:H,pendingAmount:oe}},[P]),L=()=>{alert("Export functionality will be implemented soon.")};return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center space-x-4",children:[y.jsxs("button",{onClick:o,className:"flex items-center space-x-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 transition-colors duration-200",children:[y.jsx(sv,{className:"h-5 w-5"}),y.jsx("span",{children:"Back to Dashboard"})]}),y.jsx("div",{className:"h-6 w-px bg-gray-300 dark:bg-gray-600"}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"All Invoices"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage and view all your invoices"})]})]}),y.jsxs("button",{onClick:L,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors duration-200",children:[y.jsx(Eh,{className:"h-4 w-4"}),y.jsx("span",{children:"Export"})]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[y.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Invoices"}),y.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:R.totalInvoices})]}),y.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:y.jsx(Mc,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})})]})}),y.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Amount"}),y.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:pi(R.totalAmount)})]}),y.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:y.jsx(Ku,{className:"h-6 w-6 text-green-600 dark:text-green-400"})})]})}),y.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Paid Amount"}),y.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:pi(R.paidAmount)})]}),y.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:y.jsx(Ku,{className:"h-6 w-6 text-green-600 dark:text-green-400"})})]})}),y.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Pending Amount"}),y.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:pi(R.pendingAmount)})]}),y.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded-lg",children:y.jsx(Ku,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})})]})})]}),y.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[y.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[y.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[y.jsxs("div",{className:"relative flex-1 max-w-md",children:[y.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:y.jsx(lp,{className:"h-5 w-5 text-gray-400"})}),y.jsx("input",{type:"text",value:s,onChange:M=>l(M.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Search by client name, invoice number, or email..."})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(J2,{className:"h-5 w-5 text-gray-500"}),y.jsxs("select",{value:c,onChange:M=>h(M.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#03989e] focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[y.jsx("option",{value:"all",children:"  ()"}),y.jsx("option",{value:"draft",children:" (Draft)"}),y.jsx("option",{value:"sent",children:" ( )"}),y.jsx("option",{value:"paid",children:" (Paid)"}),y.jsx("option",{value:"overdue",children:"  "})]})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Mc,{className:"h-5 w-5 text-gray-500"}),y.jsxs("select",{value:g,onChange:M=>w(M.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#03989e] focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[y.jsx("option",{value:"all",children:"  "}),y.jsx("option",{value:"Pending",children:"   (Pending)"}),y.jsx("option",{value:"Issued",children:"  (Issued)"})]})]})]}),y.jsxs("div",{className:"flex items-center space-x-4",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:" :"}),y.jsxs("select",{value:_,onChange:M=>N(M.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#03989e] focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[y.jsx("option",{value:"date",children:""}),y.jsx("option",{value:"amount",children:""}),y.jsx("option",{value:"client",children:" "})]})]}),y.jsx("button",{onClick:()=>I(x==="asc"?"desc":"asc"),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 text-gray-700 dark:text-gray-300",children:x==="asc"?"":""})]})]}),y.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:y.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",P.length," of ",t.length," invoices",s&&` matching "${s}"`,c!=="all"&&` with status "${c}"`]})})]}),y.jsx(gh,{invoices:P,onView:e,onEdit:r,onDelete:i,title:"All Invoices"}),P.length===0&&t.length>0&&y.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 text-center",children:[y.jsx("div",{className:"text-gray-400 mb-4",children:y.jsx(lp,{className:"mx-auto h-12 w-12"})}),y.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No invoices found"}),y.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Try adjusting your search terms or filters to find what you're looking for."}),y.jsx("button",{onClick:()=>{l(""),h("all")},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors duration-200",children:"Clear Filters"})]})]})};function Oh(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(r[i[o]]=t[i[o]]);return r}function Xw(t,e,r,i){function o(s){return s instanceof r?s:new r(function(l){l(s)})}return new(r||(r=Promise))(function(s,l){function c(w){try{g(i.next(w))}catch(_){l(_)}}function h(w){try{g(i.throw(w))}catch(_){l(_)}}function g(w){w.done?s(w.value):o(w.value).then(c,h)}g((i=i.apply(t,e||[])).next())})}const Qw=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class i0 extends Error{constructor(e,r="FunctionsError",i){super(e),this.name=r,this.context=i}}class Zw extends i0{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class am extends i0{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class sm extends i0{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Np;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Np||(Np={}));class eb{constructor(e,{headers:r={},customFetch:i,region:o=Np.Any}={}){this.url=e,this.headers=r,this.region=o,this.fetch=Qw(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Xw(this,arguments,void 0,function*(r,i={}){var o;let s,l;try{const{headers:c,method:h,body:g,signal:w,timeout:_}=i;let N={},{region:x}=i;x||(x=this.region);const I=new URL(`${this.url}/${r}`);x&&x!=="any"&&(N["x-region"]=x,I.searchParams.set("forceFunctionRegion",x));let P;g&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(N["Content-Type"]="application/octet-stream",P=g):typeof g=="string"?(N["Content-Type"]="text/plain",P=g):typeof FormData<"u"&&g instanceof FormData?P=g:(N["Content-Type"]="application/json",P=JSON.stringify(g)):g&&typeof g!="string"&&!(typeof Blob<"u"&&g instanceof Blob)&&!(g instanceof ArrayBuffer)&&!(typeof FormData<"u"&&g instanceof FormData)?P=JSON.stringify(g):P=g;let R=w;_&&(l=new AbortController,s=setTimeout(()=>l.abort(),_),w?(R=l.signal,w.addEventListener("abort",()=>l.abort())):R=l.signal);const L=yield this.fetch(I.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},N),this.headers),c),body:P,signal:R}).catch(le=>{throw new Zw(le)}),M=L.headers.get("x-relay-error");if(M&&M==="true")throw new am(L);if(!L.ok)throw new sm(L);let H=((o=L.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),oe;return H==="application/json"?oe=yield L.json():H==="application/octet-stream"||H==="application/pdf"?oe=yield L.blob():H==="text/event-stream"?oe=L:H==="multipart/form-data"?oe=yield L.formData():oe=yield L.text(),{data:oe,error:null,response:L}}catch(c){return{data:null,error:c,response:c instanceof sm||c instanceof am?c.context:void 0}}finally{s&&clearTimeout(s)}})}}var tb=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},rb=class{constructor(t){var e,r,i;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(i=t.urlLengthLimit)!==null&&i!==void 0?i:8e3,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let o=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let l=null,c=null,h=null,g=s.status,w=s.statusText;if(s.ok){var _,N;if(r.method!=="HEAD"){var x;const L=await s.text();L===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((x=r.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?c=L:c=JSON.parse(L))}const P=(_=r.headers.get("Prefer"))===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),R=(N=s.headers.get("content-range"))===null||N===void 0?void 0:N.split("/");P&&R&&R.length>1&&(h=parseInt(R[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(c)&&(c.length>1?(l={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,h=null,g=406,w="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{var I;const P=await s.text();try{l=JSON.parse(P),Array.isArray(l)&&s.status===404&&(c=[],l=null,g=200,w="OK")}catch{s.status===404&&P===""?(g=204,w="No Content"):l={message:P}}if(l&&r.isMaybeSingle&&(!(l==null||(I=l.details)===null||I===void 0)&&I.includes("0 rows"))&&(l=null,g=200,w="OK"),l&&r.shouldThrowOnError)throw new tb(l)}return{error:l,data:c,count:h,status:g,statusText:w}});return this.shouldThrowOnError||(o=o.catch(s=>{var l;let c="",h="",g="";const w=s?.cause;if(w){var _,N,x,I;const L=(_=w?.message)!==null&&_!==void 0?_:"",M=(N=w?.code)!==null&&N!==void 0?N:"";c=`${(x=s?.name)!==null&&x!==void 0?x:"FetchError"}: ${s?.message}`,c+=`

Caused by: ${(I=w?.name)!==null&&I!==void 0?I:"Error"}: ${L}`,M&&(c+=` (${M})`),w?.stack&&(c+=`
${w.stack}`)}else{var P;c=(P=s?.stack)!==null&&P!==void 0?P:""}const R=this.url.toString().length;return s?.name==="AbortError"||s?.code==="ABORT_ERR"?(g="",h="Request was aborted (timeout or manual cancellation)",R>this.urlLengthLimit&&(h+=`. Note: Your request URL is ${R} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(w?.name==="HeadersOverflowError"||w?.code==="UND_ERR_HEADERS_OVERFLOW")&&(g="",h="HTTP headers exceeded server limits (typically 16KB)",R>this.urlLengthLimit&&(h+=`. Your request URL is ${R} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(l=s?.name)!==null&&l!==void 0?l:"FetchError"}: ${s?.message}`,details:c,hint:h,code:g},data:null,count:null,status:0,statusText:""}})),o.then(t,e)}returns(){return this}overrideTypes(){return this}},nb=class extends rb{select(t){let e=!1;const r=(t??"*").split("").map(i=>/\s/.test(i)&&!e?"":(i==='"'&&(e=!e),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:i,referencedTable:o=i}={}){const s=o?`${o}.order`:"order",l=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${l?`${l},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:i=r}={}){const o=typeof i>"u"?"offset":`${i}.offset`,s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(s,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:i=!1,wal:o=!1,format:s="text"}={}){var l;const c=[t?"analyze":null,e?"verbose":null,r?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),h=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${h}"; options=${c};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const om=new RegExp("[,()]");var zu=class extends nb{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const r=Array.from(new Set(e)).map(i=>typeof i=="string"&&om.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}notIn(t,e){const r=Array.from(new Set(e)).map(i=>typeof i=="string"&&om.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`not.in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");const s=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${o}fts${s}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}},ib=class{constructor(t,{headers:e={},schema:r,fetch:i,urlLengthLimit:o=8e3}){this.url=t,this.headers=new Headers(e),this.schema=r,this.fetch=i,this.urlLengthLimit=o}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:r=!1,count:i}=e??{},o=r?"HEAD":"GET";let s=!1;const l=(t??"*").split("").map(g=>/\s/.test(g)&&!s?"":(g==='"'&&(s=!s),g)).join(""),{url:c,headers:h}=this.cloneRequestState();return c.searchParams.set("select",l),i&&h.append("Prefer",`count=${i}`),new zu({method:o,url:c,headers:h,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(t,{count:e,defaultToNull:r=!0}={}){var i;const o="POST",{url:s,headers:l}=this.cloneRequestState();if(e&&l.append("Prefer",`count=${e}`),r||l.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((h,g)=>h.concat(Object.keys(g)),[]);if(c.length>0){const h=[...new Set(c)].map(g=>`"${g}"`);s.searchParams.set("columns",h.join(","))}}return new zu({method:o,url:s,headers:l,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:i,defaultToNull:o=!0}={}){var s;const l="POST",{url:c,headers:h}=this.cloneRequestState();if(h.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),e!==void 0&&c.searchParams.set("on_conflict",e),i&&h.append("Prefer",`count=${i}`),o||h.append("Prefer","missing=default"),Array.isArray(t)){const g=t.reduce((w,_)=>w.concat(Object.keys(_)),[]);if(g.length>0){const w=[...new Set(g)].map(_=>`"${_}"`);c.searchParams.set("columns",w.join(","))}}return new zu({method:l,url:c,headers:h,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}update(t,{count:e}={}){var r;const i="PATCH",{url:o,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new zu({method:i,url:o,headers:s,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:t}={}){var e;const r="DELETE",{url:i,headers:o}=this.cloneRequestState();return t&&o.append("Prefer",`count=${t}`),new zu({method:r,url:i,headers:o,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch,urlLengthLimit:this.urlLengthLimit})}};function Uc(t){"@babel/helpers - typeof";return Uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uc(t)}function ab(t,e){if(Uc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e);if(Uc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sb(t){var e=ab(t,"string");return Uc(e)=="symbol"?e:e+""}function ob(t,e,r){return(e=sb(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lm(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,i)}return r}function Hd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lm(Object(r),!0).forEach(function(i){ob(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lm(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}var lb=class Vv{constructor(e,{headers:r={},schema:i,fetch:o,timeout:s,urlLengthLimit:l=8e3}={}){this.url=e,this.headers=new Headers(r),this.schemaName=i,this.urlLengthLimit=l;const c=o??globalThis.fetch;s!==void 0&&s>0?this.fetch=(h,g)=>{const w=new AbortController,_=setTimeout(()=>w.abort(),s),N=g?.signal;if(N){if(N.aborted)return clearTimeout(_),c(h,g);const x=()=>{clearTimeout(_),w.abort()};return N.addEventListener("abort",x,{once:!0}),c(h,Hd(Hd({},g),{},{signal:w.signal})).finally(()=>{clearTimeout(_),N.removeEventListener("abort",x)})}return c(h,Hd(Hd({},g),{},{signal:w.signal})).finally(()=>clearTimeout(_))}:this.fetch=c}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new ib(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(e){return new Vv(this.url,{headers:this.headers,schema:e,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e,r={},{head:i=!1,get:o=!1,count:s}={}){var l;let c;const h=new URL(`${this.url}/rpc/${e}`);let g;const w=x=>x!==null&&typeof x=="object"&&(!Array.isArray(x)||x.some(w)),_=i&&Object.values(r).some(w);_?(c="POST",g=r):i||o?(c=i?"HEAD":"GET",Object.entries(r).filter(([x,I])=>I!==void 0).map(([x,I])=>[x,Array.isArray(I)?`{${I.join(",")}}`:`${I}`]).forEach(([x,I])=>{h.searchParams.append(x,I)})):(c="POST",g=r);const N=new Headers(this.headers);return _?N.set("Prefer",s?`count=${s},return=minimal`:"return=minimal"):s&&N.set("Prefer",`count=${s}`),new zu({method:c,url:h,headers:N,schema:this.schemaName,body:g,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}};class ub{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const i=r.versions;if(i&&i.node){const o=i.node,s=parseInt(o.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const i=this.getWebSocketConstructor();return new i(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const cb="2.95.3",db=`realtime-js/${cb}`,hb="1.0.0",Wv="2.0.0",um=Wv,Ap=1e4,fb=1e3,pb=100;var Pl;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Pl||(Pl={}));var hi;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(hi||(hi={}));var oo;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(oo||(oo={}));var jp;(function(t){t.websocket="websocket"})(jp||(jp={}));var su;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(su||(su={}));class gb{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let i=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,i;const o=(i=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(e){var r,i;const o=(i=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&i!==void 0?i:{},l=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(e,r,i){var o,s;const l=e.topic,c=(o=e.ref)!==null&&o!==void 0?o:"",h=(s=e.join_ref)!==null&&s!==void 0?s:"",g=e.payload.event,w=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},_=Object.keys(w).length===0?"":JSON.stringify(w);if(h.length>255)throw new Error(`joinRef length ${h.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`ref length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`userEvent length ${g.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`metadata length ${_.length} exceeds maximum of 255`);const N=this.USER_BROADCAST_PUSH_META_LENGTH+h.length+c.length+l.length+g.length+_.length,x=new ArrayBuffer(this.HEADER_LENGTH+N);let I=new DataView(x),P=0;I.setUint8(P++,this.KINDS.userBroadcastPush),I.setUint8(P++,h.length),I.setUint8(P++,c.length),I.setUint8(P++,l.length),I.setUint8(P++,g.length),I.setUint8(P++,_.length),I.setUint8(P++,r),Array.from(h,L=>I.setUint8(P++,L.charCodeAt(0))),Array.from(c,L=>I.setUint8(P++,L.charCodeAt(0))),Array.from(l,L=>I.setUint8(P++,L.charCodeAt(0))),Array.from(g,L=>I.setUint8(P++,L.charCodeAt(0))),Array.from(_,L=>I.setUint8(P++,L.charCodeAt(0)));var R=new Uint8Array(x.byteLength+i.byteLength);return R.set(new Uint8Array(x),0),R.set(new Uint8Array(i),x.byteLength),R.buffer}decode(e,r){if(this._isArrayBuffer(e)){let i=this._binaryDecode(e);return r(i)}if(typeof e=="string"){const i=JSON.parse(e),[o,s,l,c,h]=i;return r({join_ref:o,ref:s,topic:l,event:c,payload:h})}return r({})}_binaryDecode(e){const r=new DataView(e),i=r.getUint8(0),o=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,o)}}_decodeUserBroadcast(e,r,i){const o=r.getUint8(1),s=r.getUint8(2),l=r.getUint8(3),c=r.getUint8(4);let h=this.HEADER_LENGTH+4;const g=i.decode(e.slice(h,h+o));h=h+o;const w=i.decode(e.slice(h,h+s));h=h+s;const _=i.decode(e.slice(h,h+l));h=h+l;const N=e.slice(h,e.byteLength),x=c===this.JSON_ENCODING?JSON.parse(i.decode(N)):N,I={type:this.BROADCAST_EVENT,event:w,payload:x};return l>0&&(I.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST_EVENT,payload:I}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([i])=>r.includes(i)))}}class Hv{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var yn;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(yn||(yn={}));const cm=(t,e,r={})=>{var i;const o=(i=r.skipTypes)!==null&&i!==void 0?i:[];return e?Object.keys(e).reduce((s,l)=>(s[l]=mb(l,t,e,o),s),{}):{}},mb=(t,e,r,i)=>{const o=e.find(c=>c.name===t),s=o?.type,l=r[t];return s&&!i.includes(s)?Kv(s,l):Ep(l)},Kv=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return bb(e,r)}switch(t){case yn.bool:return vb(e);case yn.float4:case yn.float8:case yn.int2:case yn.int4:case yn.int8:case yn.numeric:case yn.oid:return yb(e);case yn.json:case yn.jsonb:return wb(e);case yn.timestamp:return xb(e);case yn.abstime:case yn.date:case yn.daterange:case yn.int4range:case yn.int8range:case yn.money:case yn.reltime:case yn.text:case yn.time:case yn.timestamptz:case yn.timetz:case yn.tsrange:case yn.tstzrange:return Ep(e);default:return Ep(e)}},Ep=t=>t,vb=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},yb=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},wb=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},bb=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,i=t[r];if(t[0]==="{"&&i==="}"){let s;const l=t.slice(1,r);try{s=JSON.parse("["+l+"]")}catch{s=l?l.split(","):[]}return s.map(c=>Kv(e,c))}return t},xb=t=>typeof t=="string"?t.replace(" ","T"):t,Gv=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Jf{constructor(e,r,i={},o=Ap){this.channel=e,this.event=r,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var i;return this._hasReceived(e)&&r((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var dm;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(dm||(dm={}));class Ic{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:s,onLeave:l,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ic.syncState(this.state,o,s,l),this.pendingDiffs.forEach(h=>{this.state=Ic.syncDiff(this.state,h,s,l)}),this.pendingDiffs=[],c()}),this.channel._on(i.diff,{},o=>{const{onJoin:s,onLeave:l,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Ic.syncDiff(this.state,o,s,l),c())}),this.onJoin((o,s,l)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:s,newPresences:l})}),this.onLeave((o,s,l)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:s,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,i,o){const s=this.cloneDeep(e),l=this.transformState(r),c={},h={};return this.map(s,(g,w)=>{l[g]||(h[g]=w)}),this.map(l,(g,w)=>{const _=s[g];if(_){const N=w.map(R=>R.presence_ref),x=_.map(R=>R.presence_ref),I=w.filter(R=>x.indexOf(R.presence_ref)<0),P=_.filter(R=>N.indexOf(R.presence_ref)<0);I.length>0&&(c[g]=I),P.length>0&&(h[g]=P)}else c[g]=w}),this.syncDiff(s,{joins:c,leaves:h},i,o)}static syncDiff(e,r,i,o){const{joins:s,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(s,(c,h)=>{var g;const w=(g=e[c])!==null&&g!==void 0?g:[];if(e[c]=this.cloneDeep(h),w.length>0){const _=e[c].map(x=>x.presence_ref),N=w.filter(x=>_.indexOf(x.presence_ref)<0);e[c].unshift(...N)}i(c,w,h)}),this.map(l,(c,h)=>{let g=e[c];if(!g)return;const w=h.map(_=>_.presence_ref);g=g.filter(_=>w.indexOf(_.presence_ref)<0),e[c]=g,o(c,g,h),g.length===0&&delete e[c]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(i=>r(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,i)=>{const o=e[i];return"metas"in o?r[i]=o.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):r[i]=o,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var hm;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(hm||(hm={}));var Oc;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Oc||(Oc={}));var Zo;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Zo||(Zo={}));class Hu{constructor(e,r={config:{}},i){var o,s;if(this.topic=e,this.params=r,this.socket=i,this.bindings={},this.state=hi.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Jf(this,oo.join,this.params,this.timeout),this.rejoinTimer=new Hv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=hi.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=hi.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=hi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=hi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=hi.errored,this.rejoinTimer.scheduleTimeout())}),this._on(oo.reply,{},(l,c)=>{this._trigger(this._replyEventName(c),l)}),this.presence=new Ic(this),this.broadcastEndpointURL=Gv(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var i,o,s;if(this.socket.isConnected()||this.socket.connect(),this.state==hi.closed){const{config:{broadcast:l,presence:c,private:h}}=this.params,g=(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(x=>x.filter))!==null&&o!==void 0?o:[],w=!!this.bindings[Oc.PRESENCE]&&this.bindings[Oc.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,_={},N={broadcast:l,presence:Object.assign(Object.assign({},c),{enabled:w}),postgres_changes:g,private:h};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(x=>e?.(Zo.CHANNEL_ERROR,x)),this._onClose(()=>e?.(Zo.CLOSED)),this.updateJoinPayload(Object.assign({config:N},_)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var I;if(this.socket._isManualToken()||this.socket.setAuth(),x===void 0){e?.(Zo.SUBSCRIBED);return}else{const P=this.bindings.postgres_changes,R=(I=P?.length)!==null&&I!==void 0?I:0,L=[];for(let M=0;M<R;M++){const H=P[M],{filter:{event:oe,schema:le,table:be,filter:ne}}=H,G=x&&x[M];if(G&&G.event===oe&&Hu.isFilterValueEqual(G.schema,le)&&Hu.isFilterValueEqual(G.table,be)&&Hu.isFilterValueEqual(G.filter,ne))L.push(Object.assign(Object.assign({},H),{id:G.id}));else{this.unsubscribe(),this.state=hi.errored,e?.(Zo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=L,e&&e(Zo.SUBSCRIBED);return}}).receive("error",x=>{this.state=hi.errored,e?.(Zo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{e?.(Zo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,i){return this.state===hi.joined&&e===Oc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,r,i)}async httpSend(e,r,i={}){var o;if(r==null)return Promise.reject("Payload is required for httpSend()");const s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);if(c.status===202)return{success:!0};let h=c.statusText;try{const g=await c.json();h=g.error||g.message||h}catch{}return Promise.reject(new Error(h))}async send(e,r={}){var i,o;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:l}=e,c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:l,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=g.body)===null||o===void 0?void 0:o.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var l,c,h;const g=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(c=(l=this.params)===null||l===void 0?void 0:l.config)===null||c===void 0?void 0:c.broadcast)===null||h===void 0)&&h.ack)&&s("ok"),g.receive("ok",()=>s("ok")),g.receive("error",()=>s("error")),g.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=hi.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(oo.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new Jf(this,oo.leave,{},e),i.receive("ok",()=>{r(),o("ok")}).receive("timeout",()=>{r(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=hi.closed,this.bindings={}}async _fetchWithTimeout(e,r,i){const o=new AbortController,s=setTimeout(()=>o.abort(),i),l=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:o.signal}));return clearTimeout(s),l}_push(e,r,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Jf(this,e,r,i);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>pb){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,i){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,i){var o,s;const l=e.toLocaleLowerCase(),{close:c,error:h,leave:g,join:w}=oo;if(i&&[c,h,g,w].indexOf(l)>=0&&i!==this._joinRef())return;let N=this._onMessage(l,r,i);if(r&&!N)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(x=>{var I,P,R;return((I=x.filter)===null||I===void 0?void 0:I.event)==="*"||((R=(P=x.filter)===null||P===void 0?void 0:P.event)===null||R===void 0?void 0:R.toLocaleLowerCase())===l}).map(x=>x.callback(N,i)):(s=this.bindings[l])===null||s===void 0||s.filter(x=>{var I,P,R,L,M,H;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in x){const oe=x.id,le=(I=x.filter)===null||I===void 0?void 0:I.event;return oe&&((P=r.ids)===null||P===void 0?void 0:P.includes(oe))&&(le==="*"||le?.toLocaleLowerCase()===((R=r.data)===null||R===void 0?void 0:R.type.toLocaleLowerCase()))}else{const oe=(M=(L=x?.filter)===null||L===void 0?void 0:L.event)===null||M===void 0?void 0:M.toLocaleLowerCase();return oe==="*"||oe===((H=r?.event)===null||H===void 0?void 0:H.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===l}).map(x=>{if(typeof N=="object"&&"ids"in N){const I=N.data,{schema:P,table:R,commit_timestamp:L,type:M,errors:H}=I;N=Object.assign(Object.assign({},{schema:P,table:R,commit_timestamp:L,eventType:M,new:{},old:{},errors:H}),this._getPayloadRecords(I))}x.callback(N,i)})}_isClosed(){return this.state===hi.closed}_isJoined(){return this.state===hi.joined}_isJoining(){return this.state===hi.joining}_isLeaving(){return this.state===hi.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,i){const o=e.toLocaleLowerCase(),s={type:o,filter:r,callback:i};return this.bindings[o]?this.bindings[o].push(s):this.bindings[o]=[s],this}_off(e,r){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(o=>{var s;return!(((s=o.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===i&&Hu.isEqual(o.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const i in e)if(e[i]!==r[i])return!1;return!0}static isFilterValueEqual(e,r){return(e??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(oo.close,{},e)}_onError(e){this._on(oo.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=hi.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=cm(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=cm(e.columns,e.old_record)),r}}const Yf=()=>{},Kd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},_b=[1e3,2e3,5e3,1e4],kb=1e4,Sb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Nb{constructor(e,r){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ap,this.transport=null,this.heartbeatIntervalMs=Kd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Yf,this.ref=0,this.reconnectTimer=null,this.vsn=um,this.logger=Yf,this.conn=null,this.sendBuffer=[],this.serializer=new gb,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=o=>o?(...s)=>o(...s):(...s)=>fetch(...s),!(!((i=r?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${jp.websocket}`,this.httpEndpoint=Gv(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ub.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return r==="ok"&&this._remove(e),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,i){this.logger(e,r,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Pl.connecting:return su.Connecting;case Pl.open:return su.Open;case Pl.closing:return su.Closing;default:return su.Closed}}isConnected(){return this.connectionState()===su.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const i=`realtime:${e}`,o=this.getChannels().find(s=>s.topic===i);if(o)return o;{const s=new Hu(`realtime:${e}`,r,this);return this.channels.push(s),s}}push(e){const{topic:r,event:i,payload:o,ref:s}=e,l=()=>{this.encode(e,c=>{var h;(h=this.conn)===null||h===void 0||h.send(c)})};this.log("push",`${r} ${i} (${s})`,o),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(fb,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Kd.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const g=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",g)}catch(w){this.log("error","error in heartbeat callback",w)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:i,event:o,payload:s,ref:l}=r,c=l?`(${l})`:"",h=s.status||"";this.log("receive",`${h} ${i} ${o} ${c}`.trim(),s),this.channels.filter(g=>g._isMember(i)).forEach(g=>g._trigger(o,s,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Pl.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Pl.open||this.conn.readyState===Pl.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(oo.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const i=e.match(/\?/)?"&":"?",o=new URLSearchParams(r);return`${e}${i}${o}`}_workerObjectUrl(e){let r;if(e)r=e;else{const i=new Blob([Sb],{type:"application/javascript"});r=URL.createObjectURL(i)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r,i=!1;if(e)r=e,i=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),r=this.accessTokenValue}else r=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(o=>{const s={access_token:r,version:db};r&&o.updateJoinPayload(s),o.joinedOnce&&o._isJoined()&&o._push(oo.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(r)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new Hv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Kd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,i,o,s,l,c,h,g,w,_,N,x;switch(this.transport=(r=e?.transport)!==null&&r!==void 0?r:null,this.timeout=(i=e?.timeout)!==null&&i!==void 0?i:Ap,this.heartbeatIntervalMs=(o=e?.heartbeatIntervalMs)!==null&&o!==void 0?o:Kd.HEARTBEAT_INTERVAL,this.worker=(s=e?.worker)!==null&&s!==void 0?s:!1,this.accessToken=(l=e?.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(c=e?.heartbeatCallback)!==null&&c!==void 0?c:Yf,this.vsn=(h=e?.vsn)!==null&&h!==void 0?h:um,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=e?.reconnectAfterMs)!==null&&g!==void 0?g:I=>_b[I-1]||kb,this.vsn){case hb:this.encode=(w=e?.encode)!==null&&w!==void 0?w:(I,P)=>P(JSON.stringify(I)),this.decode=(_=e?.decode)!==null&&_!==void 0?_:(I,P)=>P(JSON.parse(I));break;case Wv:this.encode=(N=e?.encode)!==null&&N!==void 0?N:this.serializer.encode.bind(this.serializer),this.decode=(x=e?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var zc=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Ab(t,e,r){const i=new URL(e,t);if(r)for(const[o,s]of Object.entries(r))s!==void 0&&i.searchParams.set(o,s);return i.toString()}async function jb(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Eb(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:i,query:o,body:s,headers:l}){const c=Ab(t.baseUrl,i,o),h=await jb(t.auth),g=await e(c,{method:r,headers:{...s?{"Content-Type":"application/json"}:{},...h,...l},body:s?JSON.stringify(s):void 0}),w=await g.text(),_=(g.headers.get("content-type")||"").includes("application/json"),N=_&&w?JSON.parse(w):w;if(!g.ok){const x=_?N:void 0,I=x?.error;throw new zc(I?.message??`Request failed with status ${g.status}`,{status:g.status,icebergType:I?.type,icebergCode:I?.code,details:x})}return{status:g.status,headers:g.headers,data:N}}}}function Gd(t){return t.join("")}var Cb=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Gd(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Gd(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Gd(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Gd(t.namespace)}`}),!0}catch(e){if(e instanceof zc&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof zc&&r.status===409)return;throw r}}};function Tu(t){return t.join("")}var Pb=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Tu(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Tu(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Tu(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Tu(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Tu(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Tu(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof zc&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof zc&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},Lb=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Eb({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new Cb(this.client,e),this.tableOps=new Pb(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Th=class extends Error{constructor(t,e="storage",r,i){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=i}};function Rh(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var Jd=class extends Th{constructor(t,e,r,i="storage"){super(t,i,e,r),this.name=i==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Jv=class extends Th{constructor(t,e,r="storage"){super(t,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const Ib=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Ob=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Cp=t=>{if(Array.isArray(t))return t.map(r=>Cp(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,i])=>{const o=r.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[o]=Cp(i)}),e},Tb=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function $c(t){"@babel/helpers - typeof";return $c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$c(t)}function Rb(t,e){if($c(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e);if($c(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Db(t){var e=Rb(t,"string");return $c(e)=="symbol"?e:e+""}function Fb(t,e,r){return(e=Db(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fm(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,i)}return r}function ur(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fm(Object(r),!0).forEach(function(i){Fb(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fm(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}const pm=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},Mb=async(t,e,r,i)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!r?.noResolveJson){const o=t,s=o.status||500;if(typeof o.json=="function")o.json().then(l=>{const c=l?.statusCode||l?.code||s+"";e(new Jd(pm(l),s,c,i))}).catch(()=>{if(i==="vectors"){const l=s+"";e(new Jd(o.statusText||`HTTP ${s} error`,s,l,i))}else{const l=s+"";e(new Jd(o.statusText||`HTTP ${s} error`,s,l,i))}});else{const l=s+"";e(new Jd(o.statusText||`HTTP ${s} error`,s,l,i))}}else e(new Jv(pm(t),t,i))},Bb=(t,e,r,i)=>{const o={method:t,headers:e?.headers||{}};return t==="GET"||t==="HEAD"||!i?ur(ur({},o),r):(Ob(i)?(o.headers=ur({"Content-Type":"application/json"},e?.headers),o.body=JSON.stringify(i)):o.body=i,e?.duplex&&(o.duplex=e.duplex),ur(ur({},o),r))};async function jc(t,e,r,i,o,s,l){return new Promise((c,h)=>{t(r,Bb(e,i,o,s)).then(g=>{if(!g.ok)throw g;if(i?.noResolveJson)return g;if(l==="vectors"){const w=g.headers.get("content-type");if(g.headers.get("content-length")==="0"||g.status===204)return{};if(!w||!w.includes("application/json"))return{}}return g.json()}).then(g=>c(g)).catch(g=>Mb(g,h,i,l))})}function Yv(t="storage"){return{get:async(e,r,i,o)=>jc(e,"GET",r,i,o,void 0,t),post:async(e,r,i,o,s)=>jc(e,"POST",r,o,s,i,t),put:async(e,r,i,o,s)=>jc(e,"PUT",r,o,s,i,t),head:async(e,r,i,o)=>jc(e,"HEAD",r,ur(ur({},i),{},{noResolveJson:!0}),o,void 0,t),remove:async(e,r,i,o,s)=>jc(e,"DELETE",r,o,s,i,t)}}const qb=Yv("storage"),{get:Vc,post:so,put:Pp,head:Ub,remove:a0}=qb,cs=Yv("vectors");var nc=class{constructor(t,e={},r,i="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=Ib(r),this.namespace=i}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Rh(r))return{data:null,error:r};throw r}}},zb=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Rh(e))return{data:null,error:e};throw e}}};let Xv;Xv=Symbol.toStringTag;var $b=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[Xv]="BlobDownloadBuilder",this.promise=null}asStream(){return new zb(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Rh(e))return{data:null,error:e};throw e}}};const Vb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},gm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Wb=class extends nc{constructor(t,e={},r,i){super(t,e,i,"storage"),this.bucketId=r}async uploadOrUpdate(t,e,r,i){var o=this;return o.handleOperation(async()=>{let s;const l=ur(ur({},gm),i);let c=ur(ur({},o.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const h=l.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",l.cacheControl),h&&s.append("metadata",o.encodeMetadata(h)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.has("cacheControl")||s.append("cacheControl",l.cacheControl),h&&!s.has("metadata")&&s.append("metadata",o.encodeMetadata(h))):(s=r,c["cache-control"]=`max-age=${l.cacheControl}`,c["content-type"]=l.contentType,h&&(c["x-metadata"]=o.toBase64(o.encodeMetadata(h))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!l.duplex&&(l.duplex="half")),i?.headers&&(c=ur(ur({},c),i.headers));const g=o._removeEmptyFolders(e),w=o._getFinalPath(g),_=await(t=="PUT"?Pp:so)(o.fetch,`${o.url}/object/${w}`,s,ur({headers:c},l?.duplex?{duplex:l.duplex}:{}));return{path:g,id:_.Id,fullPath:_.Key}})}async upload(t,e,r){return this.uploadOrUpdate("POST",t,e,r)}async uploadToSignedUrl(t,e,r,i){var o=this;const s=o._removeEmptyFolders(t),l=o._getFinalPath(s),c=new URL(o.url+`/object/upload/sign/${l}`);return c.searchParams.set("token",e),o.handleOperation(async()=>{let h;const g=ur({upsert:gm.upsert},i),w=ur(ur({},o.headers),{"x-upsert":String(g.upsert)});return typeof Blob<"u"&&r instanceof Blob?(h=new FormData,h.append("cacheControl",g.cacheControl),h.append("",r)):typeof FormData<"u"&&r instanceof FormData?(h=r,h.append("cacheControl",g.cacheControl)):(h=r,w["cache-control"]=`max-age=${g.cacheControl}`,w["content-type"]=g.contentType),{path:s,fullPath:(await Pp(o.fetch,c.toString(),h,{headers:w})).Key}})}async createSignedUploadUrl(t,e){var r=this;return r.handleOperation(async()=>{let i=r._getFinalPath(t);const o=ur({},r.headers);e?.upsert&&(o["x-upsert"]="true");const s=await so(r.fetch,`${r.url}/object/upload/sign/${i}`,{},{headers:o}),l=new URL(r.url+s.url),c=l.searchParams.get("token");if(!c)throw new Th("No token returned by API");return{signedUrl:l.toString(),path:t,token:c}})}async update(t,e,r){return this.uploadOrUpdate("PUT",t,e,r)}async move(t,e,r){var i=this;return i.handleOperation(async()=>await so(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:i.headers}))}async copy(t,e,r){var i=this;return i.handleOperation(async()=>({path:(await so(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:i.headers})).Key}))}async createSignedUrl(t,e,r){var i=this;return i.handleOperation(async()=>{let o=i._getFinalPath(t),s=await so(i.fetch,`${i.url}/object/sign/${o}`,ur({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:i.headers});const l=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${i.url}${s.signedURL}${l}`)}})}async createSignedUrls(t,e,r){var i=this;return i.handleOperation(async()=>{const o=await so(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:e,paths:t},{headers:i.headers}),s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return o.map(l=>ur(ur({},l),{},{signedUrl:l.signedURL?encodeURI(`${i.url}${l.signedURL}${s}`):null}))})}download(t,e,r){const i=typeof e?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(e?.transform||{}),s=o?`?${o}`:"",l=this._getFinalPath(t),c=()=>Vc(this.fetch,`${this.url}/${i}/${l}${s}`,{headers:this.headers,noResolveJson:!0},r);return new $b(c,this.shouldThrowOnError)}async info(t){var e=this;const r=e._getFinalPath(t);return e.handleOperation(async()=>Cp(await Vc(e.fetch,`${e.url}/object/info/${r}`,{headers:e.headers})))}async exists(t){var e=this;const r=e._getFinalPath(t);try{return await Ub(e.fetch,`${e.url}/object/${r}`,{headers:e.headers}),{data:!0,error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Rh(i)&&i instanceof Jv){const o=i.originalError;if([400,404].includes(o?.status))return{data:!1,error:i}}throw i}}getPublicUrl(t,e){const r=this._getFinalPath(t),i=[],o=e?.download?`download=${e.download===!0?"":e.download}`:"";o!==""&&i.push(o);const s=typeof e?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(e?.transform||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${r}${c}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await a0(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,r){var i=this;return i.handleOperation(async()=>{const o=ur(ur(ur({},Vb),e),{},{prefix:t||""});return await so(i.fetch,`${i.url}/object/list/${i.bucketId}`,o,{headers:i.headers},r)})}async listV2(t,e){var r=this;return r.handleOperation(async()=>{const i=ur({},t);return await so(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,i,{headers:r.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const Hb="2.95.3",td={"X-Client-Info":`storage-js/${Hb}`};var Kb=class extends nc{constructor(t,e={},r,i){const o=new URL(t);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase."));const s=o.href.replace(/\/$/,""),l=ur(ur({},td),e);super(s,l,r,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const r=e.listBucketOptionsToQueryString(t);return await Vc(e.fetch,`${e.url}/bucket${r}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await Vc(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var r=this;return r.handleOperation(async()=>await so(r.fetch,`${r.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}))}async updateBucket(t,e){var r=this;return r.handleOperation(async()=>await Pp(r.fetch,`${r.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await so(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await a0(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},Gb=class extends nc{constructor(t,e={},r){const i=t.replace(/\/$/,""),o=ur(ur({},td),e);super(i,o,r,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await so(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const r=new URLSearchParams;t?.limit!==void 0&&r.set("limit",t.limit.toString()),t?.offset!==void 0&&r.set("offset",t.offset.toString()),t?.sortColumn&&r.set("sortColumn",t.sortColumn),t?.sortOrder&&r.set("sortOrder",t.sortOrder),t?.search&&r.set("search",t.search);const i=r.toString(),o=i?`${e.url}/bucket?${i}`:`${e.url}/bucket`;return await Vc(e.fetch,o,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await a0(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!Tb(t))throw new Th("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new Lb({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(r,{get(o,s){const l=o[s];return typeof l!="function"?l:async(...c)=>{try{return{data:await l.apply(o,c),error:null}}catch(h){if(i)throw h;return{data:null,error:h}}}}})}},Jb=class extends nc{constructor(t,e={},r){const i=t.replace(/\/$/,""),o=ur(ur({},td),{},{"Content-Type":"application/json"},e);super(i,o,r,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await cs.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var r=this;return r.handleOperation(async()=>await cs.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await cs.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var r=this;return r.handleOperation(async()=>await cs.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers})||{})}},Yb=class extends nc{constructor(t,e={},r){const i=t.replace(/\/$/,""),o=ur(ur({},td),{},{"Content-Type":"application/json"},e);super(i,o,r,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await cs.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await cs.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await cs.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await cs.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await cs.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},Xb=class extends nc{constructor(t,e={},r){const i=t.replace(/\/$/,""),o=ur(ur({},td),{},{"Content-Type":"application/json"},e);super(i,o,r,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await cs.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await cs.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await cs.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await cs.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},Qb=class extends Xb{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new Zb(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,r=this;return e().call(r,t)}async getBucket(t){var e=()=>super.getBucket,r=this;return e().call(r,t)}async listBuckets(t={}){var e=()=>super.listBuckets,r=this;return e().call(r,t)}async deleteBucket(t){var e=()=>super.deleteBucket,r=this;return e().call(r,t)}},Zb=class extends Jb{constructor(t,e,r,i){super(t,e,i),this.vectorBucketName=r}async createIndex(t){var e=()=>super.createIndex,r=this;return e().call(r,ur(ur({},t),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,r=this;return e().call(r,ur(ur({},t),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,r=this;return e().call(r,r.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,r=this;return e().call(r,r.vectorBucketName,t)}index(t){return new ex(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},ex=class extends Yb{constructor(t,e,r,i,o){super(t,e,o),this.vectorBucketName=r,this.indexName=i}async putVectors(t){var e=()=>super.putVectors,r=this;return e().call(r,ur(ur({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(t){var e=()=>super.getVectors,r=this;return e().call(r,ur(ur({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,r=this;return e().call(r,ur(ur({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,r=this;return e().call(r,ur(ur({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,r=this;return e().call(r,ur(ur({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},tx=class extends Kb{constructor(t,e={},r,i){super(t,e,r,i)}from(t){return new Wb(this.url,this.headers,t,this.fetch)}get vectors(){return new Qb(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Gb(this.url+"/iceberg",this.headers,this.fetch)}};const Qv="2.95.3",$u=30*1e3,Lp=3,Xf=Lp*$u,rx="http://localhost:9999",nx="supabase.auth.token",ix={"X-Client-Info":`gotrue-js/${Qv}`},Ip="X-Supabase-Api-Version",Zv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ax=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,sx=10*60*1e3;class Wc extends Error{constructor(e,r,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=i}}function Kt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class ox extends Wc{constructor(e,r,i){super(e,r,i),this.name="AuthApiError",this.status=r,this.code=i}}function lx(t){return Kt(t)&&t.name==="AuthApiError"}class ou extends Wc{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class sl extends Wc{constructor(e,r,i,o){super(e,i,o),this.name=r,this.status=i}}class ls extends sl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Qf(t){return Kt(t)&&t.name==="AuthSessionMissingError"}class Ru extends sl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Yd extends sl{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Xd extends sl{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ux(t){return Kt(t)&&t.name==="AuthImplicitGrantRedirectError"}class mm extends sl{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class cx extends sl{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Op extends sl{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Zf(t){return Kt(t)&&t.name==="AuthRetryableFetchError"}class vm extends sl{constructor(e,r,i){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=i}}class Tp extends sl{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const mh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ym=` 	
\r=`.split(""),dx=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<ym.length;e+=1)t[ym[e].charCodeAt(0)]=-2;for(let e=0;e<mh.length;e+=1)t[mh[e].charCodeAt(0)]=e;return t})();function wm(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;r(mh[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;r(mh[i]),e.queuedBits-=6}}function e1(t,e,r){const i=dx[t];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function bm(t){const e=[],r=l=>{e.push(String.fromCodePoint(l))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},s=l=>{px(l,i,r)};for(let l=0;l<t.length;l+=1)e1(t.charCodeAt(l),o,s);return e.join("")}function hx(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function fx(t,e){for(let r=0;r<t.length;r+=1){let i=t.charCodeAt(r);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(t.charCodeAt(r+1)-56320&65535|o)+65536,r+=1}hx(i,e)}}function px(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let i=1;i<6;i+=1)if((t>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Qu(t){const e=[],r={queue:0,queuedBits:0},i=o=>{e.push(o)};for(let o=0;o<t.length;o+=1)e1(t.charCodeAt(o),r,i);return new Uint8Array(e)}function gx(t){const e=[];return fx(t,r=>e.push(r)),new Uint8Array(e)}function lu(t){const e=[],r={queue:0,queuedBits:0},i=o=>{e.push(o)};return t.forEach(o=>wm(o,r,i)),wm(null,r,i),e.join("")}function mx(t){return Math.round(Date.now()/1e3)+t}function vx(){return Symbol("auth-callback")}const Ui=()=>typeof window<"u"&&typeof document<"u",tu={tested:!1,writable:!1},t1=()=>{if(!Ui())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(tu.tested)return tu.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),tu.tested=!0,tu.writable=!0}catch{tu.tested=!0,tu.writable=!1}return tu.writable};function yx(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((o,s)=>{e[s]=o})}catch{}return r.searchParams.forEach((i,o)=>{e[o]=i}),e}const r1=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),wx=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Vu=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},ru=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},qi=async(t,e)=>{await t.removeItem(e)};class Dh{constructor(){this.promise=new Dh.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Dh.promiseConstructor=Promise;function Qd(t){const e=t.split(".");if(e.length!==3)throw new Tp("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!ax.test(e[i]))throw new Tp("JWT not in base64url format");return{header:JSON.parse(bm(e[0])),payload:JSON.parse(bm(e[1])),signature:Qu(e[2]),raw:{header:e[0],payload:e[1]}}}async function bx(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function xx(t,e){return new Promise((i,o)=>{(async()=>{for(let s=0;s<1/0;s++)try{const l=await t(s);if(!e(s,null,l)){i(l);return}}catch(l){if(!e(s,l)){o(l);return}}})()})}function _x(t){return("0"+t.toString(16)).substr(-2)}function kx(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=r.length;let o="";for(let s=0;s<56;s++)o+=r.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(e),Array.from(e,_x).join("")}async function Sx(t){const r=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",r),o=new Uint8Array(i);return Array.from(o).map(s=>String.fromCharCode(s)).join("")}async function Nx(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await Sx(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Du(t,e,r=!1){const i=kx();let o=i;r&&(o+="/PASSWORD_RECOVERY"),await Vu(t,`${e}-code-verifier`,o);const s=await Nx(i);return[s,i===s?"plain":"s256"]}const Ax=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function jx(t){const e=t.headers.get(Ip);if(!e||!e.match(Ax))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Ex(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Cx(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Px=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Fu(t){if(!Px.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ep(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Lx(t,e){return new Proxy(t,{get:(r,i,o)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const s=i.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,i,o)}return!e.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,i,o)}})}function xm(t){return JSON.parse(JSON.stringify(t))}const iu=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Ix=[502,503,504];async function _m(t){var e;if(!wx(t))throw new Op(iu(t),0);if(Ix.includes(t.status))throw new Op(iu(t),t.status);let r;try{r=await t.json()}catch(s){throw new ou(iu(s),s)}let i;const o=jx(t);if(o&&o.getTime()>=Zv["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?i=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(i=r.error_code),i){if(i==="weak_password")throw new vm(iu(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new ls}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((s,l)=>s&&typeof l=="string",!0))throw new vm(iu(r),t.status,r.weak_password.reasons);throw new ox(iu(r),t.status||500,i)}const Ox=(t,e,r,i)=>{const o={method:t,headers:e?.headers||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),r))};async function or(t,e,r,i){var o;const s=Object.assign({},i?.headers);s[Ip]||(s[Ip]=Zv["2024-01-01"].name),i?.jwt&&(s.Authorization=`Bearer ${i.jwt}`);const l=(o=i?.query)!==null&&o!==void 0?o:{};i?.redirectTo&&(l.redirect_to=i.redirectTo);const c=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",h=await Tx(t,e,r+c,{headers:s,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(h):{data:Object.assign({},h),error:null}}async function Tx(t,e,r,i,o,s){const l=Ox(e,i,o,s);let c;try{c=await t(r,Object.assign({},l))}catch(h){throw console.error(h),new Op(iu(h),0)}if(c.ok||await _m(c),i?.noResolveJson)return c;try{return await c.json()}catch(h){await _m(h)}}function io(t){var e;let r=null;Fx(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=mx(t.expires_in)));const i=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:i},error:null}}function km(t){const e=io(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,i)=>r&&typeof i=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ol(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Rx(t){return{data:t,error:null}}function Dx(t){const{action_link:e,email_otp:r,hashed_token:i,redirect_to:o,verification_type:s}=t,l=Oh(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:r,hashed_token:i,redirect_to:o,verification_type:s},h=Object.assign({},l);return{data:{properties:c,user:h},error:null}}function Sm(t){return t}function Fx(t){return t.access_token&&t.refresh_token&&t.expires_in}const tp=["global","local","others"];class Mx{constructor({url:e="",headers:r={},fetch:i}){this.url=e,this.headers=r,this.fetch=r1(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=tp[0]){if(tp.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${tp.join(", ")}`);try{return await or(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Kt(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,r={}){try{return await or(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ol})}catch(i){if(Kt(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:r}=e,i=Oh(e,["options"]),o=Object.assign(Object.assign({},i),r);return"newEmail"in i&&(o.new_email=i?.newEmail,delete o.newEmail),await or(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:Dx,redirectTo:r?.redirectTo})}catch(r){if(Kt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await or(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ol})}catch(r){if(Kt(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,i,o,s,l,c,h;try{const g={nextPage:null,lastPage:0,total:0},w=await or(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(s=(o=e?.perPage)===null||o===void 0?void 0:o.toString())!==null&&s!==void 0?s:""},xform:Sm});if(w.error)throw w.error;const _=await w.json(),N=(l=w.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(h=(c=w.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&h!==void 0?h:[];return x.length>0&&(x.forEach(I=>{const P=parseInt(I.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(I.split(";")[1].split("=")[1]);g[`${R}Page`]=P}),g.total=parseInt(N)),{data:Object.assign(Object.assign({},_),g),error:null}}catch(g){if(Kt(g))return{data:{users:[]},error:g};throw g}}async getUserById(e){Fu(e);try{return await or(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ol})}catch(r){if(Kt(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Fu(e);try{return await or(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Ol})}catch(i){if(Kt(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,r=!1){Fu(e);try{return await or(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ol})}catch(i){if(Kt(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){Fu(e.userId);try{const{data:r,error:i}=await or(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:r,error:i}}catch(r){if(Kt(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Fu(e.userId),Fu(e.id);try{return{data:await or(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(Kt(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,i,o,s,l,c,h;try{const g={nextPage:null,lastPage:0,total:0},w=await or(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(s=(o=e?.perPage)===null||o===void 0?void 0:o.toString())!==null&&s!==void 0?s:""},xform:Sm});if(w.error)throw w.error;const _=await w.json(),N=(l=w.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(h=(c=w.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&h!==void 0?h:[];return x.length>0&&(x.forEach(I=>{const P=parseInt(I.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(I.split(";")[1].split("=")[1]);g[`${R}Page`]=P}),g.total=parseInt(N)),{data:Object.assign(Object.assign({},_),g),error:null}}catch(g){if(Kt(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(e){try{return await or(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Kt(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await or(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Kt(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await or(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(Kt(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(e){try{return await or(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Kt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await or(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Kt(r))return{data:null,error:r};throw r}}}function Nm(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const Mu={debug:!!(globalThis&&t1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class n1 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Bx extends n1{}async function qx(t,e,r){Mu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),Mu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){Mu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,o.name);try{return await r()}finally{Mu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,o.name)}}else{if(e===0)throw Mu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Bx(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Mu.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Ux(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function i1(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function zx(t){return parseInt(t,16)}function $x(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,i=>i.toString(16).padStart(2,"0")).join("")}function Vx(t){var e;const{chainId:r,domain:i,expirationTime:o,issuedAt:s=new Date,nonce:l,notBefore:c,requestId:h,resources:g,scheme:w,uri:_,version:N}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(N!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${N}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const x=i1(t.address),I=w?`${w}://${i}`:i,P=t.statement?`${t.statement}
`:"",R=`${I} wants you to sign in with your Ethereum account:
${x}

${P}`;let L=`URI: ${_}
Version: ${N}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${s.toISOString()}`;if(o&&(L+=`
Expiration Time: ${o.toISOString()}`),c&&(L+=`
Not Before: ${c.toISOString()}`),h&&(L+=`
Request ID: ${h}`),g){let M=`
Resources:`;for(const H of g){if(!H||typeof H!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${H}`);M+=`
- ${H}`}L+=M}return`${R}
${L}`}class ai extends Error{constructor({message:e,code:r,cause:i,name:o}){var s;super(e,{cause:i}),this.__isWebAuthnError=!0,this.name=(s=o??(i instanceof Error?i.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=r}}class vh extends ai{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function Wx({error:t,options:e}){var r,i,o;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ai({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=s.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ai({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ai({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((o=s.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new ai({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new ai({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new ai({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new ai({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new ai({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const l=window.location.hostname;if(a1(l)){if(s.rp.id!==l)return new ai({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ai({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new ai({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new ai({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ai({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Hx({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ai({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new ai({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const i=window.location.hostname;if(a1(i)){if(r.rpId!==i)return new ai({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ai({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new ai({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ai({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Kx{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Gx=new Kx;function Jx(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:i}=t,o=Oh(t,["challenge","user","excludeCredentials"]),s=Qu(e).buffer,l=Object.assign(Object.assign({},r),{id:Qu(r.id).buffer}),c=Object.assign(Object.assign({},o),{challenge:s,user:l});if(i&&i.length>0){c.excludeCredentials=new Array(i.length);for(let h=0;h<i.length;h++){const g=i[h];c.excludeCredentials[h]=Object.assign(Object.assign({},g),{id:Qu(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return c}function Yx(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,i=Oh(t,["challenge","allowCredentials"]),o=Qu(e).buffer,s=Object.assign(Object.assign({},i),{challenge:o});if(r&&r.length>0){s.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];s.allowCredentials[l]=Object.assign(Object.assign({},c),{id:Qu(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return s}function Xx(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:lu(new Uint8Array(t.response.attestationObject)),clientDataJSON:lu(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Qx(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,i=t.getClientExtensionResults(),o=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:lu(new Uint8Array(o.authenticatorData)),clientDataJSON:lu(new Uint8Array(o.clientDataJSON)),signature:lu(new Uint8Array(o.signature)),userHandle:o.userHandle?lu(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function a1(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Am(){var t,e;return!!(Ui()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Zx(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new vh("Browser returned unexpected credential type",e)}:{data:null,error:new vh("Empty credential response",e)}}catch(e){return{data:null,error:Wx({error:e,options:t})}}}async function e3(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new vh("Browser returned unexpected credential type",e)}:{data:null,error:new vh("Empty credential response",e)}}catch(e){return{data:null,error:Hx({error:e,options:t})}}}const t3={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},r3={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function yh(...t){const e=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),r=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),i={};for(const o of t)if(o)for(const s in o){const l=o[s];if(l!==void 0)if(Array.isArray(l))i[s]=l;else if(r(l))i[s]=l;else if(e(l)){const c=i[s];e(c)?i[s]=yh(c,l):i[s]=yh(l)}else i[s]=l}return i}function n3(t,e){return yh(t3,t,e||{})}function i3(t,e){return yh(r3,t,e||{})}class a3{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:i,signal:o},s){var l;try{const{data:c,error:h}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!c)return{data:null,error:h};const g=o??Gx.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:w}=c.webauthn.credential_options.publicKey;if(!w.name){const _=i;if(_)w.name=`${w.id}:${_}`;else{const x=(await this.client.getUser()).data.user,I=((l=x?.user_metadata)===null||l===void 0?void 0:l.name)||x?.email||x?.id||"User";w.name=`${w.id}:${I}`}}w.displayName||(w.displayName=w.name)}switch(c.webauthn.type){case"create":{const w=n3(c.webauthn.credential_options.publicKey,s?.create),{data:_,error:N}=await Zx({publicKey:w,signal:g});return _?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:_}},error:null}:{data:null,error:N}}case"request":{const w=i3(c.webauthn.credential_options.publicKey,s?.request),{data:_,error:N}=await e3(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:w,signal:g}));return _?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:_}},error:null}:{data:null,error:N}}}}catch(c){return Kt(c)?{data:null,error:c}:{data:null,error:new ou("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:r,webauthn:i}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:i})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},s){if(!r)return{data:null,error:new Wc("rpId is required for WebAuthn authentication")};try{if(!Am())return{data:null,error:new ou("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:i},signal:o},{request:s});if(!l)return{data:null,error:c};const{webauthn:h}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:h.type,rpId:r,rpOrigins:i,credential_response:h.credential_response}})}catch(l){return Kt(l)?{data:null,error:l}:{data:null,error:new ou("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},s){if(!r)return{data:null,error:new Wc("rpId is required for WebAuthn registration")};try{if(!Am())return{data:null,error:new ou("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(w=>{var _;return(_=w.data)===null||_===void 0?void 0:_.all.find(N=>N.factor_type==="webauthn"&&N.friendly_name===e&&N.status!=="unverified")}).then(w=>w?this.client.mfa.unenroll({factorId:w?.id}):void 0),{data:null,error:c};const{data:h,error:g}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:i},signal:o},{create:s});return h?this._verify({factorId:l.id,challengeId:h.challengeId,webauthn:{rpId:r,rpOrigins:i,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:g}}catch(l){return Kt(l)?{data:null,error:l}:{data:null,error:new ou("Unexpected error in register",l)}}}}Ux();const s3={url:rx,storageKey:nx,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ix,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function jm(t,e,r){return await r()}const Bu={};class Hc{get jwks(){var e,r;return(r=(e=Bu[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Bu[this.storageKey]=Object.assign(Object.assign({},Bu[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Bu[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Bu[this.storageKey]=Object.assign(Object.assign({},Bu[this.storageKey]),{cachedAt:e})}constructor(e){var r,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},s3),e);if(this.storageKey=s.storageKey,this.instanceID=(r=Hc.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Hc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Ui()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Mx({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=r1(s.fetch),this.lock=s.lock||jm,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,this.lockAcquireTimeout=s.lockAcquireTimeout,s.lock?this.lock=s.lock:this.persistSession&&Ui()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=qx:this.lock=jm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new a3(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:t1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Nm(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Nm(this.memoryStorage)),Ui()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l);try{await this._notifyAllSubscribers(l.data.event,l.data.session,!1)}catch(c){this._debug("#broadcastChannel","error",c)}})}this.initialize().catch(l=>{this._debug("#initialize()","error",l)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Qv}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},i="none";if(Ui()&&(r=yx(window.location.href),this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce")),Ui()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:s}=await this._getSessionFromURL(r,i);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),ux(s)){const h=(e=s.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:s}}return{error:s}}const{session:l,redirectType:c}=o;return this._debug("#_initialize()","detected session in URL",l,"redirect type",c),await this._saveSession(l),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Kt(r)?this._returnResult({error:r}):this._returnResult({error:new ou("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,i,o;try{const s=await or(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=e?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=e?.options)===null||o===void 0?void 0:o.captchaToken}},xform:io}),{data:l,error:c}=s;if(c||!l)return this._returnResult({data:{user:null,session:null},error:c});const h=l.session,g=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:g,session:h},error:null})}catch(s){if(Kt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var r,i,o;try{let s;if("email"in e){const{email:w,password:_,options:N}=e;let x=null,I=null;this.flowType==="pkce"&&([x,I]=await Du(this.storage,this.storageKey)),s=await or(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:N?.emailRedirectTo,body:{email:w,password:_,data:(r=N?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:N?.captchaToken},code_challenge:x,code_challenge_method:I},xform:io})}else if("phone"in e){const{phone:w,password:_,options:N}=e;s=await or(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:w,password:_,data:(i=N?.data)!==null&&i!==void 0?i:{},channel:(o=N?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:N?.captchaToken}},xform:io})}else throw new Yd("You must provide either an email or phone number and a password");const{data:l,error:c}=s;if(c||!l)return await qi(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});const h=l.session,g=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:g,session:h},error:null})}catch(s){if(await qi(this.storage,`${this.storageKey}-code-verifier`),Kt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let r;if("email"in e){const{email:s,password:l,options:c}=e;r=await or(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:km})}else if("phone"in e){const{phone:s,password:l,options:c}=e;r=await or(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:km})}else throw new Yd("You must provide either an email or phone number and a password");const{data:i,error:o}=r;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){const s=new Ru;return this._returnResult({data:{user:null,session:null},error:s})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(r){if(Kt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,i,o,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,i,o,s,l,c,h,g,w,_,N;let x,I;if("message"in e)x=e.message,I=e.signature;else{const{chain:P,wallet:R,statement:L,options:M}=e;let H;if(Ui())if(typeof R=="object")H=R;else{const fe=window;if("ethereum"in fe&&typeof fe.ethereum=="object"&&"request"in fe.ethereum&&typeof fe.ethereum.request=="function")H=fe.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!M?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");H=R}const oe=new URL((r=M?.url)!==null&&r!==void 0?r:window.location.href),le=await H.request({method:"eth_requestAccounts"}).then(fe=>fe).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!le||le.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const be=i1(le[0]);let ne=(i=M?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!ne){const fe=await H.request({method:"eth_chainId"});ne=zx(fe)}const G={domain:oe.host,address:be,statement:L,uri:oe.href,version:"1",chainId:ne,nonce:(o=M?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(l=(s=M?.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(c=M?.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(h=M?.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(g=M?.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(w=M?.signInWithEthereum)===null||w===void 0?void 0:w.resources};x=Vx(G),I=await H.request({method:"personal_sign",params:[$x(x),be]})}try{const{data:P,error:R}=await or(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:I},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(N=e.options)===null||N===void 0?void 0:N.captchaToken}}:null),xform:io});if(R)throw R;if(!P||!P.session||!P.user){const L=new Ru;return this._returnResult({data:{user:null,session:null},error:L})}return P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("SIGNED_IN",P.session)),this._returnResult({data:Object.assign({},P),error:R})}catch(P){if(Kt(P))return this._returnResult({data:{user:null,session:null},error:P});throw P}}async signInWithSolana(e){var r,i,o,s,l,c,h,g,w,_,N,x;let I,P;if("message"in e)I=e.message,P=e.signature;else{const{chain:R,wallet:L,statement:M,options:H}=e;let oe;if(Ui())if(typeof L=="object")oe=L;else{const be=window;if("solana"in be&&typeof be.solana=="object"&&("signIn"in be.solana&&typeof be.solana.signIn=="function"||"signMessage"in be.solana&&typeof be.solana.signMessage=="function"))oe=be.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof L!="object"||!H?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");oe=L}const le=new URL((r=H?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in oe&&oe.signIn){const be=await oe.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},H?.signInWithSolana),{version:"1",domain:le.host,uri:le.href}),M?{statement:M}:null));let ne;if(Array.isArray(be)&&be[0]&&typeof be[0]=="object")ne=be[0];else if(be&&typeof be=="object"&&"signedMessage"in be&&"signature"in be)ne=be;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ne&&"signature"in ne&&(typeof ne.signedMessage=="string"||ne.signedMessage instanceof Uint8Array)&&ne.signature instanceof Uint8Array)I=typeof ne.signedMessage=="string"?ne.signedMessage:new TextDecoder().decode(ne.signedMessage),P=ne.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in oe)||typeof oe.signMessage!="function"||!("publicKey"in oe)||typeof oe!="object"||!oe.publicKey||!("toBase58"in oe.publicKey)||typeof oe.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");I=[`${le.host} wants you to sign in with your Solana account:`,oe.publicKey.toBase58(),...M?["",M,""]:[""],"Version: 1",`URI: ${le.href}`,`Issued At: ${(o=(i=H?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((s=H?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${H.signInWithSolana.notBefore}`]:[],...!((l=H?.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${H.signInWithSolana.expirationTime}`]:[],...!((c=H?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${H.signInWithSolana.chainId}`]:[],...!((h=H?.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${H.signInWithSolana.nonce}`]:[],...!((g=H?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${H.signInWithSolana.requestId}`]:[],...!((_=(w=H?.signInWithSolana)===null||w===void 0?void 0:w.resources)===null||_===void 0)&&_.length?["Resources",...H.signInWithSolana.resources.map(ne=>`- ${ne}`)]:[]].join(`
`);const be=await oe.signMessage(new TextEncoder().encode(I),"utf8");if(!be||!(be instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");P=be}}try{const{data:R,error:L}=await or(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:I,signature:lu(P)},!((N=e.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:io});if(L)throw L;if(!R||!R.session||!R.user){const M=new Ru;return this._returnResult({data:{user:null,session:null},error:M})}return R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),this._returnResult({data:Object.assign({},R),error:L})}catch(R){if(Kt(R))return this._returnResult({data:{user:null,session:null},error:R});throw R}}async _exchangeCodeForSession(e){const r=await ru(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(r??"").split("/");try{if(!i&&this.flowType==="pkce")throw new cx;const{data:s,error:l}=await or(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:io});if(await qi(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!s||!s.session||!s.user){const c=new Ru;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:l})}catch(s){if(await qi(this.storage,`${this.storageKey}-code-verifier`),Kt(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:r,provider:i,token:o,access_token:s,nonce:l}=e,c=await or(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:s,nonce:l,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:io}),{data:h,error:g}=c;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!h||!h.session||!h.user){const w=new Ru;return this._returnResult({data:{user:null,session:null},error:w})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:h,error:g})}catch(r){if(Kt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,i,o,s,l;try{if("email"in e){const{email:c,options:h}=e;let g=null,w=null;this.flowType==="pkce"&&([g,w]=await Du(this.storage,this.storageKey));const{error:_}=await or(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=h?.data)!==null&&r!==void 0?r:{},create_user:(i=h?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:g,code_challenge_method:w},redirectTo:h?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in e){const{phone:c,options:h}=e,{data:g,error:w}=await or(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(o=h?.data)!==null&&o!==void 0?o:{},create_user:(s=h?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},channel:(l=h?.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g?.message_id},error:w})}throw new Yd("You must provide either an email or phone number.")}catch(c){if(await qi(this.storage,`${this.storageKey}-code-verifier`),Kt(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(e){var r,i;try{let o,s;"options"in e&&(o=(r=e.options)===null||r===void 0?void 0:r.redirectTo,s=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:l,error:c}=await or(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:io});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const h=l.session,g=l.user;return h?.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:g,session:h},error:null})}catch(o){if(Kt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(e){var r,i,o,s,l;try{let c=null,h=null;this.flowType==="pkce"&&([c,h]=await Du(this.storage,this.storageKey));const g=await or(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=e?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:h}),headers:this.headers,xform:Rx});return!((s=g.data)===null||s===void 0)&&s.url&&Ui()&&!(!((l=e.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(g.data.url),this._returnResult(g)}catch(c){if(await qi(this.storage,`${this.storageKey}-code-verifier`),Kt(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:i}=e;if(i)throw i;if(!r)throw new ls;const{error:o}=await or(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(e){if(Kt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:i,type:o,options:s}=e,{error:l}=await or(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in e){const{phone:i,type:o,options:s}=e,{data:l,error:c}=await or(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l?.message_id},error:c})}throw new Yd("You must provide either an email or phone number and a type")}catch(r){if(Kt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await ru(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<Xf:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const l=await ru(this.userStorage,this.storageKey+"-user");l?.user?e.user=l.user:e.user=ep()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=Lx(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await or(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ol}):await this._useSession(async r=>{var i,o,s;const{data:l,error:c}=r;if(c)throw c;return!(!((i=l.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ls}:await or(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(o=l.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0,xform:Ol})})}catch(r){if(Kt(r))return Qf(r)&&(await this._removeSession(),await qi(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async i=>{const{data:o,error:s}=i;if(s)throw s;if(!o.session)throw new ls;const l=o.session;let c=null,h=null;this.flowType==="pkce"&&e.email!=null&&([c,h]=await Du(this.storage,this.storageKey));const{data:g,error:w}=await or(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:h}),jwt:l.access_token,xform:Ol});if(w)throw w;return l.user=g.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(i){if(await qi(this.storage,`${this.storageKey}-code-verifier`),Kt(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ls;const r=Date.now()/1e3;let i=r,o=!0,s=null;const{payload:l}=Qd(e.access_token);if(l.exp&&(i=l.exp,o=i<=r),o){const{data:c,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!c)return{data:{user:null,session:null},error:null};s=c}else{const{data:c,error:h}=await this._getUser(e.access_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});s={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(r){if(Kt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var i;if(!e){const{data:l,error:c}=r;if(c)throw c;e=(i=l.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new ls;const{data:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Kt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!Ui())throw new Xd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Xd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new mm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Xd("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new mm("No code detected.");const{data:M,error:H}=await this._exchangeCodeForSession(e.code);if(H)throw H;const oe=new URL(window.location.href);return oe.searchParams.delete("code"),window.history.replaceState(window.history.state,"",oe.toString()),{data:{session:M.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:s,refresh_token:l,expires_in:c,expires_at:h,token_type:g}=e;if(!s||!c||!l||!g)throw new Xd("No session defined in URL");const w=Math.round(Date.now()/1e3),_=parseInt(c);let N=w+_;h&&(N=parseInt(h));const x=N-w;x*1e3<=$u&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${_}s`);const I=N-_;w-I>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",I,N,w):w-I<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",I,N,w);const{data:P,error:R}=await this._getUser(s);if(R)throw R;const L={provider_token:i,provider_refresh_token:o,access_token:s,expires_in:_,expires_at:N,refresh_token:l,token_type:g,user:P.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:L,redirectType:e.type},error:null})}catch(i){if(Kt(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await ru(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var i;const{data:o,error:s}=r;if(s&&!Qf(s))return this._returnResult({error:s});const l=(i=o.session)===null||i===void 0?void 0:i.access_token;if(l){const{error:c}=await this.admin.signOut(l,e);if(c&&!(lx(c)&&(c.status===404||c.status===401||c.status===403)||Qf(c)))return this._returnResult({error:c})}return e!=="others"&&(await this._removeSession(),await qi(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=vx(),i={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async r=>{var i,o;try{const{data:{session:s},error:l}=r;if(l)throw l;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,r={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await Du(this.storage,this.storageKey,!0));try{return await or(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(await qi(this.storage,`${this.storageKey}-code-verifier`),Kt(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:r,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(Kt(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:i,error:o}=await this._useSession(async s=>{var l,c,h,g,w;const{data:_,error:N}=s;if(N)throw N;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await or(this.fetch,"GET",x,{headers:this.headers,jwt:(w=(g=_.session)===null||g===void 0?void 0:g.access_token)!==null&&w!==void 0?w:void 0})});if(o)throw o;return Ui()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:e.provider,url:i?.url},error:null})}catch(i){if(Kt(i))return this._returnResult({data:{provider:e.provider,url:null},error:i});throw i}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var i;try{const{error:o,data:{session:s}}=r;if(o)throw o;const{options:l,provider:c,token:h,access_token:g,nonce:w}=e,_=await or(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=s?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:c,id_token:h,access_token:g,nonce:w,link_identity:!0,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:io}),{data:N,error:x}=_;return x?this._returnResult({data:{user:null,session:null},error:x}):!N||!N.session||!N.user?this._returnResult({data:{user:null,session:null},error:new Ru}):(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("USER_UPDATED",N.session)),this._returnResult({data:N,error:x}))}catch(o){if(await qi(this.storage,`${this.storageKey}-code-verifier`),Kt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var i,o;const{data:s,error:l}=r;if(l)throw l;return await or(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(Kt(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const i=Date.now();return await xx(async o=>(o>0&&await bx(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await or(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:io})),(o,s)=>{const l=200*Math.pow(2,o);return s&&Zf(s)&&Date.now()+l-i<$u})}catch(i){if(this._debug(r,"error",i),Kt(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",i),Ui()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,r;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await ru(this.storage,this.storageKey);if(o&&this.userStorage){let l=await ru(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:o.user},await Vu(this.userStorage,this.storageKey+"-user",l)),o.user=(e=l?.user)!==null&&e!==void 0?e:ep()}else if(o&&!o.user&&!o.user){const l=await ru(this.storage,this.storageKey+"-user");l&&l?.user?(o.user=l.user,await qi(this.storage,this.storageKey+"-user"),await Vu(this.storage,this.storageKey,o)):o.user=ep()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const s=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Xf;if(this._debug(i,`session has${s?"":" not"} expired with margin of ${Xf}s`),s){if(this.autoRefreshToken&&o.refresh_token){const{error:l}=await this._callRefreshToken(o.refresh_token);l&&(console.error(l),Zf(l)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:c}=await this._getUser(o.access_token);!c&&l?.user?(o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(i,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var r,i;if(!e)throw new ls;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Dh;const{data:s,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!s.session)throw new ls;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const c={data:s.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(s){if(this._debug(o,"error",s),Kt(s)){const l={data:null,error:s};return Zf(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,r,i=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:r});const s=[],l=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,r)}catch(h){s.push(h)}});if(await Promise.all(l),s.length>0){for(let c=0;c<s.length;c+=1)console.error(s[c]);throw s[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await qi(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await Vu(this.userStorage,this.storageKey+"-user",{user:r.user});const o=Object.assign({},r);delete o.user;const s=xm(o);await Vu(this.storage,this.storageKey,s)}else{const o=xm(r);await Vu(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await qi(this.storage,this.storageKey),await qi(this.storage,this.storageKey+"-code-verifier"),await qi(this.storage,this.storageKey+"-user"),this.userStorage&&await qi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ui()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),$u);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-e)/$u);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${$u}ms, refresh threshold is ${Lp} ticks`),o<=Lp&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof n1)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ui()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,i){const o=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[s,l]=await Du(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(l)}`});o.push(c.toString())}if(i?.queryParams){const s=new URLSearchParams(i.queryParams);o.push(s.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var i;const{data:o,error:s}=r;return s?this._returnResult({data:null,error:s}):await or(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(Kt(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var i,o;const{data:s,error:l}=r;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:g}=await or(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});return g?this._returnResult({data:null,error:g}):(e.factorType==="totp"&&h.type==="totp"&&(!((o=h?.totp)===null||o===void 0)&&o.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(r){if(Kt(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var i;const{data:o,error:s}=r;if(s)return this._returnResult({data:null,error:s});const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Xx(e.webauthn.credential_response):Qx(e.webauthn.credential_response)})}:{code:e.code}),{data:c,error:h}=await or(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return h?this._returnResult({data:null,error:h}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:h}))})}catch(r){if(Kt(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var i;const{data:o,error:s}=r;if(s)return this._returnResult({data:null,error:s});const l=await or(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});if(l.error)return l;const{data:c}=l;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:Jx(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:Yx(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Kt(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:i}=await this._challenge({factorId:e.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:i}=await this.getUser();if(i)return{data:null,error:i};const o={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=r?.factors)!==null&&e!==void 0?e:[])o.all.push(s),s.status==="verified"&&o[s.factor_type].push(s);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(e){var r,i,o,s;if(e)try{const{payload:x}=Qd(e);let I=null;x.aal&&(I=x.aal);let P=I;const{data:{user:R},error:L}=await this.getUser(e);if(L)return this._returnResult({data:null,error:L});((i=(r=R?.factors)===null||r===void 0?void 0:r.filter(oe=>oe.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(P="aal2");const H=x.amr||[];return{data:{currentLevel:I,nextLevel:P,currentAuthenticationMethods:H},error:null}}catch(x){if(Kt(x))return this._returnResult({data:null,error:x});throw x}const{data:{session:l},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=Qd(l.access_token);let g=null;h.aal&&(g=h.aal);let w=g;((s=(o=l.user.factors)===null||o===void 0?void 0:o.filter(x=>x.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(w="aal2");const N=h.amr||[];return{data:{currentLevel:g,nextLevel:w,currentAuthenticationMethods:N},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?await or(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:i.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new ls})})}catch(r){if(Kt(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async i=>{const{data:{session:o},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!o)return this._returnResult({data:null,error:new ls});const l=await or(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return l.data&&l.data.redirect_url&&Ui()&&!r?.skipBrowserRedirect&&window.location.assign(l.data.redirect_url),l})}catch(i){if(Kt(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(e,r){try{return await this._useSession(async i=>{const{data:{session:o},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!o)return this._returnResult({data:null,error:new ls});const l=await or(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return l.data&&l.data.redirect_url&&Ui()&&!r?.skipBrowserRedirect&&window.location.assign(l.data.redirect_url),l})}catch(i){if(Kt(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:i}=e;return i?this._returnResult({data:null,error:i}):r?await or(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new ls})})}catch(e){if(Kt(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?(await or(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ls})})}catch(r){if(Kt(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let i=r.keys.find(c=>c.kid===e);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(c=>c.kid===e),i&&this.jwks_cached_at+sx>o)return i;const{data:s,error:l}=await or(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=o,i=s.keys.find(c=>c.kid===e),!i)?null:i}async getClaims(e,r={}){try{let i=e;if(!i){const{data:x,error:I}=await this.getSession();if(I||!x.session)return this._returnResult({data:null,error:I});i=x.session.access_token}const{header:o,payload:s,signature:l,raw:{header:c,payload:h}}=Qd(i);r?.allowExpired||Ex(s.exp);const g=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!g){const{error:x}=await this.getUser(i);if(x)throw x;return{data:{claims:s,header:o,signature:l},error:null}}const w=Cx(o.alg),_=await crypto.subtle.importKey("jwk",g,w,!0,["verify"]);if(!await crypto.subtle.verify(w,_,l,gx(`${c}.${h}`)))throw new Tp("Invalid JWT signature");return{data:{claims:s,header:o,signature:l},error:null}}catch(i){if(Kt(i))return this._returnResult({data:null,error:i});throw i}}}Hc.nextInstanceID={};const o3=Hc,l3="2.95.3";let Pc="";typeof Deno<"u"?Pc="deno":typeof document<"u"?Pc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Pc="react-native":Pc="node";const u3={"X-Client-Info":`supabase-js-${Pc}/${l3}`},c3={headers:u3},d3={schema:"public"},h3={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},f3={};function Kc(t){"@babel/helpers - typeof";return Kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kc(t)}function p3(t,e){if(Kc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e);if(Kc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function g3(t){var e=p3(t,"string");return Kc(e)=="symbol"?e:e+""}function m3(t,e,r){return(e=g3(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Em(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,i)}return r}function Bn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Em(Object(r),!0).forEach(function(i){m3(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Em(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}const v3=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),y3=()=>Headers,w3=(t,e,r)=>{const i=v3(r),o=y3();return async(s,l)=>{var c;const h=(c=await e())!==null&&c!==void 0?c:t;let g=new o(l?.headers);return g.has("apikey")||g.set("apikey",t),g.has("Authorization")||g.set("Authorization",`Bearer ${h}`),i(s,Bn(Bn({},l),{},{headers:g}))}};function b3(t){return t.endsWith("/")?t:t+"/"}function x3(t,e){var r,i;const{db:o,auth:s,realtime:l,global:c}=t,{db:h,auth:g,realtime:w,global:_}=e,N={db:Bn(Bn({},h),o),auth:Bn(Bn({},g),s),realtime:Bn(Bn({},w),l),storage:{},global:Bn(Bn(Bn({},_),c),{},{headers:Bn(Bn({},(r=_?.headers)!==null&&r!==void 0?r:{}),(i=c?.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return t.accessToken?N.accessToken=t.accessToken:delete N.accessToken,N}function _3(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(b3(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var k3=class extends o3{constructor(t){super(t)}},S3=class{constructor(t,e,r){var i,o;this.supabaseUrl=t,this.supabaseKey=e;const s=_3(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const l=`sb-${s.hostname.split(".")[0]}-auth-token`,c={db:d3,realtime:f3,auth:Bn(Bn({},h3),{},{storageKey:l}),global:c3},h=x3(r??{},c);if(this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=h.global.headers)!==null&&o!==void 0?o:{},h.accessToken)this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(w,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}});else{var g;this.auth=this._initSupabaseAuthClient((g=h.auth)!==null&&g!==void 0?g:{},this.headers,h.global.fetch)}this.fetch=w3(e,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Bn({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(w=>this.realtime.setAuth(w)).catch(w=>console.warn("Failed to set initial Realtime auth token:",w)),this.rest=new lb(new URL("rest/v1",s).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch,timeout:h.db.timeout,urlLengthLimit:h.db.urlLengthLimit}),this.storage=new tx(this.storageUrl.href,this.headers,this.fetch,r?.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new eb(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,r;if(t.accessToken)return await t.accessToken();const{data:i}=await t.auth.getSession();return(e=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:i,userStorage:o,storageKey:s,flowType:l,lock:c,debug:h,throwOnError:g},w,_){const N={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new k3({url:this.authUrl.href,headers:Bn(Bn({},N),w),storageKey:s,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:i,userStorage:o,flowType:l,lock:c,debug:h,throwOnError:g,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Nb(this.realtimeUrl.href,Bn(Bn({},t),{},{params:Bn(Bn({},{apikey:this.supabaseKey}),t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e?.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const N3=(t,e,r)=>new S3(t,e,r);function A3(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const r=e.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}A3()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const j3="https://viwnlfduyhnxtypkrzea.supabase.co",E3="sb_publishable_XZZehI5j_V52mDqJ2PDc-Q_K5eConXh",ii=N3(j3,E3),Na={async getInvoices(){const{data:t,error:e}=await ii.from("invoices").select("*, items(*), clients(*)");if(e)throw e;return t.map(this.mapInvoiceFromDb)},async getInvoice(t){const{data:e,error:r}=await ii.from("invoices").select("*, items(*), clients(*)").eq("id",t).single();return r?null:this.mapInvoiceFromDb(e)},async createInvoice(t){let e=t.client?.id;!e&&t.client&&(e=(await this.createClient(t.client)).id);const{data:r,error:i}=await ii.from("invoices").insert({client_id:e,agent_id:t.agentId,invoice_number:t.invoiceNumber,status:t.status,due_date:t.dueDate&&!isNaN(Date.parse(t.dueDate))?new Date(t.dueDate).toISOString():new Date().toISOString(),subtotal:t.subtotal,tax:t.tax,total:t.total,notes:t.notes,passport_number:t.passportNumber,gender:t.gender,flight_number:t.flightNumber,room_type:t.roomType,visa_status:t.visaStatus,departure_date:t.departureDate&&!isNaN(Date.parse(t.departureDate))?new Date(t.departureDate).toISOString():null,date_of_birth:t.dateOfBirth&&!isNaN(Date.parse(t.dateOfBirth))?new Date(t.dateOfBirth).toISOString():null,created_at:new Date().toISOString()}).select().single();if(i)throw i;if(e&&(t.passportNumber||t.gender||t.dateOfBirth)&&await this.updateClient(e,{passportNumber:t.passportNumber,gender:t.gender,dateOfBirth:t.dateOfBirth}),t.items&&t.items.length>0){const o=t.items.map(l=>({invoice_id:r.id,description:l.description,quantity:l.quantity,unit_price:l.unitPrice})),{error:s}=await ii.from("items").insert(o);if(s)throw s}return this.getInvoice(r.id)},async updateInvoice(t,e){const{error:r}=await ii.from("invoices").update({status:e.status,due_date:e.dueDate&&!isNaN(Date.parse(e.dueDate))?new Date(e.dueDate).toISOString():void 0,subtotal:e.subtotal,tax:e.tax,total:e.total,notes:e.notes,passport_number:e.passportNumber,gender:e.gender,flight_number:e.flightNumber,room_type:e.roomType,visa_status:e.visaStatus,departure_date:e.departureDate&&!isNaN(Date.parse(e.departureDate))?new Date(e.departureDate).toISOString():null,date_of_birth:e.dateOfBirth&&!isNaN(Date.parse(e.dateOfBirth))?new Date(e.dateOfBirth).toISOString():null}).eq("id",t);if(r)throw r;if(e.client?.id&&(e.passportNumber||e.gender||e.dateOfBirth)&&await this.updateClient(e.client.id,{passportNumber:e.passportNumber,gender:e.gender,dateOfBirth:e.dateOfBirth}),e.items){await ii.from("items").delete().eq("invoice_id",t);const i=e.items.map(o=>({invoice_id:t,description:o.description,quantity:o.quantity,unit_price:o.unitPrice}));await ii.from("items").insert(i)}return this.getInvoice(t)},async deleteInvoice(t){const{data:e}=await ii.from("invoices").select("client_id").eq("id",t).single(),r=e?.client_id,{error:i}=await ii.from("invoices").delete().eq("id",t);if(i)throw i;if(r){const{count:o,error:s}=await ii.from("invoices").select("*",{count:"exact",head:!0}).eq("client_id",r);!s&&o===0&&await ii.from("clients").delete().eq("id",r)}},async getClients(){const{data:t,error:e}=await ii.from("clients").select("*");if(e)throw e;return t.map(this.mapClientFromDb)},async createClient(t){const{data:e,error:r}=await ii.from("clients").insert({name:t.name,email:t.email,phone:t.phone,address:t.address,passport_number:t.passportNumber,gender:t.gender,date_of_birth:t.dateOfBirth&&t.dateOfBirth.trim()!==""?t.dateOfBirth:null}).select().single();if(r)throw r;return this.mapClientFromDb(e)},async updateClient(t,e){const{data:r,error:i}=await ii.from("clients").update({name:e.name,email:e.email,phone:e.phone,address:e.address,passport_number:e.passportNumber,gender:e.gender,date_of_birth:e.dateOfBirth&&e.dateOfBirth.trim()!==""?e.dateOfBirth:void 0}).eq("id",t).select().single();if(i)throw i;return this.mapClientFromDb(r)},mapInvoiceFromDb(t){const e=Array.isArray(t.clients)?t.clients[0]:t.clients;return{id:t.id,invoiceNumber:t.invoice_number,clientName:e?.name||"Unknown",clientEmail:e?.email||"",client:e?Na.mapClientFromDb(e):void 0,agentId:t.agent_id,status:t.status,dueDate:t.due_date,subtotal:t.subtotal,tax:t.tax,total:t.total,notes:t.notes,createdAt:t.created_at,passportNumber:t.passport_number,gender:t.gender,flightNumber:t.flight_number,roomType:t.room_type,visaStatus:t.visa_status,departureDate:t.departure_date,dateOfBirth:t.date_of_birth,items:t.items?.map(r=>({id:r.id,description:r.description,quantity:r.quantity,unitPrice:r.unit_price,total:r.quantity*r.unit_price,invoiceId:r.invoice_id}))||[]}},mapClientFromDb(t){return{id:t.id,name:t.name,email:t.email,phone:t.phone,address:t.address,passportNumber:t.passport_number,gender:t.gender,dateOfBirth:t.date_of_birth}},async getRooms(){const{data:t,error:e}=await ii.from("rooms").select(`
                *,
                assignments:room_assignments(
                    *,
                    client:clients(*)
                )
            `);if(e)throw e;return t.map(this.mapRoomFromDb)},async createRoom(t){const{data:e,error:r}=await ii.from("rooms").insert({hotel_name:t.hotelName,city:t.city,type:t.type,capacity:t.capacity,floor_number:t.floorNumber,room_number:t.roomNumber}).select().single();if(r)throw r;return this.mapRoomFromDb(e)},async deleteRoom(t){const{error:e}=await ii.from("rooms").delete().eq("id",t);if(e)throw e},async assignClientToRoom(t,e){await ii.from("room_assignments").delete().eq("client_id",e);const{error:r}=await ii.from("room_assignments").insert({room_id:t,client_id:e});if(r)throw r},async removeClientFromRoom(t){const{error:e}=await ii.from("room_assignments").delete().eq("client_id",t);if(e)throw e},mapRoomFromDb(t){const e=t.assignments?.map(r=>({id:r.id,roomId:r.room_id,clientId:r.client_id,assignedAt:r.assigned_at,client:r.client?Na.mapClientFromDb(r.client):void 0}))||[];return{id:t.id,hotelName:t.hotel_name,city:t.city||"Makkah",type:t.type,capacity:t.capacity,floorNumber:t.floor_number,roomNumber:t.room_number,createdAt:t.created_at,assignments:e,currentOccupancy:e.length}}};function s1(t){const[e,r]=J.useState([]),[i,o]=J.useState(!0),[s,l]=J.useState(null),c=J.useCallback(async()=>{o(!0);try{let _=await Na.getInvoices();t&&(_=_.filter(N=>N.agentId===t)),_.sort((N,x)=>new Date(x.createdAt).getTime()-new Date(N.createdAt).getTime()),r(_),l(null)}catch(_){console.error("Error fetching invoices:",_),l(_.message||"Failed to fetch invoices"),r([])}finally{o(!1)}},[t]);return J.useEffect(()=>{c()},[c]),{invoices:e,isLoading:i,error:s,createInvoice:async(_,N)=>{try{const x={..._,items:N};await Na.createInvoice(x),await c()}catch(x){throw new Error(x.message||"Failed to create invoice")}},updateInvoice:async(_,N,x)=>{try{const I={...N,items:x};await Na.updateInvoice(_,I),await c()}catch(I){throw new Error(I.message||"Failed to update invoice")}},deleteInvoice:async _=>{try{await Na.deleteInvoice(_),await c()}catch(N){throw new Error(N.message||"Failed to delete invoice")}},refetch:c}}function C3(){const[t,e]=J.useState([]),[r,i]=J.useState(!0),[o,s]=J.useState(null),l=J.useCallback(async()=>{i(!0);try{const{defaultAgents:c}=await Bc(async()=>{const{defaultAgents:h}=await Promise.resolve().then(()=>d1);return{defaultAgents:h}},void 0);e(c),s(null)}catch(c){console.error("Error fetching agents:",c),s(c.message||"Failed to fetch agents"),e([])}finally{i(!1)}},[]);return J.useEffect(()=>{l()},[l]),{agents:t,isLoading:r,error:o,refetch:l}}function o1(t){const[e,r]=J.useState({totalInvoices:0,paidInvoices:0,unpaidInvoices:0,pendingInvoices:0,totalRevenue:0,recentInvoices:[]}),[i,o]=J.useState(!0),[s,l]=J.useState(null),c=J.useCallback(async()=>{o(!0);try{let h=await Na.getInvoices();t&&(h=h.filter(N=>N.agentId===t));const g=h.filter(N=>N.status==="paid"),w=h.filter(N=>N.status==="sent"||N.status==="draft"),_=h.filter(N=>N.status==="overdue");r({totalInvoices:h.length,paidInvoices:g.length,unpaidInvoices:_.length,pendingInvoices:w.length,totalRevenue:g.reduce((N,x)=>N+x.total,0),recentInvoices:h.slice(0,5)}),l(null)}catch(h){l(h.message||"Failed to fetch dashboard stats")}finally{o(!1)}},[t]);return J.useEffect(()=>{c()},[c]),{stats:e,isLoading:i,error:s,refetch:c}}function l1(t){const[e,r]=J.useState([]),[i,o]=J.useState(!0),[s,l]=J.useState(null),c=J.useCallback(async()=>{o(!0);try{const h=new Date;h.setHours(0,0,0,0);let w=(await Na.getInvoices()).filter(_=>new Date(_.createdAt)>=h);t&&(w=w.filter(_=>_.agentId===t)),r(w),l(null)}catch(h){l(h.message||"Failed to fetch today's invoices")}finally{o(!1)}},[t]);return J.useEffect(()=>{c()},[c]),{invoices:e,isLoading:i,error:s,refetch:c}}var ah={exports:{}},P3=ah.exports,Cm;function L3(){return Cm||(Cm=1,function(t,e){(function(r,i){t.exports=i()})(P3,function(){var r=function(f,v){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,C){A.__proto__=C}||function(A,C){for(var T in C)Object.prototype.hasOwnProperty.call(C,T)&&(A[T]=C[T])})(f,v)},i=function(){return(i=Object.assign||function(f){for(var v,A=1,C=arguments.length;A<C;A++)for(var T in v=arguments[A])Object.prototype.hasOwnProperty.call(v,T)&&(f[T]=v[T]);return f}).apply(this,arguments)};function o(f,v,A){for(var C,T=0,U=v.length;T<U;T++)!C&&T in v||((C=C||Array.prototype.slice.call(v,0,T))[T]=v[T]);return f.concat(C||Array.prototype.slice.call(v))}var s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:hy,l=Object.keys,c=Array.isArray;function h(f,v){return typeof v!="object"||l(v).forEach(function(A){f[A]=v[A]}),f}typeof Promise>"u"||s.Promise||(s.Promise=Promise);var g=Object.getPrototypeOf,w={}.hasOwnProperty;function _(f,v){return w.call(f,v)}function N(f,v){typeof v=="function"&&(v=v(g(f))),(typeof Reflect>"u"?l:Reflect.ownKeys)(v).forEach(function(A){I(f,A,v[A])})}var x=Object.defineProperty;function I(f,v,A,C){x(f,v,h(A&&_(A,"get")&&typeof A.get=="function"?{get:A.get,set:A.set,configurable:!0}:{value:A,configurable:!0,writable:!0},C))}function P(f){return{from:function(v){return f.prototype=Object.create(v.prototype),I(f.prototype,"constructor",f),{extend:N.bind(null,f.prototype)}}}}var R=Object.getOwnPropertyDescriptor,L=[].slice;function M(f,v,A){return L.call(f,v,A)}function H(f,v){return v(f)}function oe(f){if(!f)throw new Error("Assertion Failed")}function le(f){s.setImmediate?setImmediate(f):setTimeout(f,0)}function be(f,v){if(typeof v=="string"&&_(f,v))return f[v];if(!v)return f;if(typeof v!="string"){for(var A=[],C=0,T=v.length;C<T;++C){var U=be(f,v[C]);A.push(U)}return A}var Z=v.indexOf(".");if(Z!==-1){var ue=f[v.substr(0,Z)];return ue==null?void 0:be(ue,v.substr(Z+1))}}function ne(f,v,A){if(f&&v!==void 0&&!("isFrozen"in Object&&Object.isFrozen(f)))if(typeof v!="string"&&"length"in v){oe(typeof A!="string"&&"length"in A);for(var C=0,T=v.length;C<T;++C)ne(f,v[C],A[C])}else{var U,Z,ue=v.indexOf(".");ue!==-1?(U=v.substr(0,ue),(Z=v.substr(ue+1))===""?A===void 0?c(f)&&!isNaN(parseInt(U))?f.splice(U,1):delete f[U]:f[U]=A:ne(ue=!(ue=f[U])||!_(f,U)?f[U]={}:ue,Z,A)):A===void 0?c(f)&&!isNaN(parseInt(v))?f.splice(v,1):delete f[v]:f[v]=A}}function G(f){var v,A={};for(v in f)_(f,v)&&(A[v]=f[v]);return A}var fe=[].concat;function Te(f){return fe.apply([],f)}var nr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Te([8,16,32,64].map(function(f){return["Int","Uint","Float"].map(function(v){return v+f+"Array"})}))).filter(function(f){return s[f]}),V=new Set(nr.map(function(f){return s[f]})),Y=null;function pe(f){return Y=new WeakMap,f=function v(A){if(!A||typeof A!="object")return A;var C=Y.get(A);if(C)return C;if(c(A)){C=[],Y.set(A,C);for(var T=0,U=A.length;T<U;++T)C.push(v(A[T]))}else if(V.has(A.constructor))C=A;else{var Z,ue=g(A);for(Z in C=ue===Object.prototype?{}:Object.create(ue),Y.set(A,C),A)_(A,Z)&&(C[Z]=v(A[Z]))}return C}(f),Y=null,f}var te={}.toString;function Ue(f){return te.call(f).slice(8,-1)}var Me=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ze=typeof Me=="symbol"?function(f){var v;return f!=null&&(v=f[Me])&&v.apply(f)}:function(){return null};function de(f,v){return v=f.indexOf(v),0<=v&&f.splice(v,1),0<=v}var je={};function _e(f){var v,A,C,T;if(arguments.length===1){if(c(f))return f.slice();if(this===je&&typeof f=="string")return[f];if(T=ze(f)){for(A=[];!(C=T.next()).done;)A.push(C.value);return A}if(f==null)return[f];if(typeof(v=f.length)!="number")return[f];for(A=new Array(v);v--;)A[v]=f[v];return A}for(v=arguments.length,A=new Array(v);v--;)A[v]=arguments[v];return A}var ae=typeof Symbol<"u"?function(f){return f[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Qt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Vn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Qt),O={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function $(f,v){this.name=f,this.message=v}function X(f,v){return f+". Errors: "+Object.keys(v).map(function(A){return v[A].toString()}).filter(function(A,C,T){return T.indexOf(A)===C}).join(`
`)}function ie(f,v,A,C){this.failures=v,this.failedKeys=C,this.successCount=A,this.message=X(f,v)}function he(f,v){this.name="BulkError",this.failures=Object.keys(v).map(function(A){return v[A]}),this.failuresByPos=v,this.message=X(f,this.failures)}P($).from(Error).extend({toString:function(){return this.name+": "+this.message}}),P(ie).from($),P(he).from($);var ye=Vn.reduce(function(f,v){return f[v]=v+"Error",f},{}),Ie=$,ge=Vn.reduce(function(f,v){var A=v+"Error";function C(T,U){this.name=A,T?typeof T=="string"?(this.message="".concat(T).concat(U?`
 `+U:""),this.inner=U||null):typeof T=="object"&&(this.message="".concat(T.name," ").concat(T.message),this.inner=T):(this.message=O[v]||A,this.inner=null)}return P(C).from(Ie),f[v]=C,f},{});ge.Syntax=SyntaxError,ge.Type=TypeError,ge.Range=RangeError;var rt=Qt.reduce(function(f,v){return f[v+"Error"]=ge[v],f},{}),at=Vn.reduce(function(f,v){return["Syntax","Type","Range"].indexOf(v)===-1&&(f[v+"Error"]=ge[v]),f},{});function it(){}function bt(f){return f}function qt(f,v){return f==null||f===bt?v:function(A){return v(f(A))}}function Je(f,v){return function(){f.apply(this,arguments),v.apply(this,arguments)}}function se(f,v){return f===it?v:function(){var A=f.apply(this,arguments);A!==void 0&&(arguments[0]=A);var C=this.onsuccess,T=this.onerror;this.onsuccess=null,this.onerror=null;var U=v.apply(this,arguments);return C&&(this.onsuccess=this.onsuccess?Je(C,this.onsuccess):C),T&&(this.onerror=this.onerror?Je(T,this.onerror):T),U!==void 0?U:A}}function Xt(f,v){return f===it?v:function(){f.apply(this,arguments);var A=this.onsuccess,C=this.onerror;this.onsuccess=this.onerror=null,v.apply(this,arguments),A&&(this.onsuccess=this.onsuccess?Je(A,this.onsuccess):A),C&&(this.onerror=this.onerror?Je(C,this.onerror):C)}}function Tt(f,v){return f===it?v:function(A){var C=f.apply(this,arguments);h(A,C);var T=this.onsuccess,U=this.onerror;return this.onsuccess=null,this.onerror=null,A=v.apply(this,arguments),T&&(this.onsuccess=this.onsuccess?Je(T,this.onsuccess):T),U&&(this.onerror=this.onerror?Je(U,this.onerror):U),C===void 0?A===void 0?void 0:A:h(C,A)}}function ot(f,v){return f===it?v:function(){return v.apply(this,arguments)!==!1&&f.apply(this,arguments)}}function pt(f,v){return f===it?v:function(){var A=f.apply(this,arguments);if(A&&typeof A.then=="function"){for(var C=this,T=arguments.length,U=new Array(T);T--;)U[T]=arguments[T];return A.then(function(){return v.apply(C,U)})}return v.apply(this,arguments)}}at.ModifyError=ie,at.DexieError=$,at.BulkError=he;var vt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function St(f){vt=f}var Rt={},Yt=100,nr=typeof Promise>"u"?[]:function(){var f=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[f,g(f),f];var v=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[v,g(v),f]}(),Qt=nr[0],Vn=nr[1],nr=nr[2],Vn=Vn&&Vn.then,Zt=Qt&&Qt.constructor,yr=!!nr,zt=function(f,v){On.push([f,v]),wt&&(queueMicrotask(Cr),wt=!1)},ar=!0,wt=!0,Xr=[],kr=[],Zn=bt,Sr={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:it,pgp:!1,env:{},finalize:it},xt=Sr,On=[],mr=0,gi=[];function dt(f){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var v=this._PSD=xt;if(typeof f!="function"){if(f!==Rt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&br(this,this._value))}this._state=null,this._value=null,++v.ref,function A(C,T){try{T(function(U){if(C._state===null){if(U===C)throw new TypeError("A promise cannot be resolved with itself.");var Z=C._lib&&qr();U&&typeof U.then=="function"?A(C,function(ue,xe){U instanceof dt?U._then(ue,xe):U.then(ue,xe)}):(C._state=!0,C._value=U,Ft(C)),Z&&an()}},br.bind(null,C))}catch(U){br(C,U)}}(this,f)}var Nn={get:function(){var f=xt,v=qn;function A(C,T){var U=this,Z=!f.global&&(f!==xt||v!==qn),ue=Z&&!tn(),xe=new dt(function(Ae,Le){pr(U,new Er(hs(C,f,Z,ue),hs(T,f,Z,ue),Ae,Le,f))});return this._consoleTask&&(xe._consoleTask=this._consoleTask),xe}return A.prototype=Rt,A},set:function(f){I(this,"then",f&&f.prototype===Rt?Nn:{get:function(){return f},set:Nn.set})}};function Er(f,v,A,C,T){this.onFulfilled=typeof f=="function"?f:null,this.onRejected=typeof v=="function"?v:null,this.resolve=A,this.reject=C,this.psd=T}function br(f,v){var A,C;kr.push(v),f._state===null&&(A=f._lib&&qr(),v=Zn(v),f._state=!1,f._value=v,C=f,Xr.some(function(T){return T._value===C._value})||Xr.push(C),Ft(f),A&&an())}function Ft(f){var v=f._listeners;f._listeners=[];for(var A=0,C=v.length;A<C;++A)pr(f,v[A]);var T=f._PSD;--T.ref||T.finalize(),mr===0&&(++mr,zt(function(){--mr==0&&Ct()},[]))}function pr(f,v){if(f._state!==null){var A=f._state?v.onFulfilled:v.onRejected;if(A===null)return(f._state?v.resolve:v.reject)(f._value);++v.psd.ref,++mr,zt(wn,[A,f,v])}else f._listeners.push(v)}function wn(f,v,A){try{var C,T=v._value;!v._state&&kr.length&&(kr=[]),C=vt&&v._consoleTask?v._consoleTask.run(function(){return f(T)}):f(T),v._state||kr.indexOf(T)!==-1||function(U){for(var Z=Xr.length;Z;)if(Xr[--Z]._value===U._value)return Xr.splice(Z,1)}(v),A.resolve(C)}catch(U){A.reject(U)}finally{--mr==0&&Ct(),--A.psd.ref||A.psd.finalize()}}function Cr(){Ii(Sr,function(){qr()&&an()})}function qr(){var f=ar;return wt=ar=!1,f}function an(){var f,v,A;do for(;0<On.length;)for(f=On,On=[],A=f.length,v=0;v<A;++v){var C=f[v];C[0].apply(null,C[1])}while(0<On.length);wt=ar=!0}function Ct(){var f=Xr;Xr=[],f.forEach(function(C){C._PSD.onunhandled.call(null,C._value,C)});for(var v=gi.slice(0),A=v.length;A;)v[--A]()}function Qr(f){return new dt(Rt,!1,f)}function er(f,v){var A=xt;return function(){var C=qr(),T=xt;try{return Un(A,!0),f.apply(this,arguments)}catch(U){v&&v(U)}finally{Un(T,!1),C&&an()}}}N(dt.prototype,{then:Nn,_then:function(f,v){pr(this,new Er(null,null,f,v,xt))},catch:function(f){if(arguments.length===1)return this.then(null,f);var v=f,A=arguments[1];return typeof v=="function"?this.then(null,function(C){return(C instanceof v?A:Qr)(C)}):this.then(null,function(C){return(C&&C.name===v?A:Qr)(C)})},finally:function(f){return this.then(function(v){return dt.resolve(f()).then(function(){return v})},function(v){return dt.resolve(f()).then(function(){return Qr(v)})})},timeout:function(f,v){var A=this;return f<1/0?new dt(function(C,T){var U=setTimeout(function(){return T(new ge.Timeout(v))},f);A.then(C,T).finally(clearTimeout.bind(null,U))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&I(dt.prototype,Symbol.toStringTag,"Dexie.Promise"),Sr.env=Ha(),N(dt,{all:function(){var f=_e.apply(null,arguments).map(mi);return new dt(function(v,A){f.length===0&&v([]);var C=f.length;f.forEach(function(T,U){return dt.resolve(T).then(function(Z){f[U]=Z,--C||v(f)},A)})})},resolve:function(f){return f instanceof dt?f:f&&typeof f.then=="function"?new dt(function(v,A){f.then(v,A)}):new dt(Rt,!0,f)},reject:Qr,race:function(){var f=_e.apply(null,arguments).map(mi);return new dt(function(v,A){f.map(function(C){return dt.resolve(C).then(v,A)})})},PSD:{get:function(){return xt},set:function(f){return xt=f}},totalEchoes:{get:function(){return qn}},newPSD:Tn,usePSD:Ii,scheduler:{get:function(){return zt},set:function(f){zt=f}},rejectionMapper:{get:function(){return Zn},set:function(f){Zn=f}},follow:function(f,v){return new dt(function(A,C){return Tn(function(T,U){var Z=xt;Z.unhandleds=[],Z.onunhandled=U,Z.finalize=Je(function(){var ue,xe=this;ue=function(){xe.unhandleds.length===0?T():U(xe.unhandleds[0])},gi.push(function Ae(){ue(),gi.splice(gi.indexOf(Ae),1)}),++mr,zt(function(){--mr==0&&Ct()},[])},Z.finalize),f()},v,A,C)})}}),Zt&&(Zt.allSettled&&I(dt,"allSettled",function(){var f=_e.apply(null,arguments).map(mi);return new dt(function(v){f.length===0&&v([]);var A=f.length,C=new Array(A);f.forEach(function(T,U){return dt.resolve(T).then(function(Z){return C[U]={status:"fulfilled",value:Z}},function(Z){return C[U]={status:"rejected",reason:Z}}).then(function(){return--A||v(C)})})})}),Zt.any&&typeof AggregateError<"u"&&I(dt,"any",function(){var f=_e.apply(null,arguments).map(mi);return new dt(function(v,A){f.length===0&&A(new AggregateError([]));var C=f.length,T=new Array(C);f.forEach(function(U,Z){return dt.resolve(U).then(function(ue){return v(ue)},function(ue){T[Z]=ue,--C||A(new AggregateError(T))})})})}),Zt.withResolvers&&(dt.withResolvers=Zt.withResolvers));var vr={awaits:0,echoes:0,id:0},Mr=0,Pr=[],Ur=0,qn=0,Pi=0;function Tn(f,v,A,C){var T=xt,U=Object.create(T);return U.parent=T,U.ref=0,U.global=!1,U.id=++Pi,Sr.env,U.env=yr?{Promise:dt,PromiseProp:{value:dt,configurable:!0,writable:!0},all:dt.all,race:dt.race,allSettled:dt.allSettled,any:dt.any,resolve:dt.resolve,reject:dt.reject}:{},v&&h(U,v),++T.ref,U.finalize=function(){--this.parent.ref||this.parent.finalize()},C=Ii(U,f,A,C),U.ref===0&&U.finalize(),C}function ei(){return vr.id||(vr.id=++Mr),++vr.awaits,vr.echoes+=Yt,vr.id}function tn(){return!!vr.awaits&&(--vr.awaits==0&&(vr.id=0),vr.echoes=vr.awaits*Yt,!0)}function mi(f){return vr.echoes&&f&&f.constructor===Zt?(ei(),f.then(function(v){return tn(),v},function(v){return tn(),Gr(v)})):f}function Li(){var f=Pr[Pr.length-1];Pr.pop(),Un(f,!1)}function Un(f,v){var A,C=xt;(v?!vr.echoes||Ur++&&f===xt:!Ur||--Ur&&f===xt)||queueMicrotask(v?(function(T){++qn,vr.echoes&&--vr.echoes!=0||(vr.echoes=vr.awaits=vr.id=0),Pr.push(xt),Un(T,!0)}).bind(null,f):Li),f!==xt&&(xt=f,C===Sr&&(Sr.env=Ha()),yr&&(A=Sr.env.Promise,v=f.env,(C.global||f.global)&&(Object.defineProperty(s,"Promise",v.PromiseProp),A.all=v.all,A.race=v.race,A.resolve=v.resolve,A.reject=v.reject,v.allSettled&&(A.allSettled=v.allSettled),v.any&&(A.any=v.any))))}function Ha(){var f=s.Promise;return yr?{Promise:f,PromiseProp:Object.getOwnPropertyDescriptor(s,"Promise"),all:f.all,race:f.race,allSettled:f.allSettled,any:f.any,resolve:f.resolve,reject:f.reject}:{}}function Ii(f,v,A,C,T){var U=xt;try{return Un(f,!0),v(A,C,T)}finally{Un(U,!1)}}function hs(f,v,A,C){return typeof f!="function"?f:function(){var T=xt;A&&ei(),Un(v,!0);try{return f.apply(this,arguments)}finally{Un(T,!1),C&&queueMicrotask(tn)}}}function Ka(f){Promise===Zt&&vr.echoes===0?Ur===0?f():enqueueNativeMicroTask(f):setTimeout(f,0)}(""+Vn).indexOf("[native code]")===-1&&(ei=tn=it);var Gr=dt.reject,ja="",Or="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ol="String expected.",Oi=[],fs="__dbnames",ps="readonly",Ts="readwrite";function Ea(f,v){return f?v?function(){return f.apply(this,arguments)&&v.apply(this,arguments)}:f:v}var gs={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function si(f){return typeof f!="string"||/\./.test(f)?function(v){return v}:function(v){return v[f]===void 0&&f in v&&delete(v=pe(v))[f],v}}function Rs(){throw ge.Type()}function ir(f,v){try{var A=hn(f),C=hn(v);if(A!==C)return A==="Array"?1:C==="Array"?-1:A==="binary"?1:C==="binary"?-1:A==="string"?1:C==="string"?-1:A==="Date"?1:C!=="Date"?NaN:-1;switch(A){case"number":case"Date":case"string":return v<f?1:f<v?-1:0;case"binary":return function(T,U){for(var Z=T.length,ue=U.length,xe=Z<ue?Z:ue,Ae=0;Ae<xe;++Ae)if(T[Ae]!==U[Ae])return T[Ae]<U[Ae]?-1:1;return Z===ue?0:Z<ue?-1:1}(Ro(f),Ro(v));case"Array":return function(T,U){for(var Z=T.length,ue=U.length,xe=Z<ue?Z:ue,Ae=0;Ae<xe;++Ae){var Le=ir(T[Ae],U[Ae]);if(Le!==0)return Le}return Z===ue?0:Z<ue?-1:1}(f,v)}}catch{}return NaN}function hn(f){var v=typeof f;return v!="object"?v:ArrayBuffer.isView(f)?"binary":(f=Ue(f),f==="ArrayBuffer"?"binary":f)}function Ro(f){return f instanceof Uint8Array?f:ArrayBuffer.isView(f)?new Uint8Array(f.buffer,f.byteOffset,f.byteLength):new Uint8Array(f)}var Do=(Tr.prototype._trans=function(f,v,A){var C=this._tx||xt.trans,T=this.name,U=vt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(f==="readonly"?"read":"write"," ").concat(this.name));function Z(Ae,Le,re){if(!re.schema[T])throw new ge.NotFound("Table "+T+" not part of transaction");return v(re.idbtrans,re)}var ue=qr();try{var xe=C&&C.db._novip===this.db._novip?C===xt.trans?C._promise(f,Z,A):Tn(function(){return C._promise(f,Z,A)},{trans:C,transless:xt.transless||xt}):function Ae(Le,re,Re,ve){if(Le.idbdb&&(Le._state.openComplete||xt.letThrough||Le._vip)){var Ee=Le._createTransaction(re,Re,Le._dbSchema);try{Ee.create(),Le._state.PR1398_maxLoop=3}catch(De){return De.name===ye.InvalidState&&Le.isOpen()&&0<--Le._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),Le.close({disableAutoOpen:!1}),Le.open().then(function(){return Ae(Le,re,Re,ve)})):Gr(De)}return Ee._promise(re,function(De,Ce){return Tn(function(){return xt.trans=Ee,ve(De,Ce,Ee)})}).then(function(De){if(re==="readwrite")try{Ee.idbtrans.commit()}catch{}return re==="readonly"?De:Ee._completion.then(function(){return De})})}if(Le._state.openComplete)return Gr(new ge.DatabaseClosed(Le._state.dbOpenError));if(!Le._state.isBeingOpened){if(!Le._state.autoOpen)return Gr(new ge.DatabaseClosed);Le.open().catch(it)}return Le._state.dbReadyPromise.then(function(){return Ae(Le,re,Re,ve)})}(this.db,f,[this.name],Z);return U&&(xe._consoleTask=U,xe=xe.catch(function(Ae){return console.trace(Ae),Gr(Ae)})),xe}finally{ue&&an()}},Tr.prototype.get=function(f,v){var A=this;return f&&f.constructor===Object?this.where(f).first(v):f==null?Gr(new ge.Type("Invalid argument to Table.get()")):this._trans("readonly",function(C){return A.core.get({trans:C,key:f}).then(function(T){return A.hook.reading.fire(T)})}).then(v)},Tr.prototype.where=function(f){if(typeof f=="string")return new this.db.WhereClause(this,f);if(c(f))return new this.db.WhereClause(this,"[".concat(f.join("+"),"]"));var v=l(f);if(v.length===1)return this.where(v[0]).equals(f[v[0]]);var A=this.schema.indexes.concat(this.schema.primKey).filter(function(ue){if(ue.compound&&v.every(function(Ae){return 0<=ue.keyPath.indexOf(Ae)})){for(var xe=0;xe<v.length;++xe)if(v.indexOf(ue.keyPath[xe])===-1)return!1;return!0}return!1}).sort(function(ue,xe){return ue.keyPath.length-xe.keyPath.length})[0];if(A&&this.db._maxKey!==ja){var U=A.keyPath.slice(0,v.length);return this.where(U).equals(U.map(function(xe){return f[xe]}))}!A&&vt&&console.warn("The query ".concat(JSON.stringify(f)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(v.join("+"),"]"));var C=this.schema.idxByName;function T(ue,xe){return ir(ue,xe)===0}var Z=v.reduce(function(re,xe){var Ae=re[0],Le=re[1],re=C[xe],Re=f[xe];return[Ae||re,Ae||!re?Ea(Le,re&&re.multi?function(ve){return ve=be(ve,xe),c(ve)&&ve.some(function(Ee){return T(Re,Ee)})}:function(ve){return T(Re,be(ve,xe))}):Le]},[null,null]),U=Z[0],Z=Z[1];return U?this.where(U.name).equals(f[U.keyPath]).filter(Z):A?this.filter(Z):this.where(v).equals("")},Tr.prototype.filter=function(f){return this.toCollection().and(f)},Tr.prototype.count=function(f){return this.toCollection().count(f)},Tr.prototype.offset=function(f){return this.toCollection().offset(f)},Tr.prototype.limit=function(f){return this.toCollection().limit(f)},Tr.prototype.each=function(f){return this.toCollection().each(f)},Tr.prototype.toArray=function(f){return this.toCollection().toArray(f)},Tr.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Tr.prototype.orderBy=function(f){return new this.db.Collection(new this.db.WhereClause(this,c(f)?"[".concat(f.join("+"),"]"):f))},Tr.prototype.reverse=function(){return this.toCollection().reverse()},Tr.prototype.mapToClass=function(f){var v,A=this.db,C=this.name;function T(){return v!==null&&v.apply(this,arguments)||this}(this.schema.mappedClass=f).prototype instanceof Rs&&(function(xe,Ae){if(typeof Ae!="function"&&Ae!==null)throw new TypeError("Class extends value "+String(Ae)+" is not a constructor or null");function Le(){this.constructor=xe}r(xe,Ae),xe.prototype=Ae===null?Object.create(Ae):(Le.prototype=Ae.prototype,new Le)}(T,v=f),Object.defineProperty(T.prototype,"db",{get:function(){return A},enumerable:!1,configurable:!0}),T.prototype.table=function(){return C},f=T);for(var U=new Set,Z=f.prototype;Z;Z=g(Z))Object.getOwnPropertyNames(Z).forEach(function(xe){return U.add(xe)});function ue(xe){if(!xe)return xe;var Ae,Le=Object.create(f.prototype);for(Ae in xe)if(!U.has(Ae))try{Le[Ae]=xe[Ae]}catch{}return Le}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=ue,this.hook("reading",ue),f},Tr.prototype.defineClass=function(){return this.mapToClass(function(f){h(this,f)})},Tr.prototype.add=function(f,v){var A=this,C=this.schema.primKey,T=C.auto,U=C.keyPath,Z=f;return U&&T&&(Z=si(U)(f)),this._trans("readwrite",function(ue){return A.core.mutate({trans:ue,type:"add",keys:v!=null?[v]:null,values:[Z]})}).then(function(ue){return ue.numFailures?dt.reject(ue.failures[0]):ue.lastResult}).then(function(ue){if(U)try{ne(f,U,ue)}catch{}return ue})},Tr.prototype.update=function(f,v){return typeof f!="object"||c(f)?this.where(":id").equals(f).modify(v):(f=be(f,this.schema.primKey.keyPath),f===void 0?Gr(new ge.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(f).modify(v))},Tr.prototype.put=function(f,v){var A=this,C=this.schema.primKey,T=C.auto,U=C.keyPath,Z=f;return U&&T&&(Z=si(U)(f)),this._trans("readwrite",function(ue){return A.core.mutate({trans:ue,type:"put",values:[Z],keys:v!=null?[v]:null})}).then(function(ue){return ue.numFailures?dt.reject(ue.failures[0]):ue.lastResult}).then(function(ue){if(U)try{ne(f,U,ue)}catch{}return ue})},Tr.prototype.delete=function(f){var v=this;return this._trans("readwrite",function(A){return v.core.mutate({trans:A,type:"delete",keys:[f]})}).then(function(A){return A.numFailures?dt.reject(A.failures[0]):void 0})},Tr.prototype.clear=function(){var f=this;return this._trans("readwrite",function(v){return f.core.mutate({trans:v,type:"deleteRange",range:gs})}).then(function(v){return v.numFailures?dt.reject(v.failures[0]):void 0})},Tr.prototype.bulkGet=function(f){var v=this;return this._trans("readonly",function(A){return v.core.getMany({keys:f,trans:A}).then(function(C){return C.map(function(T){return v.hook.reading.fire(T)})})})},Tr.prototype.bulkAdd=function(f,v,A){var C=this,T=Array.isArray(v)?v:void 0,U=(A=A||(T?void 0:v))?A.allKeys:void 0;return this._trans("readwrite",function(Z){var Ae=C.schema.primKey,ue=Ae.auto,Ae=Ae.keyPath;if(Ae&&T)throw new ge.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(T&&T.length!==f.length)throw new ge.InvalidArgument("Arguments objects and keys must have the same length");var xe=f.length,Ae=Ae&&ue?f.map(si(Ae)):f;return C.core.mutate({trans:Z,type:"add",keys:T,values:Ae,wantResults:U}).then(function(Ee){var re=Ee.numFailures,Re=Ee.results,ve=Ee.lastResult,Ee=Ee.failures;if(re===0)return U?Re:ve;throw new he("".concat(C.name,".bulkAdd(): ").concat(re," of ").concat(xe," operations failed"),Ee)})})},Tr.prototype.bulkPut=function(f,v,A){var C=this,T=Array.isArray(v)?v:void 0,U=(A=A||(T?void 0:v))?A.allKeys:void 0;return this._trans("readwrite",function(Z){var Ae=C.schema.primKey,ue=Ae.auto,Ae=Ae.keyPath;if(Ae&&T)throw new ge.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(T&&T.length!==f.length)throw new ge.InvalidArgument("Arguments objects and keys must have the same length");var xe=f.length,Ae=Ae&&ue?f.map(si(Ae)):f;return C.core.mutate({trans:Z,type:"put",keys:T,values:Ae,wantResults:U}).then(function(Ee){var re=Ee.numFailures,Re=Ee.results,ve=Ee.lastResult,Ee=Ee.failures;if(re===0)return U?Re:ve;throw new he("".concat(C.name,".bulkPut(): ").concat(re," of ").concat(xe," operations failed"),Ee)})})},Tr.prototype.bulkUpdate=function(f){var v=this,A=this.core,C=f.map(function(Z){return Z.key}),T=f.map(function(Z){return Z.changes}),U=[];return this._trans("readwrite",function(Z){return A.getMany({trans:Z,keys:C,cache:"clone"}).then(function(ue){var xe=[],Ae=[];f.forEach(function(re,Re){var ve=re.key,Ee=re.changes,De=ue[Re];if(De){for(var Ce=0,Ve=Object.keys(Ee);Ce<Ve.length;Ce++){var He=Ve[Ce],Ke=Ee[He];if(He===v.schema.primKey.keyPath){if(ir(Ke,ve)!==0)throw new ge.Constraint("Cannot update primary key in bulkUpdate()")}else ne(De,He,Ke)}U.push(Re),xe.push(ve),Ae.push(De)}});var Le=xe.length;return A.mutate({trans:Z,type:"put",keys:xe,values:Ae,updates:{keys:C,changeSpecs:T}}).then(function(re){var Re=re.numFailures,ve=re.failures;if(Re===0)return Le;for(var Ee=0,De=Object.keys(ve);Ee<De.length;Ee++){var Ce,Ve=De[Ee],He=U[Number(Ve)];He!=null&&(Ce=ve[Ve],delete ve[Ve],ve[He]=Ce)}throw new he("".concat(v.name,".bulkUpdate(): ").concat(Re," of ").concat(Le," operations failed"),ve)})})})},Tr.prototype.bulkDelete=function(f){var v=this,A=f.length;return this._trans("readwrite",function(C){return v.core.mutate({trans:C,type:"delete",keys:f})}).then(function(Z){var T=Z.numFailures,U=Z.lastResult,Z=Z.failures;if(T===0)return U;throw new he("".concat(v.name,".bulkDelete(): ").concat(T," of ").concat(A," operations failed"),Z)})},Tr);function Tr(){}function zi(f){function v(Z,ue){if(ue){for(var xe=arguments.length,Ae=new Array(xe-1);--xe;)Ae[xe-1]=arguments[xe];return A[Z].subscribe.apply(null,Ae),f}if(typeof Z=="string")return A[Z]}var A={};v.addEventType=U;for(var C=1,T=arguments.length;C<T;++C)U(arguments[C]);return v;function U(Z,ue,xe){if(typeof Z!="object"){var Ae;ue=ue||ot;var Le={subscribers:[],fire:xe=xe||it,subscribe:function(re){Le.subscribers.indexOf(re)===-1&&(Le.subscribers.push(re),Le.fire=ue(Le.fire,re))},unsubscribe:function(re){Le.subscribers=Le.subscribers.filter(function(Re){return Re!==re}),Le.fire=Le.subscribers.reduce(ue,xe)}};return A[Z]=v[Z]=Le}l(Ae=Z).forEach(function(re){var Re=Ae[re];if(c(Re))U(re,Ae[re][0],Ae[re][1]);else{if(Re!=="asap")throw new ge.InvalidArgument("Invalid event config");var ve=U(re,bt,function(){for(var Ee=arguments.length,De=new Array(Ee);Ee--;)De[Ee]=arguments[Ee];ve.subscribers.forEach(function(Ce){le(function(){Ce.apply(null,De)})})})}})}}function ua(f,v){return P(v).from({prototype:f}),v}function En(f,v){return!(f.filter||f.algorithm||f.or)&&(v?f.justLimit:!f.replayFilter)}function ms(f,v){f.filter=Ea(f.filter,v)}function ti(f,v,A){var C=f.replayFilter;f.replayFilter=C?function(){return Ea(C(),v())}:v,f.justLimit=A&&!C}function Ca(f,v){if(f.isPrimKey)return v.primaryKey;var A=v.getIndexByKeyPath(f.index);if(!A)throw new ge.Schema("KeyPath "+f.index+" on object store "+v.name+" is not indexed");return A}function po(f,v,A){var C=Ca(f,v.schema);return v.openCursor({trans:A,values:!f.keysOnly,reverse:f.dir==="prev",unique:!!f.unique,query:{index:C,range:f.range}})}function vs(f,v,A,C){var T=f.replayFilter?Ea(f.filter,f.replayFilter()):f.filter;if(f.or){var U={},Z=function(ue,xe,Ae){var Le,re;T&&!T(xe,Ae,function(Re){return xe.stop(Re)},function(Re){return xe.fail(Re)})||((re=""+(Le=xe.primaryKey))=="[object ArrayBuffer]"&&(re=""+new Uint8Array(Le)),_(U,re)||(U[re]=!0,v(ue,xe,Ae)))};return Promise.all([f.or._iterate(Z,A),Ga(po(f,C,A),f.algorithm,Z,!f.keysOnly&&f.valueMapper)])}return Ga(po(f,C,A),Ea(f.algorithm,T),v,!f.keysOnly&&f.valueMapper)}function Ga(f,v,A,C){var T=er(C?function(U,Z,ue){return A(C(U),Z,ue)}:A);return f.then(function(U){if(U)return U.start(function(){var Z=function(){return U.continue()};v&&!v(U,function(ue){return Z=ue},function(ue){U.stop(ue),Z=it},function(ue){U.fail(ue),Z=it})||T(U.value,U,function(ue){return Z=ue}),Z()})})}var Ds=(Fs.prototype.execute=function(f){var v=this["@@propmod"];if(v.add!==void 0){var A=v.add;if(c(A))return o(o([],c(f)?f:[],!0),A).sort();if(typeof A=="number")return(Number(f)||0)+A;if(typeof A=="bigint")try{return BigInt(f)+A}catch{return BigInt(0)+A}throw new TypeError("Invalid term ".concat(A))}if(v.remove!==void 0){var C=v.remove;if(c(C))return c(f)?f.filter(function(T){return!C.includes(T)}).sort():[];if(typeof C=="number")return Number(f)-C;if(typeof C=="bigint")try{return BigInt(f)-C}catch{return BigInt(0)-C}throw new TypeError("Invalid subtrahend ".concat(C))}return A=(A=v.replacePrefix)===null||A===void 0?void 0:A[0],A&&typeof f=="string"&&f.startsWith(A)?v.replacePrefix[1]+f.substring(A.length):f},Fs);function Fs(f){this["@@propmod"]=f}var Rr=(Nr.prototype._read=function(f,v){var A=this._ctx;return A.error?A.table._trans(null,Gr.bind(null,A.error)):A.table._trans("readonly",f).then(v)},Nr.prototype._write=function(f){var v=this._ctx;return v.error?v.table._trans(null,Gr.bind(null,v.error)):v.table._trans("readwrite",f,"locked")},Nr.prototype._addAlgorithm=function(f){var v=this._ctx;v.algorithm=Ea(v.algorithm,f)},Nr.prototype._iterate=function(f,v){return vs(this._ctx,f,v,this._ctx.table.core)},Nr.prototype.clone=function(f){var v=Object.create(this.constructor.prototype),A=Object.create(this._ctx);return f&&h(A,f),v._ctx=A,v},Nr.prototype.raw=function(){return this._ctx.valueMapper=null,this},Nr.prototype.each=function(f){var v=this._ctx;return this._read(function(A){return vs(v,f,A,v.table.core)})},Nr.prototype.count=function(f){var v=this;return this._read(function(A){var C=v._ctx,T=C.table.core;if(En(C,!0))return T.count({trans:A,query:{index:Ca(C,T.schema),range:C.range}}).then(function(Z){return Math.min(Z,C.limit)});var U=0;return vs(C,function(){return++U,!1},A,T).then(function(){return U})}).then(f)},Nr.prototype.sortBy=function(f,v){var A=f.split(".").reverse(),C=A[0],T=A.length-1;function U(xe,Ae){return Ae?U(xe[A[Ae]],Ae-1):xe[C]}var Z=this._ctx.dir==="next"?1:-1;function ue(xe,Ae){return ir(U(xe,T),U(Ae,T))*Z}return this.toArray(function(xe){return xe.sort(ue)}).then(v)},Nr.prototype.toArray=function(f){var v=this;return this._read(function(A){var C=v._ctx;if(C.dir==="next"&&En(C,!0)&&0<C.limit){var T=C.valueMapper,U=Ca(C,C.table.core.schema);return C.table.core.query({trans:A,limit:C.limit,values:!0,query:{index:U,range:C.range}}).then(function(ue){return ue=ue.result,T?ue.map(T):ue})}var Z=[];return vs(C,function(ue){return Z.push(ue)},A,C.table.core).then(function(){return Z})},f)},Nr.prototype.offset=function(f){var v=this._ctx;return f<=0||(v.offset+=f,En(v)?ti(v,function(){var A=f;return function(C,T){return A===0||(A===1?--A:T(function(){C.advance(A),A=0}),!1)}}):ti(v,function(){var A=f;return function(){return--A<0}})),this},Nr.prototype.limit=function(f){return this._ctx.limit=Math.min(this._ctx.limit,f),ti(this._ctx,function(){var v=f;return function(A,C,T){return--v<=0&&C(T),0<=v}},!0),this},Nr.prototype.until=function(f,v){return ms(this._ctx,function(A,C,T){return!f(A.value)||(C(T),v)}),this},Nr.prototype.first=function(f){return this.limit(1).toArray(function(v){return v[0]}).then(f)},Nr.prototype.last=function(f){return this.reverse().first(f)},Nr.prototype.filter=function(f){var v;return ms(this._ctx,function(A){return f(A.value)}),(v=this._ctx).isMatch=Ea(v.isMatch,f),this},Nr.prototype.and=function(f){return this.filter(f)},Nr.prototype.or=function(f){return new this.db.WhereClause(this._ctx.table,f,this)},Nr.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Nr.prototype.desc=function(){return this.reverse()},Nr.prototype.eachKey=function(f){var v=this._ctx;return v.keysOnly=!v.isMatch,this.each(function(A,C){f(C.key,C)})},Nr.prototype.eachUniqueKey=function(f){return this._ctx.unique="unique",this.eachKey(f)},Nr.prototype.eachPrimaryKey=function(f){var v=this._ctx;return v.keysOnly=!v.isMatch,this.each(function(A,C){f(C.primaryKey,C)})},Nr.prototype.keys=function(f){var v=this._ctx;v.keysOnly=!v.isMatch;var A=[];return this.each(function(C,T){A.push(T.key)}).then(function(){return A}).then(f)},Nr.prototype.primaryKeys=function(f){var v=this._ctx;if(v.dir==="next"&&En(v,!0)&&0<v.limit)return this._read(function(C){var T=Ca(v,v.table.core.schema);return v.table.core.query({trans:C,values:!1,limit:v.limit,query:{index:T,range:v.range}})}).then(function(C){return C.result}).then(f);v.keysOnly=!v.isMatch;var A=[];return this.each(function(C,T){A.push(T.primaryKey)}).then(function(){return A}).then(f)},Nr.prototype.uniqueKeys=function(f){return this._ctx.unique="unique",this.keys(f)},Nr.prototype.firstKey=function(f){return this.limit(1).keys(function(v){return v[0]}).then(f)},Nr.prototype.lastKey=function(f){return this.reverse().firstKey(f)},Nr.prototype.distinct=function(){var f=this._ctx,f=f.index&&f.table.schema.idxByName[f.index];if(!f||!f.multi)return this;var v={};return ms(this._ctx,function(T){var C=T.primaryKey.toString(),T=_(v,C);return v[C]=!0,!T}),this},Nr.prototype.modify=function(f){var v=this,A=this._ctx;return this._write(function(C){var T,U,Z;Z=typeof f=="function"?f:(T=l(f),U=T.length,function(Ce){for(var Ve=!1,He=0;He<U;++He){var Ke=T[He],Xe=f[Ke],lt=be(Ce,Ke);Xe instanceof Ds?(ne(Ce,Ke,Xe.execute(lt)),Ve=!0):lt!==Xe&&(ne(Ce,Ke,Xe),Ve=!0)}return Ve});var ue=A.table.core,re=ue.schema.primaryKey,xe=re.outbound,Ae=re.extractKey,Le=200,re=v.db._options.modifyChunkSize;re&&(Le=typeof re=="object"?re[ue.name]||re["*"]||200:re);function Re(Ce,Ke){var He=Ke.failures,Ke=Ke.numFailures;Ee+=Ce-Ke;for(var Xe=0,lt=l(He);Xe<lt.length;Xe++){var yt=lt[Xe];ve.push(He[yt])}}var ve=[],Ee=0,De=[];return v.clone().primaryKeys().then(function(Ce){function Ve(Ke){var Xe=Math.min(Le,Ce.length-Ke);return ue.getMany({trans:C,keys:Ce.slice(Ke,Ke+Xe),cache:"immutable"}).then(function(lt){for(var yt=[],ut=[],gt=xe?[]:null,kt=[],ht=0;ht<Xe;++ht){var Nt=lt[ht],Lt={value:pe(Nt),primKey:Ce[Ke+ht]};Z.call(Lt,Lt.value,Lt)!==!1&&(Lt.value==null?kt.push(Ce[Ke+ht]):xe||ir(Ae(Nt),Ae(Lt.value))===0?(ut.push(Lt.value),xe&&gt.push(Ce[Ke+ht])):(kt.push(Ce[Ke+ht]),yt.push(Lt.value)))}return Promise.resolve(0<yt.length&&ue.mutate({trans:C,type:"add",values:yt}).then(function(It){for(var Ut in It.failures)kt.splice(parseInt(Ut),1);Re(yt.length,It)})).then(function(){return(0<ut.length||He&&typeof f=="object")&&ue.mutate({trans:C,type:"put",keys:gt,values:ut,criteria:He,changeSpec:typeof f!="function"&&f,isAdditionalChunk:0<Ke}).then(function(It){return Re(ut.length,It)})}).then(function(){return(0<kt.length||He&&f===go)&&ue.mutate({trans:C,type:"delete",keys:kt,criteria:He,isAdditionalChunk:0<Ke}).then(function(It){return Re(kt.length,It)})}).then(function(){return Ce.length>Ke+Xe&&Ve(Ke+Le)})})}var He=En(A)&&A.limit===1/0&&(typeof f!="function"||f===go)&&{index:A.index,range:A.range};return Ve(0).then(function(){if(0<ve.length)throw new ie("Error modifying one or more objects",ve,Ee,De);return Ce.length})})})},Nr.prototype.delete=function(){var f=this._ctx,v=f.range;return En(f)&&(f.isPrimKey||v.type===3)?this._write(function(A){var C=f.table.core.schema.primaryKey,T=v;return f.table.core.count({trans:A,query:{index:C,range:T}}).then(function(U){return f.table.core.mutate({trans:A,type:"deleteRange",range:T}).then(function(Z){var ue=Z.failures;if(Z.lastResult,Z.results,Z=Z.numFailures,Z)throw new ie("Could not delete some values",Object.keys(ue).map(function(xe){return ue[xe]}),U-Z);return U-Z})})}):this.modify(go)},Nr);function Nr(){}var go=function(f,v){return v.value=null};function Fo(f,v){return f<v?-1:f===v?0:1}function ll(f,v){return v<f?-1:f===v?0:1}function fn(f,v,A){return f=f instanceof da?new f.Collection(f):f,f._ctx.error=new(A||TypeError)(v),f}function $i(f){return new f.Collection(f,function(){return rn("")}).limit(0)}function ca(f,v,A,C){var T,U,Z,ue,xe,Ae,Le,re=A.length;if(!A.every(function(Ee){return typeof Ee=="string"}))return fn(f,ol);function Re(Ee){T=Ee==="next"?function(Ce){return Ce.toUpperCase()}:function(Ce){return Ce.toLowerCase()},U=Ee==="next"?function(Ce){return Ce.toLowerCase()}:function(Ce){return Ce.toUpperCase()},Z=Ee==="next"?Fo:ll;var De=A.map(function(Ce){return{lower:U(Ce),upper:T(Ce)}}).sort(function(Ce,Ve){return Z(Ce.lower,Ve.lower)});ue=De.map(function(Ce){return Ce.upper}),xe=De.map(function(Ce){return Ce.lower}),Le=(Ae=Ee)==="next"?"":C}Re("next"),f=new f.Collection(f,function(){return vi(ue[0],xe[re-1]+C)}),f._ondirectionchange=function(Ee){Re(Ee)};var ve=0;return f._addAlgorithm(function(Ee,De,Ce){var Ve=Ee.key;if(typeof Ve!="string")return!1;var He=U(Ve);if(v(He,xe,ve))return!0;for(var Ke=null,Xe=ve;Xe<re;++Xe){var lt=function(yt,ut,gt,kt,ht,Nt){for(var Lt=Math.min(yt.length,kt.length),It=-1,Ut=0;Ut<Lt;++Ut){var Lr=ut[Ut];if(Lr!==kt[Ut])return ht(yt[Ut],gt[Ut])<0?yt.substr(0,Ut)+gt[Ut]+gt.substr(Ut+1):ht(yt[Ut],kt[Ut])<0?yt.substr(0,Ut)+kt[Ut]+gt.substr(Ut+1):0<=It?yt.substr(0,It)+ut[It]+gt.substr(It+1):null;ht(yt[Ut],Lr)<0&&(It=Ut)}return Lt<kt.length&&Nt==="next"?yt+gt.substr(yt.length):Lt<yt.length&&Nt==="prev"?yt.substr(0,gt.length):It<0?null:yt.substr(0,It)+kt[It]+gt.substr(It+1)}(Ve,He,ue[Xe],xe[Xe],Z,Ae);lt===null&&Ke===null?ve=Xe+1:(Ke===null||0<Z(Ke,lt))&&(Ke=lt)}return De(Ke!==null?function(){Ee.continue(Ke+Le)}:Ce),!1}),f}function vi(f,v,A,C){return{type:2,lower:f,upper:v,lowerOpen:A,upperOpen:C}}function rn(f){return{type:1,lower:f,upper:f}}var da=(Object.defineProperty(zr.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),zr.prototype.between=function(f,v,A,C){A=A!==!1,C=C===!0;try{return 0<this._cmp(f,v)||this._cmp(f,v)===0&&(A||C)&&(!A||!C)?$i(this):new this.Collection(this,function(){return vi(f,v,!A,!C)})}catch{return fn(this,Or)}},zr.prototype.equals=function(f){return f==null?fn(this,Or):new this.Collection(this,function(){return rn(f)})},zr.prototype.above=function(f){return f==null?fn(this,Or):new this.Collection(this,function(){return vi(f,void 0,!0)})},zr.prototype.aboveOrEqual=function(f){return f==null?fn(this,Or):new this.Collection(this,function(){return vi(f,void 0,!1)})},zr.prototype.below=function(f){return f==null?fn(this,Or):new this.Collection(this,function(){return vi(void 0,f,!1,!0)})},zr.prototype.belowOrEqual=function(f){return f==null?fn(this,Or):new this.Collection(this,function(){return vi(void 0,f)})},zr.prototype.startsWith=function(f){return typeof f!="string"?fn(this,ol):this.between(f,f+ja,!0,!0)},zr.prototype.startsWithIgnoreCase=function(f){return f===""?this.startsWith(f):ca(this,function(v,A){return v.indexOf(A[0])===0},[f],ja)},zr.prototype.equalsIgnoreCase=function(f){return ca(this,function(v,A){return v===A[0]},[f],"")},zr.prototype.anyOfIgnoreCase=function(){var f=_e.apply(je,arguments);return f.length===0?$i(this):ca(this,function(v,A){return A.indexOf(v)!==-1},f,"")},zr.prototype.startsWithAnyOfIgnoreCase=function(){var f=_e.apply(je,arguments);return f.length===0?$i(this):ca(this,function(v,A){return A.some(function(C){return v.indexOf(C)===0})},f,ja)},zr.prototype.anyOf=function(){var f=this,v=_e.apply(je,arguments),A=this._cmp;try{v.sort(A)}catch{return fn(this,Or)}if(v.length===0)return $i(this);var C=new this.Collection(this,function(){return vi(v[0],v[v.length-1])});C._ondirectionchange=function(U){A=U==="next"?f._ascending:f._descending,v.sort(A)};var T=0;return C._addAlgorithm(function(U,Z,ue){for(var xe=U.key;0<A(xe,v[T]);)if(++T===v.length)return Z(ue),!1;return A(xe,v[T])===0||(Z(function(){U.continue(v[T])}),!1)}),C},zr.prototype.notEqual=function(f){return this.inAnyRange([[-1/0,f],[f,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},zr.prototype.noneOf=function(){var f=_e.apply(je,arguments);if(f.length===0)return new this.Collection(this);try{f.sort(this._ascending)}catch{return fn(this,Or)}var v=f.reduce(function(A,C){return A?A.concat([[A[A.length-1][1],C]]):[[-1/0,C]]},null);return v.push([f[f.length-1],this.db._maxKey]),this.inAnyRange(v,{includeLowers:!1,includeUppers:!1})},zr.prototype.inAnyRange=function(Ve,v){var A=this,C=this._cmp,T=this._ascending,U=this._descending,Z=this._min,ue=this._max;if(Ve.length===0)return $i(this);if(!Ve.every(function(He){return He[0]!==void 0&&He[1]!==void 0&&T(He[0],He[1])<=0}))return fn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ge.InvalidArgument);var xe=!v||v.includeLowers!==!1,Ae=v&&v.includeUppers===!0,Le,re=T;function Re(He,Ke){return re(He[0],Ke[0])}try{(Le=Ve.reduce(function(He,Ke){for(var Xe=0,lt=He.length;Xe<lt;++Xe){var yt=He[Xe];if(C(Ke[0],yt[1])<0&&0<C(Ke[1],yt[0])){yt[0]=Z(yt[0],Ke[0]),yt[1]=ue(yt[1],Ke[1]);break}}return Xe===lt&&He.push(Ke),He},[])).sort(Re)}catch{return fn(this,Or)}var ve=0,Ee=Ae?function(He){return 0<T(He,Le[ve][1])}:function(He){return 0<=T(He,Le[ve][1])},De=xe?function(He){return 0<U(He,Le[ve][0])}:function(He){return 0<=U(He,Le[ve][0])},Ce=Ee,Ve=new this.Collection(this,function(){return vi(Le[0][0],Le[Le.length-1][1],!xe,!Ae)});return Ve._ondirectionchange=function(He){re=He==="next"?(Ce=Ee,T):(Ce=De,U),Le.sort(Re)},Ve._addAlgorithm(function(He,Ke,Xe){for(var lt,yt=He.key;Ce(yt);)if(++ve===Le.length)return Ke(Xe),!1;return!Ee(lt=yt)&&!De(lt)||(A._cmp(yt,Le[ve][1])===0||A._cmp(yt,Le[ve][0])===0||Ke(function(){re===T?He.continue(Le[ve][0]):He.continue(Le[ve][1])}),!1)}),Ve},zr.prototype.startsWithAnyOf=function(){var f=_e.apply(je,arguments);return f.every(function(v){return typeof v=="string"})?f.length===0?$i(this):this.inAnyRange(f.map(function(v){return[v,v+ja]})):fn(this,"startsWithAnyOf() only works with strings")},zr);function zr(){}function $t(f){return er(function(v){return ha(v),f(v.target.error),!1})}function ha(f){f.stopPropagation&&f.stopPropagation(),f.preventDefault&&f.preventDefault()}var yi="storagemutated",Vi="x-storagemutated-1",Wi=zi(null,yi),ys=(oi.prototype._lock=function(){return oe(!xt.global),++this._reculock,this._reculock!==1||xt.global||(xt.lockOwnerFor=this),this},oi.prototype._unlock=function(){if(oe(!xt.global),--this._reculock==0)for(xt.global||(xt.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var f=this._blockedFuncs.shift();try{Ii(f[1],f[0])}catch{}}return this},oi.prototype._locked=function(){return this._reculock&&xt.lockOwnerFor!==this},oi.prototype.create=function(f){var v=this;if(!this.mode)return this;var A=this.db.idbdb,C=this.db._state.dbOpenError;if(oe(!this.idbtrans),!f&&!A)switch(C&&C.name){case"DatabaseClosedError":throw new ge.DatabaseClosed(C);case"MissingAPIError":throw new ge.MissingAPI(C.message,C);default:throw new ge.OpenFailed(C)}if(!this.active)throw new ge.TransactionInactive;return oe(this._completion._state===null),(f=this.idbtrans=f||(this.db.core||A).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=er(function(T){ha(T),v._reject(f.error)}),f.onabort=er(function(T){ha(T),v.active&&v._reject(new ge.Abort(f.error)),v.active=!1,v.on("abort").fire(T)}),f.oncomplete=er(function(){v.active=!1,v._resolve(),"mutatedParts"in f&&Wi.storagemutated.fire(f.mutatedParts)}),this},oi.prototype._promise=function(f,v,A){var C=this;if(f==="readwrite"&&this.mode!=="readwrite")return Gr(new ge.ReadOnly("Transaction is readonly"));if(!this.active)return Gr(new ge.TransactionInactive);if(this._locked())return new dt(function(U,Z){C._blockedFuncs.push([function(){C._promise(f,v,A).then(U,Z)},xt])});if(A)return Tn(function(){var U=new dt(function(Z,ue){C._lock();var xe=v(Z,ue,C);xe&&xe.then&&xe.then(Z,ue)});return U.finally(function(){return C._unlock()}),U._lib=!0,U});var T=new dt(function(U,Z){var ue=v(U,Z,C);ue&&ue.then&&ue.then(U,Z)});return T._lib=!0,T},oi.prototype._root=function(){return this.parent?this.parent._root():this},oi.prototype.waitFor=function(f){var v,A=this._root(),C=dt.resolve(f);A._waitingFor?A._waitingFor=A._waitingFor.then(function(){return C}):(A._waitingFor=C,A._waitingQueue=[],v=A.idbtrans.objectStore(A.storeNames[0]),function U(){for(++A._spinCount;A._waitingQueue.length;)A._waitingQueue.shift()();A._waitingFor&&(v.get(-1/0).onsuccess=U)}());var T=A._waitingFor;return new dt(function(U,Z){C.then(function(ue){return A._waitingQueue.push(er(U.bind(null,ue)))},function(ue){return A._waitingQueue.push(er(Z.bind(null,ue)))}).finally(function(){A._waitingFor===T&&(A._waitingFor=null)})})},oi.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ge.Abort))},oi.prototype.table=function(f){var v=this._memoizedTables||(this._memoizedTables={});if(_(v,f))return v[f];var A=this.schema[f];if(!A)throw new ge.NotFound("Table "+f+" not part of transaction");return A=new this.db.Table(f,A,this),A.core=this.db.core.table(f),v[f]=A},oi);function oi(){}function ws(f,v,A,C,T,U,Z){return{name:f,keyPath:v,unique:A,multi:C,auto:T,compound:U,src:(A&&!Z?"&":"")+(C?"*":"")+(T?"++":"")+Ms(v)}}function Ms(f){return typeof f=="string"?f:f?"["+[].join.call(f,"+")+"]":""}function mo(f,v,A){return{name:f,primKey:v,indexes:A,mappedClass:null,idxByName:(C=function(T){return[T.name,T]},A.reduce(function(T,U,Z){return Z=C(U,Z),Z&&(T[Z[0]]=Z[1]),T},{}))};var C}var Bs=function(f){try{return f.only([[]]),Bs=function(){return[[]]},[[]]}catch{return Bs=function(){return ja},ja}};function fa(f){return f==null?function(){}:typeof f=="string"?(v=f).split(".").length===1?function(A){return A[v]}:function(A){return be(A,v)}:function(A){return be(A,f)};var v}function Hi(f){return[].slice.call(f)}var Ti=0;function Pa(f){return f==null?":id":typeof f=="string"?f:"[".concat(f.join("+"),"]")}function qs(f,v,xe){function C(Ce){if(Ce.type===3)return null;if(Ce.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var ve=Ce.lower,Ee=Ce.upper,De=Ce.lowerOpen,Ce=Ce.upperOpen;return ve===void 0?Ee===void 0?null:v.upperBound(Ee,!!Ce):Ee===void 0?v.lowerBound(ve,!!De):v.bound(ve,Ee,!!De,!!Ce)}function T(Re){var ve,Ee=Re.name;return{name:Ee,schema:Re,mutate:function(De){var Ce=De.trans,Ve=De.type,He=De.keys,Ke=De.values,Xe=De.range;return new Promise(function(lt,yt){lt=er(lt);var ut=Ce.objectStore(Ee),gt=ut.keyPath==null,kt=Ve==="put"||Ve==="add";if(!kt&&Ve!=="delete"&&Ve!=="deleteRange")throw new Error("Invalid operation type: "+Ve);var ht,Nt=(He||Ke||{length:1}).length;if(He&&Ke&&He.length!==Ke.length)throw new Error("Given keys array must have same length as given values array.");if(Nt===0)return lt({numFailures:0,failures:{},results:[],lastResult:void 0});function Lt(nn){++Lr,ha(nn)}var It=[],Ut=[],Lr=0;if(Ve==="deleteRange"){if(Xe.type===4)return lt({numFailures:Lr,failures:Ut,results:[],lastResult:void 0});Xe.type===3?It.push(ht=ut.clear()):It.push(ht=ut.delete(C(Xe)))}else{var gt=kt?gt?[Ke,He]:[Ke,null]:[He,null],Gt=gt[0],bn=gt[1];if(kt)for(var mn=0;mn<Nt;++mn)It.push(ht=bn&&bn[mn]!==void 0?ut[Ve](Gt[mn],bn[mn]):ut[Ve](Gt[mn])),ht.onerror=Lt;else for(mn=0;mn<Nt;++mn)It.push(ht=ut[Ve](Gt[mn])),ht.onerror=Lt}function Ns(nn){nn=nn.target.result,It.forEach(function(Yi,Wn){return Yi.error!=null&&(Ut[Wn]=Yi.error)}),lt({numFailures:Lr,failures:Ut,results:Ve==="delete"?He:It.map(function(Yi){return Yi.result}),lastResult:nn})}ht.onerror=function(nn){Lt(nn),Ns(nn)},ht.onsuccess=Ns})},getMany:function(De){var Ce=De.trans,Ve=De.keys;return new Promise(function(He,Ke){He=er(He);for(var Xe,lt=Ce.objectStore(Ee),yt=Ve.length,ut=new Array(yt),gt=0,kt=0,ht=function(It){It=It.target,ut[It._pos]=It.result,++kt===gt&&He(ut)},Nt=$t(Ke),Lt=0;Lt<yt;++Lt)Ve[Lt]!=null&&((Xe=lt.get(Ve[Lt]))._pos=Lt,Xe.onsuccess=ht,Xe.onerror=Nt,++gt);gt===0&&He(ut)})},get:function(De){var Ce=De.trans,Ve=De.key;return new Promise(function(He,Ke){He=er(He);var Xe=Ce.objectStore(Ee).get(Ve);Xe.onsuccess=function(lt){return He(lt.target.result)},Xe.onerror=$t(Ke)})},query:(ve=Ae,function(De){return new Promise(function(Ce,Ve){Ce=er(Ce);var He,Ke,Xe,gt=De.trans,lt=De.values,yt=De.limit,ht=De.query,ut=yt===1/0?void 0:yt,kt=ht.index,ht=ht.range,gt=gt.objectStore(Ee),kt=kt.isPrimaryKey?gt:gt.index(kt.name),ht=C(ht);if(yt===0)return Ce({result:[]});ve?((ut=lt?kt.getAll(ht,ut):kt.getAllKeys(ht,ut)).onsuccess=function(Nt){return Ce({result:Nt.target.result})},ut.onerror=$t(Ve)):(He=0,Ke=!lt&&"openKeyCursor"in kt?kt.openKeyCursor(ht):kt.openCursor(ht),Xe=[],Ke.onsuccess=function(Nt){var Lt=Ke.result;return Lt?(Xe.push(lt?Lt.value:Lt.primaryKey),++He===yt?Ce({result:Xe}):void Lt.continue()):Ce({result:Xe})},Ke.onerror=$t(Ve))})}),openCursor:function(De){var Ce=De.trans,Ve=De.values,He=De.query,Ke=De.reverse,Xe=De.unique;return new Promise(function(lt,yt){lt=er(lt);var kt=He.index,ut=He.range,gt=Ce.objectStore(Ee),gt=kt.isPrimaryKey?gt:gt.index(kt.name),kt=Ke?Xe?"prevunique":"prev":Xe?"nextunique":"next",ht=!Ve&&"openKeyCursor"in gt?gt.openKeyCursor(C(ut),kt):gt.openCursor(C(ut),kt);ht.onerror=$t(yt),ht.onsuccess=er(function(Nt){var Lt,It,Ut,Lr,Gt=ht.result;Gt?(Gt.___id=++Ti,Gt.done=!1,Lt=Gt.continue.bind(Gt),It=(It=Gt.continuePrimaryKey)&&It.bind(Gt),Ut=Gt.advance.bind(Gt),Lr=function(){throw new Error("Cursor not stopped")},Gt.trans=Ce,Gt.stop=Gt.continue=Gt.continuePrimaryKey=Gt.advance=function(){throw new Error("Cursor not started")},Gt.fail=er(yt),Gt.next=function(){var bn=this,mn=1;return this.start(function(){return mn--?bn.continue():bn.stop()}).then(function(){return bn})},Gt.start=function(bn){function mn(){if(ht.result)try{bn()}catch(nn){Gt.fail(nn)}else Gt.done=!0,Gt.start=function(){throw new Error("Cursor behind last entry")},Gt.stop()}var Ns=new Promise(function(nn,Yi){nn=er(nn),ht.onerror=$t(Yi),Gt.fail=Yi,Gt.stop=function(Wn){Gt.stop=Gt.continue=Gt.continuePrimaryKey=Gt.advance=Lr,nn(Wn)}});return ht.onsuccess=er(function(nn){ht.onsuccess=mn,mn()}),Gt.continue=Lt,Gt.continuePrimaryKey=It,Gt.advance=Ut,mn(),Ns},lt(Gt)):lt(null)},yt)})},count:function(De){var Ce=De.query,Ve=De.trans,He=Ce.index,Ke=Ce.range;return new Promise(function(Xe,lt){var yt=Ve.objectStore(Ee),ut=He.isPrimaryKey?yt:yt.index(He.name),yt=C(Ke),ut=yt?ut.count(yt):ut.count();ut.onsuccess=er(function(gt){return Xe(gt.target.result)}),ut.onerror=$t(lt)})}}}var U,Z,ue,Le=(Z=xe,ue=Hi((U=f).objectStoreNames),{schema:{name:U.name,tables:ue.map(function(Re){return Z.objectStore(Re)}).map(function(Re){var ve=Re.keyPath,Ce=Re.autoIncrement,Ee=c(ve),De={},Ce={name:Re.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:ve==null,compound:Ee,keyPath:ve,autoIncrement:Ce,unique:!0,extractKey:fa(ve)},indexes:Hi(Re.indexNames).map(function(Ve){return Re.index(Ve)}).map(function(Xe){var He=Xe.name,Ke=Xe.unique,lt=Xe.multiEntry,Xe=Xe.keyPath,lt={name:He,compound:c(Xe),keyPath:Xe,unique:Ke,multiEntry:lt,extractKey:fa(Xe)};return De[Pa(Xe)]=lt}),getIndexByKeyPath:function(Ve){return De[Pa(Ve)]}};return De[":id"]=Ce.primaryKey,ve!=null&&(De[Pa(ve)]=Ce.primaryKey),Ce})},hasGetAll:0<ue.length&&"getAll"in Z.objectStore(ue[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),xe=Le.schema,Ae=Le.hasGetAll,Le=xe.tables.map(T),re={};return Le.forEach(function(Re){return re[Re.name]=Re}),{stack:"dbcore",transaction:f.transaction.bind(f),table:function(Re){if(!re[Re])throw new Error("Table '".concat(Re,"' not found"));return re[Re]},MIN_KEY:-1/0,MAX_KEY:Bs(v),schema:xe}}function Mo(f,v,A,C){var T=A.IDBKeyRange;return A.indexedDB,{dbcore:(C=qs(v,T,C),f.dbcore.reduce(function(U,Z){return Z=Z.create,i(i({},U),Z(U))},C))}}function pa(f,C){var A=C.db,C=Mo(f._middlewares,A,f._deps,C);f.core=C.dbcore,f.tables.forEach(function(T){var U=T.name;f.core.schema.tables.some(function(Z){return Z.name===U})&&(T.core=f.core.table(U),f[U]instanceof f.Table&&(f[U].core=T.core))})}function La(f,v,A,C){A.forEach(function(T){var U=C[T];v.forEach(function(Z){var ue=function xe(Ae,Le){return R(Ae,Le)||(Ae=g(Ae))&&xe(Ae,Le)}(Z,T);(!ue||"value"in ue&&ue.value===void 0)&&(Z===f.Transaction.prototype||Z instanceof f.Transaction?I(Z,T,{get:function(){return this.table(T)},set:function(xe){x(this,T,{value:xe,writable:!0,configurable:!0,enumerable:!0})}}):Z[T]=new f.Table(T,U))})})}function bs(f,v){v.forEach(function(A){for(var C in A)A[C]instanceof f.Table&&delete A[C]})}function Bo(f,v){return f._cfg.version-v._cfg.version}function ga(f,v,A,C){var T=f._dbSchema;A.objectStoreNames.contains("$meta")&&!T.$meta&&(T.$meta=mo("$meta",Ya("")[0],[]),f._storeNames.push("$meta"));var U=f._createTransaction("readwrite",f._storeNames,T);U.create(A),U._completion.catch(C);var Z=U._reject.bind(U),ue=xt.transless||xt;Tn(function(){return xt.trans=U,xt.transless=ue,v!==0?(pa(f,A),Ae=v,((xe=U).storeNames.includes("$meta")?xe.table("$meta").get("version").then(function(Le){return Le??Ae}):dt.resolve(Ae)).then(function(Le){return Re=Le,ve=U,Ee=A,De=[],Le=(re=f)._versions,Ce=re._dbSchema=Ja(0,re.idbdb,Ee),(Le=Le.filter(function(Ve){return Ve._cfg.version>=Re})).length!==0?(Le.forEach(function(Ve){De.push(function(){var He=Ce,Ke=Ve._cfg.dbschema;pn(re,He,Ee),pn(re,Ke,Ee),Ce=re._dbSchema=Ke;var Xe=wi(He,Ke);Xe.add.forEach(function(kt){vo(Ee,kt[0],kt[1].primKey,kt[1].indexes)}),Xe.change.forEach(function(kt){if(kt.recreate)throw new ge.Upgrade("Not yet support for changing primary key");var ht=Ee.objectStore(kt.name);kt.add.forEach(function(Nt){return zn(ht,Nt)}),kt.change.forEach(function(Nt){ht.deleteIndex(Nt.name),zn(ht,Nt)}),kt.del.forEach(function(Nt){return ht.deleteIndex(Nt)})});var lt=Ve._cfg.contentUpgrade;if(lt&&Ve._cfg.version>Re){pa(re,Ee),ve._memoizedTables={};var yt=G(Ke);Xe.del.forEach(function(kt){yt[kt]=He[kt]}),bs(re,[re.Transaction.prototype]),La(re,[re.Transaction.prototype],l(yt),yt),ve.schema=yt;var ut,gt=ae(lt);return gt&&ei(),Xe=dt.follow(function(){var kt;(ut=lt(ve))&&gt&&(kt=tn.bind(null,null),ut.then(kt,kt))}),ut&&typeof ut.then=="function"?dt.resolve(ut):Xe.then(function(){return ut})}}),De.push(function(He){var Ke,Xe,lt=Ve._cfg.dbschema;Ke=lt,Xe=He,[].slice.call(Xe.db.objectStoreNames).forEach(function(yt){return Ke[yt]==null&&Xe.db.deleteObjectStore(yt)}),bs(re,[re.Transaction.prototype]),La(re,[re.Transaction.prototype],re._storeNames,re._dbSchema),ve.schema=re._dbSchema}),De.push(function(He){re.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(re.idbdb.version/10)===Ve._cfg.version?(re.idbdb.deleteObjectStore("$meta"),delete re._dbSchema.$meta,re._storeNames=re._storeNames.filter(function(Ke){return Ke!=="$meta"})):He.objectStore("$meta").put(Ve._cfg.version,"version"))})}),function Ve(){return De.length?dt.resolve(De.shift()(ve.idbtrans)).then(Ve):dt.resolve()}().then(function(){Gi(Ce,Ee)})):dt.resolve();var re,Re,ve,Ee,De,Ce}).catch(Z)):(l(T).forEach(function(Le){vo(A,Le,T[Le].primKey,T[Le].indexes)}),pa(f,A),void dt.follow(function(){return f.on.populate.fire(U)}).catch(Z));var xe,Ae})}function Ki(f,v){Gi(f._dbSchema,v),v.db.version%10!=0||v.objectStoreNames.contains("$meta")||v.db.createObjectStore("$meta").add(Math.ceil(v.db.version/10-1),"version");var A=Ja(0,f.idbdb,v);pn(f,f._dbSchema,v);for(var C=0,T=wi(A,f._dbSchema).change;C<T.length;C++){var U=function(Z){if(Z.change.length||Z.recreate)return console.warn("Unable to patch indexes of table ".concat(Z.name," because it has changes on the type of index or primary key.")),{value:void 0};var ue=v.objectStore(Z.name);Z.add.forEach(function(xe){vt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(Z.name,".").concat(xe.src)),zn(ue,xe)})}(T[C]);if(typeof U=="object")return U.value}}function wi(f,v){var A,C={del:[],add:[],change:[]};for(A in f)v[A]||C.del.push(A);for(A in v){var T=f[A],U=v[A];if(T){var Z={name:A,def:U,recreate:!1,del:[],add:[],change:[]};if(""+(T.primKey.keyPath||"")!=""+(U.primKey.keyPath||"")||T.primKey.auto!==U.primKey.auto)Z.recreate=!0,C.change.push(Z);else{var ue=T.idxByName,xe=U.idxByName,Ae=void 0;for(Ae in ue)xe[Ae]||Z.del.push(Ae);for(Ae in xe){var Le=ue[Ae],re=xe[Ae];Le?Le.src!==re.src&&Z.change.push(re):Z.add.push(re)}(0<Z.del.length||0<Z.add.length||0<Z.change.length)&&C.change.push(Z)}}else C.add.push([A,U])}return C}function vo(f,v,A,C){var T=f.db.createObjectStore(v,A.keyPath?{keyPath:A.keyPath,autoIncrement:A.auto}:{autoIncrement:A.auto});return C.forEach(function(U){return zn(T,U)}),T}function Gi(f,v){l(f).forEach(function(A){v.db.objectStoreNames.contains(A)||(vt&&console.debug("Dexie: Creating missing table",A),vo(v,A,f[A].primKey,f[A].indexes))})}function zn(f,v){f.createIndex(v.name,v.keyPath,{unique:v.unique,multiEntry:v.multi})}function Ja(f,v,A){var C={};return M(v.objectStoreNames,0).forEach(function(T){for(var U=A.objectStore(T),Z=ws(Ms(Ae=U.keyPath),Ae||"",!0,!1,!!U.autoIncrement,Ae&&typeof Ae!="string",!0),ue=[],xe=0;xe<U.indexNames.length;++xe){var Le=U.index(U.indexNames[xe]),Ae=Le.keyPath,Le=ws(Le.name,Ae,!!Le.unique,!!Le.multiEntry,!1,Ae&&typeof Ae!="string",!1);ue.push(Le)}C[T]=mo(T,Z,ue)}),C}function pn(f,v,A){for(var C=A.db.objectStoreNames,T=0;T<C.length;++T){var U=C[T],Z=A.objectStore(U);f._hasGetAll="getAll"in Z;for(var ue=0;ue<Z.indexNames.length;++ue){var xe=Z.indexNames[ue],Ae=Z.index(xe).keyPath,Le=typeof Ae=="string"?Ae:"["+M(Ae).join("+")+"]";!v[U]||(Ae=v[U].idxByName[Le])&&(Ae.name=xe,delete v[U].idxByName[Le],v[U].idxByName[xe]=Ae)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&s.WorkerGlobalScope&&s instanceof s.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(f._hasGetAll=!1)}function Ya(f){return f.split(",").map(function(v,A){var C=(v=v.trim()).replace(/([&*]|\+\+)/g,""),T=/^\[/.test(C)?C.match(/^\[(.*)\]$/)[1].split("+"):C;return ws(C,T||null,/\&/.test(v),/\*/.test(v),/\+\+/.test(v),c(T),A===0)})}var xs=(Ia.prototype._parseStoresSpec=function(f,v){l(f).forEach(function(A){if(f[A]!==null){var C=Ya(f[A]),T=C.shift();if(T.unique=!0,T.multi)throw new ge.Schema("Primary key cannot be multi-valued");C.forEach(function(U){if(U.auto)throw new ge.Schema("Only primary key can be marked as autoIncrement (++)");if(!U.keyPath)throw new ge.Schema("Index must have a name and cannot be an empty string")}),v[A]=mo(A,T,C)}})},Ia.prototype.stores=function(A){var v=this.db;this._cfg.storesSource=this._cfg.storesSource?h(this._cfg.storesSource,A):A;var A=v._versions,C={},T={};return A.forEach(function(U){h(C,U._cfg.storesSource),T=U._cfg.dbschema={},U._parseStoresSpec(C,T)}),v._dbSchema=T,bs(v,[v._allTables,v,v.Transaction.prototype]),La(v,[v._allTables,v,v.Transaction.prototype,this._cfg.tables],l(T),T),v._storeNames=l(T),this},Ia.prototype.upgrade=function(f){return this._cfg.contentUpgrade=pt(this._cfg.contentUpgrade||it,f),this},Ia);function Ia(){}function Us(f,v){var A=f._dbNamesDB;return A||(A=f._dbNamesDB=new li(fs,{addons:[],indexedDB:f,IDBKeyRange:v})).version(1).stores({dbnames:"name"}),A.table("dbnames")}function Xa(f){return f&&typeof f.databases=="function"}function _s(f){return Tn(function(){return xt.letThrough=!0,f()})}function Ji(f){return!("from"in f)}var sn=function(f,v){if(!this){var A=new sn;return f&&"d"in f&&h(A,f),A}h(this,arguments.length?{d:1,from:f,to:1<arguments.length?v:f}:{d:0})};function Oa(f,v,A){var C=ir(v,A);if(!isNaN(C)){if(0<C)throw RangeError();if(Ji(f))return h(f,{from:v,to:A,d:1});var T=f.l,C=f.r;if(ir(A,f.from)<0)return T?Oa(T,v,A):f.l={from:v,to:A,d:1,l:null,r:null},Ta(f);if(0<ir(v,f.to))return C?Oa(C,v,A):f.r={from:v,to:A,d:1,l:null,r:null},Ta(f);ir(v,f.from)<0&&(f.from=v,f.l=null,f.d=C?C.d+1:1),0<ir(A,f.to)&&(f.to=A,f.r=null,f.d=f.l?f.l.d+1:1),A=!f.r,T&&!f.l&&ks(f,T),C&&A&&ks(f,C)}}function ks(f,v){Ji(v)||function A(C,xe){var U=xe.from,Z=xe.to,ue=xe.l,xe=xe.r;Oa(C,U,Z),ue&&A(C,ue),xe&&A(C,xe)}(f,v)}function ul(f,v){var A=Qa(v),C=A.next();if(C.done)return!1;for(var T=C.value,U=Qa(f),Z=U.next(T.from),ue=Z.value;!C.done&&!Z.done;){if(ir(ue.from,T.to)<=0&&0<=ir(ue.to,T.from))return!0;ir(T.from,ue.from)<0?T=(C=A.next(ue.from)).value:ue=(Z=U.next(T.from)).value}return!1}function Qa(f){var v=Ji(f)?null:{s:0,n:f};return{next:function(A){for(var C=0<arguments.length;v;)switch(v.s){case 0:if(v.s=1,C)for(;v.n.l&&ir(A,v.n.from)<0;)v={up:v,n:v.n.l,s:1};else for(;v.n.l;)v={up:v,n:v.n.l,s:1};case 1:if(v.s=2,!C||ir(A,v.n.to)<=0)return{value:v.n,done:!1};case 2:if(v.n.r){v.s=3,v={up:v,n:v.n.r,s:0};continue}case 3:v=v.up}return{done:!0}}}}function Ta(f){var v,A,C=(((v=f.r)===null||v===void 0?void 0:v.d)||0)-(((A=f.l)===null||A===void 0?void 0:A.d)||0),T=1<C?"r":C<-1?"l":"";T&&(v=T=="r"?"l":"r",A=i({},f),C=f[T],f.from=C.from,f.to=C.to,f[T]=C[T],A[T]=C[v],(f[v]=A).d=yo(A)),f.d=yo(f)}function yo(A){var v=A.r,A=A.l;return(v?A?Math.max(v.d,A.d):v.d:A?A.d:0)+1}function ma(f,v){return l(v).forEach(function(A){f[A]?ks(f[A],v[A]):f[A]=function C(T){var U,Z,ue={};for(U in T)_(T,U)&&(Z=T[U],ue[U]=!Z||typeof Z!="object"||V.has(Z.constructor)?Z:C(Z));return ue}(v[A])}),f}function zs(f,v){return f.all||v.all||Object.keys(f).some(function(A){return v[A]&&ul(v[A],f[A])})}N(sn.prototype,((Vn={add:function(f){return ks(this,f),this},addKey:function(f){return Oa(this,f,f),this},addKeys:function(f){var v=this;return f.forEach(function(A){return Oa(v,A,A)}),this},hasKey:function(f){var v=Qa(this).next(f).value;return v&&ir(v.from,f)<=0&&0<=ir(v.to,f)}})[Me]=function(){return Qa(this)},Vn));var b={},F={},ee=!1;function me(f){ma(F,f),ee||(ee=!0,setTimeout(function(){ee=!1,Fe(F,!(F={}))},0))}function Fe(f,v){v===void 0&&(v=!1);var A=new Set;if(f.all)for(var C=0,T=Object.values(b);C<T.length;C++)Qe(Z=T[C],f,A,v);else for(var U in f){var Z,ue=/^idb\:\/\/(.*)\/(.*)\//.exec(U);ue&&(U=ue[1],ue=ue[2],(Z=b["idb://".concat(U,"/").concat(ue)])&&Qe(Z,f,A,v))}A.forEach(function(xe){return xe()})}function Qe(f,v,A,C){for(var T=[],U=0,Z=Object.entries(f.queries.query);U<Z.length;U++){for(var ue=Z[U],xe=ue[0],Ae=[],Le=0,re=ue[1];Le<re.length;Le++){var Re=re[Le];zs(v,Re.obsSet)?Re.subscribers.forEach(function(Ce){return A.add(Ce)}):C&&Ae.push(Re)}C&&T.push([xe,Ae])}if(C)for(var ve=0,Ee=T;ve<Ee.length;ve++){var De=Ee[ve],xe=De[0],Ae=De[1];f.queries.query[xe]=Ae}}function st(f){var v=f._state,A=f._deps.indexedDB;if(v.isBeingOpened||f.idbdb)return v.dbReadyPromise.then(function(){return v.dbOpenError?Gr(v.dbOpenError):f});v.isBeingOpened=!0,v.dbOpenError=null,v.openComplete=!1;var C=v.openCanceller,T=Math.round(10*f.verno),U=!1;function Z(){if(v.openCanceller!==C)throw new ge.DatabaseClosed("db.open() was cancelled")}function ue(){return new dt(function(Re,ve){if(Z(),!A)throw new ge.MissingAPI;var Ee=f.name,De=v.autoSchema||!T?A.open(Ee):A.open(Ee,T);if(!De)throw new ge.MissingAPI;De.onerror=$t(ve),De.onblocked=er(f._fireOnBlocked),De.onupgradeneeded=er(function(Ce){var Ve;Le=De.transaction,v.autoSchema&&!f._options.allowEmptyDB?(De.onerror=ha,Le.abort(),De.result.close(),(Ve=A.deleteDatabase(Ee)).onsuccess=Ve.onerror=er(function(){ve(new ge.NoSuchDatabase("Database ".concat(Ee," doesnt exist")))})):(Le.onerror=$t(ve),Ce=Ce.oldVersion>Math.pow(2,62)?0:Ce.oldVersion,re=Ce<1,f.idbdb=De.result,U&&Ki(f,Le),ga(f,Ce/10,Le,ve))},ve),De.onsuccess=er(function(){Le=null;var Ce,Ve,He,Ke,Xe,lt=f.idbdb=De.result,yt=M(lt.objectStoreNames);if(0<yt.length)try{var ut=lt.transaction((Ke=yt).length===1?Ke[0]:Ke,"readonly");if(v.autoSchema)Ve=lt,He=ut,(Ce=f).verno=Ve.version/10,He=Ce._dbSchema=Ja(0,Ve,He),Ce._storeNames=M(Ve.objectStoreNames,0),La(Ce,[Ce._allTables],l(He),He);else if(pn(f,f._dbSchema,ut),((Xe=wi(Ja(0,(Xe=f).idbdb,ut),Xe._dbSchema)).add.length||Xe.change.some(function(gt){return gt.add.length||gt.change.length}))&&!U)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),lt.close(),T=lt.version+1,U=!0,Re(ue());pa(f,ut)}catch{}Oi.push(f),lt.onversionchange=er(function(gt){v.vcFired=!0,f.on("versionchange").fire(gt)}),lt.onclose=er(function(gt){f.on("close").fire(gt)}),re&&(Xe=f._deps,ut=Ee,lt=Xe.indexedDB,Xe=Xe.IDBKeyRange,Xa(lt)||ut===fs||Us(lt,Xe).put({name:ut}).catch(it)),Re()},ve)}).catch(function(Re){switch(Re?.name){case"UnknownError":if(0<v.PR1398_maxLoop)return v.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),ue();break;case"VersionError":if(0<T)return T=0,ue()}return dt.reject(Re)})}var xe,Ae=v.dbReadyResolve,Le=null,re=!1;return dt.race([C,(typeof navigator>"u"?dt.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(Re){function ve(){return indexedDB.databases().finally(Re)}xe=setInterval(ve,100),ve()}).finally(function(){return clearInterval(xe)}):Promise.resolve()).then(ue)]).then(function(){return Z(),v.onReadyBeingFired=[],dt.resolve(_s(function(){return f.on.ready.fire(f.vip)})).then(function Re(){if(0<v.onReadyBeingFired.length){var ve=v.onReadyBeingFired.reduce(pt,it);return v.onReadyBeingFired=[],dt.resolve(_s(function(){return ve(f.vip)})).then(Re)}})}).finally(function(){v.openCanceller===C&&(v.onReadyBeingFired=null,v.isBeingOpened=!1)}).catch(function(Re){v.dbOpenError=Re;try{Le&&Le.abort()}catch{}return C===v.openCanceller&&f._close(),Gr(Re)}).finally(function(){v.openComplete=!0,Ae()}).then(function(){var Re;return re&&(Re={},f.tables.forEach(function(ve){ve.schema.indexes.forEach(function(Ee){Ee.name&&(Re["idb://".concat(f.name,"/").concat(ve.name,"/").concat(Ee.name)]=new sn(-1/0,[[[]]]))}),Re["idb://".concat(f.name,"/").concat(ve.name,"/")]=Re["idb://".concat(f.name,"/").concat(ve.name,"/:dels")]=new sn(-1/0,[[[]]])}),Wi(yi).fire(Re),Fe(Re,!0)),f})}function Et(f){function v(U){return f.next(U)}var A=T(v),C=T(function(U){return f.throw(U)});function T(U){return function(xe){var ue=U(xe),xe=ue.value;return ue.done?xe:xe&&typeof xe.then=="function"?xe.then(A,C):c(xe)?Promise.all(xe).then(A,C):A(xe)}}return T(v)()}function Vt(f,v,A){for(var C=c(f)?f.slice():[f],T=0;T<A;++T)C.push(v);return C}var hr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(f){return i(i({},f),{table:function(v){var A=f.table(v),C=A.schema,T={},U=[];function Z(re,Re,ve){var Ee=Pa(re),De=T[Ee]=T[Ee]||[],Ce=re==null?0:typeof re=="string"?1:re.length,Ve=0<Re,Ve=i(i({},ve),{name:Ve?"".concat(Ee,"(virtual-from:").concat(ve.name,")"):ve.name,lowLevelIndex:ve,isVirtual:Ve,keyTail:Re,keyLength:Ce,extractKey:fa(re),unique:!Ve&&ve.unique});return De.push(Ve),Ve.isPrimaryKey||U.push(Ve),1<Ce&&Z(Ce===2?re[0]:re.slice(0,Ce-1),Re+1,ve),De.sort(function(He,Ke){return He.keyTail-Ke.keyTail}),Ve}v=Z(C.primaryKey.keyPath,0,C.primaryKey),T[":id"]=[v];for(var ue=0,xe=C.indexes;ue<xe.length;ue++){var Ae=xe[ue];Z(Ae.keyPath,0,Ae)}function Le(re){var Re,ve=re.query.index;return ve.isVirtual?i(i({},re),{query:{index:ve.lowLevelIndex,range:(Re=re.query.range,ve=ve.keyTail,{type:Re.type===1?2:Re.type,lower:Vt(Re.lower,Re.lowerOpen?f.MAX_KEY:f.MIN_KEY,ve),lowerOpen:!0,upper:Vt(Re.upper,Re.upperOpen?f.MIN_KEY:f.MAX_KEY,ve),upperOpen:!0})}}):re}return i(i({},A),{schema:i(i({},C),{primaryKey:v,indexes:U,getIndexByKeyPath:function(re){return(re=T[Pa(re)])&&re[0]}}),count:function(re){return A.count(Le(re))},query:function(re){return A.query(Le(re))},openCursor:function(re){var Re=re.query.index,ve=Re.keyTail,Ee=Re.isVirtual,De=Re.keyLength;return Ee?A.openCursor(Le(re)).then(function(Ve){return Ve&&Ce(Ve)}):A.openCursor(re);function Ce(Ve){return Object.create(Ve,{continue:{value:function(He){He!=null?Ve.continue(Vt(He,re.reverse?f.MAX_KEY:f.MIN_KEY,ve)):re.unique?Ve.continue(Ve.key.slice(0,De).concat(re.reverse?f.MIN_KEY:f.MAX_KEY,ve)):Ve.continue()}},continuePrimaryKey:{value:function(He,Ke){Ve.continuePrimaryKey(Vt(He,f.MAX_KEY,ve),Ke)}},primaryKey:{get:function(){return Ve.primaryKey}},key:{get:function(){var He=Ve.key;return De===1?He[0]:He.slice(0,De)}},value:{get:function(){return Ve.value}}})}}})}})}};function sr(f,v,A,C){return A=A||{},C=C||"",l(f).forEach(function(T){var U,Z,ue;_(v,T)?(U=f[T],Z=v[T],typeof U=="object"&&typeof Z=="object"&&U&&Z?(ue=Ue(U))!==Ue(Z)?A[C+T]=v[T]:ue==="Object"?sr(U,Z,A,C+T+"."):U!==Z&&(A[C+T]=v[T]):U!==Z&&(A[C+T]=v[T])):A[C+T]=void 0}),l(v).forEach(function(T){_(f,T)||(A[C+T]=v[T])}),A}function Ar(f,v){return v.type==="delete"?v.keys:v.keys||v.values.map(f.extractKey)}var on={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(f){return i(i({},f),{table:function(v){var A=f.table(v),C=A.schema.primaryKey;return i(i({},A),{mutate:function(T){var U=xt.trans,Z=U.table(v).hook,ue=Z.deleting,xe=Z.creating,Ae=Z.updating;switch(T.type){case"add":if(xe.fire===it)break;return U._promise("readwrite",function(){return Le(T)},!0);case"put":if(xe.fire===it&&Ae.fire===it)break;return U._promise("readwrite",function(){return Le(T)},!0);case"delete":if(ue.fire===it)break;return U._promise("readwrite",function(){return Le(T)},!0);case"deleteRange":if(ue.fire===it)break;return U._promise("readwrite",function(){return function re(Re,ve,Ee){return A.query({trans:Re,values:!1,query:{index:C,range:ve},limit:Ee}).then(function(De){var Ce=De.result;return Le({type:"delete",keys:Ce,trans:Re}).then(function(Ve){return 0<Ve.numFailures?Promise.reject(Ve.failures[0]):Ce.length<Ee?{failures:[],numFailures:0,lastResult:void 0}:re(Re,i(i({},ve),{lower:Ce[Ce.length-1],lowerOpen:!0}),Ee)})})}(T.trans,T.range,1e4)},!0)}return A.mutate(T);function Le(re){var Re,ve,Ee,De=xt.trans,Ce=re.keys||Ar(C,re);if(!Ce)throw new Error("Keys missing");return(re=re.type==="add"||re.type==="put"?i(i({},re),{keys:Ce}):i({},re)).type!=="delete"&&(re.values=o([],re.values)),re.keys&&(re.keys=o([],re.keys)),Re=A,Ee=Ce,((ve=re).type==="add"?Promise.resolve([]):Re.getMany({trans:ve.trans,keys:Ee,cache:"immutable"})).then(function(Ve){var He=Ce.map(function(Ke,Xe){var lt,yt,ut,gt=Ve[Xe],kt={onerror:null,onsuccess:null};return re.type==="delete"?ue.fire.call(kt,Ke,gt,De):re.type==="add"||gt===void 0?(lt=xe.fire.call(kt,Ke,re.values[Xe],De),Ke==null&&lt!=null&&(re.keys[Xe]=Ke=lt,C.outbound||ne(re.values[Xe],C.keyPath,Ke))):(lt=sr(gt,re.values[Xe]),(yt=Ae.fire.call(kt,lt,Ke,gt,De))&&(ut=re.values[Xe],Object.keys(yt).forEach(function(ht){_(ut,ht)?ut[ht]=yt[ht]:ne(ut,ht,yt[ht])}))),kt});return A.mutate(re).then(function(Ke){for(var Xe=Ke.failures,lt=Ke.results,yt=Ke.numFailures,Ke=Ke.lastResult,ut=0;ut<Ce.length;++ut){var gt=(lt||Ce)[ut],kt=He[ut];gt==null?kt.onerror&&kt.onerror(Xe[ut]):kt.onsuccess&&kt.onsuccess(re.type==="put"&&Ve[ut]?re.values[ut]:gt)}return{failures:Xe,results:lt,numFailures:yt,lastResult:Ke}}).catch(function(Ke){return He.forEach(function(Xe){return Xe.onerror&&Xe.onerror(Ke)}),Promise.reject(Ke)})})}}})}})}};function ln(f,v,A){try{if(!v||v.keys.length<f.length)return null;for(var C=[],T=0,U=0;T<v.keys.length&&U<f.length;++T)ir(v.keys[T],f[U])===0&&(C.push(A?pe(v.values[T]):v.values[T]),++U);return C.length===f.length?C:null}catch{return null}}var An={stack:"dbcore",level:-1,create:function(f){return{table:function(v){var A=f.table(v);return i(i({},A),{getMany:function(C){if(!C.cache)return A.getMany(C);var T=ln(C.keys,C.trans._cache,C.cache==="clone");return T?dt.resolve(T):A.getMany(C).then(function(U){return C.trans._cache={keys:C.keys,values:C.cache==="clone"?pe(U):U},U})},mutate:function(C){return C.type!=="add"&&(C.trans._cache=null),A.mutate(C)}})}}}};function $n(f,v){return f.trans.mode==="readonly"&&!!f.subscr&&!f.trans.explicit&&f.trans.db._options.cache!=="disabled"&&!v.schema.primaryKey.outbound}function Cn(f,v){switch(f){case"query":return v.values&&!v.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var va={stack:"dbcore",level:0,name:"Observability",create:function(f){var v=f.schema.name,A=new sn(f.MIN_KEY,f.MAX_KEY);return i(i({},f),{transaction:function(C,T,U){if(xt.subscr&&T!=="readonly")throw new ge.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(xt.querier));return f.transaction(C,T,U)},table:function(C){var T=f.table(C),U=T.schema,Z=U.primaryKey,re=U.indexes,ue=Z.extractKey,xe=Z.outbound,Ae=Z.autoIncrement&&re.filter(function(ve){return ve.compound&&ve.keyPath.includes(Z.keyPath)}),Le=i(i({},T),{mutate:function(ve){function Ee(ht){return ht="idb://".concat(v,"/").concat(C,"/").concat(ht),Ke[ht]||(Ke[ht]=new sn)}var De,Ce,Ve,He=ve.trans,Ke=ve.mutatedParts||(ve.mutatedParts={}),Xe=Ee(""),lt=Ee(":dels"),yt=ve.type,kt=ve.type==="deleteRange"?[ve.range]:ve.type==="delete"?[ve.keys]:ve.values.length<50?[Ar(Z,ve).filter(function(ht){return ht}),ve.values]:[],ut=kt[0],gt=kt[1],kt=ve.trans._cache;return c(ut)?(Xe.addKeys(ut),(kt=yt==="delete"||ut.length===gt.length?ln(ut,kt):null)||lt.addKeys(ut),(kt||gt)&&(De=Ee,Ce=kt,Ve=gt,U.indexes.forEach(function(ht){var Nt=De(ht.name||"");function Lt(Ut){return Ut!=null?ht.extractKey(Ut):null}function It(Ut){return ht.multiEntry&&c(Ut)?Ut.forEach(function(Lr){return Nt.addKey(Lr)}):Nt.addKey(Ut)}(Ce||Ve).forEach(function(Ut,bn){var Gt=Ce&&Lt(Ce[bn]),bn=Ve&&Lt(Ve[bn]);ir(Gt,bn)!==0&&(Gt!=null&&It(Gt),bn!=null&&It(bn))})}))):ut?(gt={from:(gt=ut.lower)!==null&&gt!==void 0?gt:f.MIN_KEY,to:(gt=ut.upper)!==null&&gt!==void 0?gt:f.MAX_KEY},lt.add(gt),Xe.add(gt)):(Xe.add(A),lt.add(A),U.indexes.forEach(function(ht){return Ee(ht.name).add(A)})),T.mutate(ve).then(function(ht){return!ut||ve.type!=="add"&&ve.type!=="put"||(Xe.addKeys(ht.results),Ae&&Ae.forEach(function(Nt){for(var Lt=ve.values.map(function(Gt){return Nt.extractKey(Gt)}),It=Nt.keyPath.findIndex(function(Gt){return Gt===Z.keyPath}),Ut=0,Lr=ht.results.length;Ut<Lr;++Ut)Lt[Ut][It]=ht.results[Ut];Ee(Nt.name).addKeys(Lt)})),He.mutatedParts=ma(He.mutatedParts||{},Ke),ht})}}),re=function(Ee){var De=Ee.query,Ee=De.index,De=De.range;return[Ee,new sn((Ee=De.lower)!==null&&Ee!==void 0?Ee:f.MIN_KEY,(De=De.upper)!==null&&De!==void 0?De:f.MAX_KEY)]},Re={get:function(ve){return[Z,new sn(ve.key)]},getMany:function(ve){return[Z,new sn().addKeys(ve.keys)]},count:re,query:re,openCursor:re};return l(Re).forEach(function(ve){Le[ve]=function(Ee){var De=xt.subscr,Ce=!!De,Ve=$n(xt,T)&&Cn(ve,Ee)?Ee.obsSet={}:De;if(Ce){var He=function(gt){return gt="idb://".concat(v,"/").concat(C,"/").concat(gt),Ve[gt]||(Ve[gt]=new sn)},Ke=He(""),Xe=He(":dels"),De=Re[ve](Ee),Ce=De[0],De=De[1];if((ve==="query"&&Ce.isPrimaryKey&&!Ee.values?Xe:He(Ce.name||"")).add(De),!Ce.isPrimaryKey){if(ve!=="count"){var lt=ve==="query"&&xe&&Ee.values&&T.query(i(i({},Ee),{values:!1}));return T[ve].apply(this,arguments).then(function(gt){if(ve==="query"){if(xe&&Ee.values)return lt.then(function(Lt){return Lt=Lt.result,Ke.addKeys(Lt),gt});var kt=Ee.values?gt.result.map(ue):gt.result;(Ee.values?Ke:Xe).addKeys(kt)}else if(ve==="openCursor"){var ht=gt,Nt=Ee.values;return ht&&Object.create(ht,{key:{get:function(){return Xe.addKey(ht.primaryKey),ht.key}},primaryKey:{get:function(){var Lt=ht.primaryKey;return Xe.addKey(Lt),Lt}},value:{get:function(){return Nt&&Ke.addKey(ht.primaryKey),ht.value}}})}return gt})}Xe.add(A)}}return T[ve].apply(this,arguments)}}),Le}})}};function bi(f,v,A){if(A.numFailures===0)return v;if(v.type==="deleteRange")return null;var C=v.keys?v.keys.length:"values"in v&&v.values?v.values.length:1;return A.numFailures===C?null:(v=i({},v),c(v.keys)&&(v.keys=v.keys.filter(function(T,U){return!(U in A.failures)})),"values"in v&&c(v.values)&&(v.values=v.values.filter(function(T,U){return!(U in A.failures)})),v)}function xi(f,v){return A=f,((C=v).lower===void 0||(C.lowerOpen?0<ir(A,C.lower):0<=ir(A,C.lower)))&&(f=f,(v=v).upper===void 0||(v.upperOpen?ir(f,v.upper)<0:ir(f,v.upper)<=0));var A,C}function Za(f,v,Re,C,T,U){if(!Re||Re.length===0)return f;var Z=v.query.index,ue=Z.multiEntry,xe=v.query.range,Ae=C.schema.primaryKey.extractKey,Le=Z.extractKey,re=(Z.lowLevelIndex||Z).extractKey,Re=Re.reduce(function(ve,Ee){var De=ve,Ce=[];if(Ee.type==="add"||Ee.type==="put")for(var Ve=new sn,He=Ee.values.length-1;0<=He;--He){var Ke,Xe=Ee.values[He],lt=Ae(Xe);Ve.hasKey(lt)||(Ke=Le(Xe),(ue&&c(Ke)?Ke.some(function(ht){return xi(ht,xe)}):xi(Ke,xe))&&(Ve.addKey(lt),Ce.push(Xe)))}switch(Ee.type){case"add":var yt=new sn().addKeys(v.values?ve.map(function(Nt){return Ae(Nt)}):ve),De=ve.concat(v.values?Ce.filter(function(Nt){return Nt=Ae(Nt),!yt.hasKey(Nt)&&(yt.addKey(Nt),!0)}):Ce.map(function(Nt){return Ae(Nt)}).filter(function(Nt){return!yt.hasKey(Nt)&&(yt.addKey(Nt),!0)}));break;case"put":var ut=new sn().addKeys(Ee.values.map(function(Nt){return Ae(Nt)}));De=ve.filter(function(Nt){return!ut.hasKey(v.values?Ae(Nt):Nt)}).concat(v.values?Ce:Ce.map(function(Nt){return Ae(Nt)}));break;case"delete":var gt=new sn().addKeys(Ee.keys);De=ve.filter(function(Nt){return!gt.hasKey(v.values?Ae(Nt):Nt)});break;case"deleteRange":var kt=Ee.range;De=ve.filter(function(Nt){return!xi(Ae(Nt),kt)})}return De},f);return Re===f?f:(Re.sort(function(ve,Ee){return ir(re(ve),re(Ee))||ir(Ae(ve),Ae(Ee))}),v.limit&&v.limit<1/0&&(Re.length>v.limit?Re.length=v.limit:f.length===v.limit&&Re.length<v.limit&&(T.dirty=!0)),U?Object.freeze(Re):Re)}function wo(f,v){return ir(f.lower,v.lower)===0&&ir(f.upper,v.upper)===0&&!!f.lowerOpen==!!v.lowerOpen&&!!f.upperOpen==!!v.upperOpen}function bo(f,v){return function(A,C,T,U){if(A===void 0)return C!==void 0?-1:0;if(C===void 0)return 1;if((C=ir(A,C))===0){if(T&&U)return 0;if(T)return 1;if(U)return-1}return C}(f.lower,v.lower,f.lowerOpen,v.lowerOpen)<=0&&0<=function(A,C,T,U){if(A===void 0)return C!==void 0?1:0;if(C===void 0)return-1;if((C=ir(A,C))===0){if(T&&U)return 0;if(T)return-1;if(U)return 1}return C}(f.upper,v.upper,f.upperOpen,v.upperOpen)}function $s(f,v,A,C){f.subscribers.add(A),C.addEventListener("abort",function(){var T,U;f.subscribers.delete(A),f.subscribers.size===0&&(T=f,U=v,setTimeout(function(){T.subscribers.size===0&&de(U,T)},3e3))})}var xo={stack:"dbcore",level:0,name:"Cache",create:function(f){var v=f.schema.name;return i(i({},f),{transaction:function(A,C,T){var U,Z,ue=f.transaction(A,C,T);return C==="readwrite"&&(Z=(U=new AbortController).signal,T=function(xe){return function(){if(U.abort(),C==="readwrite"){for(var Ae=new Set,Le=0,re=A;Le<re.length;Le++){var Re=re[Le],ve=b["idb://".concat(v,"/").concat(Re)];if(ve){var Ee=f.table(Re),De=ve.optimisticOps.filter(function(Nt){return Nt.trans===ue});if(ue._explicit&&xe&&ue.mutatedParts)for(var Ce=0,Ve=Object.values(ve.queries.query);Ce<Ve.length;Ce++)for(var He=0,Ke=(yt=Ve[Ce]).slice();He<Ke.length;He++)zs((ut=Ke[He]).obsSet,ue.mutatedParts)&&(de(yt,ut),ut.subscribers.forEach(function(Nt){return Ae.add(Nt)}));else if(0<De.length){ve.optimisticOps=ve.optimisticOps.filter(function(Nt){return Nt.trans!==ue});for(var Xe=0,lt=Object.values(ve.queries.query);Xe<lt.length;Xe++)for(var yt,ut,gt,kt=0,ht=(yt=lt[Xe]).slice();kt<ht.length;kt++)(ut=ht[kt]).res!=null&&ue.mutatedParts&&(xe&&!ut.dirty?(gt=Object.isFrozen(ut.res),gt=Za(ut.res,ut.req,De,Ee,ut,gt),ut.dirty?(de(yt,ut),ut.subscribers.forEach(function(Nt){return Ae.add(Nt)})):gt!==ut.res&&(ut.res=gt,ut.promise=dt.resolve({result:gt}))):(ut.dirty&&de(yt,ut),ut.subscribers.forEach(function(Nt){return Ae.add(Nt)})))}}}Ae.forEach(function(Nt){return Nt()})}}},ue.addEventListener("abort",T(!1),{signal:Z}),ue.addEventListener("error",T(!1),{signal:Z}),ue.addEventListener("complete",T(!0),{signal:Z})),ue},table:function(A){var C=f.table(A),T=C.schema.primaryKey;return i(i({},C),{mutate:function(U){var Z=xt.trans;if(T.outbound||Z.db._options.cache==="disabled"||Z.explicit||Z.idbtrans.mode!=="readwrite")return C.mutate(U);var ue=b["idb://".concat(v,"/").concat(A)];return ue?(Z=C.mutate(U),U.type!=="add"&&U.type!=="put"||!(50<=U.values.length||Ar(T,U).some(function(xe){return xe==null}))?(ue.optimisticOps.push(U),U.mutatedParts&&me(U.mutatedParts),Z.then(function(xe){0<xe.numFailures&&(de(ue.optimisticOps,U),(xe=bi(0,U,xe))&&ue.optimisticOps.push(xe),U.mutatedParts&&me(U.mutatedParts))}),Z.catch(function(){de(ue.optimisticOps,U),U.mutatedParts&&me(U.mutatedParts)})):Z.then(function(xe){var Ae=bi(0,i(i({},U),{values:U.values.map(function(Le,re){var Re;return xe.failures[re]?Le:(Le=(Re=T.keyPath)!==null&&Re!==void 0&&Re.includes(".")?pe(Le):i({},Le),ne(Le,T.keyPath,xe.results[re]),Le)})}),xe);ue.optimisticOps.push(Ae),queueMicrotask(function(){return U.mutatedParts&&me(U.mutatedParts)})}),Z):C.mutate(U)},query:function(U){if(!$n(xt,C)||!Cn("query",U))return C.query(U);var Z=((Ae=xt.trans)===null||Ae===void 0?void 0:Ae.db._options.cache)==="immutable",re=xt,ue=re.requery,xe=re.signal,Ae=function(Ee,De,Ce,Ve){var He=b["idb://".concat(Ee,"/").concat(De)];if(!He)return[];if(!(De=He.queries[Ce]))return[null,!1,He,null];var Ke=De[(Ve.query?Ve.query.index.name:null)||""];if(!Ke)return[null,!1,He,null];switch(Ce){case"query":var Xe=Ke.find(function(lt){return lt.req.limit===Ve.limit&&lt.req.values===Ve.values&&wo(lt.req.query.range,Ve.query.range)});return Xe?[Xe,!0,He,Ke]:[Ke.find(function(lt){return("limit"in lt.req?lt.req.limit:1/0)>=Ve.limit&&(!Ve.values||lt.req.values)&&bo(lt.req.query.range,Ve.query.range)}),!1,He,Ke];case"count":return Xe=Ke.find(function(lt){return wo(lt.req.query.range,Ve.query.range)}),[Xe,!!Xe,He,Ke]}}(v,A,"query",U),Le=Ae[0],re=Ae[1],Re=Ae[2],ve=Ae[3];return Le&&re?Le.obsSet=U.obsSet:(re=C.query(U).then(function(Ee){var De=Ee.result;if(Le&&(Le.res=De),Z){for(var Ce=0,Ve=De.length;Ce<Ve;++Ce)Object.freeze(De[Ce]);Object.freeze(De)}else Ee.result=pe(De);return Ee}).catch(function(Ee){return ve&&Le&&de(ve,Le),Promise.reject(Ee)}),Le={obsSet:U.obsSet,promise:re,subscribers:new Set,type:"query",req:U,dirty:!1},ve?ve.push(Le):(ve=[Le],(Re=Re||(b["idb://".concat(v,"/").concat(A)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[U.query.index.name||""]=ve)),$s(Le,ve,ue,xe),Le.promise.then(function(Ee){return{result:Za(Ee.result,U,Re?.optimisticOps,C,Le,Z)}})}})}})}};function es(f,v){return new Proxy(f,{get:function(A,C,T){return C==="db"?v:Reflect.get(A,C,T)}})}var li=(gr.prototype.version=function(f){if(isNaN(f)||f<.1)throw new ge.Type("Given version is not a positive number");if(f=Math.round(10*f)/10,this.idbdb||this._state.isBeingOpened)throw new ge.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,f);var v=this._versions,A=v.filter(function(C){return C._cfg.version===f})[0];return A||(A=new this.Version(f),v.push(A),v.sort(Bo),A.stores({}),this._state.autoSchema=!1,A)},gr.prototype._whenReady=function(f){var v=this;return this.idbdb&&(this._state.openComplete||xt.letThrough||this._vip)?f():new dt(function(A,C){if(v._state.openComplete)return C(new ge.DatabaseClosed(v._state.dbOpenError));if(!v._state.isBeingOpened){if(!v._state.autoOpen)return void C(new ge.DatabaseClosed);v.open().catch(it)}v._state.dbReadyPromise.then(A,C)}).then(f)},gr.prototype.use=function(f){var v=f.stack,A=f.create,C=f.level,T=f.name;return T&&this.unuse({stack:v,name:T}),f=this._middlewares[v]||(this._middlewares[v]=[]),f.push({stack:v,create:A,level:C??10,name:T}),f.sort(function(U,Z){return U.level-Z.level}),this},gr.prototype.unuse=function(f){var v=f.stack,A=f.name,C=f.create;return v&&this._middlewares[v]&&(this._middlewares[v]=this._middlewares[v].filter(function(T){return C?T.create!==C:!!A&&T.name!==A})),this},gr.prototype.open=function(){var f=this;return Ii(Sr,function(){return st(f)})},gr.prototype._close=function(){var f=this._state,v=Oi.indexOf(this);if(0<=v&&Oi.splice(v,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}f.isBeingOpened||(f.dbReadyPromise=new dt(function(A){f.dbReadyResolve=A}),f.openCanceller=new dt(function(A,C){f.cancelOpen=C}))},gr.prototype.close=function(A){var v=(A===void 0?{disableAutoOpen:!0}:A).disableAutoOpen,A=this._state;v?(A.isBeingOpened&&A.cancelOpen(new ge.DatabaseClosed),this._close(),A.autoOpen=!1,A.dbOpenError=new ge.DatabaseClosed):(this._close(),A.autoOpen=this._options.autoOpen||A.isBeingOpened,A.openComplete=!1,A.dbOpenError=null)},gr.prototype.delete=function(f){var v=this;f===void 0&&(f={disableAutoOpen:!0});var A=0<arguments.length&&typeof arguments[0]!="object",C=this._state;return new dt(function(T,U){function Z(){v.close(f);var ue=v._deps.indexedDB.deleteDatabase(v.name);ue.onsuccess=er(function(){var xe,Ae,Le;xe=v._deps,Ae=v.name,Le=xe.indexedDB,xe=xe.IDBKeyRange,Xa(Le)||Ae===fs||Us(Le,xe).delete(Ae).catch(it),T()}),ue.onerror=$t(U),ue.onblocked=v._fireOnBlocked}if(A)throw new ge.InvalidArgument("Invalid closeOptions argument to db.delete()");C.isBeingOpened?C.dbReadyPromise.then(Z):Z()})},gr.prototype.backendDB=function(){return this.idbdb},gr.prototype.isOpen=function(){return this.idbdb!==null},gr.prototype.hasBeenClosed=function(){var f=this._state.dbOpenError;return f&&f.name==="DatabaseClosed"},gr.prototype.hasFailed=function(){return this._state.dbOpenError!==null},gr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(gr.prototype,"tables",{get:function(){var f=this;return l(this._allTables).map(function(v){return f._allTables[v]})},enumerable:!1,configurable:!0}),gr.prototype.transaction=function(){var f=(function(v,A,C){var T=arguments.length;if(T<2)throw new ge.InvalidArgument("Too few arguments");for(var U=new Array(T-1);--T;)U[T-1]=arguments[T];return C=U.pop(),[v,Te(U),C]}).apply(this,arguments);return this._transaction.apply(this,f)},gr.prototype._transaction=function(f,v,A){var C=this,T=xt.trans;T&&T.db===this&&f.indexOf("!")===-1||(T=null);var U,Z,ue=f.indexOf("?")!==-1;f=f.replace("!","").replace("?","");try{if(Z=v.map(function(Ae){if(Ae=Ae instanceof C.Table?Ae.name:Ae,typeof Ae!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Ae}),f=="r"||f===ps)U=ps;else{if(f!="rw"&&f!=Ts)throw new ge.InvalidArgument("Invalid transaction mode: "+f);U=Ts}if(T){if(T.mode===ps&&U===Ts){if(!ue)throw new ge.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");T=null}T&&Z.forEach(function(Ae){if(T&&T.storeNames.indexOf(Ae)===-1){if(!ue)throw new ge.SubTransaction("Table "+Ae+" not included in parent transaction.");T=null}}),ue&&T&&!T.active&&(T=null)}}catch(Ae){return T?T._promise(null,function(Le,re){re(Ae)}):Gr(Ae)}var xe=(function Ae(Le,re,Re,ve,Ee){return dt.resolve().then(function(){var De=xt.transless||xt,Ce=Le._createTransaction(re,Re,Le._dbSchema,ve);if(Ce.explicit=!0,De={trans:Ce,transless:De},ve)Ce.idbtrans=ve.idbtrans;else try{Ce.create(),Ce.idbtrans._explicit=!0,Le._state.PR1398_maxLoop=3}catch(Ke){return Ke.name===ye.InvalidState&&Le.isOpen()&&0<--Le._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),Le.close({disableAutoOpen:!1}),Le.open().then(function(){return Ae(Le,re,Re,null,Ee)})):Gr(Ke)}var Ve,He=ae(Ee);return He&&ei(),De=dt.follow(function(){var Ke;(Ve=Ee.call(Ce,Ce))&&(He?(Ke=tn.bind(null,null),Ve.then(Ke,Ke)):typeof Ve.next=="function"&&typeof Ve.throw=="function"&&(Ve=Et(Ve)))},De),(Ve&&typeof Ve.then=="function"?dt.resolve(Ve).then(function(Ke){return Ce.active?Ke:Gr(new ge.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):De.then(function(){return Ve})).then(function(Ke){return ve&&Ce._resolve(),Ce._completion.then(function(){return Ke})}).catch(function(Ke){return Ce._reject(Ke),Gr(Ke)})})}).bind(null,this,U,Z,T,A);return T?T._promise(U,xe,"lock"):xt.trans?Ii(xt.transless,function(){return C._whenReady(xe)}):this._whenReady(xe)},gr.prototype.table=function(f){if(!_(this._allTables,f))throw new ge.InvalidTable("Table ".concat(f," does not exist"));return this._allTables[f]},gr);function gr(f,v){var A=this;this._middlewares={},this.verno=0;var C=gr.dependencies;this._options=v=i({addons:gr.addons,autoOpen:!0,indexedDB:C.indexedDB,IDBKeyRange:C.IDBKeyRange,cache:"cloned"},v),this._deps={indexedDB:v.indexedDB,IDBKeyRange:v.IDBKeyRange},C=v.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var T,U,Z,ue,xe,Ae={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:it,dbReadyPromise:null,cancelOpen:it,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:v.autoOpen};Ae.dbReadyPromise=new dt(function(re){Ae.dbReadyResolve=re}),Ae.openCanceller=new dt(function(re,Re){Ae.cancelOpen=Re}),this._state=Ae,this.name=f,this.on=zi(this,"populate","blocked","versionchange","close",{ready:[pt,it]}),this.on.ready.subscribe=H(this.on.ready.subscribe,function(re){return function(Re,ve){gr.vip(function(){var Ee,De=A._state;De.openComplete?(De.dbOpenError||dt.resolve().then(Re),ve&&re(Re)):De.onReadyBeingFired?(De.onReadyBeingFired.push(Re),ve&&re(Re)):(re(Re),Ee=A,ve||re(function Ce(){Ee.on.ready.unsubscribe(Re),Ee.on.ready.unsubscribe(Ce)}))})}}),this.Collection=(T=this,ua(Rr.prototype,function(Ve,Ce){this.db=T;var ve=gs,Ee=null;if(Ce)try{ve=Ce()}catch(He){Ee=He}var De=Ve._ctx,Ce=De.table,Ve=Ce.hook.reading.fire;this._ctx={table:Ce,index:De.index,isPrimKey:!De.index||Ce.schema.primKey.keyPath&&De.index===Ce.schema.primKey.name,range:ve,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Ee,or:De.or,valueMapper:Ve!==bt?Ve:null}})),this.Table=(U=this,ua(Do.prototype,function(re,Re,ve){this.db=U,this._tx=ve,this.name=re,this.schema=Re,this.hook=U._allTables[re]?U._allTables[re].hook:zi(null,{creating:[se,it],reading:[qt,bt],updating:[Tt,it],deleting:[Xt,it]})})),this.Transaction=(Z=this,ua(ys.prototype,function(re,Re,ve,Ee,De){var Ce=this;this.db=Z,this.mode=re,this.storeNames=Re,this.schema=ve,this.chromeTransactionDurability=Ee,this.idbtrans=null,this.on=zi(this,"complete","error","abort"),this.parent=De||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new dt(function(Ve,He){Ce._resolve=Ve,Ce._reject=He}),this._completion.then(function(){Ce.active=!1,Ce.on.complete.fire()},function(Ve){var He=Ce.active;return Ce.active=!1,Ce.on.error.fire(Ve),Ce.parent?Ce.parent._reject(Ve):He&&Ce.idbtrans&&Ce.idbtrans.abort(),Gr(Ve)})})),this.Version=(ue=this,ua(xs.prototype,function(re){this.db=ue,this._cfg={version:re,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(xe=this,ua(da.prototype,function(re,Re,ve){if(this.db=xe,this._ctx={table:re,index:Re===":id"?null:Re,or:ve},this._cmp=this._ascending=ir,this._descending=function(Ee,De){return ir(De,Ee)},this._max=function(Ee,De){return 0<ir(Ee,De)?Ee:De},this._min=function(Ee,De){return ir(Ee,De)<0?Ee:De},this._IDBKeyRange=xe._deps.IDBKeyRange,!this._IDBKeyRange)throw new ge.MissingAPI})),this.on("versionchange",function(re){0<re.newVersion?console.warn("Another connection wants to upgrade database '".concat(A.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(A.name,"'. Closing db now to resume the delete request.")),A.close({disableAutoOpen:!1})}),this.on("blocked",function(re){!re.newVersion||re.newVersion<re.oldVersion?console.warn("Dexie.delete('".concat(A.name,"') was blocked")):console.warn("Upgrade '".concat(A.name,"' blocked by other connection holding version ").concat(re.oldVersion/10))}),this._maxKey=Bs(v.IDBKeyRange),this._createTransaction=function(re,Re,ve,Ee){return new A.Transaction(re,Re,ve,A._options.chromeTransactionDurability,Ee)},this._fireOnBlocked=function(re){A.on("blocked").fire(re),Oi.filter(function(Re){return Re.name===A.name&&Re!==A&&!Re._state.vcFired}).map(function(Re){return Re.on("versionchange").fire(re)})},this.use(An),this.use(xo),this.use(va),this.use(hr),this.use(on);var Le=new Proxy(this,{get:function(re,Re,ve){if(Re==="_vip")return!0;if(Re==="table")return function(De){return es(A.table(De),Le)};var Ee=Reflect.get(re,Re,ve);return Ee instanceof Do?es(Ee,Le):Re==="tables"?Ee.map(function(De){return es(De,Le)}):Re==="_createTransaction"?function(){return es(Ee.apply(this,arguments),Le)}:Ee}});this.vip=Le,C.forEach(function(re){return re(A)})}var ts,Vn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",_o=(Ss.prototype.subscribe=function(f,v,A){return this._subscribe(f&&typeof f!="function"?f:{next:f,error:v,complete:A})},Ss.prototype[Vn]=function(){return this},Ss);function Ss(f){this._subscribe=f}try{ts={indexedDB:s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB,IDBKeyRange:s.IDBKeyRange||s.webkitIDBKeyRange}}catch{ts={indexedDB:null,IDBKeyRange:null}}function ri(f){var v,A=!1,C=new _o(function(T){var U=ae(f),Z,ue=!1,xe={},Ae={},Le={get closed(){return ue},unsubscribe:function(){ue||(ue=!0,Z&&Z.abort(),re&&Wi.storagemutated.unsubscribe(ve))}};T.start&&T.start(Le);var re=!1,Re=function(){return Ka(Ee)},ve=function(De){ma(xe,De),zs(Ae,xe)&&Re()},Ee=function(){var De,Ce,Ve;!ue&&ts.indexedDB&&(xe={},De={},Z&&Z.abort(),Z=new AbortController,Ve=function(He){var Ke=qr();try{U&&ei();var Xe=Tn(f,He);return Xe=U?Xe.finally(tn):Xe}finally{Ke&&an()}}(Ce={subscr:De,signal:Z.signal,requery:Re,querier:f,trans:null}),Promise.resolve(Ve).then(function(He){A=!0,v=He,ue||Ce.signal.aborted||(xe={},function(Ke){for(var Xe in Ke)if(_(Ke,Xe))return;return 1}(Ae=De)||re||(Wi(yi,ve),re=!0),Ka(function(){return!ue&&T.next&&T.next(He)}))},function(He){A=!1,["DatabaseClosedError","AbortError"].includes(He?.name)||ue||Ka(function(){ue||T.error&&T.error(He)})}))};return setTimeout(Re,0),Le});return C.hasValue=function(){return A},C.getValue=function(){return v},C}var Ri=li;function ya(f){var v=gn;try{gn=!0,Wi.storagemutated.fire(f),Fe(f,!0)}finally{gn=v}}N(Ri,i(i({},at),{delete:function(f){return new Ri(f,{addons:[]}).delete()},exists:function(f){return new Ri(f,{addons:[]}).open().then(function(v){return v.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(f){try{return v=Ri.dependencies,A=v.indexedDB,v=v.IDBKeyRange,(Xa(A)?Promise.resolve(A.databases()).then(function(C){return C.map(function(T){return T.name}).filter(function(T){return T!==fs})}):Us(A,v).toCollection().primaryKeys()).then(f)}catch{return Gr(new ge.MissingAPI)}var v,A},defineClass:function(){return function(f){h(this,f)}},ignoreTransaction:function(f){return xt.trans?Ii(xt.transless,f):f()},vip:_s,async:function(f){return function(){try{var v=Et(f.apply(this,arguments));return v&&typeof v.then=="function"?v:dt.resolve(v)}catch(A){return Gr(A)}}},spawn:function(f,v,A){try{var C=Et(f.apply(A,v||[]));return C&&typeof C.then=="function"?C:dt.resolve(C)}catch(T){return Gr(T)}},currentTransaction:{get:function(){return xt.trans||null}},waitFor:function(f,v){return v=dt.resolve(typeof f=="function"?Ri.ignoreTransaction(f):f).timeout(v||6e4),xt.trans?xt.trans.waitFor(v):v},Promise:dt,debug:{get:function(){return vt},set:function(f){St(f)}},derive:P,extend:h,props:N,override:H,Events:zi,on:Wi,liveQuery:ri,extendObservabilitySet:ma,getByKeyPath:be,setByKeyPath:ne,delByKeyPath:function(f,v){typeof v=="string"?ne(f,v,void 0):"length"in v&&[].map.call(v,function(A){ne(f,A,void 0)})},shallowClone:G,deepClone:pe,getObjectDiff:sr,cmp:ir,asap:le,minKey:-1/0,addons:[],connections:Oi,errnames:ye,dependencies:ts,cache:b,semVer:"4.0.11",version:"4.0.11".split(".").map(function(f){return parseInt(f)}).reduce(function(f,v,A){return f+v/Math.pow(10,2*A)})})),Ri.maxKey=Bs(Ri.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Wi(yi,function(f){gn||(f=new CustomEvent(Vi,{detail:f}),gn=!0,dispatchEvent(f),gn=!1)}),addEventListener(Vi,function(f){f=f.detail,gn||ya(f)}));var rs,gn=!1,Vs=function(){};return typeof BroadcastChannel<"u"&&((Vs=function(){(rs=new BroadcastChannel(Vi)).onmessage=function(f){return f.data&&ya(f.data)}})(),typeof rs.unref=="function"&&rs.unref(),Wi(yi,function(f){gn||rs.postMessage(f)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(f){if(!li.disableBfCache&&f.persisted){vt&&console.debug("Dexie: handling persisted pagehide"),rs?.close();for(var v=0,A=Oi;v<A.length;v++)A[v].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(f){!li.disableBfCache&&f.persisted&&(vt&&console.debug("Dexie: handling persisted pageshow"),Vs(),ya({all:new sn(-1/0,[[]])}))})),dt.rejectionMapper=function(f,v){return!f||f instanceof $||f instanceof TypeError||f instanceof SyntaxError||!f.name||!rt[f.name]?f:(v=new rt[f.name](v||f.message,f),"stack"in f&&I(v,"stack",{get:function(){return this.inner.stack}}),v)},St(vt),i(li,Object.freeze({__proto__:null,Dexie:li,liveQuery:ri,Entity:Rs,cmp:ir,PropModification:Ds,replacePrefix:function(f,v){return new Ds({replacePrefix:[f,v]})},add:function(f){return new Ds({add:f})},remove:function(f){return new Ds({remove:f})},default:li,RangeSet:sn,mergeRanges:ks,rangesOverlap:ul}),{default:li}),li})}(ah)),ah.exports}var I3=L3();const Rp=$m(I3),Pm=Symbol.for("Dexie"),wh=globalThis[Pm]||(globalThis[Pm]=Rp);if(Rp.semVer!==wh.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Rp.semVer} and ${wh.semVer}`);const{liveQuery:E_,mergeRanges:C_,rangesOverlap:P_,RangeSet:L_,cmp:I_,Entity:O_,PropModification:T_,replacePrefix:R_,add:D_,remove:F_}=wh,u1=[{id:"d1111111-1111-1111-1111-111111111111",name:"Ibrahim Fatmi",email:"brahim@fatmi.com",role:"director",department:"Management"}],c1={"brahim@fatmi.com":"Ibrahim1972"},d1=Object.freeze(Object.defineProperty({__proto__:null,defaultAgents:u1,defaultPasswords:c1},Symbol.toStringTag,{value:"Module"}));class O3 extends wh{agents;invoices;invoiceItems;settings;constructor(){super("invoice_db"),this.version(5).stores({agents:"id, name, email, role",invoices:"id, agentId, status, createdAt, clientName, *clientEmail, *notes, passportNumber, flightNumber, visaStatus, departureDate, dateOfBirth",invoiceItems:"id, invoiceId",settings:"id, theme, language"}),this.agents.hook("creating",function(e,r){if(!r.id||!r.email||!r.role)throw new Error("Invalid agent data")}),this.invoices.hook("creating",function(e,r){if(!r.agentId||!r.createdAt)throw new Error("Invalid invoice data")})}}const ji=new O3;async function T3(){try{if(console.log("Synchronizing default agents..."),await Promise.all(u1.map(async i=>{const o=await ji.agents.get(i.id);o?(o.email!==i.email||o.role!==i.role)&&(console.log(`Updating agent: ${i.email}`),await ji.agents.update(i.id,i)):(console.log(`Adding missing agent: ${i.email}`),await ji.agents.add(i))})),await ji.agents.count()>1){console.log("Database already has data, skipping demo invoices initialization");return}console.log("Clearing existing data..."),await Promise.all([ji.agents.clear(),ji.invoices.clear(),ji.invoiceItems.clear(),ji.settings.clear()]),console.log("Initializing demo data...");const e=["draft","sent","paid","overdue"],r=await Promise.all(e.map(i=>ji.invoices.add({id:crypto.randomUUID(),agentId:"a1111111-1111-1111-1111-111111111111",total:Math.floor(Math.random()*5e3)+500,status:i,createdAt:new Date().toISOString(),clientName:`Demo Client (${i})`,clientEmail:"client@example.com",notes:`Demo invoice in ${i} status`})));await Promise.all(r.map(i=>ji.invoiceItems.add({id:crypto.randomUUID(),invoiceId:i,description:"Demo Item",quantity:1,unitPrice:1e3}))),await ji.settings.add({id:"1",theme:"light",language:"fr"}),console.log("Demo data initialized successfully")}catch(t){throw console.error("Failed to initialize demo data:",t),t}}ji.on("ready",async()=>{try{await T3(),console.log("Database ready and initialized")}catch(t){console.error("Failed to initialize database:",t)}});const h1=J.createContext(void 0),R3=({children:t})=>{const[e,r]=J.useState(null),[i,o]=J.useState(!0),[s,l]=J.useState(null);J.useEffect(()=>{(async()=>{try{await ji.open();const x=localStorage.getItem("agent");if(x){const I=JSON.parse(x),P=await ji.agents.where("id").equals(I.id||"").first();P?r(P):localStorage.removeItem("agent")}}catch(x){console.error("Error initializing:",x),l("Failed to initialize application")}finally{o(!1)}})()},[]);const _={isAuthenticated:!!e,agentProfile:e,loading:i,error:s,signIn:async(N,x)=>{try{if(o(!0),l(null),N.toLowerCase().trim()==="brahim@fatmi.com"&&x==="Ibrahim1972"){let R=await ji.agents.where("email").equals(N.toLowerCase().trim()).first();if(!R){const{defaultAgents:L}=await Bc(async()=>{const{defaultAgents:M}=await Promise.resolve().then(()=>d1);return{defaultAgents:M}},void 0);if(R=L.find(M=>M.email==="brahim@fatmi.com"),R)try{await ji.agents.put(R)}catch(M){console.warn("Failed to save Ibrahim to local DB, but allowing login anyway",M)}}if(R)return r(R),localStorage.setItem("agent",JSON.stringify(R)),{agent:R}}const P=c1[N];if(P&&x===P){const R=await ji.agents.where("email").equals(N).first();if(R)return r(R),localStorage.setItem("agent",JSON.stringify(R)),{agent:R}}return{error:"Incorrect email or password"}}catch(I){return console.error("Sign in error:",I),{error:"Failed to sign in. Please try again."}}finally{o(!1)}},signOut:async()=>{try{o(!0),localStorage.removeItem("agent"),r(null),console.log("User signed out successfully")}catch(N){console.error("Sign out error:",N),l("Failed to sign out")}finally{o(!1)}},retryAuth:async()=>{l(null);const N=localStorage.getItem("agent");if(N)try{const x=JSON.parse(N),I=await ji.agents.where("id").equals(x.id||"").first();I?r(I):(localStorage.removeItem("agent"),l("Session expired. Please sign in again."))}catch{l("Failed to restore session")}o(!1)},forceInitComplete:()=>{o(!1),l(null)}};return y.jsx(h1.Provider,{value:_,children:t})},Fh=()=>{const t=J.useContext(h1);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},D3=()=>{const[t,e]=J.useState("dashboard"),[r,i]=J.useState(null),{agentProfile:o,signOut:s}=Fh(),l=o?.id,{invoices:c=[],error:h,createInvoice:g,updateInvoice:w,deleteInvoice:_}=s1(l),{stats:N={totalInvoices:0,totalRevenue:0,paidInvoices:0,unpaidInvoices:0,pendingInvoices:0,recentInvoices:[]}}=o1(l),{invoices:x=[]}=l1(l),{agents:I=[],isLoading:P}=C3();if(!o)return y.jsx(el,{title:"Agent Portal",userType:"agent",children:y.jsx("div",{className:"flex items-center justify-center h-64",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),y.jsx("p",{className:"text-gray-600",children:"Loading your profile..."})]})})});const R=I.find(G=>G.id===l);if(P&&!R)return y.jsx(el,{title:"Agent Portal",userType:"agent",children:y.jsx("div",{className:"flex items-center justify-center h-64",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),y.jsx("p",{className:"text-gray-600",children:"Loading your profile..."})]})})});if(h)return y.jsx(el,{title:"Agent Portal",userType:"agent",children:y.jsx("div",{className:"flex items-center justify-center h-64",children:y.jsxs("div",{className:"text-center max-w-md",children:[y.jsx(Zc,{className:"w-8 h-8 text-red-600 mx-auto mb-4"}),y.jsx("p",{className:"text-red-600 mb-4",children:"Error loading invoices"}),y.jsx("p",{className:"text-sm text-gray-600 mb-4",children:h}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Reload Page"}),y.jsx("p",{className:"text-xs text-gray-500",children:"If the problem persists, check your internet connection"})]})]})})});const L=async G=>{if(!l){alert("You must be logged in to create invoices");return}if(!R){alert("Agent profile not found. Please contact support.");return}try{console.log("Creating invoice for agent:",l,R);const fe={...G,agentId:l,clientName:G.client?.name||G.clientName||"Unknown Client",clientEmail:G.client?.email||G.clientEmail||"",createdAt:new Date().toISOString()};await g(fe,G.items||[]),e("dashboard")}catch(fe){console.error("Error creating invoice:",fe);const Te=fe instanceof Error?fe.message:"Failed to create invoice. Please try again.";alert(Te)}},M=async G=>{if(!r?.id){alert("No invoice selected for update");return}try{console.log("Updating invoice:",r.id,G);const fe={...G,clientName:G.client?.name||G.clientName||"Unknown Client",clientEmail:G.client?.email||G.clientEmail||""};await w(r.id,fe,G.items),e("dashboard"),i(null)}catch(fe){console.error("Error updating invoice:",fe);const Te=fe instanceof Error?fe.message:"Failed to update invoice. Please try again.";alert(Te)}},H=G=>{i(G),e("view")},oe=G=>{i(G),e("edit")},le=async G=>{if(window.confirm("Are you sure you want to delete this invoice?"))try{await _(G)}catch(fe){console.error("Error deleting invoice:",fe),alert("Failed to delete invoice. Please try again.")}},be=async(G,fe)=>{try{await w(G,{status:fe}),r&&r.id===G&&i({...r,status:fe})}catch(Te){console.error("Error updating invoice status:",Te),alert("Failed to update invoice status. Please try again.")}},ne=()=>{switch(t){case"create":return y.jsx(fp,{onSave:L,onCancel:()=>e("dashboard"),currentAgent:R},"create-invoice");case"edit":return r?y.jsx(fp,{editingInvoice:r,onSave:M,onCancel:()=>e("dashboard"),currentAgent:R},`edit-invoice-${r.id}`):null;case"view":return r?y.jsx(zv,{invoice:r,onEdit:()=>e("edit"),onClose:()=>e("dashboard"),onStatusUpdate:be}):null;case"all-invoices":return y.jsx(Yw,{invoices:c,onView:H,onEdit:oe,onDelete:le,onBack:()=>e("dashboard")});default:return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("div",{children:[y.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:["Welcome, ",R?.name||"Agent"]}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your invoices and track payments"})]}),y.jsxs("div",{className:"flex space-x-4",children:[y.jsxs("button",{onClick:()=>e("create"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[y.jsx(dh,{className:"h-4 w-4"}),y.jsx("span",{children:"Create Invoice"})]}),y.jsxs("button",{onClick:s,className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[y.jsx(Gp,{className:"h-4 w-4"}),y.jsx("span",{children:"Sign Out"})]})]})]}),y.jsx($v,{stats:N}),x.length>0&&y.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center",children:[y.jsx(Ku,{className:"h-5 w-5 mr-2"}),"Today's Invoices"]}),y.jsxs("span",{className:"text-sm text-gray-500",children:[x.length," invoices"]})]}),y.jsx(gh,{invoices:x,onView:H,onEdit:oe,onDelete:le,title:"Today's Invoices"})]}),y.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center",children:[y.jsx(n5,{className:"h-5 w-5 mr-2"}),"Recent Invoices"]}),y.jsx("button",{onClick:()=>e("all-invoices"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View All"})]}),y.jsx(gh,{invoices:c.slice(0,5),onView:H,onEdit:oe,onDelete:le,title:"Recent Invoices"})]})]})}};return y.jsx(el,{title:"Agent Portal",userType:"agent",children:ne()})},F3=({onLogout:t})=>{const{agentProfile:e}=Fh(),[r,i]=J.useState(null),[o,s]=J.useState(null),{invoices:l=[],isLoading:c,error:h,updateInvoice:g,deleteInvoice:w}=s1(),{stats:_={totalInvoices:0,totalRevenue:0,paidInvoices:0,unpaidInvoices:0,pendingInvoices:0,recentInvoices:[]},isLoading:N}=o1(),{isLoading:x}=l1(),I=le=>{i(le)},P=()=>{i(null)},R=le=>{s(le),i(null)},L=async le=>{if(!o){alert("No invoice selected for update");return}try{const be=le.items.map(ne=>({id:ne.id,description:ne.description,quantity:ne.quantity,unitPrice:ne.unitPrice,total:ne.total}));await g(o.id,{client:{name:le.client.name,email:le.client.email,phone:le.client.phone,address:le.client.address},subtotal:le.subtotal,tax:le.tax,total:le.total,status:le.status,dueDate:le.dueDate,notes:le.notes},be),s(null),alert("Invoice updated successfully!")}catch(be){console.error("Error updating invoice:",be);const ne=be instanceof Error?be.message:"Failed to update invoice. Please try again.";alert(ne)}},M=async le=>{if(window.confirm("Are you sure you want to delete this invoice? This action cannot be undone."))try{await w(le),alert("Invoice deleted successfully")}catch(be){console.error("Error deleting invoice:",be),alert("Failed to delete invoice. Please try again.")}},H=async(le,be)=>{try{await g(le,{status:be}),r&&r.id===le&&i({...r,status:be}),alert({draft:"Invoice moved to draft",sent:"Invoice marked as sent to client",paid:"Invoice marked as paid - great job!",overdue:"Invoice marked as overdue"}[be])}catch(ne){throw console.error("Error updating invoice status:",ne),ne}},oe=J.useMemo(()=>[...l].sort((le,be)=>new Date(be.createdAt).getTime()-new Date(le.createdAt).getTime()),[l]);return c||N||x?y.jsx(el,{title:"Director Dashboard",userType:"director",userName:e?.name||"Director",onLogout:t,children:y.jsx("div",{className:"flex items-center justify-center min-h-64",children:y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})})}):h?y.jsx(el,{title:"Director Dashboard",userType:"director",userName:e?.name||"Director",onLogout:t,children:y.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 text-center",children:[y.jsx(Zc,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),y.jsx("h3",{className:"text-lg font-medium text-red-900 dark:text-red-200 mb-2",children:"Connection Error"}),y.jsx("p",{className:"text-red-700 dark:text-red-300 mb-4",children:h}),y.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg",children:"Retry"})]})}):o?y.jsx(el,{title:"Edit Invoice",userType:"director",userName:e?.name||"Director",onLogout:t,children:y.jsx(fp,{onSave:L,onCancel:()=>s(null),editingInvoice:o})}):r?y.jsx(el,{title:"Invoice Details",userType:"director",userName:e?.name||"Director",onLogout:t,children:y.jsx(zv,{invoice:r,onClose:P,onEdit:()=>R(r),onStatusUpdate:H})}):y.jsxs(el,{title:"Director Dashboard",userType:"director",userName:e?.name||"Director",onLogout:t,children:[y.jsx("div",{className:"mb-8",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Director Dashboard"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Overview of all agency operations"})]}),y.jsxs("div",{className:"flex items-center space-x-3",children:[y.jsxs("button",{className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors duration-200",children:[y.jsx(Eh,{className:"h-4 w-4"}),y.jsx("span",{children:"Export Report"})]}),y.jsxs("button",{onClick:t,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors duration-200",children:[y.jsx(Gp,{className:"h-4 w-4"}),y.jsx("span",{children:"Logout"})]})]})]})}),y.jsx($v,{stats:_}),y.jsx(gh,{invoices:oe,onView:I,onEdit:R,onDelete:M,title:"All Invoices"})]})},M3=({onBack:t})=>{const[e,r]=J.useState(""),[i,o]=J.useState(""),[s,l]=J.useState(!1),[c,h]=J.useState(!1),[g,w]=J.useState(""),{signIn:_}=Fh(),N=async x=>{if(x.preventDefault(),!(!e||!i)){h(!0),w("");try{const I=await _(e,i);I.error&&w(I.error)}catch{w("An unexpected error occurred")}finally{h(!1)}}};return y.jsx("div",{className:"min-h-screen bg-gradient-to-br from-teal-50 via-white to-cyan-50 flex items-center justify-center p-4",children:y.jsxs("div",{className:"max-w-md w-full",children:[t&&y.jsx("div",{className:"mb-6",children:y.jsxs("button",{onClick:t,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[y.jsx(sv,{className:"h-5 w-5"}),y.jsx("span",{children:"Back"})]})}),y.jsxs("div",{className:"text-center mb-8",children:[y.jsx("div",{className:"bg-primary-500 p-4 rounded-2xl inline-block mb-4 shadow-lg",style:{backgroundColor:"#03989e"},children:y.jsx(ch,{className:"h-8 w-8 text-white"})}),y.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Agence de Voyage Agent Portal"}),y.jsx("p",{className:"text-gray-600",children:"Sign in to your account"})]}),y.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[y.jsxs("div",{className:"mb-6",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),y.jsx("p",{className:"text-gray-600",children:"Enter your credentials to access your dashboard"})]}),g&&y.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:y.jsx("p",{className:"text-red-600 text-sm font-medium",children:g})}),y.jsxs("form",{onSubmit:N,className:"space-y-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:y.jsx(Z2,{className:"h-5 w-5 text-gray-400"})}),y.jsx("input",{type:"email",value:e,onChange:x=>r(x.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white",style:{"--tw-ring-color":"#03989e"},placeholder:"Enter your email",required:!0})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:y.jsx(Q2,{className:"h-5 w-5 text-gray-400"})}),y.jsx("input",{type:s?"text":"password",value:i,onChange:x=>o(x.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white",style:{"--tw-ring-color":"#03989e"},placeholder:"Enter your password",required:!0}),y.jsx("button",{type:"button",onClick:()=>l(!s),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:s?y.jsx(G2,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):y.jsx(uv,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),y.jsx("button",{type:"submit",disabled:c||!e||!i,className:"w-full text-white py-3 px-4 rounded-lg font-medium transition-all duration-200 flex items-center justify-center space-x-2 shadow-lg hover:shadow-xl disabled:cursor-not-allowed",style:{backgroundColor:"#03989e",opacity:c||!e||!i?.6:1},onMouseEnter:x=>{!c&&e&&i&&(x.currentTarget.style.backgroundColor="#027a7f")},onMouseLeave:x=>{x.currentTarget.style.backgroundColor="#03989e"},children:c?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),y.jsx("span",{children:"Signing in..."})]}):y.jsx("span",{children:"Sign In"})})]})]}),y.jsx("div",{className:"text-center mt-8",children:y.jsx("p",{className:"text-sm text-gray-500",children:" 2025 Agence de Voyage. Secure Agent Portal."})})]})})},f1=({size:t="md",text:e,className:r=""})=>{const i={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return y.jsxs("div",{className:`flex flex-col items-center justify-center space-y-4 ${r}`,children:[y.jsxs("div",{className:"text-center",children:[y.jsx(hv,{className:`animate-spin text-blue-600 mx-auto ${i[t]} ${e?"mb-2":""}`}),e&&y.jsx("p",{className:"text-gray-600 font-medium",children:e})]}),y.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx("div",{className:"h-1.5 w-24 bg-gray-200 rounded-full overflow-hidden",children:y.jsx("div",{className:"h-full bg-blue-600 animate-progress",style:{width:"75%"}})}),y.jsx("span",{className:"text-sm text-gray-500",children:"75%"})]}),y.jsx("button",{onClick:()=>{const o=localStorage.getItem("dev-bypass-auth")==="true";localStorage.setItem("dev-bypass-auth",(!o).toString()),window.location.reload()},className:"text-sm text-blue-600 hover:text-blue-700 underline",children:"Quick Access (Dev Mode)"})]})]})},B3=()=>{const[t,e]=J.useState(navigator.onLine),[r,i]=J.useState(!1);return J.useEffect(()=>{const o=()=>{e(!0),i(!0),setTimeout(()=>i(!1),3e3)},s=()=>{e(!1),i(!0)};return window.addEventListener("online",o),window.addEventListener("offline",s),navigator.onLine||i(!0),()=>{window.removeEventListener("online",o),window.removeEventListener("offline",s)}},[]),r?y.jsx("div",{className:`fixed top-4 right-4 z-50 px-4 py-2 rounded-lg shadow-lg flex items-center gap-2 ${t?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:t?y.jsxs(y.Fragment,{children:[y.jsx(a5,{className:"w-4 h-4"}),y.jsx("span",{className:"text-sm font-medium",children:"Back online"})]}):y.jsxs(y.Fragment,{children:[y.jsx(i5,{className:"w-4 h-4"}),y.jsx("span",{className:"text-sm font-medium",children:"No internet connection"})]})}):null},q3=({onRetry:t,onSkip:e})=>y.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:y.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[y.jsxs("div",{className:"mb-6",children:[y.jsx("div",{className:"mx-auto w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mb-4",children:y.jsx(W2,{className:"h-8 w-8 text-yellow-600"})}),y.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Connection Issue"}),y.jsx("p",{className:"text-gray-600",children:"We're having trouble connecting to the authentication service. This might be due to network issues or server maintenance."})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("button",{onClick:t,className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg flex items-center justify-center space-x-2 transition-colors duration-200",children:[y.jsx(fv,{className:"h-4 w-4"}),y.jsx("span",{children:"Try Again"})]}),y.jsx("button",{onClick:e,className:"w-full bg-gray-600 hover:bg-gray-700 text-white px-4 py-3 rounded-lg transition-colors duration-200",children:"Proceed to Login"})]}),y.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:y.jsx("p",{className:"text-sm text-gray-500",children:"If this problem persists, please check your internet connection or contact support."})})]})}),U3=()=>{const[t,e]=J.useState(!1);return J.useEffect(()=>{localStorage.getItem("dev-bypass-auth"),e(!1)},[]),{isDevelopment:t,enableBypass:()=>{localStorage.setItem("dev-bypass-auth","true"),e(!0)},disableBypass:()=>{localStorage.removeItem("dev-bypass-auth"),e(!1)}}},z3=()=>{const{isAuthenticated:t,loading:e,error:r,agentProfile:i,forceInitComplete:o,retryAuth:s,signOut:l}=Fh();return U3(),J.useEffect(()=>{document.title="Agent Portal - Invoice Management System"},[]),r&&!e?y.jsx(q3,{onRetry:s,onSkip:()=>o()}):e?y.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:y.jsxs("div",{className:"text-center",children:[y.jsx(f1,{size:"lg",text:"Loading your account..."}),y.jsxs("div",{className:"mt-6 space-y-3",children:[y.jsx("button",{onClick:()=>window.location.reload(),className:"block w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors duration-200",children:"Try Again"}),!1,y.jsx("p",{className:"text-sm text-gray-500 mt-2",children:'If loading takes too long, click "Try Again"'})]})]})}):t?y.jsxs("div",{className:"transition-colors duration-200",children:[y.jsx(B3,{}),i?.role==="director"?y.jsx(F3,{onLogout:l}):y.jsx(D3,{})]}):y.jsx(M3,{})},$3=()=>{const t=al(),[e,r]=J.useState(()=>{const c=localStorage.getItem("nav-position");return c?JSON.parse(c):{x:window.innerWidth-200,y:20}}),[i,o]=J.useState(!1),s=J.useRef(null),l=c=>{o(!0),s.current={offsetX:c.clientX-e.x,offsetY:c.clientY-e.y}};return J.useEffect(()=>{const c=g=>{if(!i||!s.current)return;const w=g.clientX-s.current.offsetX,_=g.clientY-s.current.offsetY,N=Math.max(10,Math.min(w,window.innerWidth-180)),x=Math.max(10,Math.min(_,window.innerHeight-100));r({x:N,y:x})},h=()=>{i&&(o(!1),localStorage.setItem("nav-position",JSON.stringify(e)))};return i&&(window.addEventListener("mousemove",c),window.addEventListener("mouseup",h)),()=>{window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",h)}},[i,e]),y.jsx("div",{className:"fixed z-[9999] select-none",style:{left:`${e.x}px`,top:`${e.y}px`,cursor:i?"grabbing":"default"},children:y.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 overflow-hidden flex flex-row items-center p-1.5 gap-1 min-w-[160px]",children:[y.jsx("div",{onMouseDown:l,className:"cursor-grab active:cursor-grabbing p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",title:"  ",children:y.jsx(cv,{className:"h-4 w-4 text-gray-400"})}),y.jsxs("div",{className:"flex flex-row gap-1 border-l border-gray-100 dark:border-gray-700 ml-1 pl-1",children:[y.jsxs(lh,{to:"/portal",className:`flex items-center space-x-2 px-3 py-1.5 rounded-lg text-sm transition-all duration-200 ${t.pathname==="/portal"||t.pathname==="/"?"bg-blue-600 text-white shadow-md shadow-blue-200 dark:shadow-none font-medium":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[y.jsx(cu,{className:"h-4 w-4"}),y.jsx("span",{children:"Dashboard"})]}),y.jsxs(lh,{to:"/portal/rooming",className:`flex items-center space-x-2 px-3 py-1.5 rounded-lg text-sm transition-all duration-200 ${t.pathname==="/portal/rooming"?"bg-emerald-600 text-white shadow-md shadow-emerald-200 dark:shadow-none font-medium":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[y.jsx(dv,{className:"h-4 w-4"}),y.jsx("span",{children:"Rooming"})]})]})]})})};class V3 extends J.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,r){console.error("ErrorBoundary caught an error:",e,r),this.setState({error:e,errorInfo:r})}handleReload=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()};handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:y.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:y.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:[y.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:y.jsx(Zc,{className:"w-6 h-6 text-red-600"})}),y.jsx("h1",{className:"text-xl font-semibold text-gray-900 text-center mb-2",children:"Something went wrong"}),y.jsx("p",{className:"text-gray-600 text-center mb-6",children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),!1,y.jsxs("div",{className:"flex gap-3",children:[y.jsx("button",{onClick:this.handleReset,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors",children:"Try Again"}),y.jsxs("button",{onClick:this.handleReload,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[y.jsx(fv,{className:"w-4 h-4"}),"Reload Page"]})]})]})}):this.props.children}}const Mh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ic(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function s0(t){return"nodeType"in t}function Aa(t){var e,r;return t?ic(t)?t:s0(t)&&(e=(r=t.ownerDocument)==null?void 0:r.defaultView)!=null?e:window:window}function o0(t){const{Document:e}=Aa(t);return t instanceof e}function rd(t){return ic(t)?!1:t instanceof Aa(t).HTMLElement}function p1(t){return t instanceof Aa(t).SVGElement}function ac(t){return t?ic(t)?t.document:s0(t)?o0(t)?t:rd(t)||p1(t)?t.ownerDocument:document:document:document}const il=Mh?J.useLayoutEffect:J.useEffect;function Bh(t){const e=J.useRef(t);return il(()=>{e.current=t}),J.useCallback(function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e.current==null?void 0:e.current(...i)},[])}function W3(){const t=J.useRef(null),e=J.useCallback((i,o)=>{t.current=setInterval(i,o)},[]),r=J.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,r]}function Gc(t,e){e===void 0&&(e=[t]);const r=J.useRef(t);return il(()=>{r.current!==t&&(r.current=t)},e),r}function nd(t,e){const r=J.useRef();return J.useMemo(()=>{const i=t(r.current);return r.current=i,i},[...e])}function bh(t){const e=Bh(t),r=J.useRef(null),i=J.useCallback(o=>{o!==r.current&&e?.(o,r.current),r.current=o},[]);return[r,i]}function xh(t){const e=J.useRef();return J.useEffect(()=>{e.current=t},[t]),e.current}let rp={};function qh(t,e){return J.useMemo(()=>{if(e)return e;const r=rp[t]==null?0:rp[t]+1;return rp[t]=r,t+"-"+r},[t,e])}function g1(t){return function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.reduce((s,l)=>{const c=Object.entries(l);for(const[h,g]of c){const w=s[h];w!=null&&(s[h]=w+t*g)}return s},{...e})}}const Zu=g1(1),_h=g1(-1);function H3(t){return"clientX"in t&&"clientY"in t}function l0(t){if(!t)return!1;const{KeyboardEvent:e}=Aa(t.target);return e&&t instanceof e}function K3(t){if(!t)return!1;const{TouchEvent:e}=Aa(t.target);return e&&t instanceof e}function kh(t){if(K3(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:r}=t.touches[0];return{x:e,y:r}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:r}=t.changedTouches[0];return{x:e,y:r}}}return H3(t)?{x:t.clientX,y:t.clientY}:null}const Jc=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:r}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:r}=t;return"scaleX("+e+") scaleY("+r+")"}},Transform:{toString(t){if(t)return[Jc.Translate.toString(t),Jc.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:r,easing:i}=t;return e+" "+r+"ms "+i}}}),Lm="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function G3(t){return t.matches(Lm)?t:t.querySelector(Lm)}const J3={display:"none"};function Y3(t){let{id:e,value:r}=t;return In.createElement("div",{id:e,style:J3},r)}function X3(t){let{id:e,announcement:r,ariaLiveType:i="assertive"}=t;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return In.createElement("div",{id:e,style:o,role:"status","aria-live":i,"aria-atomic":!0},r)}function Q3(){const[t,e]=J.useState("");return{announce:J.useCallback(i=>{i!=null&&e(i)},[]),announcement:t}}const m1=J.createContext(null);function Z3(t){const e=J.useContext(m1);J.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function e4(){const[t]=J.useState(()=>new Set),e=J.useCallback(i=>(t.add(i),()=>t.delete(i)),[t]);return[J.useCallback(i=>{let{type:o,event:s}=i;t.forEach(l=>{var c;return(c=l[o])==null?void 0:c.call(l,s)})},[t]),e]}const t4={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},r4={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was moved over droppable area "+r.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was dropped over droppable area "+r.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function n4(t){let{announcements:e=r4,container:r,hiddenTextDescribedById:i,screenReaderInstructions:o=t4}=t;const{announce:s,announcement:l}=Q3(),c=qh("DndLiveRegion"),[h,g]=J.useState(!1);if(J.useEffect(()=>{g(!0)},[]),Z3(J.useMemo(()=>({onDragStart(_){let{active:N}=_;s(e.onDragStart({active:N}))},onDragMove(_){let{active:N,over:x}=_;e.onDragMove&&s(e.onDragMove({active:N,over:x}))},onDragOver(_){let{active:N,over:x}=_;s(e.onDragOver({active:N,over:x}))},onDragEnd(_){let{active:N,over:x}=_;s(e.onDragEnd({active:N,over:x}))},onDragCancel(_){let{active:N,over:x}=_;s(e.onDragCancel({active:N,over:x}))}}),[s,e])),!h)return null;const w=In.createElement(In.Fragment,null,In.createElement(Y3,{id:i,value:o.draggable}),In.createElement(X3,{id:c,announcement:l}));return r?Cc.createPortal(w,r):w}var fi;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(fi||(fi={}));function Sh(){}function i4(t,e){return J.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function a4(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return J.useMemo(()=>[...e].filter(i=>i!=null),[...e])}const uo=Object.freeze({x:0,y:0});function s4(t,e){const r=kh(t);if(!r)return"0 0";const i={x:(r.x-e.left)/e.width*100,y:(r.y-e.top)/e.height*100};return i.x+"% "+i.y+"%"}function o4(t,e){let{data:{value:r}}=t,{data:{value:i}}=e;return i-r}function l4(t,e){if(!t||t.length===0)return null;const[r]=t;return r[e]}function u4(t,e){const r=Math.max(e.top,t.top),i=Math.max(e.left,t.left),o=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),l=o-i,c=s-r;if(i<o&&r<s){const h=e.width*e.height,g=t.width*t.height,w=l*c,_=w/(h+g-w);return Number(_.toFixed(4))}return 0}const c4=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:i}=t;const o=[];for(const s of i){const{id:l}=s,c=r.get(l);if(c){const h=u4(c,e);h>0&&o.push({id:l,data:{droppableContainer:s,value:h}})}}return o.sort(o4)};function d4(t,e,r){return{...t,scaleX:e&&r?e.width/r.width:1,scaleY:e&&r?e.height/r.height:1}}function v1(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:uo}function h4(t){return function(r){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return o.reduce((l,c)=>({...l,top:l.top+t*c.y,bottom:l.bottom+t*c.y,left:l.left+t*c.x,right:l.right+t*c.x}),{...r})}}const f4=h4(1);function y1(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function p4(t,e,r){const i=y1(e);if(!i)return t;const{scaleX:o,scaleY:s,x:l,y:c}=i,h=t.left-l-(1-o)*parseFloat(r),g=t.top-c-(1-s)*parseFloat(r.slice(r.indexOf(" ")+1)),w=o?t.width/o:t.width,_=s?t.height/s:t.height;return{width:w,height:_,top:g,right:h+w,bottom:g+_,left:h}}const g4={ignoreTransform:!1};function id(t,e){e===void 0&&(e=g4);let r=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:g,transformOrigin:w}=Aa(t).getComputedStyle(t);g&&(r=p4(r,g,w))}const{top:i,left:o,width:s,height:l,bottom:c,right:h}=r;return{top:i,left:o,width:s,height:l,bottom:c,right:h}}function Im(t){return id(t,{ignoreTransform:!0})}function m4(t){const e=t.innerWidth,r=t.innerHeight;return{top:0,left:0,right:e,bottom:r,width:e,height:r}}function v4(t,e){return e===void 0&&(e=Aa(t).getComputedStyle(t)),e.position==="fixed"}function y4(t,e){e===void 0&&(e=Aa(t).getComputedStyle(t));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const s=e[o];return typeof s=="string"?r.test(s):!1})}function u0(t,e){const r=[];function i(o){if(e!=null&&r.length>=e||!o)return r;if(o0(o)&&o.scrollingElement!=null&&!r.includes(o.scrollingElement))return r.push(o.scrollingElement),r;if(!rd(o)||p1(o)||r.includes(o))return r;const s=Aa(t).getComputedStyle(o);return o!==t&&y4(o,s)&&r.push(o),v4(o,s)?r:i(o.parentNode)}return t?i(t):r}function w1(t){const[e]=u0(t,1);return e??null}function np(t){return!Mh||!t?null:ic(t)?t:s0(t)?o0(t)||t===ac(t).scrollingElement?window:rd(t)?t:null:null}function b1(t){return ic(t)?t.scrollX:t.scrollLeft}function x1(t){return ic(t)?t.scrollY:t.scrollTop}function Dp(t){return{x:b1(t),y:x1(t)}}var Ci;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Ci||(Ci={}));function _1(t){return!Mh||!t?!1:t===document.scrollingElement}function k1(t){const e={x:0,y:0},r=_1(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},i={x:t.scrollWidth-r.width,y:t.scrollHeight-r.height},o=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,l=t.scrollTop>=i.y,c=t.scrollLeft>=i.x;return{isTop:o,isLeft:s,isBottom:l,isRight:c,maxScroll:i,minScroll:e}}const w4={x:.2,y:.2};function b4(t,e,r,i,o){let{top:s,left:l,right:c,bottom:h}=r;i===void 0&&(i=10),o===void 0&&(o=w4);const{isTop:g,isBottom:w,isLeft:_,isRight:N}=k1(t),x={x:0,y:0},I={x:0,y:0},P={height:e.height*o.y,width:e.width*o.x};return!g&&s<=e.top+P.height?(x.y=Ci.Backward,I.y=i*Math.abs((e.top+P.height-s)/P.height)):!w&&h>=e.bottom-P.height&&(x.y=Ci.Forward,I.y=i*Math.abs((e.bottom-P.height-h)/P.height)),!N&&c>=e.right-P.width?(x.x=Ci.Forward,I.x=i*Math.abs((e.right-P.width-c)/P.width)):!_&&l<=e.left+P.width&&(x.x=Ci.Backward,I.x=i*Math.abs((e.left+P.width-l)/P.width)),{direction:x,speed:I}}function x4(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:l}=window;return{top:0,left:0,right:s,bottom:l,width:s,height:l}}const{top:e,left:r,right:i,bottom:o}=t.getBoundingClientRect();return{top:e,left:r,right:i,bottom:o,width:t.clientWidth,height:t.clientHeight}}function S1(t){return t.reduce((e,r)=>Zu(e,Dp(r)),uo)}function _4(t){return t.reduce((e,r)=>e+b1(r),0)}function k4(t){return t.reduce((e,r)=>e+x1(r),0)}function N1(t,e){if(e===void 0&&(e=id),!t)return;const{top:r,left:i,bottom:o,right:s}=e(t);w1(t)&&(o<=0||s<=0||r>=window.innerHeight||i>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const S4=[["x",["left","right"],_4],["y",["top","bottom"],k4]];class c0{constructor(e,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=u0(r),o=S1(i);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,l,c]of S4)for(const h of l)Object.defineProperty(this,h,{get:()=>{const g=c(i),w=o[s]-g;return this.rect[h]+w},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Tc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...r)})},this.target=e}add(e,r,i){var o;(o=this.target)==null||o.addEventListener(e,r,i),this.listeners.push([e,r,i])}}function N4(t){const{EventTarget:e}=Aa(t);return t instanceof e?t:ac(t)}function ip(t,e){const r=Math.abs(t.x),i=Math.abs(t.y);return typeof e=="number"?Math.sqrt(r**2+i**2)>e:"x"in e&&"y"in e?r>e.x&&i>e.y:"x"in e?r>e.x:"y"in e?i>e.y:!1}var Os;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Os||(Os={}));function Om(t){t.preventDefault()}function A4(t){t.stopPropagation()}var dn;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(dn||(dn={}));const A1={start:[dn.Space,dn.Enter],cancel:[dn.Esc],end:[dn.Space,dn.Enter,dn.Tab]},j4=(t,e)=>{let{currentCoordinates:r}=e;switch(t.code){case dn.Right:return{...r,x:r.x+25};case dn.Left:return{...r,x:r.x-25};case dn.Down:return{...r,y:r.y+25};case dn.Up:return{...r,y:r.y-25}}};class j1{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:r}}=e;this.props=e,this.listeners=new Tc(ac(r)),this.windowListeners=new Tc(Aa(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Os.Resize,this.handleCancel),this.windowListeners.add(Os.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Os.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:r}=this.props,i=e.node.current;i&&N1(i),r(uo)}handleKeyDown(e){if(l0(e)){const{active:r,context:i,options:o}=this.props,{keyboardCodes:s=A1,coordinateGetter:l=j4,scrollBehavior:c="smooth"}=o,{code:h}=e;if(s.end.includes(h)){this.handleEnd(e);return}if(s.cancel.includes(h)){this.handleCancel(e);return}const{collisionRect:g}=i.current,w=g?{x:g.left,y:g.top}:uo;this.referenceCoordinates||(this.referenceCoordinates=w);const _=l(e,{active:r,context:i.current,currentCoordinates:w});if(_){const N=_h(_,w),x={x:0,y:0},{scrollableAncestors:I}=i.current;for(const P of I){const R=e.code,{isTop:L,isRight:M,isLeft:H,isBottom:oe,maxScroll:le,minScroll:be}=k1(P),ne=x4(P),G={x:Math.min(R===dn.Right?ne.right-ne.width/2:ne.right,Math.max(R===dn.Right?ne.left:ne.left+ne.width/2,_.x)),y:Math.min(R===dn.Down?ne.bottom-ne.height/2:ne.bottom,Math.max(R===dn.Down?ne.top:ne.top+ne.height/2,_.y))},fe=R===dn.Right&&!M||R===dn.Left&&!H,Te=R===dn.Down&&!oe||R===dn.Up&&!L;if(fe&&G.x!==_.x){const V=P.scrollLeft+N.x,Y=R===dn.Right&&V<=le.x||R===dn.Left&&V>=be.x;if(Y&&!N.y){P.scrollTo({left:V,behavior:c});return}Y?x.x=P.scrollLeft-V:x.x=R===dn.Right?P.scrollLeft-le.x:P.scrollLeft-be.x,x.x&&P.scrollBy({left:-x.x,behavior:c});break}else if(Te&&G.y!==_.y){const V=P.scrollTop+N.y,Y=R===dn.Down&&V<=le.y||R===dn.Up&&V>=be.y;if(Y&&!N.x){P.scrollTo({top:V,behavior:c});return}Y?x.y=P.scrollTop-V:x.y=R===dn.Down?P.scrollTop-le.y:P.scrollTop-be.y,x.y&&P.scrollBy({top:-x.y,behavior:c});break}}this.handleMove(e,Zu(_h(_,this.referenceCoordinates),x))}}}handleMove(e,r){const{onMove:i}=this.props;e.preventDefault(),i(r)}handleEnd(e){const{onEnd:r}=this.props;e.preventDefault(),this.detach(),r()}handleCancel(e){const{onCancel:r}=this.props;e.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}j1.activators=[{eventName:"onKeyDown",handler:(t,e,r)=>{let{keyboardCodes:i=A1,onActivation:o}=e,{active:s}=r;const{code:l}=t.nativeEvent;if(i.start.includes(l)){const c=s.activatorNode.current;return c&&t.target!==c?!1:(t.preventDefault(),o?.({event:t.nativeEvent}),!0)}return!1}}];function Tm(t){return!!(t&&"distance"in t)}function Rm(t){return!!(t&&"delay"in t)}class d0{constructor(e,r,i){var o;i===void 0&&(i=N4(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=r;const{event:s}=e,{target:l}=s;this.props=e,this.events=r,this.document=ac(l),this.documentListeners=new Tc(this.document),this.listeners=new Tc(i),this.windowListeners=new Tc(Aa(l)),this.initialCoordinates=(o=kh(s))!=null?o:uo,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:r,bypassActivationConstraint:i}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Os.Resize,this.handleCancel),this.windowListeners.add(Os.DragStart,Om),this.windowListeners.add(Os.VisibilityChange,this.handleCancel),this.windowListeners.add(Os.ContextMenu,Om),this.documentListeners.add(Os.Keydown,this.handleKeydown),r){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Rm(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(Tm(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,r){const{active:i,onPending:o}=this.props;o(i,e,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:e}=this,{onStart:r}=this.props;e&&(this.activated=!0,this.documentListeners.add(Os.Click,A4,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Os.SelectionChange,this.removeTextSelection),r(e))}handleMove(e){var r;const{activated:i,initialCoordinates:o,props:s}=this,{onMove:l,options:{activationConstraint:c}}=s;if(!o)return;const h=(r=kh(e))!=null?r:uo,g=_h(o,h);if(!i&&c){if(Tm(c)){if(c.tolerance!=null&&ip(g,c.tolerance))return this.handleCancel();if(ip(g,c.distance))return this.handleStart()}if(Rm(c)&&ip(g,c.tolerance))return this.handleCancel();this.handlePending(c,g);return}e.cancelable&&e.preventDefault(),l(h)}handleEnd(){const{onAbort:e,onEnd:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleCancel(){const{onAbort:e,onCancel:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleKeydown(e){e.code===dn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const E4={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class h0 extends d0{constructor(e){const{event:r}=e,i=ac(r.target);super(e,E4,i)}}h0.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:i}=e;return!r.isPrimary||r.button!==0?!1:(i?.({event:r}),!0)}}];const C4={move:{name:"mousemove"},end:{name:"mouseup"}};var Fp;(function(t){t[t.RightClick=2]="RightClick"})(Fp||(Fp={}));class P4 extends d0{constructor(e){super(e,C4,ac(e.event.target))}}P4.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:i}=e;return r.button===Fp.RightClick?!1:(i?.({event:r}),!0)}}];const ap={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class L4 extends d0{constructor(e){super(e,ap)}static setup(){return window.addEventListener(ap.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(ap.move.name,e)};function e(){}}}L4.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:i}=e;const{touches:o}=r;return o.length>1?!1:(i?.({event:r}),!0)}}];var Rc;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Rc||(Rc={}));var Nh;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Nh||(Nh={}));function I4(t){let{acceleration:e,activator:r=Rc.Pointer,canScroll:i,draggingRect:o,enabled:s,interval:l=5,order:c=Nh.TreeOrder,pointerCoordinates:h,scrollableAncestors:g,scrollableAncestorRects:w,delta:_,threshold:N}=t;const x=T4({delta:_,disabled:!s}),[I,P]=W3(),R=J.useRef({x:0,y:0}),L=J.useRef({x:0,y:0}),M=J.useMemo(()=>{switch(r){case Rc.Pointer:return h?{top:h.y,bottom:h.y,left:h.x,right:h.x}:null;case Rc.DraggableRect:return o}},[r,o,h]),H=J.useRef(null),oe=J.useCallback(()=>{const be=H.current;if(!be)return;const ne=R.current.x*L.current.x,G=R.current.y*L.current.y;be.scrollBy(ne,G)},[]),le=J.useMemo(()=>c===Nh.TreeOrder?[...g].reverse():g,[c,g]);J.useEffect(()=>{if(!s||!g.length||!M){P();return}for(const be of le){if(i?.(be)===!1)continue;const ne=g.indexOf(be),G=w[ne];if(!G)continue;const{direction:fe,speed:Te}=b4(be,G,M,e,N);for(const V of["x","y"])x[V][fe[V]]||(Te[V]=0,fe[V]=0);if(Te.x>0||Te.y>0){P(),H.current=be,I(oe,l),R.current=Te,L.current=fe;return}}R.current={x:0,y:0},L.current={x:0,y:0},P()},[e,oe,i,P,s,l,JSON.stringify(M),JSON.stringify(x),I,g,le,w,JSON.stringify(N)])}const O4={x:{[Ci.Backward]:!1,[Ci.Forward]:!1},y:{[Ci.Backward]:!1,[Ci.Forward]:!1}};function T4(t){let{delta:e,disabled:r}=t;const i=xh(e);return nd(o=>{if(r||!i||!o)return O4;const s={x:Math.sign(e.x-i.x),y:Math.sign(e.y-i.y)};return{x:{[Ci.Backward]:o.x[Ci.Backward]||s.x===-1,[Ci.Forward]:o.x[Ci.Forward]||s.x===1},y:{[Ci.Backward]:o.y[Ci.Backward]||s.y===-1,[Ci.Forward]:o.y[Ci.Forward]||s.y===1}}},[r,e,i])}function R4(t,e){const r=e!=null?t.get(e):void 0,i=r?r.node.current:null;return nd(o=>{var s;return e==null?null:(s=i??o)!=null?s:null},[i,e])}function D4(t,e){return J.useMemo(()=>t.reduce((r,i)=>{const{sensor:o}=i,s=o.activators.map(l=>({eventName:l.eventName,handler:e(l.handler,i)}));return[...r,...s]},[]),[t,e])}var Yc;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Yc||(Yc={}));var Mp;(function(t){t.Optimized="optimized"})(Mp||(Mp={}));const Dm=new Map;function F4(t,e){let{dragging:r,dependencies:i,config:o}=e;const[s,l]=J.useState(null),{frequency:c,measure:h,strategy:g}=o,w=J.useRef(t),_=R(),N=Gc(_),x=J.useCallback(function(L){L===void 0&&(L=[]),!N.current&&l(M=>M===null?L:M.concat(L.filter(H=>!M.includes(H))))},[N]),I=J.useRef(null),P=nd(L=>{if(_&&!r)return Dm;if(!L||L===Dm||w.current!==t||s!=null){const M=new Map;for(let H of t){if(!H)continue;if(s&&s.length>0&&!s.includes(H.id)&&H.rect.current){M.set(H.id,H.rect.current);continue}const oe=H.node.current,le=oe?new c0(h(oe),oe):null;H.rect.current=le,le&&M.set(H.id,le)}return M}return L},[t,s,r,_,h]);return J.useEffect(()=>{w.current=t},[t]),J.useEffect(()=>{_||x()},[r,_]),J.useEffect(()=>{s&&s.length>0&&l(null)},[JSON.stringify(s)]),J.useEffect(()=>{_||typeof c!="number"||I.current!==null||(I.current=setTimeout(()=>{x(),I.current=null},c))},[c,_,x,...i]),{droppableRects:P,measureDroppableContainers:x,measuringScheduled:s!=null};function R(){switch(g){case Yc.Always:return!1;case Yc.BeforeDragging:return r;default:return!r}}}function f0(t,e){return nd(r=>t?r||(typeof e=="function"?e(t):t):null,[e,t])}function M4(t,e){return f0(t,e)}function B4(t){let{callback:e,disabled:r}=t;const i=Bh(e),o=J.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(i)},[i,r]);return J.useEffect(()=>()=>o?.disconnect(),[o]),o}function Uh(t){let{callback:e,disabled:r}=t;const i=Bh(e),o=J.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(i)},[r]);return J.useEffect(()=>()=>o?.disconnect(),[o]),o}function q4(t){return new c0(id(t),t)}function Fm(t,e,r){e===void 0&&(e=q4);const[i,o]=J.useState(null);function s(){o(h=>{if(!t)return null;if(t.isConnected===!1){var g;return(g=h??r)!=null?g:null}const w=e(t);return JSON.stringify(h)===JSON.stringify(w)?h:w})}const l=B4({callback(h){if(t)for(const g of h){const{type:w,target:_}=g;if(w==="childList"&&_ instanceof HTMLElement&&_.contains(t)){s();break}}}}),c=Uh({callback:s});return il(()=>{s(),t?(c?.observe(t),l?.observe(document.body,{childList:!0,subtree:!0})):(c?.disconnect(),l?.disconnect())},[t]),i}function U4(t){const e=f0(t);return v1(t,e)}const Mm=[];function z4(t){const e=J.useRef(t),r=nd(i=>t?i&&i!==Mm&&t&&e.current&&t.parentNode===e.current.parentNode?i:u0(t):Mm,[t]);return J.useEffect(()=>{e.current=t},[t]),r}function $4(t){const[e,r]=J.useState(null),i=J.useRef(t),o=J.useCallback(s=>{const l=np(s.target);l&&r(c=>c?(c.set(l,Dp(l)),new Map(c)):null)},[]);return J.useEffect(()=>{const s=i.current;if(t!==s){l(s);const c=t.map(h=>{const g=np(h);return g?(g.addEventListener("scroll",o,{passive:!0}),[g,Dp(g)]):null}).filter(h=>h!=null);r(c.length?new Map(c):null),i.current=t}return()=>{l(t),l(s)};function l(c){c.forEach(h=>{const g=np(h);g?.removeEventListener("scroll",o)})}},[o,t]),J.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,l)=>Zu(s,l),uo):S1(t):uo,[t,e])}function Bm(t,e){e===void 0&&(e=[]);const r=J.useRef(null);return J.useEffect(()=>{r.current=null},e),J.useEffect(()=>{const i=t!==uo;i&&!r.current&&(r.current=t),!i&&r.current&&(r.current=null)},[t]),r.current?_h(t,r.current):uo}function V4(t){J.useEffect(()=>{if(!Mh)return;const e=t.map(r=>{let{sensor:i}=r;return i.setup==null?void 0:i.setup()});return()=>{for(const r of e)r?.()}},t.map(e=>{let{sensor:r}=e;return r}))}function W4(t,e){return J.useMemo(()=>t.reduce((r,i)=>{let{eventName:o,handler:s}=i;return r[o]=l=>{s(l,e)},r},{}),[t,e])}function E1(t){return J.useMemo(()=>t?m4(t):null,[t])}const qm=[];function H4(t,e){e===void 0&&(e=id);const[r]=t,i=E1(r?Aa(r):null),[o,s]=J.useState(qm);function l(){s(()=>t.length?t.map(h=>_1(h)?i:new c0(e(h),h)):qm)}const c=Uh({callback:l});return il(()=>{c?.disconnect(),l(),t.forEach(h=>c?.observe(h))},[t]),o}function C1(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return rd(e)?e:t}function K4(t){let{measure:e}=t;const[r,i]=J.useState(null),o=J.useCallback(g=>{for(const{target:w}of g)if(rd(w)){i(_=>{const N=e(w);return _?{..._,width:N.width,height:N.height}:N});break}},[e]),s=Uh({callback:o}),l=J.useCallback(g=>{const w=C1(g);s?.disconnect(),w&&s?.observe(w),i(w?e(w):null)},[e,s]),[c,h]=bh(l);return J.useMemo(()=>({nodeRef:c,rect:r,setRef:h}),[r,c,h])}const G4=[{sensor:h0,options:{}},{sensor:j1,options:{}}],J4={current:{}},sh={draggable:{measure:Im},droppable:{measure:Im,strategy:Yc.WhileDragging,frequency:Mp.Optimized},dragOverlay:{measure:id}};class Dc extends Map{get(e){var r;return e!=null&&(r=super.get(e))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:r}=e;return!r})}getNodeFor(e){var r,i;return(r=(i=this.get(e))==null?void 0:i.node.current)!=null?r:void 0}}const Y4={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Dc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Sh},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:sh,measureDroppableContainers:Sh,windowRect:null,measuringScheduled:!1},P1={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Sh,draggableNodes:new Map,over:null,measureDroppableContainers:Sh},ad=J.createContext(P1),L1=J.createContext(Y4);function X4(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Dc}}}function Q4(t,e){switch(e.type){case fi.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case fi.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case fi.DragEnd:case fi.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case fi.RegisterDroppable:{const{element:r}=e,{id:i}=r,o=new Dc(t.droppable.containers);return o.set(i,r),{...t,droppable:{...t.droppable,containers:o}}}case fi.SetDroppableDisabled:{const{id:r,key:i,disabled:o}=e,s=t.droppable.containers.get(r);if(!s||i!==s.key)return t;const l=new Dc(t.droppable.containers);return l.set(r,{...s,disabled:o}),{...t,droppable:{...t.droppable,containers:l}}}case fi.UnregisterDroppable:{const{id:r,key:i}=e,o=t.droppable.containers.get(r);if(!o||i!==o.key)return t;const s=new Dc(t.droppable.containers);return s.delete(r),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function Z4(t){let{disabled:e}=t;const{active:r,activatorEvent:i,draggableNodes:o}=J.useContext(ad),s=xh(i),l=xh(r?.id);return J.useEffect(()=>{if(!e&&!i&&s&&l!=null){if(!l0(s)||document.activeElement===s.target)return;const c=o.get(l);if(!c)return;const{activatorNode:h,node:g}=c;if(!h.current&&!g.current)return;requestAnimationFrame(()=>{for(const w of[h.current,g.current]){if(!w)continue;const _=G3(w);if(_){_.focus();break}}})}},[i,e,o,l,s]),null}function I1(t,e){let{transform:r,...i}=e;return t!=null&&t.length?t.reduce((o,s)=>s({transform:o,...i}),r):r}function e_(t){return J.useMemo(()=>({draggable:{...sh.draggable,...t?.draggable},droppable:{...sh.droppable,...t?.droppable},dragOverlay:{...sh.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function t_(t){let{activeNode:e,measure:r,initialRect:i,config:o=!0}=t;const s=J.useRef(!1),{x:l,y:c}=typeof o=="boolean"?{x:o,y:o}:o;il(()=>{if(!l&&!c||!e){s.current=!1;return}if(s.current||!i)return;const g=e?.node.current;if(!g||g.isConnected===!1)return;const w=r(g),_=v1(w,i);if(l||(_.x=0),c||(_.y=0),s.current=!0,Math.abs(_.x)>0||Math.abs(_.y)>0){const N=w1(g);N&&N.scrollBy({top:_.y,left:_.x})}},[e,l,c,i,r])}const zh=J.createContext({...uo,scaleX:1,scaleY:1});var Ll;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Ll||(Ll={}));const r_=J.memo(function(e){var r,i,o,s;let{id:l,accessibility:c,autoScroll:h=!0,children:g,sensors:w=G4,collisionDetection:_=c4,measuring:N,modifiers:x,...I}=e;const P=J.useReducer(Q4,void 0,X4),[R,L]=P,[M,H]=e4(),[oe,le]=J.useState(Ll.Uninitialized),be=oe===Ll.Initialized,{draggable:{active:ne,nodes:G,translate:fe},droppable:{containers:Te}}=R,V=ne!=null?G.get(ne):null,Y=J.useRef({initial:null,translated:null}),pe=J.useMemo(()=>{var Er;return ne!=null?{id:ne,data:(Er=V?.data)!=null?Er:J4,rect:Y}:null},[ne,V]),te=J.useRef(null),[Ue,Me]=J.useState(null),[ze,de]=J.useState(null),je=Gc(I,Object.values(I)),_e=qh("DndDescribedBy",l),ae=J.useMemo(()=>Te.getEnabled(),[Te]),O=e_(N),{droppableRects:$,measureDroppableContainers:X,measuringScheduled:ie}=F4(ae,{dragging:be,dependencies:[fe.x,fe.y],config:O.droppable}),he=R4(G,ne),ye=J.useMemo(()=>ze?kh(ze):null,[ze]),Ie=Nn(),ge=M4(he,O.draggable.measure);t_({activeNode:ne!=null?G.get(ne):null,config:Ie.layoutShiftCompensation,initialRect:ge,measure:O.draggable.measure});const rt=Fm(he,O.draggable.measure,ge),at=Fm(he?he.parentElement:null),it=J.useRef({activatorEvent:null,active:null,activeNode:he,collisionRect:null,collisions:null,droppableRects:$,draggableNodes:G,draggingNode:null,draggingNodeRect:null,droppableContainers:Te,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),bt=Te.getNodeFor((r=it.current.over)==null?void 0:r.id),qt=K4({measure:O.dragOverlay.measure}),Je=(i=qt.nodeRef.current)!=null?i:he,se=be?(o=qt.rect)!=null?o:rt:null,Xt=!!(qt.nodeRef.current&&qt.rect),Tt=U4(Xt?null:rt),ot=E1(Je?Aa(Je):null),pt=z4(be?bt??he:null),vt=H4(pt),St=I1(x,{transform:{x:fe.x-Tt.x,y:fe.y-Tt.y,scaleX:1,scaleY:1},activatorEvent:ze,active:pe,activeNodeRect:rt,containerNodeRect:at,draggingNodeRect:se,over:it.current.over,overlayNodeRect:qt.rect,scrollableAncestors:pt,scrollableAncestorRects:vt,windowRect:ot}),Rt=ye?Zu(ye,fe):null,Yt=$4(pt),Qt=Bm(Yt),nr=Bm(Yt,[rt]),Zt=Zu(St,Qt),yr=se?f4(se,St):null,zt=pe&&yr?_({active:pe,collisionRect:yr,droppableRects:$,droppableContainers:ae,pointerCoordinates:Rt}):null,ar=l4(zt,"id"),[wt,Xr]=J.useState(null),kr=Xt?St:Zu(St,nr),Zn=d4(kr,(s=wt?.rect)!=null?s:null,rt),Sr=J.useRef(null),xt=J.useCallback((Er,br)=>{let{sensor:Ft,options:pr}=br;if(te.current==null)return;const wn=G.get(te.current);if(!wn)return;const Cr=Er.nativeEvent,qr=new Ft({active:te.current,activeNode:wn,event:Cr,options:pr,context:it,onAbort(Ct){if(!G.get(Ct))return;const{onDragAbort:er}=je.current,vr={id:Ct};er?.(vr),M({type:"onDragAbort",event:vr})},onPending(Ct,Qr,er,vr){if(!G.get(Ct))return;const{onDragPending:Pr}=je.current,Ur={id:Ct,constraint:Qr,initialCoordinates:er,offset:vr};Pr?.(Ur),M({type:"onDragPending",event:Ur})},onStart(Ct){const Qr=te.current;if(Qr==null)return;const er=G.get(Qr);if(!er)return;const{onDragStart:vr}=je.current,Mr={activatorEvent:Cr,active:{id:Qr,data:er.data,rect:Y}};Cc.unstable_batchedUpdates(()=>{vr?.(Mr),le(Ll.Initializing),L({type:fi.DragStart,initialCoordinates:Ct,active:Qr}),M({type:"onDragStart",event:Mr}),Me(Sr.current),de(Cr)})},onMove(Ct){L({type:fi.DragMove,coordinates:Ct})},onEnd:an(fi.DragEnd),onCancel:an(fi.DragCancel)});Sr.current=qr;function an(Ct){return async function(){const{active:er,collisions:vr,over:Mr,scrollAdjustedTranslate:Pr}=it.current;let Ur=null;if(er&&Pr){const{cancelDrop:qn}=je.current;Ur={activatorEvent:Cr,active:er,collisions:vr,delta:Pr,over:Mr},Ct===fi.DragEnd&&typeof qn=="function"&&await Promise.resolve(qn(Ur))&&(Ct=fi.DragCancel)}te.current=null,Cc.unstable_batchedUpdates(()=>{L({type:Ct}),le(Ll.Uninitialized),Xr(null),Me(null),de(null),Sr.current=null;const qn=Ct===fi.DragEnd?"onDragEnd":"onDragCancel";if(Ur){const Pi=je.current[qn];Pi?.(Ur),M({type:qn,event:Ur})}})}}},[G]),On=J.useCallback((Er,br)=>(Ft,pr)=>{const wn=Ft.nativeEvent,Cr=G.get(pr);if(te.current!==null||!Cr||wn.dndKit||wn.defaultPrevented)return;const qr={active:Cr};Er(Ft,br.options,qr)===!0&&(wn.dndKit={capturedBy:br.sensor},te.current=pr,xt(Ft,br))},[G,xt]),mr=D4(w,On);V4(w),il(()=>{rt&&oe===Ll.Initializing&&le(Ll.Initialized)},[rt,oe]),J.useEffect(()=>{const{onDragMove:Er}=je.current,{active:br,activatorEvent:Ft,collisions:pr,over:wn}=it.current;if(!br||!Ft)return;const Cr={active:br,activatorEvent:Ft,collisions:pr,delta:{x:Zt.x,y:Zt.y},over:wn};Cc.unstable_batchedUpdates(()=>{Er?.(Cr),M({type:"onDragMove",event:Cr})})},[Zt.x,Zt.y]),J.useEffect(()=>{const{active:Er,activatorEvent:br,collisions:Ft,droppableContainers:pr,scrollAdjustedTranslate:wn}=it.current;if(!Er||te.current==null||!br||!wn)return;const{onDragOver:Cr}=je.current,qr=pr.get(ar),an=qr&&qr.rect.current?{id:qr.id,rect:qr.rect.current,data:qr.data,disabled:qr.disabled}:null,Ct={active:Er,activatorEvent:br,collisions:Ft,delta:{x:wn.x,y:wn.y},over:an};Cc.unstable_batchedUpdates(()=>{Xr(an),Cr?.(Ct),M({type:"onDragOver",event:Ct})})},[ar]),il(()=>{it.current={activatorEvent:ze,active:pe,activeNode:he,collisionRect:yr,collisions:zt,droppableRects:$,draggableNodes:G,draggingNode:Je,draggingNodeRect:se,droppableContainers:Te,over:wt,scrollableAncestors:pt,scrollAdjustedTranslate:Zt},Y.current={initial:se,translated:yr}},[pe,he,zt,yr,G,Je,se,$,Te,wt,pt,Zt]),I4({...Ie,delta:fe,draggingRect:yr,pointerCoordinates:Rt,scrollableAncestors:pt,scrollableAncestorRects:vt});const gi=J.useMemo(()=>({active:pe,activeNode:he,activeNodeRect:rt,activatorEvent:ze,collisions:zt,containerNodeRect:at,dragOverlay:qt,draggableNodes:G,droppableContainers:Te,droppableRects:$,over:wt,measureDroppableContainers:X,scrollableAncestors:pt,scrollableAncestorRects:vt,measuringConfiguration:O,measuringScheduled:ie,windowRect:ot}),[pe,he,rt,ze,zt,at,qt,G,Te,$,wt,X,pt,vt,O,ie,ot]),dt=J.useMemo(()=>({activatorEvent:ze,activators:mr,active:pe,activeNodeRect:rt,ariaDescribedById:{draggable:_e},dispatch:L,draggableNodes:G,over:wt,measureDroppableContainers:X}),[ze,mr,pe,rt,L,_e,G,wt,X]);return In.createElement(m1.Provider,{value:H},In.createElement(ad.Provider,{value:dt},In.createElement(L1.Provider,{value:gi},In.createElement(zh.Provider,{value:Zn},g)),In.createElement(Z4,{disabled:c?.restoreFocus===!1})),In.createElement(n4,{...c,hiddenTextDescribedById:_e}));function Nn(){const Er=Ue?.autoScrollEnabled===!1,br=typeof h=="object"?h.enabled===!1:h===!1,Ft=be&&!Er&&!br;return typeof h=="object"?{...h,enabled:Ft}:{enabled:Ft}}}),n_=J.createContext(null),Um="button",i_="Draggable";function a_(t){let{id:e,data:r,disabled:i=!1,attributes:o}=t;const s=qh(i_),{activators:l,activatorEvent:c,active:h,activeNodeRect:g,ariaDescribedById:w,draggableNodes:_,over:N}=J.useContext(ad),{role:x=Um,roleDescription:I="draggable",tabIndex:P=0}=o??{},R=h?.id===e,L=J.useContext(R?zh:n_),[M,H]=bh(),[oe,le]=bh(),be=W4(l,e),ne=Gc(r);il(()=>(_.set(e,{id:e,key:s,node:M,activatorNode:oe,data:ne}),()=>{const fe=_.get(e);fe&&fe.key===s&&_.delete(e)}),[_,e]);const G=J.useMemo(()=>({role:x,tabIndex:P,"aria-disabled":i,"aria-pressed":R&&x===Um?!0:void 0,"aria-roledescription":I,"aria-describedby":w.draggable}),[i,x,P,R,I,w.draggable]);return{active:h,activatorEvent:c,activeNodeRect:g,attributes:G,isDragging:R,listeners:i?void 0:be,node:M,over:N,setNodeRef:H,setActivatorNodeRef:le,transform:L}}function s_(){return J.useContext(L1)}const o_="Droppable",l_={timeout:25};function O1(t){let{data:e,disabled:r=!1,id:i,resizeObserverConfig:o}=t;const s=qh(o_),{active:l,dispatch:c,over:h,measureDroppableContainers:g}=J.useContext(ad),w=J.useRef({disabled:r}),_=J.useRef(!1),N=J.useRef(null),x=J.useRef(null),{disabled:I,updateMeasurementsFor:P,timeout:R}={...l_,...o},L=Gc(P??i),M=J.useCallback(()=>{if(!_.current){_.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{g(Array.isArray(L.current)?L.current:[L.current]),x.current=null},R)},[R]),H=Uh({callback:M,disabled:I||!l}),oe=J.useCallback((G,fe)=>{H&&(fe&&(H.unobserve(fe),_.current=!1),G&&H.observe(G))},[H]),[le,be]=bh(oe),ne=Gc(e);return J.useEffect(()=>{!H||!le.current||(H.disconnect(),_.current=!1,H.observe(le.current))},[le,H]),J.useEffect(()=>(c({type:fi.RegisterDroppable,element:{id:i,key:s,disabled:r,node:le,rect:N,data:ne}}),()=>c({type:fi.UnregisterDroppable,key:s,id:i})),[i]),J.useEffect(()=>{r!==w.current.disabled&&(c({type:fi.SetDroppableDisabled,id:i,key:s,disabled:r}),w.current.disabled=r)},[i,s,r,c]),{active:l,rect:N,isOver:h?.id===i,node:le,over:h,setNodeRef:be}}function u_(t){let{animation:e,children:r}=t;const[i,o]=J.useState(null),[s,l]=J.useState(null),c=xh(r);return!r&&!i&&c&&o(c),il(()=>{if(!s)return;const h=i?.key,g=i?.props.id;if(h==null||g==null){o(null);return}Promise.resolve(e(g,s)).then(()=>{o(null)})},[e,i,s]),In.createElement(In.Fragment,null,r,i?J.cloneElement(i,{ref:l}):null)}const c_={x:0,y:0,scaleX:1,scaleY:1};function d_(t){let{children:e}=t;return In.createElement(ad.Provider,{value:P1},In.createElement(zh.Provider,{value:c_},e))}const h_={position:"fixed",touchAction:"none"},f_=t=>l0(t)?"transform 250ms ease":void 0,p_=J.forwardRef((t,e)=>{let{as:r,activatorEvent:i,adjustScale:o,children:s,className:l,rect:c,style:h,transform:g,transition:w=f_}=t;if(!c)return null;const _=o?g:{...g,scaleX:1,scaleY:1},N={...h_,width:c.width,height:c.height,top:c.top,left:c.left,transform:Jc.Transform.toString(_),transformOrigin:o&&i?s4(i,c):void 0,transition:typeof w=="function"?w(i):w,...h};return In.createElement(r,{className:l,style:N,ref:e},s)}),g_=t=>e=>{let{active:r,dragOverlay:i}=e;const o={},{styles:s,className:l}=t;if(s!=null&&s.active)for(const[c,h]of Object.entries(s.active))h!==void 0&&(o[c]=r.node.style.getPropertyValue(c),r.node.style.setProperty(c,h));if(s!=null&&s.dragOverlay)for(const[c,h]of Object.entries(s.dragOverlay))h!==void 0&&i.node.style.setProperty(c,h);return l!=null&&l.active&&r.node.classList.add(l.active),l!=null&&l.dragOverlay&&i.node.classList.add(l.dragOverlay),function(){for(const[h,g]of Object.entries(o))r.node.style.setProperty(h,g);l!=null&&l.active&&r.node.classList.remove(l.active)}},m_=t=>{let{transform:{initial:e,final:r}}=t;return[{transform:Jc.Transform.toString(e)},{transform:Jc.Transform.toString(r)}]},v_={duration:250,easing:"ease",keyframes:m_,sideEffects:g_({styles:{active:{opacity:"0"}}})};function y_(t){let{config:e,draggableNodes:r,droppableContainers:i,measuringConfiguration:o}=t;return Bh((s,l)=>{if(e===null)return;const c=r.get(s);if(!c)return;const h=c.node.current;if(!h)return;const g=C1(l);if(!g)return;const{transform:w}=Aa(l).getComputedStyle(l),_=y1(w);if(!_)return;const N=typeof e=="function"?e:w_(e);return N1(h,o.draggable.measure),N({active:{id:s,data:c.data,node:h,rect:o.draggable.measure(h)},draggableNodes:r,dragOverlay:{node:l,rect:o.dragOverlay.measure(g)},droppableContainers:i,measuringConfiguration:o,transform:_})})}function w_(t){const{duration:e,easing:r,sideEffects:i,keyframes:o}={...v_,...t};return s=>{let{active:l,dragOverlay:c,transform:h,...g}=s;if(!e)return;const w={x:c.rect.left-l.rect.left,y:c.rect.top-l.rect.top},_={scaleX:h.scaleX!==1?l.rect.width*h.scaleX/c.rect.width:1,scaleY:h.scaleY!==1?l.rect.height*h.scaleY/c.rect.height:1},N={x:h.x-w.x,y:h.y-w.y,..._},x=o({...g,active:l,dragOverlay:c,transform:{initial:h,final:N}}),[I]=x,P=x[x.length-1];if(JSON.stringify(I)===JSON.stringify(P))return;const R=i?.({active:l,dragOverlay:c,...g}),L=c.node.animate(x,{duration:e,easing:r,fill:"forwards"});return new Promise(M=>{L.onfinish=()=>{R?.(),M()}})}}let zm=0;function b_(t){return J.useMemo(()=>{if(t!=null)return zm++,zm},[t])}const x_=In.memo(t=>{let{adjustScale:e=!1,children:r,dropAnimation:i,style:o,transition:s,modifiers:l,wrapperElement:c="div",className:h,zIndex:g=999}=t;const{activatorEvent:w,active:_,activeNodeRect:N,containerNodeRect:x,draggableNodes:I,droppableContainers:P,dragOverlay:R,over:L,measuringConfiguration:M,scrollableAncestors:H,scrollableAncestorRects:oe,windowRect:le}=s_(),be=J.useContext(zh),ne=b_(_?.id),G=I1(l,{activatorEvent:w,active:_,activeNodeRect:N,containerNodeRect:x,draggingNodeRect:R.rect,over:L,overlayNodeRect:R.rect,scrollableAncestors:H,scrollableAncestorRects:oe,transform:be,windowRect:le}),fe=f0(N),Te=y_({config:i,draggableNodes:I,droppableContainers:P,measuringConfiguration:M}),V=fe?R.setRef:void 0;return In.createElement(d_,null,In.createElement(u_,{animation:Te},_&&ne?In.createElement(p_,{key:ne,id:_.id,ref:V,as:c,activatorEvent:w,adjustScale:e,className:h,transition:s,rect:fe,style:{zIndex:g,...o},transform:G},r):null))}),Bp=({client:t})=>{const{attributes:e,listeners:r,setNodeRef:i,transform:o,isDragging:s}=a_({id:`client-${t.id}`,data:{type:"client",client:t}}),l=o?{transform:`translate3d(${o.x}px, ${o.y}px, 0)`,zIndex:s?1e3:void 0}:void 0;return y.jsxs("div",{ref:i,style:l,...r,...e,className:`
        p-3 rounded-lg border shadow-sm flex items-center gap-3 cursor-grab active:cursor-grabbing
        transition-colors duration-200 touch-none mb-2
        ${s?"bg-blue-50 border-blue-300 shadow-lg opacity-80":"bg-white hover:bg-gray-50 border-gray-200"}
      `,children:[y.jsx("div",{className:"text-gray-400",children:y.jsx(cv,{size:16})}),y.jsxs("div",{className:"flex-1",children:[y.jsx("div",{className:"font-medium text-sm text-gray-900",children:t.name}),y.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[y.jsx(cu,{size:12}),t.passportNumber||"No Passport Info"]})]}),y.jsx("div",{className:`
        text-xs font-semibold px-2 py-1 rounded
        ${t.gender==="Male"?"bg-blue-100 text-blue-700":"bg-pink-100 text-pink-700"}
      `,children:t.gender==="Male"?"M":"F"})]})},__=({room:t,clients:e,onDelete:r})=>{const{isOver:i,setNodeRef:o}=O1({id:`room-${t.id}`,data:{type:"room",room:t}}),s=()=>{switch(t.capacity){case 2:return y.jsx(H2,{size:20,className:"text-gray-600"});default:return y.jsx(ov,{size:20,className:"text-gray-600"})}},l=()=>Math.round(e.length/t.capacity*100);return y.jsxs("div",{ref:o,className:`
        relative rounded-xl border-2 transition-all duration-200
        ${i?"border-primary-500 bg-primary-50 ring-2 ring-primary-200":"border-gray-200 bg-white hover:border-gray-300"}
        ${e.length>=t.capacity?"border-red-200 bg-red-50":""}
      `,children:[y.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-start justify-between",children:[y.jsxs("div",{children:[y.jsxs("h3",{className:"font-semibold text-lg text-gray-900 flex items-center gap-2",children:[s(),"Room ",t.roomNumber]}),y.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[t.type,"  Floor ",t.floorNumber]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("div",{className:`
              px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1
              ${e.length>=t.capacity?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}
            `,children:[y.jsx(pv,{size:14}),e.length,"/",t.capacity]}),r&&y.jsx("button",{onClick:c=>{c.stopPropagation(),window.confirm("      ")&&r(t.id)},className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:" ",children:y.jsx(hh,{size:16})})]})]}),y.jsx("div",{className:"h-1 bg-gray-100 w-full overflow-hidden",children:y.jsx("div",{className:`h-full transition-all duration-500 ${e.length>=t.capacity?"bg-red-500":"bg-green-500"}`,style:{width:`${l()}%`}})}),y.jsx("div",{className:"p-4 min-h-[120px] space-y-2",children:e.length===0?y.jsx("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 text-sm py-4 border-2 border-dashed border-gray-100 rounded-lg",children:y.jsx("span",{children:"Drop clients here"})}):e.map(c=>y.jsx(Bp,{client:c},c.id))})]})},k_=({onSave:t,onCancel:e})=>{const[r,i]=J.useState({hotelName:"",city:"Makkah",type:"Double",capacity:2,floorNumber:0,roomNumber:""}),o=l=>{if(l.preventDefault(),!r.hotelName||!r.roomNumber){alert("Please fill in required fields");return}t(r)},s=l=>{let c=2;l==="Triple"&&(c=3),l==="Quad"&&(c=4),l==="Quint"&&(c=5),i({...r,type:l,capacity:c})};return y.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-[100]",children:y.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full overflow-hidden border border-gray-100 dark:border-gray-700 animate-in fade-in zoom-in duration-200",children:[y.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-gray-50/50",children:[y.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[y.jsx(Ig,{className:"text-blue-600"}),"  "]}),y.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:y.jsx(Xp,{size:24})})]}),y.jsxs("form",{onSubmit:o,className:"p-6 space-y-5",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:" "}),y.jsxs("div",{className:"relative",children:[y.jsx(Ig,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),y.jsx("input",{required:!0,type:"text",className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-blue-500 outline-none bg-white dark:bg-gray-900 text-gray-900 dark:text-white",placeholder:":   ",value:r.hotelName,onChange:l=>i({...r,hotelName:l.target.value})})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),y.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-900 p-1 rounded-xl",children:[y.jsx("button",{type:"button",onClick:()=>i({...r,city:"Makkah"}),className:`flex-1 py-2 rounded-lg text-sm font-bold transition-all ${r.city==="Makkah"?"bg-white dark:bg-gray-800 shadow-sm text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:" "}),y.jsx("button",{type:"button",onClick:()=>i({...r,city:"Madinah"}),className:`flex-1 py-2 rounded-lg text-sm font-bold transition-all ${r.city==="Madinah"?"bg-white dark:bg-gray-800 shadow-sm text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:" "})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:" "}),y.jsxs("div",{className:"relative",children:[y.jsx(Y2,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),y.jsx("input",{required:!0,type:"text",className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-blue-500 outline-none bg-white dark:bg-gray-900 text-gray-900 dark:text-white",placeholder:" ",value:r.roomNumber,onChange:l=>i({...r,roomNumber:l.target.value})})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),y.jsxs("div",{className:"relative",children:[y.jsx(X2,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),y.jsx("input",{type:"number",className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-blue-500 outline-none bg-white dark:bg-gray-900 text-gray-900 dark:text-white",placeholder:"",value:r.floorNumber,onChange:l=>i({...r,floorNumber:parseInt(l.target.value)||0})})]})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:" "}),y.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Double","Triple","Quad","Quint"].map(l=>y.jsx("button",{type:"button",onClick:()=>s(l),className:`px-3 py-2 rounded-lg border text-sm font-medium transition-all ${r.type===l?"bg-blue-600 text-white border-blue-600":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-gray-200 dark:border-gray-700 hover:border-blue-400"}`,children:l},l))})]}),y.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-2 text-blue-700 dark:text-blue-400 font-medium",children:[y.jsx(pv,{size:20})," "]}),y.jsx("span",{className:"text-2xl font-bold text-blue-800 dark:text-blue-300",children:r.capacity})]}),y.jsxs("div",{className:"pt-4 flex gap-3",children:[y.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-700 dark:text-gray-300 font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:""}),y.jsxs("button",{type:"submit",className:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-xl font-bold shadow-lg shadow-blue-200 dark:shadow-none hover:bg-blue-700 transition-all flex items-center justify-center gap-2",children:[y.jsx(Jp,{size:20})," "]})]})]})]})})},S_=({children:t})=>{const{isOver:e,setNodeRef:r}=O1({id:"unassign-zone",data:{type:"unassign"}});return y.jsx("div",{ref:r,className:`flex-1 overflow-y-auto services-scrollbar transition-colors ${e?"bg-red-50 ring-2 ring-red-200 ring-inset":""}`,children:t})},N_=()=>{const[t,e]=J.useState([]),[r,i]=J.useState([]),[o,s]=J.useState(!0),[l,c]=J.useState(!1),[h,g]=J.useState(""),[w,_]=J.useState(null),[N,x]=J.useState(!1),[I,P]=J.useState("Makkah");J.useEffect(()=>{R()},[]);const R=async()=>{try{const[G,fe,Te]=await Promise.all([Na.getRooms(),Na.getClients(),Na.getInvoices()]),V={};[...Te].sort((te,Ue)=>new Date(Ue.createdAt).getTime()-new Date(te.createdAt).getTime()).forEach(te=>{te.client?.id&&!V[te.client.id]&&(te.passportNumber||te.gender)&&(V[te.client.id]={passportNumber:te.passportNumber,gender:te.gender})});const pe=fe.map(te=>{const Ue=te.id?V[te.id]:null;return{...te,passportNumber:te.passportNumber||Ue?.passportNumber,gender:te.gender||Ue?.gender}});e(G),i(pe)}catch(G){console.error("Failed to load rooming list:",G)}finally{s(!1)}},L=async G=>{c(!0);try{await Na.createRoom(G),await R(),x(!1)}catch(fe){console.error("Failed to save room:",fe),alert("Failed to save room. Please try again.")}finally{c(!1)}},M=async G=>{try{await Na.deleteRoom(G),await R()}catch(fe){console.error("Failed to delete room:",fe),alert("   .      .")}},H=G=>{const{active:fe}=G,Te=r.find(V=>`client-${V.id}`===fe.id);Te&&_(Te)},oe=async G=>{const{active:fe,over:Te}=G;if(_(null),!Te)return;const V=fe.data.current.client.id;if(Te.id==="unassign-zone"){const te=t.map(Ue=>({...Ue,assignments:Ue.assignments?.filter(Me=>Me.clientId!==V)||[]}));e(te);try{await Na.removeClientFromRoom(V)}catch(Ue){console.error("Unassign failed:",Ue),R()}return}const Y=Te.data.current.room.id,pe=t.map(te=>{if(te.id===Y){const Ue=t.find(Me=>Me.assignments?.some(ze=>ze.clientId===V));return Ue&&(Ue.assignments=Ue.assignments?.filter(Me=>Me.clientId!==V)),{...te,assignments:[...te.assignments||[],{id:"temp-"+Date.now(),roomId:Y,clientId:V,assignedAt:new Date().toISOString()}]}}return te});e(pe);try{await Na.assignClientToRoom(Y,V)}catch(te){console.error("Drag failed:",te),R()}},le=a4(i4(h0,{activationConstraint:{distance:8}})),be=new Set(t.flatMap(G=>G.assignments?.map(fe=>fe.clientId)||[])),ne=r.filter(G=>!be.has(G.id)&&(G.name.toLowerCase().includes(h.toLowerCase())||G.passportNumber?.includes(h)));return o?y.jsx(f1,{}):y.jsx(r_,{sensors:le,onDragStart:H,onDragEnd:oe,children:y.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[y.jsxs("header",{className:"bg-white border-b px-6 py-4 flex items-center justify-between shadow-sm sticky top-0 z-20",children:[y.jsxs("div",{children:[y.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[y.jsx(dv,{className:"text-blue-600"}),"Unassigned Rooming List"]}),y.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:[ne.length," unassigned clients  ",t.length," rooms"]})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 text-gray-700 font-medium transition-colors",children:[y.jsx(dh,{size:18}),"Add Room"]}),y.jsxs("button",{className:"flex items-center gap-2 px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium shadow-sm transition-all active:scale-95",onClick:()=>window.print(),children:[y.jsx(Jp,{size:18}),"Export List"]})]})]}),y.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[y.jsxs("aside",{className:"w-80 bg-white border-r flex flex-col z-10 shadow-lg",children:[y.jsx("div",{className:"p-4 border-b bg-gray-50",children:y.jsxs("div",{className:"relative",children:[y.jsx(lp,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),y.jsx("input",{type:"text",placeholder:"Search clients...",className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all",value:h,onChange:G=>g(G.target.value)})]})}),y.jsx(S_,{children:y.jsxs("div",{className:"p-4 space-y-2",children:[y.jsxs("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3",children:["Unassigned (",ne.length,")"]}),ne.map(G=>y.jsx(Bp,{client:G},G.id))]})})]}),y.jsxs("main",{className:"flex-1 overflow-y-auto p-8",children:[y.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-800 p-1.5 rounded-2xl mb-8 w-fit mx-auto shadow-inner",children:[y.jsx("button",{onClick:()=>P("Makkah"),className:`flex items-center gap-2 px-8 py-3 rounded-xl font-bold transition-all duration-300 ${I==="Makkah"?"bg-white dark:bg-gray-700 shadow-xl text-blue-600 scale-105":"text-gray-500 hover:text-gray-700"}`,children:"  "}),y.jsx("button",{onClick:()=>P("Madinah"),className:`flex items-center gap-2 px-8 py-3 rounded-xl font-bold transition-all duration-300 ${I==="Madinah"?"bg-white dark:bg-gray-700 shadow-xl text-blue-600 scale-105":"text-gray-500 hover:text-gray-700"}`,children:"  "})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 pb-20",children:[t.filter(G=>G.city===I).map(G=>y.jsx(__,{room:G,clients:r.filter(fe=>G.assignments?.some(Te=>Te.clientId===fe.id)),onDelete:M},G.id)),y.jsxs("button",{onClick:()=>x(!0),className:"h-full min-h-[300px] border-2 border-dashed border-gray-300 rounded-xl flex flex-col items-center justify-center text-gray-400 hover:border-blue-400 hover:text-blue-500 hover:bg-blue-50 transition-all group",children:[y.jsx("div",{className:"p-4 rounded-full bg-gray-100 group-hover:bg-blue-100 mb-4 transition-colors",children:y.jsx(dh,{size:32})}),y.jsx("span",{className:"font-medium",children:"Add New Room"})]})]})]})]}),y.jsx(x_,{children:w?y.jsx("div",{className:"opacity-90 scale-105 rotate-2 transform cursor-grabbing",children:y.jsx(Bp,{client:w})}):null}),N&&y.jsx(k_,{onSave:L,onCancel:()=>x(!1)}),y.jsxs("div",{id:"printable-rooming-report",className:"hidden print:block p-8 bg-white",dir:"rtl",children:[y.jsx("style",{children:`
                        @media print {
                            body * { visibility: hidden; }
                            #printable-rooming-report, #printable-rooming-report * { visibility: visible; }
                            #printable-rooming-report { 
                                position: absolute; 
                                left: 0; 
                                top: 0; 
                                width: 100%;
                                display: block !important;
                            }
                            @page { size: A4; margin: 1cm; }
                            .no-print { display: none !important; }
                        }
                    `}),y.jsxs("div",{className:"flex justify-between items-center border-b-4 border-blue-600 pb-4 mb-8",children:[y.jsxs("div",{children:[y.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["   - ",I==="Makkah"?" ":" "]}),y.jsx("p",{className:"text-blue-600 font-medium mt-1",children:"Beausejour Voyage"})]}),y.jsx("div",{className:"text-left",dir:"ltr",children:y.jsxs("p",{className:"text-sm text-gray-500",children:[": ",new Date().toLocaleDateString("ar-MA")]})})]}),y.jsx("div",{className:"space-y-8",children:t.filter(G=>G.city===I).map(G=>{const fe=r.filter(Te=>G.assignments?.some(V=>V.clientId===Te.id));return y.jsxs("div",{className:"border-2 border-gray-200 rounded-xl overflow-hidden break-inside-avoid",children:[y.jsxs("div",{className:"bg-gray-100 px-4 py-3 flex justify-between items-center border-b-2 border-gray-200",children:[y.jsxs("h3",{className:"text-lg font-bold",children:[" : ",y.jsx("span",{className:"text-blue-700",children:G.roomNumber||"---"}),y.jsxs("span",{className:"mr-2 text-sm text-gray-500 font-normal",children:["(",G.type==="Double"?"":G.type==="Triple"?"":G.type==="Quad"?"":"",")"]})]}),y.jsxs("span",{className:"text-sm font-medium",children:[": ",G.hotelName||"---"]})]}),y.jsxs("table",{className:"w-full text-inner",children:[y.jsx("thead",{children:y.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[y.jsx("th",{className:"px-4 py-2 text-right text-sm text-gray-600",children:"  "}),y.jsx("th",{className:"px-4 py-2 text-right text-sm text-gray-600",children:" "}),y.jsx("th",{className:"px-4 py-2 text-right text-sm text-gray-600",children:""})]})}),y.jsx("tbody",{children:fe.length===0?y.jsx("tr",{children:y.jsx("td",{colSpan:3,className:"px-4 py-6 text-center text-gray-400 italic",children:"   "})}):fe.map(Te=>y.jsxs("tr",{className:"border-b border-gray-100",children:[y.jsx("td",{className:"px-4 py-3 font-semibold text-gray-900",children:Te.name}),y.jsx("td",{className:"px-4 py-3 text-gray-700",children:Te.passportNumber||"---"}),y.jsx("td",{className:"px-4 py-3 text-gray-700",children:Te.gender==="Male"?"":Te.gender==="Female"?"":"---"})]},Te.id))})]})]},G.id)})}),y.jsxs("div",{className:"mt-12 pt-4 border-t border-gray-200 text-center text-gray-400 text-xs",children:["      Beausejour Voyage  ",new Date().getFullYear()]})]})]})})},A_=()=>y.jsx(V3,{children:y.jsx(s5,{children:y.jsx(R3,{children:y.jsx(O2,{children:y.jsxs("div",{className:"relative",children:[y.jsx($3,{}),y.jsxs(c2,{children:[y.jsx(Ec,{path:"/",element:y.jsx(Cg,{to:"/portal",replace:!0})}),y.jsx(Ec,{path:"/portal",element:y.jsx(z3,{})}),y.jsx(Ec,{path:"/portal/rooming",element:y.jsx(N_,{})}),y.jsx(Ec,{path:"*",element:y.jsx(Cg,{to:"/portal",replace:!0})})]})]})})})})});function j_(){return y.jsx(A_,{})}by.createRoot(document.getElementById("root")).render(y.jsx(J.StrictMode,{children:y.jsx(j_,{})}));export{en as _,hy as c,$m as g};
